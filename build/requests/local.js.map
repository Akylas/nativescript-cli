{"version":3,"sources":["requests/local.js"],"names":[],"mappings":";;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;;;;;;;;;;;IAKa;;;AACX,WADW,YACX,CAAY,OAAZ,EAAqB;0BADV,cACU;;uEADV,yBAEH,UADa;;AAEnB,UAAK,IAAL,GAAY,gBAAU,cAAV,EAAZ,CAFmB;;GAArB;;eADW;;8BAMD;;;AACR,UAAM,UAAU,2BAPP,oDAOO,CAAgB,IAAhB,CAAqB;eAAM,OAAK,IAAL,CAAU,OAAV;OAAN,CAArB,CAAoD,IAApD,CAAyD,oBAAY;AACnF,YAAI,CAAC,QAAD,EAAW;AACb,gBAAM,6BAAN,CADa;SAAf;;AAIA,YAAI,EAAE,uCAAF,EAAiC;AACnC,iBAAO,uBAAa;AAClB,wBAAY,SAAS,UAAT;AACZ,qBAAS,SAAS,OAAT;AACT,kBAAM,SAAS,IAAT;WAHD,CAAP,CADmC;SAArC;;AAQA,eAAO,QAAP,CAbmF;OAAZ,CAAzD,CAcb,IAda,CAcR,oBAAY;AAClB,YAAI,CAAC,SAAS,SAAT,EAAD,EAAuB;AACzB,gBAAM,SAAS,KAAT,CADmB;SAA3B;;AAIA,eAAO,QAAP,CALkB;OAAZ,CAdF,CADE;;AAuBR,aAAO,OAAP,CAvBQ;;;;6BA0BD;;;AACP,UAAM,UAAU,2BAjCP,mDAiCO,CAAe,IAAf,CAAoB;eAAM,OAAK,IAAL,CAAU,MAAV;OAAN,CAA9B,CADC;AAEP,aAAO,OAAP,CAFO;;;;SAhCE","file":"requests/local.js","sourcesContent":["import { KinveyRequest } from './request';\nimport { CacheRack } from '../rack/rack';\nimport { NoResponseError } from '../errors';\nimport { Response } from './response';\n\n/**\n * @private\n */\nexport class LocalRequest extends KinveyRequest {\n  constructor(options) {\n    super(options);\n    this.rack = CacheRack.sharedInstance();\n  }\n\n  execute() {\n    const promise = super.execute().then(() => this.rack.execute(this)).then(response => {\n      if (!response) {\n        throw new NoResponseError();\n      }\n\n      if (!(response instanceof Response)) {\n        return new Response({\n          statusCode: response.statusCode,\n          headers: response.headers,\n          data: response.data\n        });\n      }\n\n      return response;\n    }).then(response => {\n      if (!response.isSuccess()) {\n        throw response.error;\n      }\n\n      return response;\n    });\n\n    return promise;\n  }\n\n  cancel() {\n    const promise = super.cancel().then(() => this.rack.cancel());\n    return promise;\n  }\n}\n"],"sourceRoot":"/source/"}