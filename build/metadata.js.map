{"version":3,"sources":["metadata.js"],"names":[],"mappings":";;;;;;;;;AAAA;;AACA;;;;;;;;AACA,IAAM,eAAe,QAAQ,GAAR,CAAY,oBAAZ,IAAoC,MAApC;;;;;;IAKR;AACX,WADW,QACX,GAAyB;QAAb,+DAAS,kBAAI;;0BADd,UACc;;AACvB,QAAI,CAAC,6BAAc,MAAd,CAAD,EAAwB;AAC1B,YAAM,wBAAgB,mCAAhB,CAAN,CAD0B;KAA5B;;;;;;;;AADuB,QAWvB,CAAK,GAAL,GAAW,OAAO,YAAP,KAAwB,EAAxB;;;;;;;;AAXY,QAmBvB,CAAK,MAAL,GAAc,MAAd,CAnBuB;GAAzB;;eADW;;6BAuDF;AACP,aAAO,KAAK,GAAL,CADA;;;;wBAhCO;AACd,UAAI,KAAK,GAAL,CAAS,GAAT,EAAc;AAChB,eAAO,KAAK,KAAL,CAAW,KAAK,GAAL,CAAS,GAAT,CAAlB,CADgB;OAAlB;;AAIA,aAAO,SAAP,CALc;;;;wBAQQ;AACtB,aAAO,KAAK,GAAL,CAAS,iBAAT,CAA2B,MAA3B,CADe;;;;wBAIL;AACjB,UAAI,KAAK,GAAL,CAAS,GAAT,EAAc;AAChB,eAAO,KAAK,KAAL,CAAW,KAAK,GAAL,CAAS,GAAT,CAAlB,CADgB;OAAlB;;AAIA,aAAO,SAAP,CALiB;;;;wBAQT;AACR,aAAO,KAAK,YAAL,CADC;;;;wBAIM;AACd,aAAO,KAAK,GAAL,CAAS,SAAT,CADO;;sBAIF,WAAW;AACvB,WAAK,GAAL,CAAS,SAAT,GAAqB,SAArB,CADuB;;;;SAnDd","file":"metadata.js","sourcesContent":["import { KinveyError } from './errors';\nimport isPlainObject from 'lodash/isPlainObject';\nconst kmdAttribute = process.env.KINVEY_KMD_ATTRIBUTE || '_kmd';\n\n/**\n * Wrapper for accessing the `_kmd` properties of an entity.\n */\nexport class Metadata {\n  constructor(entity = {}) {\n    if (!isPlainObject(entity)) {\n      throw new KinveyError('entity argument must be an object');\n    }\n\n    /**\n     * The kmd properties.\n     *\n     * @private\n     * @type {Object}\n     */\n    this.kmd = entity[kmdAttribute] || {};\n\n    /**\n     * The entity.\n     *\n     * @private\n     * @type {Object}\n     */\n    this.entity = entity;\n  }\n\n  get createdAt() {\n    if (this.kmd.ect) {\n      return Date.parse(this.kmd.ect);\n    }\n\n    return undefined;\n  }\n\n  get emailVerification() {\n    return this.kmd.emailVerification.status;\n  }\n\n  get lastModified() {\n    if (this.kmd.lmt) {\n      return Date.parse(this.kmd.lmt);\n    }\n\n    return undefined;\n  }\n\n  get lmt() {\n    return this.lastModified;\n  }\n\n  get authtoken() {\n    return this.kmd.authtoken;\n  }\n\n  set authtoken(authtoken) {\n    this.kmd.authtoken = authtoken;\n  }\n\n  toJSON() {\n    return this.kmd;\n  }\n}\n"],"sourceRoot":"/source/"}