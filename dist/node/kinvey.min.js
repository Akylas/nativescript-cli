!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Kinvey=e()}}(function(){var e,t,r;return function n(e,t,r){function i(a,u){if(!t[a]){if(!e[a]){var s="function"==typeof require&&require;if(!u&&s)return s(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=t[a]={exports:{}};e[a][0].call(c.exports,function(t){var r=e[a][1][t];return i(r?r:t)},c,c.exports,n,e,t,r)}return t[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,r){t.exports={"default":e("core-js/library/fn/object/create"),__esModule:!0}},{"core-js/library/fn/object/create":14}],2:[function(e,t,r){t.exports={"default":e("core-js/library/fn/object/define-property"),__esModule:!0}},{"core-js/library/fn/object/define-property":15}],3:[function(e,t,r){t.exports={"default":e("core-js/library/fn/object/freeze"),__esModule:!0}},{"core-js/library/fn/object/freeze":16}],4:[function(e,t,r){t.exports={"default":e("core-js/library/fn/object/get-own-property-descriptor"),__esModule:!0}},{"core-js/library/fn/object/get-own-property-descriptor":17}],5:[function(e,t,r){t.exports={"default":e("core-js/library/fn/object/keys"),__esModule:!0}},{"core-js/library/fn/object/keys":18}],6:[function(e,t,r){t.exports={"default":e("core-js/library/fn/object/set-prototype-of"),__esModule:!0}},{"core-js/library/fn/object/set-prototype-of":19}],7:[function(e,t,r){t.exports={"default":e("core-js/library/fn/promise"),__esModule:!0}},{"core-js/library/fn/promise":20}],8:[function(e,t,r){t.exports={"default":e("core-js/library/fn/symbol"),__esModule:!0}},{"core-js/library/fn/symbol":21}],9:[function(e,t,r){"use strict";r["default"]=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},r.__esModule=!0},{}],10:[function(e,t,r){"use strict";var n=e("babel-runtime/core-js/object/define-property")["default"];r["default"]=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),n(e,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),r.__esModule=!0},{"babel-runtime/core-js/object/define-property":2}],11:[function(e,t,r){"use strict";var n=e("babel-runtime/core-js/object/get-own-property-descriptor")["default"];r["default"]=function(e,t,r){for(var i=!0;i;){var o=e,a=t,u=r;i=!1,null===o&&(o=Function.prototype);var s=n(o,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(u)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;e=c,t=a,r=u,i=!0,s=c=void 0}},r.__esModule=!0},{"babel-runtime/core-js/object/get-own-property-descriptor":4}],12:[function(e,t,r){"use strict";var n=e("babel-runtime/core-js/object/create")["default"],i=e("babel-runtime/core-js/object/set-prototype-of")["default"];r["default"]=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=n(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(i?i(e,t):e.__proto__=t)},r.__esModule=!0},{"babel-runtime/core-js/object/create":1,"babel-runtime/core-js/object/set-prototype-of":6}],13:[function(e,t,r){"use strict";r["default"]=function(e){return e&&e.__esModule?e:{"default":e}},r.__esModule=!0},{}],14:[function(e,t,r){var n=e("../../modules/$");t.exports=function(e,t){return n.create(e,t)}},{"../../modules/$":50}],15:[function(e,t,r){var n=e("../../modules/$");t.exports=function(e,t,r){return n.setDesc(e,t,r)}},{"../../modules/$":50}],16:[function(e,t,r){e("../../modules/es6.object.freeze"),t.exports=e("../../modules/$.core").Object.freeze},{"../../modules/$.core":26,"../../modules/es6.object.freeze":77}],17:[function(e,t,r){var n=e("../../modules/$");e("../../modules/es6.object.get-own-property-descriptor"),t.exports=function(e,t){return n.getDesc(e,t)}},{"../../modules/$":50,"../../modules/es6.object.get-own-property-descriptor":78}],18:[function(e,t,r){e("../../modules/es6.object.keys"),t.exports=e("../../modules/$.core").Object.keys},{"../../modules/$.core":26,"../../modules/es6.object.keys":79}],19:[function(e,t,r){e("../../modules/es6.object.set-prototype-of"),t.exports=e("../../modules/$.core").Object.setPrototypeOf},{"../../modules/$.core":26,"../../modules/es6.object.set-prototype-of":80}],20:[function(e,t,r){e("../modules/es6.object.to-string"),e("../modules/es6.string.iterator"),e("../modules/web.dom.iterable"),e("../modules/es6.promise"),t.exports=e("../modules/$.core").Promise},{"../modules/$.core":26,"../modules/es6.object.to-string":81,"../modules/es6.promise":82,"../modules/es6.string.iterator":83,"../modules/web.dom.iterable":85}],21:[function(e,t,r){e("../../modules/es6.symbol"),t.exports=e("../../modules/$.core").Symbol},{"../../modules/$.core":26,"../../modules/es6.symbol":84}],22:[function(e,t,r){t.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},{}],23:[function(e,t,r){var n=e("./$.is-object");t.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},{"./$.is-object":43}],24:[function(e,t,r){var n=e("./$.cof"),i=e("./$.wks")("toStringTag"),o="Arguments"==n(function(){return arguments}());t.exports=function(e){var t,r,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=(t=Object(e))[i])?r:o?n(t):"Object"==(a=n(t))&&"function"==typeof t.callee?"Arguments":a}},{"./$.cof":25,"./$.wks":74}],25:[function(e,t,r){var n={}.toString;t.exports=function(e){return n.call(e).slice(8,-1)}},{}],26:[function(e,t,r){var n=t.exports={version:"1.2.3"};"number"==typeof __e&&(__e=n)},{}],27:[function(e,t,r){var n=e("./$.a-function");t.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}}},{"./$.a-function":22}],28:[function(e,t,r){var n=e("./$.global"),i=e("./$.core"),o="prototype",a=function(e,t){return function(){return e.apply(t,arguments)}},u=function(e,t,r){var s,l,c,f,h=e&u.G,d=e&u.P,p=h?n:e&u.S?n[t]:(n[t]||{})[o],v=h?i:i[t]||(i[t]={});h&&(r=t);for(s in r)l=!(e&u.F)&&p&&s in p,l&&s in v||(c=l?p[s]:r[s],h&&"function"!=typeof p[s]?f=r[s]:e&u.B&&l?f=a(c,n):e&u.W&&p[s]==c?!function(e){f=function(t){return this instanceof e?new e(t):e(t)},f[o]=e[o]}(c):f=d&&"function"==typeof c?a(Function.call,c):c,v[s]=f,d&&((v[o]||(v[o]={}))[s]=c))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,t.exports=u},{"./$.core":26,"./$.global":35}],29:[function(e,t,r){t.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},{}],30:[function(e,t,r){var n=e("./$.is-object"),i=e("./$.global").document,o=n(i)&&n(i.createElement);t.exports=function(e){return o?i.createElement(e):{}}},{"./$.global":35,"./$.is-object":43}],31:[function(e,t,r){var n=e("./$");t.exports=function(e){var t=n.getKeys(e),r=n.getSymbols;if(r)for(var i,o=r(e),a=n.isEnum,u=0;o.length>u;)a.call(e,i=o[u++])&&t.push(i);return t}},{"./$":50}],32:[function(e,t,r){t.exports=function(e){try{return!!e()}catch(t){return!0}}},{}],33:[function(e,t,r){var n=e("./$.ctx"),i=e("./$.iter-call"),o=e("./$.is-array-iter"),a=e("./$.an-object"),u=e("./$.to-length"),s=e("./core.get-iterator-method");t.exports=function(e,t,r,l){var c,f,h,d=s(e),p=n(r,l,t?2:1),v=0;if("function"!=typeof d)throw TypeError(e+" is not iterable!");if(o(d))for(c=u(e.length);c>v;v++)t?p(a(f=e[v])[0],f[1]):p(e[v]);else for(h=d.call(e);!(f=h.next()).done;)i(h,p,f.value,t)}},{"./$.an-object":23,"./$.ctx":27,"./$.is-array-iter":41,"./$.iter-call":44,"./$.to-length":70,"./core.get-iterator-method":75}],34:[function(e,t,r){var n={}.toString,i=e("./$.to-iobject"),o=e("./$").getNames,a="object"==typeof window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],u=function(e){try{return o(e)}catch(t){return a.slice()}};t.exports.get=function(e){return a&&"[object Window]"==n.call(e)?u(e):o(i(e))}},{"./$":50,"./$.to-iobject":69}],35:[function(e,t,r){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},{}],36:[function(e,t,r){var n={}.hasOwnProperty;t.exports=function(e,t){return n.call(e,t)}},{}],37:[function(e,t,r){var n=e("./$"),i=e("./$.property-desc");t.exports=e("./$.support-desc")?function(e,t,r){return n.setDesc(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},{"./$":50,"./$.property-desc":56,"./$.support-desc":65}],38:[function(e,t,r){t.exports=e("./$.global").document&&document.documentElement},{"./$.global":35}],39:[function(e,t,r){t.exports=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},{}],40:[function(e,t,r){var n=e("./$.cof");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},{"./$.cof":25}],41:[function(e,t,r){var n=e("./$.iterators"),i=e("./$.wks")("iterator");t.exports=function(e){return(n.Array||Array.prototype[i])===e}},{"./$.iterators":49,"./$.wks":74}],42:[function(e,t,r){var n=e("./$.cof");t.exports=Array.isArray||function(e){return"Array"==n(e)}},{"./$.cof":25}],43:[function(e,t,r){t.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},{}],44:[function(e,t,r){var n=e("./$.an-object");t.exports=function(e,t,r,i){try{return i?t(n(r)[0],r[1]):t(r)}catch(o){var a=e["return"];throw void 0!==a&&n(a.call(e)),o}}},{"./$.an-object":23}],45:[function(e,t,r){"use strict";var n=e("./$"),i={};e("./$.hide")(i,e("./$.wks")("iterator"),function(){return this}),t.exports=function(t,r,o){t.prototype=n.create(i,{next:e("./$.property-desc")(1,o)}),e("./$.tag")(t,r+" Iterator")}},{"./$":50,"./$.hide":37,"./$.property-desc":56,"./$.tag":66,"./$.wks":74}],46:[function(e,t,r){"use strict";var n=e("./$.library"),i=e("./$.def"),o=e("./$.redef"),a=e("./$.hide"),u=e("./$.has"),s=e("./$.wks")("iterator"),l=e("./$.iterators"),c=!([].keys&&"next"in[].keys()),f="@@iterator",h="keys",d="values",p=function(){return this};t.exports=function(t,r,v,y,g,b,m){e("./$.iter-create")(v,r,y);var _,w,j=function(e){switch(e){case h:return function(){return new v(this,e)};case d:return function(){return new v(this,e)}}return function(){return new v(this,e)}},A=r+" Iterator",E=t.prototype,k=E[s]||E[f]||g&&E[g],x=k||j(g);if(k){var F=e("./$").getProto(x.call(new t));e("./$.tag")(F,A,!0),!n&&u(E,f)&&a(F,s,p)}if((!n||m)&&a(E,s,x),l[r]=x,l[A]=p,g)if(_={values:g==d?x:j(d),keys:b?x:j(h),entries:g!=d?x:j("entries")},m)for(w in _)w in E||o(E,w,_[w]);else i(i.P+i.F*c,r,_)}},{"./$":50,"./$.def":28,"./$.has":36,"./$.hide":37,"./$.iter-create":45,"./$.iterators":49,"./$.library":52,"./$.redef":57,"./$.tag":66,"./$.wks":74}],47:[function(e,t,r){var n=e("./$.wks")("iterator"),i=!1;try{var o=[7][n]();o["return"]=function(){i=!0},Array.from(o,function(){throw 2})}catch(a){}t.exports=function(e,t){if(!t&&!i)return!1;var r=!1;try{var o=[7],a=o[n]();a.next=function(){r=!0},o[n]=function(){return a},e(o)}catch(u){}return r}},{"./$.wks":74}],48:[function(e,t,r){t.exports=function(e,t){return{value:t,done:!!e}}},{}],49:[function(e,t,r){t.exports={}},{}],50:[function(e,t,r){var n=Object;t.exports={create:n.create,getProto:n.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:n.getOwnPropertyDescriptor,setDesc:n.defineProperty,setDescs:n.defineProperties,getKeys:n.keys,getNames:n.getOwnPropertyNames,getSymbols:n.getOwnPropertySymbols,each:[].forEach}},{}],51:[function(e,t,r){var n=e("./$"),i=e("./$.to-iobject");t.exports=function(e,t){for(var r,o=i(e),a=n.getKeys(o),u=a.length,s=0;u>s;)if(o[r=a[s++]]===t)return r}},{"./$":50,"./$.to-iobject":69}],52:[function(e,t,r){t.exports=!0},{}],53:[function(e,t,r){var n,i,o,a=e("./$.global"),u=e("./$.task").set,s=a.MutationObserver||a.WebKitMutationObserver,l=a.process,c="process"==e("./$.cof")(l),f=function(){var e,t;for(c&&(e=l.domain)&&(l.domain=null,e.exit());n;)t=n.domain,t&&t.enter(),n.fn.call(),t&&t.exit(),n=n.next;i=void 0,e&&e.enter()};if(c)o=function(){l.nextTick(f)};else if(s){var h=1,d=document.createTextNode("");new s(f).observe(d,{characterData:!0}),o=function(){d.data=h=-h}}else o=function(){u.call(a,f)};t.exports=function(e){var t={fn:e,next:void 0,domain:c&&l.domain};i&&(i.next=t),n||(n=t,o()),i=t}},{"./$.cof":25,"./$.global":35,"./$.task":67}],54:[function(e,t,r){var n=e("./$.redef");t.exports=function(e,t){for(var r in t)n(e,r,t[r]);return e}},{"./$.redef":57}],55:[function(e,t,r){t.exports=function(t,r){var n=e("./$.def"),i=(e("./$.core").Object||{})[t]||Object[t],o={};o[t]=r(i),n(n.S+n.F*e("./$.fails")(function(){i(1)}),"Object",o)}},{"./$.core":26,"./$.def":28,"./$.fails":32}],56:[function(e,t,r){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],57:[function(e,t,r){t.exports=e("./$.hide")},{"./$.hide":37}],58:[function(e,t,r){t.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},{}],59:[function(e,t,r){var n=e("./$").getDesc,i=e("./$.is-object"),o=e("./$.an-object"),a=function(e,t){if(o(e),!i(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,r,i){try{i=e("./$.ctx")(Function.call,n(Object.prototype,"__proto__").set,2),i(t,[]),r=!(t instanceof Array)}catch(o){r=!0}return function(e,t){return a(e,t),r?e.__proto__=t:i(e,t),e}}({},!1):void 0),check:a}},{"./$":50,"./$.an-object":23,"./$.ctx":27,"./$.is-object":43}],60:[function(e,t,r){var n=e("./$.global"),i="__core-js_shared__",o=n[i]||(n[i]={});t.exports=function(e){return o[e]||(o[e]={})}},{"./$.global":35}],61:[function(e,t,r){var n=e("./$.an-object"),i=e("./$.a-function"),o=e("./$.wks")("species");t.exports=function(e,t){var r,a=n(e).constructor;return void 0===a||void 0==(r=n(a)[o])?t:i(r)}},{"./$.a-function":22,"./$.an-object":23,"./$.wks":74}],62:[function(e,t,r){"use strict";var n=e("./$"),i=e("./$.wks")("species");t.exports=function(t){!e("./$.support-desc")||i in t||n.setDesc(t,i,{configurable:!0,get:function(){return this}})}},{"./$":50,"./$.support-desc":65,"./$.wks":74}],63:[function(e,t,r){t.exports=function(e,t,r){if(!(e instanceof t))throw TypeError(r+": use the 'new' operator!");return e}},{}],64:[function(e,t,r){var n=e("./$.to-integer"),i=e("./$.defined");t.exports=function(e){return function(t,r){var o,a,u=String(i(t)),s=n(r),l=u.length;return 0>s||s>=l?e?"":void 0:(o=u.charCodeAt(s),55296>o||o>56319||s+1===l||(a=u.charCodeAt(s+1))<56320||a>57343?e?u.charAt(s):o:e?u.slice(s,s+2):(o-55296<<10)+(a-56320)+65536)}}},{"./$.defined":29,"./$.to-integer":68}],65:[function(e,t,r){t.exports=!e("./$.fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./$.fails":32}],66:[function(e,t,r){var n=e("./$").setDesc,i=e("./$.has"),o=e("./$.wks")("toStringTag");t.exports=function(e,t,r){e&&!i(e=r?e:e.prototype,o)&&n(e,o,{configurable:!0,value:t})}},{"./$":50,"./$.has":36,"./$.wks":74}],67:[function(e,t,r){"use strict";var n,i,o,a=e("./$.ctx"),u=e("./$.invoke"),s=e("./$.html"),l=e("./$.dom-create"),c=e("./$.global"),f=c.process,h=c.setImmediate,d=c.clearImmediate,p=c.MessageChannel,v=0,y={},g="onreadystatechange",b=function(){var e=+this;if(y.hasOwnProperty(e)){var t=y[e];delete y[e],t()}},m=function(e){b.call(e.data)};h&&d||(h=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return y[++v]=function(){u("function"==typeof e?e:Function(e),t)},n(v),v},d=function(e){delete y[e]},"process"==e("./$.cof")(f)?n=function(e){f.nextTick(a(b,e,1))}:p?(i=new p,o=i.port2,i.port1.onmessage=m,n=a(o.postMessage,o,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(n=function(e){c.postMessage(e+"","*")},c.addEventListener("message",m,!1)):n=g in l("script")?function(e){s.appendChild(l("script"))[g]=function(){s.removeChild(this),b.call(e)}}:function(e){setTimeout(a(b,e,1),0)}),t.exports={set:h,clear:d}},{"./$.cof":25,"./$.ctx":27,"./$.dom-create":30,"./$.global":35,"./$.html":38,"./$.invoke":39}],68:[function(e,t,r){var n=Math.ceil,i=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(e>0?i:n)(e)}},{}],69:[function(e,t,r){var n=e("./$.iobject"),i=e("./$.defined");t.exports=function(e){return n(i(e))}},{"./$.defined":29,"./$.iobject":40}],70:[function(e,t,r){var n=e("./$.to-integer"),i=Math.min;t.exports=function(e){return e>0?i(n(e),9007199254740991):0}},{"./$.to-integer":68}],71:[function(e,t,r){var n=e("./$.defined");t.exports=function(e){return Object(n(e))}},{"./$.defined":29}],72:[function(e,t,r){var n=0,i=Math.random();t.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+i).toString(36))}},{}],73:[function(e,t,r){t.exports=function(){}},{}],74:[function(e,t,r){var n=e("./$.shared")("wks"),i=e("./$.global").Symbol;t.exports=function(t){return n[t]||(n[t]=i&&i[t]||(i||e("./$.uid"))("Symbol."+t))}},{"./$.global":35,"./$.shared":60,"./$.uid":72}],75:[function(e,t,r){var n=e("./$.classof"),i=e("./$.wks")("iterator"),o=e("./$.iterators");t.exports=e("./$.core").getIteratorMethod=function(e){return void 0!=e?e[i]||e["@@iterator"]||o[n(e)]:void 0}},{"./$.classof":24,"./$.core":26,"./$.iterators":49,"./$.wks":74}],76:[function(e,t,r){"use strict";var n=e("./$.unscope"),i=e("./$.iter-step"),o=e("./$.iterators"),a=e("./$.to-iobject");e("./$.iter-define")(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,i(1)):"keys"==t?i(0,r):"values"==t?i(0,e[r]):i(0,[r,e[r]])},"values"),o.Arguments=o.Array,n("keys"),n("values"),n("entries")},{"./$.iter-define":46,"./$.iter-step":48,"./$.iterators":49,"./$.to-iobject":69,"./$.unscope":73}],77:[function(e,t,r){var n=e("./$.is-object");e("./$.object-sap")("freeze",function(e){return function(t){return e&&n(t)?e(t):t}})},{"./$.is-object":43,"./$.object-sap":55}],78:[function(e,t,r){var n=e("./$.to-iobject");e("./$.object-sap")("getOwnPropertyDescriptor",function(e){return function(t,r){return e(n(t),r)}})},{"./$.object-sap":55,"./$.to-iobject":69}],79:[function(e,t,r){var n=e("./$.to-object");e("./$.object-sap")("keys",function(e){return function(t){return e(n(t))}})},{"./$.object-sap":55,"./$.to-object":71}],80:[function(e,t,r){var n=e("./$.def");n(n.S,"Object",{setPrototypeOf:e("./$.set-proto").set})},{"./$.def":28,"./$.set-proto":59}],81:[function(e,t,r){},{}],82:[function(e,t,r){"use strict";var n,i=e("./$"),o=e("./$.library"),a=e("./$.global"),u=e("./$.ctx"),s=e("./$.classof"),l=e("./$.def"),c=e("./$.is-object"),f=e("./$.an-object"),h=e("./$.a-function"),d=e("./$.strict-new"),p=e("./$.for-of"),v=e("./$.set-proto").set,y=e("./$.same"),g=e("./$.species"),b=e("./$.wks")("species"),m=e("./$.species-constructor"),_=e("./$.uid")("record"),w=e("./$.microtask"),j="Promise",A=a.process,E="process"==s(A),k=a[j],x=function(e){var t=new k(function(){});return e&&(t.constructor=Object),k.resolve(t)===t},F=function(){function t(e){var r=new k(e);return v(r,t.prototype),r}var r=!1;try{if(r=k&&k.resolve&&x(),v(t,k),t.prototype=i.create(k.prototype,{constructor:{value:t}}),t.resolve(5).then(function(){})instanceof t||(r=!1),r&&e("./$.support-desc")){var n=!1;k.resolve(i.setDesc({},"then",{get:function(){n=!0}})),r=n}}catch(o){r=!1}return r}(),C=function(e){return c(e)&&(F?"Promise"==s(e):_ in e)},O=function(e,t){return o&&e===k&&t===n?!0:y(e,t)},S=function(e){var t=f(e)[b];return void 0!=t?t:e},P=function(e){var t;return c(e)&&"function"==typeof(t=e.then)?t:!1},D=function(e,t){if(!e.n){e.n=!0;var r=e.c;w(function(){for(var n=e.v,i=1==e.s,o=0,u=function(t){var r,o,a=i?t.ok:t.fail;try{a?(i||(e.h=!0),r=a===!0?n:a(n),r===t.P?t.rej(TypeError("Promise-chain cycle")):(o=P(r))?o.call(r,t.res,t.rej):t.res(r)):t.rej(n)}catch(u){t.rej(u)}};r.length>o;)u(r[o++]);r.length=0,e.n=!1,t&&setTimeout(function(){var t,r,i=e.p;B(i)&&(E?A.emit("unhandledRejection",n,i):(t=a.onunhandledrejection)?t({promise:i,reason:n}):(r=a.console)&&r.error&&r.error("Unhandled promise rejection",n)),e.a=void 0},1)})}},B=function(e){var t,r=e[_],n=r.a||r.c,i=0;if(r.h)return!1;for(;n.length>i;)if(t=n[i++],t.fail||!B(t.P))return!1;return!0},T=function(e){var t=this;t.d||(t.d=!0,t=t.r||t,t.v=e,t.s=2,t.a=t.c.slice(),D(t,!0))},I=function(e){var t,r=this;if(!r.d){r.d=!0,r=r.r||r;try{(t=P(e))?w(function(){var n={r:r,d:!1};try{t.call(e,u(I,n,1),u(T,n,1))}catch(i){T.call(n,i)}}):(r.v=e,r.s=1,D(r,!1))}catch(n){T.call({r:r,d:!1},n)}}};F||(k=function(e){h(e);var t={p:d(this,k,j),c:[],a:void 0,s:0,d:!1,v:void 0,h:!1,n:!1};this[_]=t;try{e(u(I,t,1),u(T,t,1))}catch(r){T.call(t,r)}},e("./$.mix")(k.prototype,{then:function(e,t){var r={ok:"function"==typeof e?e:!0,fail:"function"==typeof t?t:!1},n=r.P=new(m(this,k))(function(e,t){r.res=e,r.rej=t});h(r.res),h(r.rej);var i=this[_];return i.c.push(r),i.a&&i.a.push(r),i.s&&D(i,!1),n},"catch":function(e){return this.then(void 0,e)}})),l(l.G+l.W+l.F*!F,{Promise:k}),e("./$.tag")(k,j),g(k),g(n=e("./$.core")[j]),l(l.S+l.F*!F,j,{reject:function(e){return new this(function(t,r){r(e)})}}),l(l.S+l.F*(!F||x(!0)),j,{resolve:function(e){return C(e)&&O(e.constructor,this)?e:new this(function(t){t(e)})}}),l(l.S+l.F*!(F&&e("./$.iter-detect")(function(e){k.all(e)["catch"](function(){})})),j,{all:function(e){var t=S(this),r=[];return new t(function(n,o){p(e,!1,r.push,r);var a=r.length,u=Array(a);a?i.each.call(r,function(e,r){t.resolve(e).then(function(e){u[r]=e,--a||n(u)},o)}):n(u)})},race:function(e){var t=S(this);return new t(function(r,n){p(e,!1,function(e){t.resolve(e).then(r,n)})})}})},{"./$":50,"./$.a-function":22,"./$.an-object":23,"./$.classof":24,"./$.core":26,"./$.ctx":27,"./$.def":28,"./$.for-of":33,"./$.global":35,"./$.is-object":43,"./$.iter-detect":47,"./$.library":52,"./$.microtask":53,"./$.mix":54,"./$.same":58,"./$.set-proto":59,"./$.species":62,"./$.species-constructor":61,"./$.strict-new":63,"./$.support-desc":65,"./$.tag":66,"./$.uid":72,"./$.wks":74}],83:[function(e,t,r){"use strict";var n=e("./$.string-at")(!0);e("./$.iter-define")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=n(t,r),this._i+=e.length,{value:e,done:!1})})},{"./$.iter-define":46,"./$.string-at":64}],84:[function(e,t,r){"use strict";var n=e("./$"),i=e("./$.global"),o=e("./$.has"),a=e("./$.support-desc"),u=e("./$.def"),s=e("./$.redef"),l=e("./$.fails"),c=e("./$.shared"),f=e("./$.tag"),h=e("./$.uid"),d=e("./$.wks"),p=e("./$.keyof"),v=e("./$.get-names"),y=e("./$.enum-keys"),g=e("./$.is-array"),b=e("./$.an-object"),m=e("./$.to-iobject"),_=e("./$.property-desc"),w=n.getDesc,j=n.setDesc,A=n.create,E=v.get,k=i.Symbol,x=i.JSON,F=x&&x.stringify,C=!1,O=d("_hidden"),S=n.isEnum,P=c("symbol-registry"),D=c("symbols"),B="function"==typeof k,T=Object.prototype,I=a&&l(function(){return 7!=A(j({},"a",{get:function(){return j(this,"a",{value:7}).a}})).a})?function(e,t,r){var n=w(T,t);n&&delete T[t],j(e,t,r),n&&e!==T&&j(T,t,n)}:j,R=function(e){var t=D[e]=A(k.prototype);return t._k=e,a&&C&&I(T,e,{configurable:!0,set:function(t){o(this,O)&&o(this[O],e)&&(this[O][e]=!1),I(this,e,_(1,t))}}),t},$=function(e){return"symbol"==typeof e},q=function(e,t,r){return r&&o(D,t)?(r.enumerable?(o(e,O)&&e[O][t]&&(e[O][t]=!1),r=A(r,{enumerable:_(0,!1)})):(o(e,O)||j(e,O,_(1,{})),e[O][t]=!0),I(e,t,r)):j(e,t,r)},L=function(e,t){b(e);for(var r,n=y(t=m(t)),i=0,o=n.length;o>i;)q(e,r=n[i++],t[r]);return e},N=function(e,t){return void 0===t?A(e):L(A(e),t)},M=function(e){var t=S.call(this,e);return t||!o(this,e)||!o(D,e)||o(this,O)&&this[O][e]?t:!0},U=function(e,t){var r=w(e=m(e),t);return!r||!o(D,t)||o(e,O)&&e[O][t]||(r.enumerable=!0),r},K=function(e){for(var t,r=E(m(e)),n=[],i=0;r.length>i;)o(D,t=r[i++])||t==O||n.push(t);return n},H=function(e){for(var t,r=E(m(e)),n=[],i=0;r.length>i;)o(D,t=r[i++])&&n.push(D[t]);return n},z=function(e){for(var t,r,n=[e],i=1,o=arguments;o.length>i;)n.push(o[i++]);return t=n[1],"function"==typeof t&&(r=t),(r||!g(t))&&(t=function(e,t){return r&&(t=r.call(this,e,t)),$(t)?void 0:t}),n[1]=t,F.apply(x,n)},V=l(function(){var e=k();return"[null]"!=F([e])||"{}"!=F({a:e})||"{}"!=F(Object(e))});B||(k=function(){if($(this))throw TypeError("Symbol is not a constructor");return R(h(arguments.length>0?arguments[0]:void 0))},s(k.prototype,"toString",function(){return this._k}),$=function(e){return e instanceof k},n.create=N,n.isEnum=M,n.getDesc=U,n.setDesc=q,n.setDescs=L,n.getNames=v.get=K,n.getSymbols=H,a&&!e("./$.library")&&s(T,"propertyIsEnumerable",M,!0));var J={"for":function(e){return o(P,e+="")?P[e]:P[e]=k(e)},keyFor:function(e){return p(P,e)},useSetter:function(){C=!0},useSimple:function(){C=!1}};n.each.call("hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),function(e){var t=d(e);J[e]=B?t:R(t)}),C=!0,u(u.G+u.W,{Symbol:k}),u(u.S,"Symbol",J),u(u.S+u.F*!B,"Object",{create:N,defineProperty:q,defineProperties:L,getOwnPropertyDescriptor:U,getOwnPropertyNames:K,getOwnPropertySymbols:H}),x&&u(u.S+u.F*(!B||V),"JSON",{stringify:z}),f(k,"Symbol"),f(Math,"Math",!0),f(i.JSON,"JSON",!0)},{"./$":50,"./$.an-object":23,"./$.def":28,"./$.enum-keys":31,"./$.fails":32,"./$.get-names":34,"./$.global":35,"./$.has":36,"./$.is-array":42,"./$.keyof":51,"./$.library":52,"./$.property-desc":56,"./$.redef":57,"./$.shared":60,"./$.support-desc":65,"./$.tag":66,"./$.to-iobject":69,"./$.uid":72,"./$.wks":74}],85:[function(e,t,r){e("./es6.array.iterator");var n=e("./$.iterators");n.NodeList=n.HTMLCollection=n.Array},{"./$.iterators":49,"./es6.array.iterator":76}],86:[function(t,r,n){(function(t,i){!function(t){if("object"==typeof n&&"undefined"!=typeof r)r.exports=t();else if("function"==typeof e&&e.amd)e([],t);else{var o;"undefined"!=typeof window?o=window:"undefined"!=typeof i?o=i:"undefined"!=typeof self&&(o=self),o.Promise=t()}}(function(){var e,r,n;return function o(e,t,r){function n(a,u){if(!t[a]){if(!e[a]){var s="function"==typeof _dereq_&&_dereq_;if(!u&&s)return s(a,!0);if(i)return i(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=t[a]={exports:{}};e[a][0].call(c.exports,function(t){var r=e[a][1][t];return n(r?r:t)},c,c.exports,o,e,t,r)}return t[a].exports}for(var i="function"==typeof _dereq_&&_dereq_,a=0;a<r.length;a++)n(r[a]);return n}({1:[function(e,t,r){"use strict";t.exports=function(e){function t(e){var t=new r(e),n=t.promise();return t.setHowMany(1),t.setUnwrap(),t.init(),n}var r=e._SomePromiseArray;e.any=function(e){return t(e)},e.prototype.any=function(){return t(this)}}},{}],2:[function(e,t,r){"use strict";function n(){this._isTickUsed=!1,this._lateQueue=new c(16),this._normalQueue=new c(16),this._trampolineEnabled=!0;var e=this;this.drainQueues=function(){e._drainQueues()},this._schedule=l.isStatic?l(this.drainQueues):l}function i(e,t,r){this._lateQueue.push(e,t,r),this._queueTick()}function o(e,t,r){this._normalQueue.push(e,t,r),this._queueTick()}function a(e){this._normalQueue._pushOne(e),this._queueTick()}var u;try{throw new Error}catch(s){u=s}var l=e("./schedule.js"),c=e("./queue.js"),f=e("./util.js");n.prototype.disableTrampolineIfNecessary=function(){f.hasDevTools&&(this._trampolineEnabled=!1)},n.prototype.enableTrampoline=function(){this._trampolineEnabled||(this._trampolineEnabled=!0,this._schedule=function(e){setTimeout(e,0)})},n.prototype.haveItemsQueued=function(){return this._normalQueue.length()>0},n.prototype.throwLater=function(e,t){if(1===arguments.length&&(t=e,e=function(){throw t}),"undefined"!=typeof setTimeout)setTimeout(function(){e(t)},0);else try{this._schedule(function(){e(t)})}catch(r){throw new Error("No async scheduler available\n\n    See http://goo.gl/m3OTXk\n")}},f.hasDevTools?(l.isStatic&&(l=function(e){setTimeout(e,0)}),n.prototype.invokeLater=function(e,t,r){this._trampolineEnabled?i.call(this,e,t,r):this._schedule(function(){setTimeout(function(){e.call(t,r)},100)})},n.prototype.invoke=function(e,t,r){this._trampolineEnabled?o.call(this,e,t,r):this._schedule(function(){e.call(t,r)})},n.prototype.settlePromises=function(e){this._trampolineEnabled?a.call(this,e):this._schedule(function(){e._settlePromises()})}):(n.prototype.invokeLater=i,n.prototype.invoke=o,n.prototype.settlePromises=a),n.prototype.invokeFirst=function(e,t,r){this._normalQueue.unshift(e,t,r),this._queueTick()},n.prototype._drainQueue=function(e){for(;e.length()>0;){var t=e.shift();if("function"==typeof t){var r=e.shift(),n=e.shift();t.call(r,n)}else t._settlePromises()}},n.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._drainQueue(this._lateQueue)},n.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},n.prototype._reset=function(){this._isTickUsed=!1},t.exports=new n,t.exports.firstLineError=u},{"./queue.js":28,"./schedule.js":31,"./util.js":38}],3:[function(e,t,r){"use strict";t.exports=function(e,t,r){var n=function(e,t){this._reject(t)},i=function(e,t){t.promiseRejectionQueued=!0,t.bindingPromise._then(n,n,null,this,e)},o=function(e,t){this._isPending()&&this._resolveCallback(t.target)},a=function(e,t){t.promiseRejectionQueued||this._reject(e)};e.prototype.bind=function(n){var u=r(n),s=new e(t);s._propagateFrom(this,1);var l=this._target();if(s._setBoundTo(u),u instanceof e){var c={promiseRejectionQueued:!1,promise:s,target:l,bindingPromise:u};l._then(t,i,s._progress,s,c),u._then(o,a,s._progress,s,c)}else s._resolveCallback(l);return s},e.prototype._setBoundTo=function(e){void 0!==e?(this._bitField=131072|this._bitField,this._boundTo=e):this._bitField=-131073&this._bitField},e.prototype._isBound=function(){return 131072===(131072&this._bitField)},e.bind=function(n,i){var o=r(n),a=new e(t);return a._setBoundTo(o),o instanceof e?o._then(function(){a._resolveCallback(i)},a._reject,a._progress,a,null):a._resolveCallback(i),a}}},{}],4:[function(e,t,r){"use strict";function n(){try{Promise===o&&(Promise=i)}catch(e){}return o}var i;"undefined"!=typeof Promise&&(i=Promise);var o=e("./promise.js")();o.noConflict=n,t.exports=o},{"./promise.js":23}],5:[function(e,t,r){"use strict";var n=Object.create;if(n){var i=n(null),o=n(null);i[" size"]=o[" size"]=0}t.exports=function(t){function r(e,r){var n;if(null!=e&&(n=e[r]),"function"!=typeof n){var i="Object "+u.classString(e)+" has no method '"+u.toString(r)+"'";throw new t.TypeError(i)}return n}function n(e){var t=this.pop(),n=r(e,t);return n.apply(e,this)}function i(e){return e[this]}function o(e){var t=+this;return 0>t&&(t=Math.max(0,t+e.length)),e[t]}var a,u=e("./util.js"),s=u.canEvaluate;u.isIdentifier;t.prototype.call=function(e){for(var t=arguments.length,r=new Array(t-1),i=1;t>i;++i)r[i-1]=arguments[i];return r.push(e),this._then(n,void 0,void 0,r,void 0)},t.prototype.get=function(e){var t,r="number"==typeof e;if(r)t=o;else if(s){var n=a(e);t=null!==n?n:i}else t=i;return this._then(t,void 0,void 0,e,void 0)}}},{"./util.js":38}],6:[function(e,t,r){"use strict";t.exports=function(t){var r=e("./errors.js"),n=e("./async.js"),i=r.CancellationError;t.prototype._cancel=function(e){if(!this.isCancellable())return this;for(var t,r=this;void 0!==(t=r._cancellationParent)&&t.isCancellable();)r=t;this._unsetCancellable(),r._target()._rejectCallback(e,!1,!0)},t.prototype.cancel=function(e){return this.isCancellable()?(void 0===e&&(e=new i),n.invokeLater(this._cancel,this,e),this):this},t.prototype.cancellable=function(){return this._cancellable()?this:(n.enableTrampoline(),
this._setCancellable(),this._cancellationParent=void 0,this)},t.prototype.uncancellable=function(){var e=this.then();return e._unsetCancellable(),e},t.prototype.fork=function(e,t,r){var n=this._then(e,t,r,void 0,void 0);return n._setCancellable(),n._cancellationParent=void 0,n}}},{"./async.js":2,"./errors.js":13}],7:[function(e,r,n){"use strict";r.exports=function(){function r(e){this._parent=e;var t=this._length=1+(void 0===e?0:e._length);w(this,r),t>32&&this.uncycle()}function n(e,t){for(var r=0;r<t.length-1;++r)t[r].push("From previous event:"),t[r]=t[r].join("\n");return r<t.length&&(t[r]=t[r].join("\n")),e+"\n"+t.join("\n")}function i(e){for(var t=0;t<e.length;++t)(0===e[t].length||t+1<e.length&&e[t][0]===e[t+1][0])&&(e.splice(t,1),t--)}function o(e){for(var t=e[0],r=1;r<e.length;++r){for(var n=e[r],i=t.length-1,o=t[i],a=-1,u=n.length-1;u>=0;--u)if(n[u]===o){a=u;break}for(var u=a;u>=0;--u){var s=n[u];if(t[i]!==s)break;t.pop(),i--}t=n}}function a(e){for(var t=[],r=0;r<e.length;++r){var n=e[r],i=v.test(n)||"    (No stack trace)"===n,o=i&&b(n);i&&!o&&(g&&" "!==n.charAt(0)&&(n="    "+n),t.push(n))}return t}function u(e){for(var t=e.stack.replace(/\s+$/g,"").split("\n"),r=0;r<t.length;++r){var n=t[r];if("    (No stack trace)"===n||v.test(n))break}return r>0&&(t=t.slice(r)),t}function s(e){var t;if("function"==typeof e)t="[function "+(e.name||"anonymous")+"]";else{t=e.toString();var r=/\[object [a-zA-Z0-9$_]+\]/;if(r.test(t))try{var n=JSON.stringify(e);t=n}catch(i){}0===t.length&&(t="(empty array)")}return"(<"+l(t)+">, no stack trace)"}function l(e){var t=41;return e.length<t?e:e.substr(0,t-3)+"..."}function c(e){var t=e.match(m);return t?{fileName:t[1],line:parseInt(t[2],10)}:void 0}var f,h=e("./async.js"),d=e("./util.js"),p=/[\\\/]bluebird[\\\/]js[\\\/](main|debug|zalgo|instrumented)/,v=null,y=null,g=!1;d.inherits(r,Error),r.prototype.uncycle=function(){var e=this._length;if(!(2>e)){for(var t=[],r={},n=0,i=this;void 0!==i;++n)t.push(i),i=i._parent;e=this._length=n;for(var n=e-1;n>=0;--n){var o=t[n].stack;void 0===r[o]&&(r[o]=n)}for(var n=0;e>n;++n){var a=t[n].stack,u=r[a];if(void 0!==u&&u!==n){u>0&&(t[u-1]._parent=void 0,t[u-1]._length=1),t[n]._parent=void 0,t[n]._length=1;var s=n>0?t[n-1]:this;e-1>u?(s._parent=t[u+1],s._parent.uncycle(),s._length=s._parent._length+1):(s._parent=void 0,s._length=1);for(var l=s._length+1,c=n-2;c>=0;--c)t[c]._length=l,l++;return}}}},r.prototype.parent=function(){return this._parent},r.prototype.hasParent=function(){return void 0!==this._parent},r.prototype.attachExtraTrace=function(e){if(!e.__stackCleaned__){this.uncycle();for(var t=r.parseStackAndMessage(e),u=t.message,s=[t.stack],l=this;void 0!==l;)s.push(a(l.stack.split("\n"))),l=l._parent;o(s),i(s),d.notEnumerableProp(e,"stack",n(u,s)),d.notEnumerableProp(e,"__stackCleaned__",!0)}},r.parseStackAndMessage=function(e){var t=e.stack,r=e.toString();return t="string"==typeof t&&t.length>0?u(e):["    (No stack trace)"],{message:r,stack:a(t)}},r.formatAndLogError=function(e,t){if("undefined"!=typeof console){var r;if("object"==typeof e||"function"==typeof e){var n=e.stack;r=t+y(n,e)}else r=t+String(e);"function"==typeof f?f(r):("function"==typeof console.log||"object"==typeof console.log)&&console.log(r)}},r.unhandledRejection=function(e){r.formatAndLogError(e,"^--- With additional stack trace: ")},r.isSupported=function(){return"function"==typeof w},r.fireRejectionEvent=function(e,t,n,i){var o=!1;try{"function"==typeof t&&(o=!0,"rejectionHandled"===e?t(i):t(n,i))}catch(a){h.throwLater(a)}var u=!1;try{u=j(e,n,i)}catch(a){u=!0,h.throwLater(a)}var s=!1;if(_)try{s=_(e.toLowerCase(),{reason:n,promise:i})}catch(a){s=!0,h.throwLater(a)}u||o||s||"unhandledRejection"!==e||r.formatAndLogError(n,"Unhandled rejection ")};var b=function(){return!1},m=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;r.setBounds=function(e,t){if(r.isSupported()){for(var n,i,o=e.stack.split("\n"),a=t.stack.split("\n"),u=-1,s=-1,l=0;l<o.length;++l){var f=c(o[l]);if(f){n=f.fileName,u=f.line;break}}for(var l=0;l<a.length;++l){var f=c(a[l]);if(f){i=f.fileName,s=f.line;break}}0>u||0>s||!n||!i||n!==i||u>=s||(b=function(e){if(p.test(e))return!0;var t=c(e);return t&&t.fileName===n&&u<=t.line&&t.line<=s?!0:!1})}};var _,w=function(){var e=/^\s*at\s*/,t=function(e,t){return"string"==typeof e?e:void 0!==t.name&&void 0!==t.message?t.toString():s(t)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit=Error.stackTraceLimit+6,v=e,y=t;var r=Error.captureStackTrace;return b=function(e){return p.test(e)},function(e,t){Error.stackTraceLimit=Error.stackTraceLimit+6,r(e,t),Error.stackTraceLimit=Error.stackTraceLimit-6}}var n=new Error;if("string"==typeof n.stack&&n.stack.split("\n")[0].indexOf("stackDetection@")>=0)return v=/@/,y=t,g=!0,function(e){e.stack=(new Error).stack};var i;try{throw new Error}catch(o){i="stack"in o}return"stack"in n||!i||"number"!=typeof Error.stackTraceLimit?(y=function(e,t){return"string"==typeof e?e:"object"!=typeof t&&"function"!=typeof t||void 0===t.name||void 0===t.message?s(t):t.toString()},null):(v=e,y=t,function(e){Error.stackTraceLimit=Error.stackTraceLimit+6;try{throw new Error}catch(t){e.stack=t.stack}Error.stackTraceLimit=Error.stackTraceLimit-6})}([]),j=function(){if(d.isNode)return function(e,r,n){return"rejectionHandled"===e?t.emit(e,n):t.emit(e,r,n)};var e=!1,r=!0;try{var n=new self.CustomEvent("test");e=n instanceof CustomEvent}catch(i){}if(!e)try{var o=document.createEvent("CustomEvent");o.initCustomEvent("testingtheevent",!1,!0,{}),self.dispatchEvent(o)}catch(i){r=!1}r&&(_=function(t,r){var n;return e?n=new self.CustomEvent(t,{detail:r,bubbles:!1,cancelable:!0}):self.dispatchEvent&&(n=document.createEvent("CustomEvent"),n.initCustomEvent(t,!1,!0,r)),n?!self.dispatchEvent(n):!1});var a={};return a.unhandledRejection="onunhandledRejection".toLowerCase(),a.rejectionHandled="onrejectionHandled".toLowerCase(),function(e,t,r){var n=a[e],i=self[n];return i?("rejectionHandled"===e?i.call(self,r):i.call(self,t,r),!0):!1}}();return"undefined"!=typeof console&&"undefined"!=typeof console.warn&&(f=function(e){console.warn(e)},d.isNode&&t.stderr.isTTY?f=function(e){t.stderr.write("[31m"+e+"[39m\n")}:d.isNode||"string"!=typeof(new Error).stack||(f=function(e){console.warn("%c"+e,"color: red")})),r}},{"./async.js":2,"./util.js":38}],8:[function(e,t,r){"use strict";t.exports=function(t){function r(e,t,r){this._instances=e,this._callback=t,this._promise=r}function n(e,t){var r={},n=a(e).call(r,t);if(n===u)return n;var i=s(r);return i.length?(u.e=new l("Catch filter must inherit from Error or be a simple predicate function\n\n    See http://goo.gl/o84o68\n"),u):n}var i=e("./util.js"),o=e("./errors.js"),a=i.tryCatch,u=i.errorObj,s=e("./es5.js").keys,l=o.TypeError;return r.prototype.doFilter=function(e){for(var r=this._callback,i=this._promise,o=i._boundValue(),s=0,l=this._instances.length;l>s;++s){var c=this._instances[s],f=c===Error||null!=c&&c.prototype instanceof Error;if(f&&e instanceof c){var h=a(r).call(o,e);return h===u?(t.e=h.e,t):h}if("function"==typeof c&&!f){var d=n(c,e);if(d===u){e=u.e;break}if(d){var h=a(r).call(o,e);return h===u?(t.e=h.e,t):h}}}return t.e=e,t},r}},{"./errors.js":13,"./es5.js":14,"./util.js":38}],9:[function(e,t,r){"use strict";t.exports=function(e,t,r){function n(){this._trace=new t(o())}function i(){return r()?new n:void 0}function o(){var e=a.length-1;return e>=0?a[e]:void 0}var a=[];return n.prototype._pushContext=function(){r()&&void 0!==this._trace&&a.push(this._trace)},n.prototype._popContext=function(){r()&&void 0!==this._trace&&a.pop()},e.prototype._peekContext=o,e.prototype._pushContext=n.prototype._pushContext,e.prototype._popContext=n.prototype._popContext,i}},{}],10:[function(e,r,n){"use strict";r.exports=function(r,n){var i,o,a=r._getDomain,u=e("./async.js"),s=e("./errors.js").Warning,l=e("./util.js"),c=l.canAttachTrace,f=l.isNode&&(!!t.env.BLUEBIRD_DEBUG||"development"===t.env.NODE_ENV);return l.isNode&&0==t.env.BLUEBIRD_DEBUG&&(f=!1),f&&u.disableTrampolineIfNecessary(),r.prototype._ignoreRejections=function(){this._unsetRejectionIsUnhandled(),this._bitField=16777216|this._bitField},r.prototype._ensurePossibleRejectionHandled=function(){0===(16777216&this._bitField)&&(this._setRejectionIsUnhandled(),u.invokeLater(this._notifyUnhandledRejection,this,void 0))},r.prototype._notifyUnhandledRejectionIsHandled=function(){n.fireRejectionEvent("rejectionHandled",i,void 0,this)},r.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var e=this._getCarriedStackTrace()||this._settledValue;this._setUnhandledRejectionIsNotified(),n.fireRejectionEvent("unhandledRejection",o,e,this)}},r.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=524288|this._bitField},r.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-524289&this._bitField},r.prototype._isUnhandledRejectionNotified=function(){return(524288&this._bitField)>0},r.prototype._setRejectionIsUnhandled=function(){this._bitField=2097152|this._bitField},r.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-2097153&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},r.prototype._isRejectionUnhandled=function(){return(2097152&this._bitField)>0},r.prototype._setCarriedStackTrace=function(e){this._bitField=1048576|this._bitField,this._fulfillmentHandler0=e},r.prototype._isCarryingStackTrace=function(){return(1048576&this._bitField)>0},r.prototype._getCarriedStackTrace=function(){return this._isCarryingStackTrace()?this._fulfillmentHandler0:void 0},r.prototype._captureStackTrace=function(){return f&&(this._trace=new n(this._peekContext())),this},r.prototype._attachExtraTrace=function(e,t){if(f&&c(e)){var r=this._trace;if(void 0!==r&&t&&(r=r._parent),void 0!==r)r.attachExtraTrace(e);else if(!e.__stackCleaned__){var i=n.parseStackAndMessage(e);l.notEnumerableProp(e,"stack",i.message+"\n"+i.stack.join("\n")),l.notEnumerableProp(e,"__stackCleaned__",!0)}}},r.prototype._warn=function(e){var t=new s(e),r=this._peekContext();if(r)r.attachExtraTrace(t);else{var i=n.parseStackAndMessage(t);t.stack=i.message+"\n"+i.stack.join("\n")}n.formatAndLogError(t,"")},r.onPossiblyUnhandledRejection=function(e){var t=a();o="function"==typeof e?null===t?e:t.bind(e):void 0},r.onUnhandledRejectionHandled=function(e){var t=a();i="function"==typeof e?null===t?e:t.bind(e):void 0},r.longStackTraces=function(){if(u.haveItemsQueued()&&f===!1)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/DT1qyG\n");f=n.isSupported(),f&&u.disableTrampolineIfNecessary()},r.hasLongStackTraces=function(){return f&&n.isSupported()},n.isSupported()||(r.longStackTraces=function(){},f=!1),function(){return f}}},{"./async.js":2,"./errors.js":13,"./util.js":38}],11:[function(e,t,r){"use strict";var n=e("./util.js"),i=n.isPrimitive;t.exports=function(e){var t=function(){return this},r=function(){throw this},n=function(){},o=function(){throw void 0},a=function(e,t){return 1===t?function(){throw e}:2===t?function(){return e}:void 0};e.prototype["return"]=e.prototype.thenReturn=function(r){return void 0===r?this.then(n):i(r)?this._then(a(r,2),void 0,void 0,void 0,void 0):(r instanceof e&&r._ignoreRejections(),this._then(t,void 0,void 0,r,void 0))},e.prototype["throw"]=e.prototype.thenThrow=function(e){return void 0===e?this.then(o):i(e)?this._then(a(e,1),void 0,void 0,void 0,void 0):this._then(r,void 0,void 0,e,void 0)}}},{"./util.js":38}],12:[function(e,t,r){"use strict";t.exports=function(e,t){var r=e.reduce;e.prototype.each=function(e){return r(this,e,null,t)},e.each=function(e,n){return r(e,n,null,t)}}},{}],13:[function(e,t,r){"use strict";function n(e,t){function r(n){return this instanceof r?(f(this,"message","string"==typeof n?n:t),f(this,"name",e),void(Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new r(n)}return c(r,Error),r}function i(e){return this instanceof i?(f(this,"name","OperationalError"),f(this,"message",e),this.cause=e,this.isOperational=!0,void(e instanceof Error?(f(this,"message",e.message),f(this,"stack",e.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new i(e)}var o,a,u=e("./es5.js"),s=u.freeze,l=e("./util.js"),c=l.inherits,f=l.notEnumerableProp,h=n("Warning","warning"),d=n("CancellationError","cancellation error"),p=n("TimeoutError","timeout error"),v=n("AggregateError","aggregate error");try{o=TypeError,a=RangeError}catch(y){o=n("TypeError","type error"),a=n("RangeError","range error")}for(var g="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),b=0;b<g.length;++b)"function"==typeof Array.prototype[g[b]]&&(v.prototype[g[b]]=Array.prototype[g[b]]);u.defineProperty(v.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),v.prototype.isOperational=!0;var m=0;v.prototype.toString=function(){var e=Array(4*m+1).join(" "),t="\n"+e+"AggregateError of:\n";m++,e=Array(4*m+1).join(" ");for(var r=0;r<this.length;++r){for(var n=this[r]===this?"[Circular AggregateError]":this[r]+"",i=n.split("\n"),o=0;o<i.length;++o)i[o]=e+i[o];n=i.join("\n"),t+=n+"\n"}return m--,t},c(i,Error);var _=Error.__BluebirdErrorTypes__;_||(_=s({CancellationError:d,TimeoutError:p,OperationalError:i,RejectionError:i,AggregateError:v}),f(Error,"__BluebirdErrorTypes__",_)),t.exports={Error:Error,TypeError:o,RangeError:a,CancellationError:_.CancellationError,OperationalError:_.OperationalError,TimeoutError:_.TimeoutError,AggregateError:_.AggregateError,Warning:h}},{"./es5.js":14,"./util.js":38}],14:[function(e,t,r){var n=function(){"use strict";return void 0===this}();if(n)t.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:n,propertyIsWritable:function(e,t){var r=Object.getOwnPropertyDescriptor(e,t);return!(r&&!r.writable&&!r.set)}};else{var i={}.hasOwnProperty,o={}.toString,a={}.constructor.prototype,u=function(e){var t=[];for(var r in e)i.call(e,r)&&t.push(r);return t},s=function(e,t){return{value:e[t]}},l=function(e,t,r){return e[t]=r.value,e},c=function(e){return e},f=function(e){try{return Object(e).constructor.prototype}catch(t){return a}},h=function(e){try{return"[object Array]"===o.call(e)}catch(t){return!1}};t.exports={isArray:h,keys:u,names:u,defineProperty:l,getDescriptor:s,freeze:c,getPrototypeOf:f,isES5:n,propertyIsWritable:function(){return!0}}}},{}],15:[function(e,t,r){"use strict";t.exports=function(e,t){var r=e.map;e.prototype.filter=function(e,n){return r(this,e,n,t)},e.filter=function(e,n,i){return r(e,n,i,t)}}},{}],16:[function(e,t,r){"use strict";t.exports=function(t,r,n){function i(){return this}function o(){throw this}function a(e){return function(){return e}}function u(e){return function(){throw e}}function s(e,t,r){var n;return n=h(t)?r?a(t):u(t):r?i:o,e._then(n,d,void 0,t,void 0)}function l(e){var i=this.promise,o=this.handler,a=i._isBound()?o.call(i._boundValue()):o();if(void 0!==a){var u=n(a,i);if(u instanceof t)return u=u._target(),s(u,e,i.isFulfilled())}return i.isRejected()?(r.e=e,r):e}function c(e){var r=this.promise,i=this.handler,o=r._isBound()?i.call(r._boundValue(),e):i(e);if(void 0!==o){var a=n(o,r);if(a instanceof t)return a=a._target(),s(a,e,!0)}return e}var f=e("./util.js"),h=f.isPrimitive,d=f.thrower;t.prototype._passThroughHandler=function(e,t){if("function"!=typeof e)return this.then();var r={promise:this,handler:e};return this._then(t?l:c,t?l:void 0,void 0,r,void 0)},t.prototype.lastly=t.prototype["finally"]=function(e){return this._passThroughHandler(e,!0)},t.prototype.tap=function(e){return this._passThroughHandler(e,!1)}}},{"./util.js":38}],17:[function(e,t,r){"use strict";t.exports=function(t,r,n,i){function o(e,r,n){for(var o=0;o<r.length;++o){n._pushContext();var a=f(r[o])(e);if(n._popContext(),a===c){n._pushContext();var u=t.reject(c.e);return n._popContext(),u}var s=i(a,n);if(s instanceof t)return s}return null}function a(e,r,i,o){var a=this._promise=new t(n);a._captureStackTrace(),this._stack=o,this._generatorFunction=e,this._receiver=r,this._generator=void 0,this._yieldHandlers="function"==typeof i?[i].concat(h):h}var u=e("./errors.js"),s=u.TypeError,l=e("./util.js"),c=l.errorObj,f=l.tryCatch,h=[];a.prototype.promise=function(){return this._promise},a.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._next(void 0)},a.prototype._continue=function(e){if(e===c)return this._promise._rejectCallback(e.e,!1,!0);var r=e.value;if(e.done===!0)this._promise._resolveCallback(r);else{var n=i(r,this._promise);if(!(n instanceof t)&&(n=o(n,this._yieldHandlers,this._promise),null===n))return void this._throw(new s("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/4Y4pDk\n\n".replace("%s",r)+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));n._then(this._next,this._throw,void 0,this,null)}},a.prototype._throw=function(e){this._promise._attachExtraTrace(e),this._promise._pushContext();var t=f(this._generator["throw"]).call(this._generator,e);this._promise._popContext(),this._continue(t)},a.prototype._next=function(e){this._promise._pushContext();var t=f(this._generator.next).call(this._generator,e);this._promise._popContext(),this._continue(t)},t.coroutine=function(e,t){if("function"!=typeof e)throw new s("generatorFunction must be a function\n\n    See http://goo.gl/6Vqhm0\n");var r=Object(t).yieldHandler,n=a,i=(new Error).stack;return function(){var t=e.apply(this,arguments),o=new n(void 0,void 0,r,i);return o._generator=t,o._next(void 0),o.promise()}},t.coroutine.addYieldHandler=function(e){if("function"!=typeof e)throw new s("fn must be a function\n\n    See http://goo.gl/916lJJ\n");h.push(e)},t.spawn=function(e){if("function"!=typeof e)return r("generatorFunction must be a function\n\n    See http://goo.gl/6Vqhm0\n");var n=new a(e,this),i=n.promise();return n._run(t.spawn),i}}},{"./errors.js":13,"./util.js":38}],18:[function(e,t,r){"use strict";t.exports=function(t,r,n,i){var o=e("./util.js");o.canEvaluate,o.tryCatch,o.errorObj;t.join=function(){var e,t=arguments.length-1;if(t>0&&"function"==typeof arguments[t]){e=arguments[t];var n}for(var i=arguments.length,o=new Array(i),a=0;i>a;++a)o[a]=arguments[a];e&&o.pop();var n=new r(o).promise();return void 0!==e?n.spread(e):n}}},{"./util.js":38}],19:[function(e,t,r){"use strict";t.exports=function(t,r,n,i,o){function a(e,t,r,n){this.constructor$(e),this._promise._captureStackTrace();var i=l();this._callback=null===i?t:i.bind(t),this._preservedValues=n===o?new Array(this.length()):null,this._limit=r,this._inFlight=0,this._queue=r>=1?[]:v,c.invoke(u,this,void 0)}function u(){this._init$(void 0,-2)}function s(e,t,r,n){var i="object"==typeof r&&null!==r?r.concurrency:0;return i="number"==typeof i&&isFinite(i)&&i>=1?i:0,new a(e,t,i,n)}var l=t._getDomain,c=e("./async.js"),f=e("./util.js"),h=f.tryCatch,d=f.errorObj,p={},v=[];f.inherits(a,r),a.prototype._init=function(){},a.prototype._promiseFulfilled=function(e,r){var n=this._values,o=this.length(),a=this._preservedValues,u=this._limit;if(n[r]===p){if(n[r]=e,u>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return}else{if(u>=1&&this._inFlight>=u)return n[r]=e,void this._queue.push(r);null!==a&&(a[r]=e);var s=this._callback,l=this._promise._boundValue();this._promise._pushContext();var c=h(s).call(l,e,r,o);if(this._promise._popContext(),c===d)return this._reject(c.e);var f=i(c,this._promise);if(f instanceof t){if(f=f._target(),f._isPending())return u>=1&&this._inFlight++,n[r]=p,f._proxyPromiseArray(this,r);if(!f._isFulfilled())return this._reject(f._reason());c=f._value()}n[r]=c}var v=++this._totalResolved;v>=o&&(null!==a?this._filter(n,a):this._resolve(n))},a.prototype._drainQueue=function(){for(var e=this._queue,t=this._limit,r=this._values;e.length>0&&this._inFlight<t;){if(this._isResolved())return;var n=e.pop();this._promiseFulfilled(r[n],n)}},a.prototype._filter=function(e,t){for(var r=t.length,n=new Array(r),i=0,o=0;r>o;++o)e[o]&&(n[i++]=t[o]);n.length=i,this._resolve(n)},a.prototype.preservedValues=function(){return this._preservedValues},t.prototype.map=function(e,t){return"function"!=typeof e?n("fn must be a function\n\n    See http://goo.gl/916lJJ\n"):s(this,e,t,null).promise()},t.map=function(e,t,r,i){return"function"!=typeof t?n("fn must be a function\n\n    See http://goo.gl/916lJJ\n"):s(e,t,r,i).promise()}}},{"./async.js":2,"./util.js":38}],20:[function(e,t,r){"use strict";t.exports=function(t,r,n,i){var o=e("./util.js"),a=o.tryCatch;t.method=function(e){if("function"!=typeof e)throw new t.TypeError("fn must be a function\n\n    See http://goo.gl/916lJJ\n");return function(){var n=new t(r);n._captureStackTrace(),n._pushContext();var i=a(e).apply(this,arguments);return n._popContext(),n._resolveFromSyncValue(i),n}},t.attempt=t["try"]=function(e,n,u){if("function"!=typeof e)return i("fn must be a function\n\n    See http://goo.gl/916lJJ\n");var s=new t(r);s._captureStackTrace(),s._pushContext();var l=o.isArray(n)?a(e).apply(u,n):a(e).call(u,n);return s._popContext(),s._resolveFromSyncValue(l),s},t.prototype._resolveFromSyncValue=function(e){e===o.errorObj?this._rejectCallback(e.e,!1,!0):this._resolveCallback(e,!0)}}},{"./util.js":38}],21:[function(e,t,r){"use strict";t.exports=function(t){function r(e,t){var r=this;if(!o.isArray(e))return n.call(r,e,t);var i=u(t).apply(r._boundValue(),[null].concat(e));i===s&&a.throwLater(i.e)}function n(e,t){var r=this,n=r._boundValue(),i=void 0===e?u(t).call(n,null):u(t).call(n,null,e);i===s&&a.throwLater(i.e)}function i(e,t){var r=this;if(!e){var n=r._target(),i=n._getCarriedStackTrace();i.cause=e,e=i}var o=u(t).call(r._boundValue(),e);o===s&&a.throwLater(o.e)}var o=e("./util.js"),a=e("./async.js"),u=o.tryCatch,s=o.errorObj;t.prototype.asCallback=t.prototype.nodeify=function(e,t){if("function"==typeof e){var o=n;void 0!==t&&Object(t).spread&&(o=r),this._then(o,i,void 0,this,e)}return this}}},{"./async.js":2,"./util.js":38}],22:[function(e,t,r){"use strict";t.exports=function(t,r){var n=e("./util.js"),i=e("./async.js"),o=n.tryCatch,a=n.errorObj;t.prototype.progressed=function(e){return this._then(void 0,void 0,e,void 0,void 0)},t.prototype._progress=function(e){this._isFollowingOrFulfilledOrRejected()||this._target()._progressUnchecked(e)},t.prototype._progressHandlerAt=function(e){return 0===e?this._progressHandler0:this[(e<<2)+e-5+2]},t.prototype._doProgressWith=function(e){var r=e.value,i=e.handler,u=e.promise,s=e.receiver,l=o(i).call(s,r);if(l===a){if(null!=l.e&&"StopProgressPropagation"!==l.e.name){var c=n.canAttachTrace(l.e)?l.e:new Error(n.toString(l.e));u._attachExtraTrace(c),u._progress(l.e)}}else l instanceof t?l._then(u._progress,null,null,u,void 0):u._progress(l)},t.prototype._progressUnchecked=function(e){for(var n=this._length(),o=this._progress,a=0;n>a;a++){var u=this._progressHandlerAt(a),s=this._promiseAt(a);if(s instanceof t)"function"==typeof u?i.invoke(this._doProgressWith,this,{handler:u,promise:s,receiver:this._receiverAt(a),value:e}):i.invoke(o,s,e);else{var l=this._receiverAt(a);"function"==typeof u?u.call(l,e,s):l instanceof r&&!l._isResolved()&&l._promiseProgressed(e,s)}}}}},{"./async.js":2,"./util.js":38}],23:[function(e,r,n){"use strict";r.exports=function(){function r(e){if("function"!=typeof e)throw new h("the promise constructor requires a resolver function\n\n    See http://goo.gl/EC22Yn\n");if(this.constructor!==r)throw new h("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/KsIlge\n");this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._progressHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._settledValue=void 0,e!==d&&this._resolveFromResolver(e)}function n(e){var t=new r(d);t._fulfillmentHandler0=e,t._rejectionHandler0=e,t._progressHandler0=e,t._promise0=e,t._receiver0=e,t._settledValue=e}var i,o=function(){return new h("circular promise resolution chain\n\n    See http://goo.gl/LhFpo0\n")},a=function(){return new r.PromiseInspection(this._target())},u=function(e){return r.reject(new h(e))},s=e("./util.js");i=s.isNode?function(){var e=t.domain;return void 0===e&&(e=null),e}:function(){return null},s.notEnumerableProp(r,"_getDomain",i);var l={},c=e("./async.js"),f=e("./errors.js"),h=r.TypeError=f.TypeError;r.RangeError=f.RangeError,r.CancellationError=f.CancellationError,r.TimeoutError=f.TimeoutError,r.OperationalError=f.OperationalError,r.RejectionError=f.OperationalError,r.AggregateError=f.AggregateError;var d=function(){},p={},v={e:null},y=e("./thenables.js")(r,d),g=e("./promise_array.js")(r,d,y,u),b=e("./captured_trace.js")(),m=e("./debuggability.js")(r,b),_=e("./context.js")(r,b,m),w=e("./catch_filter.js")(v),j=e("./promise_resolver.js"),A=j._nodebackForPromise,E=s.errorObj,k=s.tryCatch;return r.prototype.toString=function(){return"[object Promise]"},r.prototype.caught=r.prototype["catch"]=function(e){var t=arguments.length;if(t>1){var n,i=new Array(t-1),o=0;for(n=0;t-1>n;++n){var a=arguments[n];if("function"!=typeof a)return r.reject(new h("Catch filter must inherit from Error or be a simple predicate function\n\n    See http://goo.gl/o84o68\n"));i[o++]=a}i.length=o,e=arguments[n];var u=new w(i,e,this);return this._then(void 0,u.doFilter,void 0,u,void 0)}return this._then(void 0,e,void 0,void 0,void 0)},r.prototype.reflect=function(){return this._then(a,a,void 0,this,void 0)},r.prototype.then=function(e,t,r){if(m()&&arguments.length>0&&"function"!=typeof e&&"function"!=typeof t){var n=".then() only accepts functions but was passed: "+s.classString(e);arguments.length>1&&(n+=", "+s.classString(t)),this._warn(n)}return this._then(e,t,r,void 0,void 0)},r.prototype.done=function(e,t,r){var n=this._then(e,t,r,void 0,void 0);n._setIsFinal()},r.prototype.spread=function(e,t){return this.all()._then(e,t,void 0,p,void 0)},r.prototype.isCancellable=function(){return!this.isResolved()&&this._cancellable()},r.prototype.toJSON=function(){var e={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(e.fulfillmentValue=this.value(),e.isFulfilled=!0):this.isRejected()&&(e.rejectionReason=this.reason(),e.isRejected=!0),e},r.prototype.all=function(){return new g(this).promise()},r.prototype.error=function(e){return this.caught(s.originatesFromRejection,e)},r.is=function(e){return e instanceof r},r.fromNode=function(e){var t=new r(d),n=k(e)(A(t));return n===E&&t._rejectCallback(n.e,!0,!0),t},r.all=function(e){return new g(e).promise()},r.defer=r.pending=function(){var e=new r(d);return new j(e)},r.cast=function(e){var t=y(e);if(!(t instanceof r)){var n=t;t=new r(d),t._fulfillUnchecked(n)}return t},r.resolve=r.fulfilled=r.cast,r.reject=r.rejected=function(e){var t=new r(d);return t._captureStackTrace(),t._rejectCallback(e,!0),t},r.setScheduler=function(e){if("function"!=typeof e)throw new h("fn must be a function\n\n    See http://goo.gl/916lJJ\n");var t=c._schedule;return c._schedule=e,t},r.prototype._then=function(e,t,n,o,a){var u=void 0!==a,s=u?a:new r(d);u||(s._propagateFrom(this,5),s._captureStackTrace());var l=this._target();l!==this&&(void 0===o&&(o=this._boundTo),u||s._setIsMigrated());var f=l._addCallbacks(e,t,n,s,o,i());return l._isResolved()&&!l._isSettlePromisesQueued()&&c.invoke(l._settlePromiseAtPostResolution,l,f),s},r.prototype._settlePromiseAtPostResolution=function(e){this._isRejectionUnhandled()&&this._unsetRejectionIsUnhandled(),this._settlePromiseAt(e)},r.prototype._length=function(){return 131071&this._bitField},r.prototype._isFollowingOrFulfilledOrRejected=function(){return(939524096&this._bitField)>0},r.prototype._isFollowing=function(){return 536870912===(536870912&this._bitField)},r.prototype._setLength=function(e){this._bitField=-131072&this._bitField|131071&e},r.prototype._setFulfilled=function(){this._bitField=268435456|this._bitField},r.prototype._setRejected=function(){this._bitField=134217728|this._bitField},r.prototype._setFollowing=function(){this._bitField=536870912|this._bitField},r.prototype._setIsFinal=function(){this._bitField=33554432|this._bitField},r.prototype._isFinal=function(){return(33554432&this._bitField)>0},r.prototype._cancellable=function(){return(67108864&this._bitField)>0},r.prototype._setCancellable=function(){this._bitField=67108864|this._bitField},r.prototype._unsetCancellable=function(){this._bitField=-67108865&this._bitField},r.prototype._setIsMigrated=function(){this._bitField=4194304|this._bitField},r.prototype._unsetIsMigrated=function(){this._bitField=-4194305&this._bitField},r.prototype._isMigrated=function(){return(4194304&this._bitField)>0},r.prototype._receiverAt=function(e){var t=0===e?this._receiver0:this[5*e-5+4];return t===l?void 0:void 0===t&&this._isBound()?this._boundValue():t},r.prototype._promiseAt=function(e){return 0===e?this._promise0:this[5*e-5+3]},r.prototype._fulfillmentHandlerAt=function(e){return 0===e?this._fulfillmentHandler0:this[5*e-5+0]},r.prototype._rejectionHandlerAt=function(e){return 0===e?this._rejectionHandler0:this[5*e-5+1]},r.prototype._boundValue=function(){var e=this._boundTo;return void 0!==e&&e instanceof r?e.isFulfilled()?e.value():void 0:e},r.prototype._migrateCallbacks=function(e,t){var n=e._fulfillmentHandlerAt(t),i=e._rejectionHandlerAt(t),o=e._progressHandlerAt(t),a=e._promiseAt(t),u=e._receiverAt(t);a instanceof r&&a._setIsMigrated(),void 0===u&&(u=l),this._addCallbacks(n,i,o,a,u,null)},r.prototype._addCallbacks=function(e,t,r,n,i,o){var a=this._length();if(a>=131066&&(a=0,this._setLength(0)),0===a)this._promise0=n,void 0!==i&&(this._receiver0=i),"function"!=typeof e||this._isCarryingStackTrace()||(this._fulfillmentHandler0=null===o?e:o.bind(e)),"function"==typeof t&&(this._rejectionHandler0=null===o?t:o.bind(t)),"function"==typeof r&&(this._progressHandler0=null===o?r:o.bind(r));else{var u=5*a-5;this[u+3]=n,this[u+4]=i,"function"==typeof e&&(this[u+0]=null===o?e:o.bind(e)),"function"==typeof t&&(this[u+1]=null===o?t:o.bind(t)),"function"==typeof r&&(this[u+2]=null===o?r:o.bind(r))}return this._setLength(a+1),a},r.prototype._setProxyHandlers=function(e,t){var r=this._length();if(r>=131066&&(r=0,this._setLength(0)),0===r)this._promise0=t,this._receiver0=e;else{var n=5*r-5;this[n+3]=t,this[n+4]=e}this._setLength(r+1)},r.prototype._proxyPromiseArray=function(e,t){this._setProxyHandlers(e,t)},r.prototype._resolveCallback=function(e,t){if(!this._isFollowingOrFulfilledOrRejected()){if(e===this)return this._rejectCallback(o(),!1,!0);var n=y(e,this);if(!(n instanceof r))return this._fulfill(e);var i=1|(t?4:0);this._propagateFrom(n,i);var a=n._target();if(a._isPending()){for(var u=this._length(),s=0;u>s;++s)a._migrateCallbacks(this,s);this._setFollowing(),this._setLength(0),this._setFollowee(a)}else a._isFulfilled()?this._fulfillUnchecked(a._value()):this._rejectUnchecked(a._reason(),a._getCarriedStackTrace())}},r.prototype._rejectCallback=function(e,t,r){r||s.markAsOriginatingFromRejection(e);var n=s.ensureErrorObject(e),i=n===e;this._attachExtraTrace(n,t?i:!1),this._reject(e,i?void 0:n)},r.prototype._resolveFromResolver=function(e){var t=this;this._captureStackTrace(),this._pushContext();var r=!0,n=k(e)(function(e){null!==t&&(t._resolveCallback(e),t=null)},function(e){null!==t&&(t._rejectCallback(e,r),t=null)});r=!1,this._popContext(),void 0!==n&&n===E&&null!==t&&(t._rejectCallback(n.e,!0,!0),t=null)},r.prototype._settlePromiseFromHandler=function(e,t,r,n){if(!n._isRejected()){n._pushContext();var i;if(i=t!==p||this._isRejected()?k(e).call(t,r):k(e).apply(this._boundValue(),r),n._popContext(),i===E||i===n||i===v){var a=i===n?o():i.e;n._rejectCallback(a,!1,!0);
}else n._resolveCallback(i)}},r.prototype._target=function(){for(var e=this;e._isFollowing();)e=e._followee();return e},r.prototype._followee=function(){return this._rejectionHandler0},r.prototype._setFollowee=function(e){this._rejectionHandler0=e},r.prototype._cleanValues=function(){this._cancellable()&&(this._cancellationParent=void 0)},r.prototype._propagateFrom=function(e,t){(1&t)>0&&e._cancellable()&&(this._setCancellable(),this._cancellationParent=e),(4&t)>0&&e._isBound()&&this._setBoundTo(e._boundTo)},r.prototype._fulfill=function(e){this._isFollowingOrFulfilledOrRejected()||this._fulfillUnchecked(e)},r.prototype._reject=function(e,t){this._isFollowingOrFulfilledOrRejected()||this._rejectUnchecked(e,t)},r.prototype._settlePromiseAt=function(e){var t=this._promiseAt(e),n=t instanceof r;if(n&&t._isMigrated())return t._unsetIsMigrated(),c.invoke(this._settlePromiseAt,this,e);var i=this._isFulfilled()?this._fulfillmentHandlerAt(e):this._rejectionHandlerAt(e),o=this._isCarryingStackTrace()?this._getCarriedStackTrace():void 0,a=this._settledValue,u=this._receiverAt(e);this._clearCallbackDataAtIndex(e),"function"==typeof i?n?this._settlePromiseFromHandler(i,u,a,t):i.call(u,a,t):u instanceof g?u._isResolved()||(this._isFulfilled()?u._promiseFulfilled(a,t):u._promiseRejected(a,t)):n&&(this._isFulfilled()?t._fulfill(a):t._reject(a,o)),e>=4&&4===(31&e)&&c.invokeLater(this._setLength,this,0)},r.prototype._clearCallbackDataAtIndex=function(e){if(0===e)this._isCarryingStackTrace()||(this._fulfillmentHandler0=void 0),this._rejectionHandler0=this._progressHandler0=this._receiver0=this._promise0=void 0;else{var t=5*e-5;this[t+3]=this[t+4]=this[t+0]=this[t+1]=this[t+2]=void 0}},r.prototype._isSettlePromisesQueued=function(){return-1073741824===(-1073741824&this._bitField)},r.prototype._setSettlePromisesQueued=function(){this._bitField=-1073741824|this._bitField},r.prototype._unsetSettlePromisesQueued=function(){this._bitField=1073741823&this._bitField},r.prototype._queueSettlePromises=function(){c.settlePromises(this),this._setSettlePromisesQueued()},r.prototype._fulfillUnchecked=function(e){if(e===this){var t=o();return this._attachExtraTrace(t),this._rejectUnchecked(t,void 0)}this._setFulfilled(),this._settledValue=e,this._cleanValues(),this._length()>0&&this._queueSettlePromises()},r.prototype._rejectUncheckedCheckError=function(e){var t=s.ensureErrorObject(e);this._rejectUnchecked(e,t===e?void 0:t)},r.prototype._rejectUnchecked=function(e,t){if(e===this){var r=o();return this._attachExtraTrace(r),this._rejectUnchecked(r)}return this._setRejected(),this._settledValue=e,this._cleanValues(),this._isFinal()?void c.throwLater(function(e){throw"stack"in e&&c.invokeFirst(b.unhandledRejection,void 0,e),e},void 0===t?e:t):(void 0!==t&&t!==e&&this._setCarriedStackTrace(t),void(this._length()>0?this._queueSettlePromises():this._ensurePossibleRejectionHandled()))},r.prototype._settlePromises=function(){this._unsetSettlePromisesQueued();for(var e=this._length(),t=0;e>t;t++)this._settlePromiseAt(t)},s.notEnumerableProp(r,"_makeSelfResolutionError",o),e("./progress.js")(r,g),e("./method.js")(r,d,y,u),e("./bind.js")(r,d,y),e("./finally.js")(r,v,y),e("./direct_resolve.js")(r),e("./synchronous_inspection.js")(r),e("./join.js")(r,g,y,d),r.Promise=r,e("./map.js")(r,g,u,y,d),e("./cancel.js")(r),e("./using.js")(r,u,y,_),e("./generators.js")(r,u,d,y),e("./nodeify.js")(r),e("./call_get.js")(r),e("./props.js")(r,g,y,u),e("./race.js")(r,d,y,u),e("./reduce.js")(r,g,u,y,d),e("./settle.js")(r,g),e("./some.js")(r,g,u),e("./promisify.js")(r,d),e("./any.js")(r),e("./each.js")(r,d),e("./timers.js")(r,d),e("./filter.js")(r,d),s.toFastProperties(r),s.toFastProperties(r.prototype),n({a:1}),n({b:2}),n({c:3}),n(1),n(function(){}),n(void 0),n(!1),n(new r(d)),b.setBounds(c.firstLineError,s.lastLineError),r}},{"./any.js":1,"./async.js":2,"./bind.js":3,"./call_get.js":5,"./cancel.js":6,"./captured_trace.js":7,"./catch_filter.js":8,"./context.js":9,"./debuggability.js":10,"./direct_resolve.js":11,"./each.js":12,"./errors.js":13,"./filter.js":15,"./finally.js":16,"./generators.js":17,"./join.js":18,"./map.js":19,"./method.js":20,"./nodeify.js":21,"./progress.js":22,"./promise_array.js":24,"./promise_resolver.js":25,"./promisify.js":26,"./props.js":27,"./race.js":29,"./reduce.js":30,"./settle.js":32,"./some.js":33,"./synchronous_inspection.js":34,"./thenables.js":35,"./timers.js":36,"./using.js":37,"./util.js":38}],24:[function(e,t,r){"use strict";t.exports=function(t,r,n,i){function o(e){switch(e){case-2:return[];case-3:return{}}}function a(e){var n,i=this._promise=new t(r);e instanceof t&&(n=e,i._propagateFrom(n,5)),this._values=e,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var u=e("./util.js"),s=u.isArray;return a.prototype.length=function(){return this._length},a.prototype.promise=function(){return this._promise},a.prototype._init=function l(e,r){var a=n(this._values,this._promise);if(a instanceof t){if(a=a._target(),this._values=a,!a._isFulfilled())return a._isPending()?void a._then(l,this._reject,void 0,this,r):void this._reject(a._reason());if(a=a._value(),!s(a)){var u=new t.TypeError("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n");return void this.__hardReject__(u)}}else if(!s(a))return void this._promise._reject(i("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n")._reason());if(0===a.length)return void(-5===r?this._resolveEmptyArray():this._resolve(o(r)));var c=this.getActualLength(a.length);this._length=c,this._values=this.shouldCopyValues()?new Array(c):this._values;for(var f=this._promise,h=0;c>h;++h){var d=this._isResolved(),p=n(a[h],f);p instanceof t?(p=p._target(),d?p._ignoreRejections():p._isPending()?p._proxyPromiseArray(this,h):p._isFulfilled()?this._promiseFulfilled(p._value(),h):this._promiseRejected(p._reason(),h)):d||this._promiseFulfilled(p,h)}},a.prototype._isResolved=function(){return null===this._values},a.prototype._resolve=function(e){this._values=null,this._promise._fulfill(e)},a.prototype.__hardReject__=a.prototype._reject=function(e){this._values=null,this._promise._rejectCallback(e,!1,!0)},a.prototype._promiseProgressed=function(e,t){this._promise._progress({index:t,value:e})},a.prototype._promiseFulfilled=function(e,t){this._values[t]=e;var r=++this._totalResolved;r>=this._length&&this._resolve(this._values)},a.prototype._promiseRejected=function(e,t){this._totalResolved++,this._reject(e)},a.prototype.shouldCopyValues=function(){return!0},a.prototype.getActualLength=function(e){return e},a}},{"./util.js":38}],25:[function(e,t,r){"use strict";function n(e){return e instanceof Error&&d.getPrototypeOf(e)===Error.prototype}function i(e){var t;if(n(e)){t=new f(e),t.name=e.name,t.message=e.message,t.stack=e.stack;for(var r=d.keys(e),i=0;i<r.length;++i){var o=r[i];p.test(o)||(t[o]=e[o])}return t}return u.markAsOriginatingFromRejection(e),e}function o(e){return function(t,r){if(null!==e){if(t){var n=i(s(t));e._attachExtraTrace(n),e._reject(n)}else if(arguments.length>2){for(var o=arguments.length,a=new Array(o-1),u=1;o>u;++u)a[u-1]=arguments[u];e._fulfill(a)}else e._fulfill(r);e=null}}}var a,u=e("./util.js"),s=u.maybeWrapAsError,l=e("./errors.js"),c=l.TimeoutError,f=l.OperationalError,h=u.haveGetters,d=e("./es5.js"),p=/^(?:name|message|stack|cause)$/;if(a=h?function(e){this.promise=e}:function(e){this.promise=e,this.asCallback=o(e),this.callback=this.asCallback},h){var v={get:function(){return o(this.promise)}};d.defineProperty(a.prototype,"asCallback",v),d.defineProperty(a.prototype,"callback",v)}a._nodebackForPromise=o,a.prototype.toString=function(){return"[object PromiseResolver]"},a.prototype.resolve=a.prototype.fulfill=function(e){if(!(this instanceof a))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");this.promise._resolveCallback(e)},a.prototype.reject=function(e){if(!(this instanceof a))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");this.promise._rejectCallback(e)},a.prototype.progress=function(e){if(!(this instanceof a))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");this.promise._progress(e)},a.prototype.cancel=function(e){this.promise.cancel(e)},a.prototype.timeout=function(){this.reject(new c("timeout"))},a.prototype.isResolved=function(){return this.promise.isResolved()},a.prototype.toJSON=function(){return this.promise.toJSON()},t.exports=a},{"./errors.js":13,"./es5.js":14,"./util.js":38}],26:[function(e,t,r){"use strict";t.exports=function(t,r){function n(e){return!j.test(e)}function i(e){try{return e.__isPromisified__===!0}catch(t){return!1}}function o(e,t,r){var n=d.getDataPropertyOrDefault(e,t+r,_);return n?i(n):!1}function a(e,t,r){for(var n=0;n<e.length;n+=2){var i=e[n];if(r.test(i))for(var o=i.replace(r,""),a=0;a<e.length;a+=2)if(e[a]===o)throw new b("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/iWrZbw\n".replace("%s",t))}}function u(e,t,r,n){for(var u=d.inheritedDataKeys(e),s=[],l=0;l<u.length;++l){var c=u[l],f=e[c],h=n===A?!0:A(c,f,e);"function"!=typeof f||i(f)||o(e,c,t)||!n(c,f,e,h)||s.push(c,f)}return a(s,t,r),s}function s(e,n,i,o){function a(){var i=n;n===h&&(i=this);var o=new t(r);o._captureStackTrace();var a="string"==typeof s&&this!==u?this[s]:e,l=p(o);try{a.apply(i,v(arguments,l))}catch(c){o._rejectCallback(y(c),!0,!0)}return o}var u=function(){return this}(),s=e;return"string"==typeof s&&(e=o),d.notEnumerableProp(a,"__isPromisified__",!0),a}function l(e,t,r,n){for(var i=new RegExp(E(t)+"$"),o=u(e,t,i,r),a=0,s=o.length;s>a;a+=2){var l=o[a],c=o[a+1],f=l+t;if(n===k)e[f]=k(l,h,l,c,t);else{var p=n(c,function(){return k(l,h,l,c,t)});d.notEnumerableProp(p,"__isPromisified__",!0),e[f]=p}}return d.toFastProperties(e),e}function c(e,t){return k(e,t,void 0,e)}var f,h={},d=e("./util.js"),p=e("./promise_resolver.js")._nodebackForPromise,v=d.withAppended,y=d.maybeWrapAsError,g=d.canEvaluate,b=e("./errors").TypeError,m="Async",_={__isPromisified__:!0},w=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],j=new RegExp("^(?:"+w.join("|")+")$"),A=function(e){return d.isIdentifier(e)&&"_"!==e.charAt(0)&&"constructor"!==e},E=function(e){return e.replace(/([$])/,"\\$")},k=g?f:s;t.promisify=function(e,t){if("function"!=typeof e)throw new b("fn must be a function\n\n    See http://goo.gl/916lJJ\n");if(i(e))return e;var r=c(e,arguments.length<2?h:t);return d.copyDescriptors(e,r,n),r},t.promisifyAll=function(e,t){if("function"!=typeof e&&"object"!=typeof e)throw new b("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/9ITlV0\n");t=Object(t);var r=t.suffix;"string"!=typeof r&&(r=m);var n=t.filter;"function"!=typeof n&&(n=A);var i=t.promisifier;if("function"!=typeof i&&(i=k),!d.isIdentifier(r))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/8FZo5V\n");for(var o=d.inheritedDataKeys(e),a=0;a<o.length;++a){var u=e[o[a]];"constructor"!==o[a]&&d.isClass(u)&&(l(u.prototype,r,n,i),l(u,r,n,i))}return l(e,r,n,i)}}},{"./errors":13,"./promise_resolver.js":25,"./util.js":38}],27:[function(e,t,r){"use strict";t.exports=function(t,r,n,i){function o(e){for(var t=l.keys(e),r=t.length,n=new Array(2*r),i=0;r>i;++i){var o=t[i];n[i]=e[o],n[i+r]=o}this.constructor$(n)}function a(e){var r,a=n(e);return s(a)?(r=a instanceof t?a._then(t.props,void 0,void 0,void 0,void 0):new o(a).promise(),a instanceof t&&r._propagateFrom(a,4),r):i("cannot await properties of a non-object\n\n    See http://goo.gl/OsFKC8\n")}var u=e("./util.js"),s=u.isObject,l=e("./es5.js");u.inherits(o,r),o.prototype._init=function(){this._init$(void 0,-3)},o.prototype._promiseFulfilled=function(e,t){this._values[t]=e;var r=++this._totalResolved;if(r>=this._length){for(var n={},i=this.length(),o=0,a=this.length();a>o;++o)n[this._values[o+i]]=this._values[o];this._resolve(n)}},o.prototype._promiseProgressed=function(e,t){this._promise._progress({key:this._values[t+this.length()],value:e})},o.prototype.shouldCopyValues=function(){return!1},o.prototype.getActualLength=function(e){return e>>1},t.prototype.props=function(){return a(this)},t.props=function(e){return a(e)}}},{"./es5.js":14,"./util.js":38}],28:[function(e,t,r){"use strict";function n(e,t,r,n,i){for(var o=0;i>o;++o)r[o+n]=e[o+t],e[o+t]=void 0}function i(e){this._capacity=e,this._length=0,this._front=0}i.prototype._willBeOverCapacity=function(e){return this._capacity<e},i.prototype._pushOne=function(e){var t=this.length();this._checkCapacity(t+1);var r=this._front+t&this._capacity-1;this[r]=e,this._length=t+1},i.prototype._unshiftOne=function(e){var t=this._capacity;this._checkCapacity(this.length()+1);var r=this._front,n=(r-1&t-1^t)-t;this[n]=e,this._front=n,this._length=this.length()+1},i.prototype.unshift=function(e,t,r){this._unshiftOne(r),this._unshiftOne(t),this._unshiftOne(e)},i.prototype.push=function(e,t,r){var n=this.length()+3;if(this._willBeOverCapacity(n))return this._pushOne(e),this._pushOne(t),void this._pushOne(r);var i=this._front+n-3;this._checkCapacity(n);var o=this._capacity-1;this[i+0&o]=e,this[i+1&o]=t,this[i+2&o]=r,this._length=n},i.prototype.shift=function(){var e=this._front,t=this[e];return this[e]=void 0,this._front=e+1&this._capacity-1,this._length--,t},i.prototype.length=function(){return this._length},i.prototype._checkCapacity=function(e){this._capacity<e&&this._resizeTo(this._capacity<<1)},i.prototype._resizeTo=function(e){var t=this._capacity;this._capacity=e;var r=this._front,i=this._length,o=r+i&t-1;n(this,0,this,t,o)},t.exports=i},{}],29:[function(e,t,r){"use strict";t.exports=function(t,r,n,i){function o(e,o){var s=n(e);if(s instanceof t)return u(s);if(!a(e))return i("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n");var l=new t(r);void 0!==o&&l._propagateFrom(o,5);for(var c=l._fulfill,f=l._reject,h=0,d=e.length;d>h;++h){var p=e[h];(void 0!==p||h in e)&&t.cast(p)._then(c,f,void 0,l,null)}return l}var a=e("./util.js").isArray,u=function(e){return e.then(function(t){return o(t,e)})};t.race=function(e){return o(e,void 0)},t.prototype.race=function(){return o(this,void 0)}}},{"./util.js":38}],30:[function(e,t,r){"use strict";t.exports=function(t,r,n,i,o){function a(e,r,n,a){this.constructor$(e),this._promise._captureStackTrace(),this._preservedValues=a===o?[]:null,this._zerothIsAccum=void 0===n,this._gotAccum=!1,this._reducingIndex=this._zerothIsAccum?1:0,this._valuesPhase=void 0;var s=i(n,this._promise),f=!1,h=s instanceof t;h&&(s=s._target(),s._isPending()?s._proxyPromiseArray(this,-1):s._isFulfilled()?(n=s._value(),this._gotAccum=!0):(this._reject(s._reason()),f=!0)),h||this._zerothIsAccum||(this._gotAccum=!0);var d=l();this._callback=null===d?r:d.bind(r),this._accum=n,f||c.invoke(u,this,void 0)}function u(){this._init$(void 0,-5)}function s(e,t,r,i){if("function"!=typeof t)return n("fn must be a function\n\n    See http://goo.gl/916lJJ\n");var o=new a(e,t,r,i);return o.promise()}var l=t._getDomain,c=e("./async.js"),f=e("./util.js"),h=f.tryCatch,d=f.errorObj;f.inherits(a,r),a.prototype._init=function(){},a.prototype._resolveEmptyArray=function(){(this._gotAccum||this._zerothIsAccum)&&this._resolve(null!==this._preservedValues?[]:this._accum)},a.prototype._promiseFulfilled=function(e,r){var n=this._values;n[r]=e;var o,a=this.length(),u=this._preservedValues,s=null!==u,l=this._gotAccum,c=this._valuesPhase;if(!c)for(c=this._valuesPhase=new Array(a),o=0;a>o;++o)c[o]=0;if(o=c[r],0===r&&this._zerothIsAccum?(this._accum=e,this._gotAccum=l=!0,c[r]=0===o?1:2):-1===r?(this._accum=e,this._gotAccum=l=!0):0===o?c[r]=1:(c[r]=2,this._accum=e),l){for(var f,p=this._callback,v=this._promise._boundValue(),y=this._reducingIndex;a>y;++y)if(o=c[y],2!==o){if(1!==o)return;if(e=n[y],this._promise._pushContext(),s?(u.push(e),f=h(p).call(v,e,y,a)):f=h(p).call(v,this._accum,e,y,a),this._promise._popContext(),f===d)return this._reject(f.e);var g=i(f,this._promise);if(g instanceof t){if(g=g._target(),g._isPending())return c[y]=4,g._proxyPromiseArray(this,y);if(!g._isFulfilled())return this._reject(g._reason());f=g._value()}this._reducingIndex=y+1,this._accum=f}else this._reducingIndex=y+1;this._resolve(s?u:this._accum)}},t.prototype.reduce=function(e,t){return s(this,e,t,null)},t.reduce=function(e,t,r,n){return s(e,t,r,n)}}},{"./async.js":2,"./util.js":38}],31:[function(e,r,n){"use strict";var o,a=e("./util"),u=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/m3OTXk\n")};if(a.isNode&&"undefined"==typeof MutationObserver){var s=i.setImmediate,l=t.nextTick;o=a.isRecentNode?function(e){s.call(i,e)}:function(e){l.call(t,e)}}else"undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&window.navigator.standalone?o="undefined"!=typeof setImmediate?function(e){setImmediate(e)}:"undefined"!=typeof setTimeout?function(e){setTimeout(e,0)}:u:(o=function(e){var t=document.createElement("div"),r=new MutationObserver(e);return r.observe(t,{attributes:!0}),function(){t.classList.toggle("foo")}},o.isStatic=!0);r.exports=o},{"./util":38}],32:[function(e,t,r){"use strict";t.exports=function(t,r){function n(e){this.constructor$(e)}var i=t.PromiseInspection,o=e("./util.js");o.inherits(n,r),n.prototype._promiseResolved=function(e,t){this._values[e]=t;var r=++this._totalResolved;r>=this._length&&this._resolve(this._values)},n.prototype._promiseFulfilled=function(e,t){var r=new i;r._bitField=268435456,r._settledValue=e,this._promiseResolved(t,r)},n.prototype._promiseRejected=function(e,t){var r=new i;r._bitField=134217728,r._settledValue=e,this._promiseResolved(t,r)},t.settle=function(e){return new n(e).promise()},t.prototype.settle=function(){return new n(this).promise()}}},{"./util.js":38}],33:[function(e,t,r){"use strict";t.exports=function(t,r,n){function i(e){this.constructor$(e),this._howMany=0,this._unwrap=!1,this._initialized=!1}function o(e,t){if((0|t)!==t||0>t)return n("expecting a positive integer\n\n    See http://goo.gl/1wAmHx\n");var r=new i(e),o=r.promise();return r.setHowMany(t),r.init(),o}var a=e("./util.js"),u=e("./errors.js").RangeError,s=e("./errors.js").AggregateError,l=a.isArray;a.inherits(i,r),i.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var e=l(this._values);!this._isResolved()&&e&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},i.prototype.init=function(){this._initialized=!0,this._init()},i.prototype.setUnwrap=function(){this._unwrap=!0},i.prototype.howMany=function(){return this._howMany},i.prototype.setHowMany=function(e){this._howMany=e},i.prototype._promiseFulfilled=function(e){this._addFulfilled(e),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values))},i.prototype._promiseRejected=function(e){if(this._addRejected(e),this.howMany()>this._canPossiblyFulfill()){for(var t=new s,r=this.length();r<this._values.length;++r)t.push(this._values[r]);this._reject(t)}},i.prototype._fulfilled=function(){return this._totalResolved},i.prototype._rejected=function(){return this._values.length-this.length()},i.prototype._addRejected=function(e){this._values.push(e)},i.prototype._addFulfilled=function(e){this._values[this._totalResolved++]=e},i.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},i.prototype._getRangeError=function(e){var t="Input array must contain at least "+this._howMany+" items but contains only "+e+" items";return new u(t)},i.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},t.some=function(e,t){return o(e,t)},t.prototype.some=function(e){return o(this,e)},t._SomePromiseArray=i}},{"./errors.js":13,"./util.js":38}],34:[function(e,t,r){"use strict";t.exports=function(e){function t(e){void 0!==e?(e=e._target(),this._bitField=e._bitField,this._settledValue=e._settledValue):(this._bitField=0,this._settledValue=void 0)}t.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/hc1DLj\n");return this._settledValue},t.prototype.error=t.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/hPuiwB\n");return this._settledValue},t.prototype.isFulfilled=e.prototype._isFulfilled=function(){return(268435456&this._bitField)>0},t.prototype.isRejected=e.prototype._isRejected=function(){return(134217728&this._bitField)>0},t.prototype.isPending=e.prototype._isPending=function(){return 0===(402653184&this._bitField)},t.prototype.isResolved=e.prototype._isResolved=function(){return(402653184&this._bitField)>0},e.prototype.isPending=function(){return this._target()._isPending()},e.prototype.isRejected=function(){return this._target()._isRejected()},e.prototype.isFulfilled=function(){return this._target()._isFulfilled()},e.prototype.isResolved=function(){return this._target()._isResolved()},e.prototype._value=function(){return this._settledValue},e.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue},e.prototype.value=function(){var e=this._target();if(!e.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/hc1DLj\n");return e._settledValue},e.prototype.reason=function(){var e=this._target();if(!e.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/hPuiwB\n");return e._unsetRejectionIsUnhandled(),e._settledValue},e.PromiseInspection=t}},{}],35:[function(e,t,r){"use strict";t.exports=function(t,r){function n(e,n){if(l(e)){if(e instanceof t)return e;if(o(e)){var c=new t(r);return e._then(c._fulfillUnchecked,c._rejectUncheckedCheckError,c._progressUnchecked,c,null),c}var f=u.tryCatch(i)(e);if(f===s){n&&n._pushContext();var c=t.reject(f.e);return n&&n._popContext(),c}if("function"==typeof f)return a(e,f,n)}return e}function i(e){return e.then}function o(e){return c.call(e,"_promise0")}function a(e,n,i){function o(e){c&&(c._resolveCallback(e),c=null)}function a(e){c&&(c._rejectCallback(e,h,!0),c=null)}function l(e){c&&"function"==typeof c._progress&&c._progress(e)}var c=new t(r),f=c;i&&i._pushContext(),c._captureStackTrace(),i&&i._popContext();var h=!0,d=u.tryCatch(n).call(e,o,a,l);return h=!1,c&&d===s&&(c._rejectCallback(d.e,!0,!0),c=null),f}var u=e("./util.js"),s=u.errorObj,l=u.isObject,c={}.hasOwnProperty;return n}},{"./util.js":38}],36:[function(e,t,r){"use strict";t.exports=function(t,r){function n(e){var t=this;return t instanceof Number&&(t=+t),clearTimeout(t),e}function i(e){var t=this;throw t instanceof Number&&(t=+t),clearTimeout(t),e}var o=e("./util.js"),a=t.TimeoutError,u=function(e,t){if(e.isPending()){var r;!o.isPrimitive(t)&&t instanceof Error?r=t:("string"!=typeof t&&(t="operation timed out"),r=new a(t)),o.markAsOriginatingFromRejection(r),e._attachExtraTrace(r),e._cancel(r)}},s=function(e){return l(+this).thenReturn(e)},l=t.delay=function(e,n){if(void 0===n){n=e,e=void 0;var i=new t(r);return setTimeout(function(){i._fulfill()},n),i}return n=+n,t.resolve(e)._then(s,null,null,n,void 0)};t.prototype.delay=function(e){return l(this,e)},t.prototype.timeout=function(e,t){e=+e;var r=this.then().cancellable();r._cancellationParent=this;var o=setTimeout(function(){u(r,t)},e);return r._then(n,i,void 0,o,void 0)}}},{"./util.js":38}],37:[function(e,t,r){"use strict";t.exports=function(t,r,n,i){function o(e){for(var r=e.length,n=0;r>n;++n){var i=e[n];if(i.isRejected())return t.reject(i.error());e[n]=i._settledValue}return e}function a(e){setTimeout(function(){throw e},0)}function u(e){var t=n(e);return t!==e&&"function"==typeof e._isDisposable&&"function"==typeof e._getDisposer&&e._isDisposable()&&t._setDisposable(e._getDisposer()),t}function s(e,r){function i(){if(o>=s)return l.resolve();var c=u(e[o++]);if(c instanceof t&&c._isDisposable()){try{c=n(c._getDisposer().tryDispose(r),e.promise)}catch(f){return a(f)}if(c instanceof t)return c._then(i,a,null,null,null)}i()}var o=0,s=e.length,l=t.defer();return i(),l.promise}function l(e){var t=new y;return t._settledValue=e,t._bitField=268435456,s(this,t).thenReturn(e)}function c(e){var t=new y;return t._settledValue=e,t._bitField=134217728,s(this,t).thenThrow(e)}function f(e,t,r){this._data=e,this._promise=t,this._context=r}function h(e,t,r){this.constructor$(e,t,r)}function d(e){return f.isDisposer(e)?(this.resources[this.index]._setDisposable(e),e.promise()):e}var p=e("./errors.js").TypeError,v=e("./util.js").inherits,y=t.PromiseInspection;f.prototype.data=function(){return this._data},f.prototype.promise=function(){return this._promise},f.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():null},f.prototype.tryDispose=function(e){var t=this.resource(),r=this._context;void 0!==r&&r._pushContext();var n=null!==t?this.doDispose(t,e):null;return void 0!==r&&r._popContext(),this._promise._unsetDisposable(),this._data=null,n},f.isDisposer=function(e){return null!=e&&"function"==typeof e.resource&&"function"==typeof e.tryDispose},v(h,f),h.prototype.doDispose=function(e,t){var r=this.data();return r.call(e,e,t)},t.using=function(){var e=arguments.length;if(2>e)return r("you must pass at least 2 arguments to Promise.using");var i=arguments[e-1];if("function"!=typeof i)return r("fn must be a function\n\n    See http://goo.gl/916lJJ\n");var a,u=!0;2===e&&Array.isArray(arguments[0])?(a=arguments[0],e=a.length,u=!1):(a=arguments,e--);for(var s=new Array(e),h=0;e>h;++h){var p=a[h];if(f.isDisposer(p)){var v=p;p=p.promise(),p._setDisposable(v)}else{var y=n(p);y instanceof t&&(p=y._then(d,null,null,{resources:s,index:h},void 0))}s[h]=p}var g=t.settle(s).then(o).then(function(e){g._pushContext();var t;try{t=u?i.apply(void 0,e):i.call(void 0,e)}finally{g._popContext()}return t})._then(l,c,void 0,s,void 0);return s.promise=g,g},t.prototype._setDisposable=function(e){this._bitField=262144|this._bitField,this._disposer=e},t.prototype._isDisposable=function(){return(262144&this._bitField)>0},t.prototype._getDisposer=function(){return this._disposer},t.prototype._unsetDisposable=function(){this._bitField=-262145&this._bitField,this._disposer=void 0},t.prototype.disposer=function(e){if("function"==typeof e)return new h(e,this,i());throw new p}}},{"./errors.js":13,"./util.js":38}],38:[function(e,r,n){"use strict";function i(){try{var e=F;return F=null,e.apply(this,arguments)}catch(t){return x.e=t,x}}function o(e){return F=e,i}function a(e){return null==e||e===!0||e===!1||"string"==typeof e||"number"==typeof e}function u(e){return!a(e)}function s(e){return a(e)?new Error(g(e)):e}function l(e,t){var r,n=e.length,i=new Array(n+1);for(r=0;n>r;++r)i[r]=e[r];return i[r]=t,i}function c(e,t,r){if(!A.isES5)return{}.hasOwnProperty.call(e,t)?e[t]:void 0;var n=Object.getOwnPropertyDescriptor(e,t);return null!=n?null==n.get&&null==n.set?n.value:r:void 0}function f(e,t,r){if(a(e))return e;var n={value:r,configurable:!0,enumerable:!1,writable:!0};return A.defineProperty(e,t,n),e}function h(e){throw e}function d(e){try{if("function"==typeof e){var t=A.names(e.prototype),r=A.isES5&&t.length>1,n=t.length>0&&!(1===t.length&&"constructor"===t[0]),i=S.test(e+"")&&A.names(e).length>0;if(r||n||i)return!0}return!1}catch(o){return!1}}function p(e){function t(){}t.prototype=e;for(var r=8;r--;)new t;return e}function v(e){return P.test(e)}function y(e,t,r){for(var n=new Array(e),i=0;e>i;++i)n[i]=t+i+r;return n}function g(e){try{return e+""}catch(t){return"[no string representation]"}}function b(e){try{f(e,"isOperational",!0)}catch(t){}}function m(e){return null==e?!1:e instanceof Error.__BluebirdErrorTypes__.OperationalError||e.isOperational===!0}function _(e){return e instanceof Error&&A.propertyIsWritable(e,"stack")}function w(e){return{}.toString.call(e)}function j(e,t,r){for(var n=A.names(e),i=0;i<n.length;++i){var o=n[i];if(r(o))try{A.defineProperty(t,o,A.getDescriptor(e,o))}catch(a){}}}var A=e("./es5.js"),E="undefined"==typeof navigator,k=function(){try{var e={};return A.defineProperty(e,"f",{get:function(){return 3}}),3===e.f}catch(t){return!1}}(),x={e:{}},F,C=function(e,t){function r(){this.constructor=e,this.constructor$=t;for(var r in t.prototype)n.call(t.prototype,r)&&"$"!==r.charAt(r.length-1)&&(this[r+"$"]=t.prototype[r])}var n={}.hasOwnProperty;return r.prototype=t.prototype,e.prototype=new r,e.prototype},O=function(){var e=[Array.prototype,Object.prototype,Function.prototype],t=function(t){for(var r=0;r<e.length;++r)if(e[r]===t)return!0;return!1};if(A.isES5){var r=Object.getOwnPropertyNames;return function(e){for(var n=[],i=Object.create(null);null!=e&&!t(e);){var o;try{o=r(e)}catch(a){return n}for(var u=0;u<o.length;++u){var s=o[u];if(!i[s]){i[s]=!0;var l=Object.getOwnPropertyDescriptor(e,s);null!=l&&null==l.get&&null==l.set&&n.push(s)}}e=A.getPrototypeOf(e)}return n}}var n={}.hasOwnProperty;return function(r){if(t(r))return[];var i=[];e:for(var o in r)if(n.call(r,o))i.push(o);else{for(var a=0;a<e.length;++a)if(n.call(e[a],o))continue e;i.push(o)}return i}}(),S=/this\s*\.\s*\S+\s*=/,P=/^[a-z$_][a-z$_0-9]*$/i,D=function(){return"stack"in new Error?function(e){return _(e)?e:new Error(g(e))}:function(e){if(_(e))return e;try{throw new Error(g(e))}catch(t){return t}}}(),B={isClass:d,isIdentifier:v,inheritedDataKeys:O,getDataPropertyOrDefault:c,thrower:h,isArray:A.isArray,haveGetters:k,notEnumerableProp:f,isPrimitive:a,isObject:u,canEvaluate:E,errorObj:x,tryCatch:o,inherits:C,withAppended:l,maybeWrapAsError:s,toFastProperties:p,filledRange:y,toString:g,canAttachTrace:_,ensureErrorObject:D,originatesFromRejection:m,markAsOriginatingFromRejection:b,classString:w,copyDescriptors:j,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:"undefined"!=typeof t&&"[object process]"===w(t).toLowerCase()};B.isRecentNode=B.isNode&&function(){var e=t.versions.node.split(".").map(Number);return 0===e[0]&&e[1]>10||e[0]>0}(),B.isNode&&B.toFastProperties(t);try{throw new Error}catch(T){B.lastLineError=T}r.exports=B},{"./es5.js":14}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:92}],87:[function(e,t,r){(function(t){function n(){function e(){}try{var t=new Uint8Array(1);return t.foo=function(){return 42},t.constructor=e,42===t.foo()&&t.constructor===e&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(r){return!1}}function i(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e){return this instanceof o?(this.length=0,this.parent=void 0,"number"==typeof e?a(this,e):"string"==typeof e?u(this,e,arguments.length>1?arguments[1]:"utf8"):s(this,e)):arguments.length>1?new o(e,arguments[1]):new o(e)}function a(e,t){if(e=v(e,0>t?0:0|y(t)),!o.TYPED_ARRAY_SUPPORT)for(var r=0;t>r;r++)e[r]=0;return e}function u(e,t,r){("string"!=typeof r||""===r)&&(r="utf8");var n=0|b(t,r);return e=v(e,n),e.write(t,r),e}function s(e,t){if(o.isBuffer(t))return l(e,t);if(Y(t))return c(e,t);if(null==t)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(t.buffer instanceof ArrayBuffer)return f(e,t);if(t instanceof ArrayBuffer)return h(e,t)}return t.length?d(e,t):p(e,t)}function l(e,t){var r=0|y(t.length);
return e=v(e,r),t.copy(e,0,0,r),e}function c(e,t){var r=0|y(t.length);e=v(e,r);for(var n=0;r>n;n+=1)e[n]=255&t[n];return e}function f(e,t){var r=0|y(t.length);e=v(e,r);for(var n=0;r>n;n+=1)e[n]=255&t[n];return e}function h(e,t){return o.TYPED_ARRAY_SUPPORT?(t.byteLength,e=o._augment(new Uint8Array(t))):e=f(e,new Uint8Array(t)),e}function d(e,t){var r=0|y(t.length);e=v(e,r);for(var n=0;r>n;n+=1)e[n]=255&t[n];return e}function p(e,t){var r,n=0;"Buffer"===t.type&&Y(t.data)&&(r=t.data,n=0|y(r.length)),e=v(e,n);for(var i=0;n>i;i+=1)e[i]=255&r[i];return e}function v(e,t){o.TYPED_ARRAY_SUPPORT?(e=o._augment(new Uint8Array(t)),e.__proto__=o.prototype):(e.length=t,e._isBuffer=!0);var r=0!==t&&t<=o.poolSize>>>1;return r&&(e.parent=Q),e}function y(e){if(e>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|e}function g(e,t){if(!(this instanceof g))return new g(e,t);var r=new o(e,t);return delete r.parent,r}function b(e,t){"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"binary":case"raw":case"raws":return r;case"utf8":case"utf-8":return K(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return V(e).length;default:if(n)return K(e).length;t=(""+t).toLowerCase(),n=!0}}function m(e,t,r){var n=!1;if(t=0|t,r=void 0===r||r===1/0?this.length:0|r,e||(e="utf8"),0>t&&(t=0),r>this.length&&(r=this.length),t>=r)return"";for(;;)switch(e){case"hex":return P(this,t,r);case"utf8":case"utf-8":return F(this,t,r);case"ascii":return O(this,t,r);case"binary":return S(this,t,r);case"base64":return x(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function _(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;var o=t.length;if(o%2!==0)throw new Error("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;n>a;a++){var u=parseInt(t.substr(2*a,2),16);if(isNaN(u))throw new Error("Invalid hex string");e[r+a]=u}return a}function w(e,t,r,n){return J(K(t,e.length-r),e,r,n)}function j(e,t,r,n){return J(H(t),e,r,n)}function A(e,t,r,n){return j(e,t,r,n)}function E(e,t,r,n){return J(V(t),e,r,n)}function k(e,t,r,n){return J(z(t,e.length-r),e,r,n)}function x(e,t,r){return 0===t&&r===e.length?G.fromByteArray(e):G.fromByteArray(e.slice(t,r))}function F(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;r>i;){var o=e[i],a=null,u=o>239?4:o>223?3:o>191?2:1;if(r>=i+u){var s,l,c,f;switch(u){case 1:128>o&&(a=o);break;case 2:s=e[i+1],128===(192&s)&&(f=(31&o)<<6|63&s,f>127&&(a=f));break;case 3:s=e[i+1],l=e[i+2],128===(192&s)&&128===(192&l)&&(f=(15&o)<<12|(63&s)<<6|63&l,f>2047&&(55296>f||f>57343)&&(a=f));break;case 4:s=e[i+1],l=e[i+2],c=e[i+3],128===(192&s)&&128===(192&l)&&128===(192&c)&&(f=(15&o)<<18|(63&s)<<12|(63&l)<<6|63&c,f>65535&&1114112>f&&(a=f))}}null===a?(a=65533,u=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),i+=u}return C(n)}function C(e){var t=e.length;if(X>=t)return String.fromCharCode.apply(String,e);for(var r="",n=0;t>n;)r+=String.fromCharCode.apply(String,e.slice(n,n+=X));return r}function O(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;r>i;i++)n+=String.fromCharCode(127&e[i]);return n}function S(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;r>i;i++)n+=String.fromCharCode(e[i]);return n}function P(e,t,r){var n=e.length;(!t||0>t)&&(t=0),(!r||0>r||r>n)&&(r=n);for(var i="",o=t;r>o;o++)i+=U(e[o]);return i}function D(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function B(e,t,r){if(e%1!==0||0>e)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function T(e,t,r,n,i,a){if(!o.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");if(t>i||a>t)throw new RangeError("value is out of bounds");if(r+n>e.length)throw new RangeError("index out of range")}function I(e,t,r,n){0>t&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-r,2);o>i;i++)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function R(e,t,r,n){0>t&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-r,4);o>i;i++)e[r+i]=t>>>8*(n?i:3-i)&255}function $(e,t,r,n,i,o){if(t>i||o>t)throw new RangeError("value is out of bounds");if(r+n>e.length)throw new RangeError("index out of range");if(0>r)throw new RangeError("index out of range")}function q(e,t,r,n,i){return i||$(e,t,r,4,3.4028234663852886e38,-3.4028234663852886e38),W.write(e,t,r,n,23,4),r+4}function L(e,t,r,n,i){return i||$(e,t,r,8,1.7976931348623157e308,-1.7976931348623157e308),W.write(e,t,r,n,52,8),r+8}function N(e){if(e=M(e).replace(ee,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function M(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function U(e){return 16>e?"0"+e.toString(16):e.toString(16)}function K(e,t){t=t||1/0;for(var r,n=e.length,i=null,o=[],a=0;n>a;a++){if(r=e.charCodeAt(a),r>55295&&57344>r){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(56320>r){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=i-55296<<10|r-56320|65536}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,128>r){if((t-=1)<0)break;o.push(r)}else if(2048>r){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(65536>r){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(1114112>r))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function H(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t}function z(e,t){for(var r,n,i,o=[],a=0;a<e.length&&!((t-=2)<0);a++)r=e.charCodeAt(a),n=r>>8,i=r%256,o.push(i),o.push(n);return o}function V(e){return G.toByteArray(N(e))}function J(e,t,r,n){for(var i=0;n>i&&!(i+r>=t.length||i>=e.length);i++)t[i+r]=e[i];return i}var G=e("base64-js"),W=e("ieee754"),Y=e("is-array");r.Buffer=o,r.SlowBuffer=g,r.INSPECT_MAX_BYTES=50,o.poolSize=8192;var Q={};o.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:n(),o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array),o.isBuffer=function(e){return!(null==e||!e._isBuffer)},o.compare=function(e,t){if(!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,a=Math.min(r,n);a>i&&e[i]===t[i];)++i;return i!==a&&(r=e[i],n=t[i]),n>r?-1:r>n?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!Y(e))throw new TypeError("list argument must be an Array of Buffers.");if(0===e.length)return new o(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;r++)t+=e[r].length;var n=new o(t),i=0;for(r=0;r<e.length;r++){var a=e[r];a.copy(n,i),i+=a.length}return n},o.byteLength=b,o.prototype.length=void 0,o.prototype.parent=void 0,o.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?F(this,0,e):m.apply(this,arguments)},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:0===o.compare(this,e)},o.prototype.inspect=function(){var e="",t=r.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},o.prototype.compare=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?0:o.compare(this,e)},o.prototype.indexOf=function(e,t){function r(e,t,r){for(var n=-1,i=0;r+i<e.length;i++)if(e[r+i]===t[-1===n?0:i-n]){if(-1===n&&(n=i),i-n+1===t.length)return r+n}else n=-1;return-1}if(t>2147483647?t=2147483647:-2147483648>t&&(t=-2147483648),t>>=0,0===this.length)return-1;if(t>=this.length)return-1;if(0>t&&(t=Math.max(this.length+t,0)),"string"==typeof e)return 0===e.length?-1:String.prototype.indexOf.call(this,e,t);if(o.isBuffer(e))return r(this,e,t);if("number"==typeof e)return o.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,e,t):r(this,[e],t);throw new TypeError("val must be string, number or Buffer")},o.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},o.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},o.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else if(isFinite(t))t=0|t,isFinite(r)?(r=0|r,void 0===n&&(n="utf8")):(n=r,r=void 0);else{var i=n;n=t,t=0|r,r=i}var o=this.length-t;if((void 0===r||r>o)&&(r=o),e.length>0&&(0>r||0>t)||t>this.length)throw new RangeError("attempt to write outside buffer bounds");n||(n="utf8");for(var a=!1;;)switch(n){case"hex":return _(this,e,t,r);case"utf8":case"utf-8":return w(this,e,t,r);case"ascii":return j(this,e,t,r);case"binary":return A(this,e,t,r);case"base64":return E(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,t,r);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var X=4096;o.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,0>e?(e+=r,0>e&&(e=0)):e>r&&(e=r),0>t?(t+=r,0>t&&(t=0)):t>r&&(t=r),e>t&&(t=e);var n;if(o.TYPED_ARRAY_SUPPORT)n=o._augment(this.subarray(e,t));else{var i=t-e;n=new o(i,void 0);for(var a=0;i>a;a++)n[a]=this[a+e]}return n.length&&(n.parent=this.parent||this),n},o.prototype.readUIntLE=function(e,t,r){e=0|e,t=0|t,r||B(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},o.prototype.readUIntBE=function(e,t,r){e=0|e,t=0|t,r||B(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},o.prototype.readUInt8=function(e,t){return t||B(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return t||B(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return t||B(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return t||B(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return t||B(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,r){e=0|e,t=0|t,r||B(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},o.prototype.readIntBE=function(e,t,r){e=0|e,t=0|t,r||B(e,t,this.length);for(var n=t,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},o.prototype.readInt8=function(e,t){return t||B(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){t||B(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt16BE=function(e,t){t||B(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt32LE=function(e,t){return t||B(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return t||B(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return t||B(e,4,this.length),W.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return t||B(e,4,this.length),W.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return t||B(e,8,this.length),W.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return t||B(e,8,this.length),W.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,r,n){e=+e,t=0|t,r=0|r,n||T(this,e,t,r,Math.pow(2,8*r),0);var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},o.prototype.writeUIntBE=function(e,t,r,n){e=+e,t=0|t,r=0|r,n||T(this,e,t,r,Math.pow(2,8*r),0);var i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},o.prototype.writeUInt8=function(e,t,r){return e=+e,t=0|t,r||T(this,e,t,1,255,0),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,r){return e=+e,t=0|t,r||T(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):I(this,e,t,!0),t+2},o.prototype.writeUInt16BE=function(e,t,r){return e=+e,t=0|t,r||T(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):I(this,e,t,!1),t+2},o.prototype.writeUInt32LE=function(e,t,r){return e=+e,t=0|t,r||T(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):R(this,e,t,!0),t+4},o.prototype.writeUInt32BE=function(e,t,r){return e=+e,t=0|t,r||T(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):R(this,e,t,!1),t+4},o.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t=0|t,!n){var i=Math.pow(2,8*r-1);T(this,e,t,r,i-1,-i)}var o=0,a=1,u=0>e?1:0;for(this[t]=255&e;++o<r&&(a*=256);)this[t+o]=(e/a>>0)-u&255;return t+r},o.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t=0|t,!n){var i=Math.pow(2,8*r-1);T(this,e,t,r,i-1,-i)}var o=r-1,a=1,u=0>e?1:0;for(this[t+o]=255&e;--o>=0&&(a*=256);)this[t+o]=(e/a>>0)-u&255;return t+r},o.prototype.writeInt8=function(e,t,r){return e=+e,t=0|t,r||T(this,e,t,1,127,-128),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),0>e&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,r){return e=+e,t=0|t,r||T(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):I(this,e,t,!0),t+2},o.prototype.writeInt16BE=function(e,t,r){return e=+e,t=0|t,r||T(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):I(this,e,t,!1),t+2},o.prototype.writeInt32LE=function(e,t,r){return e=+e,t=0|t,r||T(this,e,t,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):R(this,e,t,!0),t+4},o.prototype.writeInt32BE=function(e,t,r){return e=+e,t=0|t,r||T(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):R(this,e,t,!1),t+4},o.prototype.writeFloatLE=function(e,t,r){return q(this,e,t,!0,r)},o.prototype.writeFloatBE=function(e,t,r){return q(this,e,t,!1,r)},o.prototype.writeDoubleLE=function(e,t,r){return L(this,e,t,!0,r)},o.prototype.writeDoubleBE=function(e,t,r){return L(this,e,t,!1,r)},o.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&r>n&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(0>t)throw new RangeError("targetStart out of bounds");if(0>r||r>=this.length)throw new RangeError("sourceStart out of bounds");if(0>n)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,a=n-r;if(this===e&&t>r&&n>t)for(i=a-1;i>=0;i--)e[i+t]=this[i+r];else if(1e3>a||!o.TYPED_ARRAY_SUPPORT)for(i=0;a>i;i++)e[i+t]=this[i+r];else e._set(this.subarray(r,r+a),t);return a},o.prototype.fill=function(e,t,r){if(e||(e=0),t||(t=0),r||(r=this.length),t>r)throw new RangeError("end < start");if(r!==t&&0!==this.length){if(0>t||t>=this.length)throw new RangeError("start out of bounds");if(0>r||r>this.length)throw new RangeError("end out of bounds");var n;if("number"==typeof e)for(n=t;r>n;n++)this[n]=e;else{var i=K(e.toString()),o=i.length;for(n=t;r>n;n++)this[n]=i[n%o]}return this}},o.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(o.TYPED_ARRAY_SUPPORT)return new o(this).buffer;for(var e=new Uint8Array(this.length),t=0,r=e.length;r>t;t+=1)e[t]=this[t];return e.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var Z=o.prototype;o._augment=function(e){return e.constructor=o,e._isBuffer=!0,e._set=e.set,e.get=Z.get,e.set=Z.set,e.write=Z.write,e.toString=Z.toString,e.toLocaleString=Z.toString,e.toJSON=Z.toJSON,e.equals=Z.equals,e.compare=Z.compare,e.indexOf=Z.indexOf,e.copy=Z.copy,e.slice=Z.slice,e.readUIntLE=Z.readUIntLE,e.readUIntBE=Z.readUIntBE,e.readUInt8=Z.readUInt8,e.readUInt16LE=Z.readUInt16LE,e.readUInt16BE=Z.readUInt16BE,e.readUInt32LE=Z.readUInt32LE,e.readUInt32BE=Z.readUInt32BE,e.readIntLE=Z.readIntLE,e.readIntBE=Z.readIntBE,e.readInt8=Z.readInt8,e.readInt16LE=Z.readInt16LE,e.readInt16BE=Z.readInt16BE,e.readInt32LE=Z.readInt32LE,e.readInt32BE=Z.readInt32BE,e.readFloatLE=Z.readFloatLE,e.readFloatBE=Z.readFloatBE,e.readDoubleLE=Z.readDoubleLE,e.readDoubleBE=Z.readDoubleBE,e.writeUInt8=Z.writeUInt8,e.writeUIntLE=Z.writeUIntLE,e.writeUIntBE=Z.writeUIntBE,e.writeUInt16LE=Z.writeUInt16LE,e.writeUInt16BE=Z.writeUInt16BE,e.writeUInt32LE=Z.writeUInt32LE,e.writeUInt32BE=Z.writeUInt32BE,e.writeIntLE=Z.writeIntLE,e.writeIntBE=Z.writeIntBE,e.writeInt8=Z.writeInt8,e.writeInt16LE=Z.writeInt16LE,e.writeInt16BE=Z.writeInt16BE,e.writeInt32LE=Z.writeInt32LE,e.writeInt32BE=Z.writeInt32BE,e.writeFloatLE=Z.writeFloatLE,e.writeFloatBE=Z.writeFloatBE,e.writeDoubleLE=Z.writeDoubleLE,e.writeDoubleBE=Z.writeDoubleBE,e.fill=Z.fill,e.inspect=Z.inspect,e.toArrayBuffer=Z.toArrayBuffer,e};var ee=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":88,ieee754:89,"is-array":90}],88:[function(e,t,r){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(e){"use strict";function t(e){var t=e.charCodeAt(0);return t===a||t===f?62:t===u||t===h?63:s>t?-1:s+10>t?t-s+26+26:c+26>t?t-c:l+26>t?t-l+26:void 0}function r(e){function r(e){l[f++]=e}var n,i,a,u,s,l;if(e.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var c=e.length;s="="===e.charAt(c-2)?2:"="===e.charAt(c-1)?1:0,l=new o(3*e.length/4-s),a=s>0?e.length-4:e.length;var f=0;for(n=0,i=0;a>n;n+=4,i+=3)u=t(e.charAt(n))<<18|t(e.charAt(n+1))<<12|t(e.charAt(n+2))<<6|t(e.charAt(n+3)),r((16711680&u)>>16),r((65280&u)>>8),r(255&u);return 2===s?(u=t(e.charAt(n))<<2|t(e.charAt(n+1))>>4,r(255&u)):1===s&&(u=t(e.charAt(n))<<10|t(e.charAt(n+1))<<4|t(e.charAt(n+2))>>2,r(u>>8&255),r(255&u)),l}function i(e){function t(e){return n.charAt(e)}function r(e){return t(e>>18&63)+t(e>>12&63)+t(e>>6&63)+t(63&e)}var i,o,a,u=e.length%3,s="";for(i=0,a=e.length-u;a>i;i+=3)o=(e[i]<<16)+(e[i+1]<<8)+e[i+2],s+=r(o);switch(u){case 1:o=e[e.length-1],s+=t(o>>2),s+=t(o<<4&63),s+="==";break;case 2:o=(e[e.length-2]<<8)+e[e.length-1],s+=t(o>>10),s+=t(o>>4&63),s+=t(o<<2&63),s+="="}return s}var o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="+".charCodeAt(0),u="/".charCodeAt(0),s="0".charCodeAt(0),l="a".charCodeAt(0),c="A".charCodeAt(0),f="-".charCodeAt(0),h="_".charCodeAt(0);e.toByteArray=r,e.fromByteArray=i}("undefined"==typeof r?this.base64js={}:r)},{}],89:[function(e,t,r){r.read=function(e,t,r,n,i){var o,a,u=8*i-n-1,s=(1<<u)-1,l=s>>1,c=-7,f=r?i-1:0,h=r?-1:1,d=e[t+f];for(f+=h,o=d&(1<<-c)-1,d>>=-c,c+=u;c>0;o=256*o+e[t+f],f+=h,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=n;c>0;a=256*a+e[t+f],f+=h,c-=8);if(0===o)o=1-l;else{if(o===s)return a?NaN:(d?-1:1)*(1/0);a+=Math.pow(2,n),o-=l}return(d?-1:1)*a*Math.pow(2,o-n)},r.write=function(e,t,r,n,i,o){var a,u,s,l=8*o-i-1,c=(1<<l)-1,f=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,p=n?1:-1,v=0>t||0===t&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(s=Math.pow(2,-a))<1&&(a--,s*=2),t+=a+f>=1?h/s:h*Math.pow(2,1-f),t*s>=2&&(a++,s/=2),a+f>=c?(u=0,a=c):a+f>=1?(u=(t*s-1)*Math.pow(2,i),a+=f):(u=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[r+d]=255&u,d+=p,u/=256,i-=8);for(a=a<<i|u,l+=i;l>0;e[r+d]=255&a,d+=p,a/=256,l-=8);e[r+d-p]|=128*v}},{}],90:[function(e,t,r){var n=Array.isArray,i=Object.prototype.toString;t.exports=n||function(e){return!!e&&"[object Array]"==i.call(e)}},{}],91:[function(e,t,r){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},{}],92:[function(e,t,r){function n(){c=!1,u.length?l=u.concat(l):f=-1,l.length&&i()}function i(){if(!c){var e=setTimeout(n);c=!0;for(var t=l.length;t;){for(u=l,l=[];++f<t;)u&&u[f].run();f=-1,t=l.length}u=null,c=!1,clearTimeout(e)}}function o(e,t){this.fun=e,this.array=t}function a(){}var u,s=t.exports={},l=[],c=!1,f=-1;s.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new o(e,t)),1!==l.length||c||setTimeout(i,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=a,s.addListener=a,s.once=a,s.off=a,s.removeListener=a,s.removeAllListeners=a,s.emit=a,s.binding=function(e){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},{}],93:[function(t,r,n){(function(t){!function(i){function o(e){throw RangeError(T[e])}function a(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function u(e,t){var r=e.split("@"),n="";r.length>1&&(n=r[0]+"@",e=r[1]),e=e.replace(B,".");var i=e.split("."),o=a(i,t).join(".");return n+o}function s(e){for(var t,r,n=[],i=0,o=e.length;o>i;)t=e.charCodeAt(i++),t>=55296&&56319>=t&&o>i?(r=e.charCodeAt(i++),56320==(64512&r)?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),i--)):n.push(t);return n}function l(e){return a(e,function(e){var t="";return e>65535&&(e-=65536,t+=$(e>>>10&1023|55296),e=56320|1023&e),t+=$(e)}).join("")}function c(e){return 10>e-48?e-22:26>e-65?e-65:26>e-97?e-97:A}function f(e,t){return e+22+75*(26>e)-((0!=t)<<5)}function h(e,t,r){var n=0;for(e=r?R(e/F):e>>1,e+=R(e/t);e>I*k>>1;n+=A)e=R(e/I);return R(n+(I+1)*e/(e+x))}function d(e){var t,r,n,i,a,u,s,f,d,p,v=[],y=e.length,g=0,b=O,m=C;for(r=e.lastIndexOf(S),0>r&&(r=0),n=0;r>n;++n)e.charCodeAt(n)>=128&&o("not-basic"),v.push(e.charCodeAt(n));for(i=r>0?r+1:0;y>i;){for(a=g,u=1,s=A;i>=y&&o("invalid-input"),f=c(e.charCodeAt(i++)),(f>=A||f>R((j-g)/u))&&o("overflow"),g+=f*u,d=m>=s?E:s>=m+k?k:s-m,!(d>f);s+=A)p=A-d,u>R(j/p)&&o("overflow"),u*=p;t=v.length+1,m=h(g-a,t,0==a),R(g/t)>j-b&&o("overflow"),b+=R(g/t),g%=t,v.splice(g++,0,b)}return l(v)}function p(e){var t,r,n,i,a,u,l,c,d,p,v,y,g,b,m,_=[];for(e=s(e),y=e.length,t=O,r=0,a=C,u=0;y>u;++u)v=e[u],128>v&&_.push($(v));for(n=i=_.length,i&&_.push(S);y>n;){for(l=j,u=0;y>u;++u)v=e[u],v>=t&&l>v&&(l=v);for(g=n+1,l-t>R((j-r)/g)&&o("overflow"),r+=(l-t)*g,t=l,u=0;y>u;++u)if(v=e[u],t>v&&++r>j&&o("overflow"),v==t){for(c=r,d=A;p=a>=d?E:d>=a+k?k:d-a,!(p>c);d+=A)m=c-p,b=A-p,_.push($(f(p+m%b,0))),c=R(m/b);_.push($(f(c,0))),a=h(r,g,n==i),r=0,++n}++r,++t}return _.join("")}function v(e){return u(e,function(e){return P.test(e)?d(e.slice(4).toLowerCase()):e})}function y(e){return u(e,function(e){return D.test(e)?"xn--"+p(e):e})}var g="object"==typeof n&&n&&!n.nodeType&&n,b="object"==typeof r&&r&&!r.nodeType&&r,m="object"==typeof t&&t;(m.global===m||m.window===m||m.self===m)&&(i=m);var _,w,j=2147483647,A=36,E=1,k=26,x=38,F=700,C=72,O=128,S="-",P=/^xn--/,D=/[^\x20-\x7E]/,B=/[\x2E\u3002\uFF0E\uFF61]/g,T={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},I=A-E,R=Math.floor,$=String.fromCharCode;if(_={version:"1.3.2",ucs2:{decode:s,encode:l},decode:d,encode:p,toASCII:y,toUnicode:v},"function"==typeof e&&"object"==typeof e.amd&&e.amd)e("punycode",function(){return _});else if(g&&b)if(r.exports==g)b.exports=_;else for(w in _)_.hasOwnProperty(w)&&(g[w]=_[w]);else i.punycode=_}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],94:[function(e,t,r){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,r,o){t=t||"&",r=r||"=";var a={};if("string"!=typeof e||0===e.length)return a;var u=/\+/g;e=e.split(t);var s=1e3;o&&"number"==typeof o.maxKeys&&(s=o.maxKeys);var l=e.length;s>0&&l>s&&(l=s);for(var c=0;l>c;++c){var f,h,d,p,v=e[c].replace(u,"%20"),y=v.indexOf(r);y>=0?(f=v.substr(0,y),h=v.substr(y+1)):(f=v,h=""),d=decodeURIComponent(f),p=decodeURIComponent(h),n(a,d)?i(a[d])?a[d].push(p):a[d]=[a[d],p]:a[d]=p}return a};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],95:[function(e,t,r){"use strict";function n(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var i=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,r,u){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?n(a(e),function(a){var u=encodeURIComponent(i(a))+r;return o(e[a])?n(e[a],function(e){return u+encodeURIComponent(i(e))}).join(t):u+encodeURIComponent(i(e[a]))}).join(t):u?encodeURIComponent(i(u))+r+encodeURIComponent(i(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},a=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},{}],96:[function(e,t,r){"use strict";r.decode=r.parse=e("./decode"),r.encode=r.stringify=e("./encode")},{"./decode":94,"./encode":95}],97:[function(e,t,r){function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(e,t,r){if(e&&l(e)&&e instanceof n)return e;var i=new n;return i.parse(e,t,r),i}function o(e){return s(e)&&(e=i(e)),e instanceof n?e.format():n.prototype.format.call(e)}function a(e,t){return i(e,!1,!0).resolve(t)}function u(e,t){return e?i(e,!1,!0).resolveObject(t):t}function s(e){return"string"==typeof e}function l(e){return"object"==typeof e&&null!==e}function c(e){return null===e}function f(e){return null==e}var h=e("punycode");r.parse=i,r.resolve=a,r.resolveObject=u,r.format=o,r.Url=n;var d=/^([a-z0-9.+-]+:)/i,p=/:[0-9]*$/,v=["<",">",'"',"`"," ","\r","\n","	"],y=["{","}","|","\\","^","`"].concat(v),g=["'"].concat(y),b=["%","/","?",";","#"].concat(g),m=["/","?","#"],_=255,w=/^[a-z0-9A-Z_-]{0,63}$/,j=/^([a-z0-9A-Z_-]{0,63})(.*)$/,A={javascript:!0,"javascript:":!0},E={javascript:!0,"javascript:":!0},k={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},x=e("querystring");n.prototype.parse=function(e,t,r){if(!s(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e;n=n.trim();var i=d.exec(n);if(i){i=i[0];var o=i.toLowerCase();this.protocol=o,n=n.substr(i.length)}if(r||i||n.match(/^\/\/[^@\/]+@[^@\/]+/)){var a="//"===n.substr(0,2);!a||i&&E[i]||(n=n.substr(2),this.slashes=!0)}if(!E[i]&&(a||i&&!k[i])){for(var u=-1,l=0;l<m.length;l++){var c=n.indexOf(m[l]);-1!==c&&(-1===u||u>c)&&(u=c)}var f,p;p=-1===u?n.lastIndexOf("@"):n.lastIndexOf("@",u),-1!==p&&(f=n.slice(0,p),n=n.slice(p+1),this.auth=decodeURIComponent(f)),u=-1;for(var l=0;l<b.length;l++){var c=n.indexOf(b[l]);-1!==c&&(-1===u||u>c)&&(u=c)}-1===u&&(u=n.length),this.host=n.slice(0,u),n=n.slice(u),this.parseHost(),this.hostname=this.hostname||"";var v="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!v)for(var y=this.hostname.split(/\./),l=0,F=y.length;F>l;l++){var C=y[l];if(C&&!C.match(w)){for(var O="",S=0,P=C.length;P>S;S++)O+=C.charCodeAt(S)>127?"x":C[S];if(!O.match(w)){var D=y.slice(0,l),B=y.slice(l+1),T=C.match(j);T&&(D.push(T[1]),B.unshift(T[2])),B.length&&(n="/"+B.join(".")+n),this.hostname=D.join(".");break}}}if(this.hostname.length>_?this.hostname="":this.hostname=this.hostname.toLowerCase(),!v){for(var I=this.hostname.split("."),R=[],l=0;l<I.length;++l){var $=I[l];R.push($.match(/[^A-Za-z0-9_-]/)?"xn--"+h.encode($):$)}this.hostname=R.join(".")}var q=this.port?":"+this.port:"",L=this.hostname||"";this.host=L+q,this.href+=this.host,v&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==n[0]&&(n="/"+n))}if(!A[o])for(var l=0,F=g.length;F>l;l++){var N=g[l],M=encodeURIComponent(N);M===N&&(M=escape(N)),n=n.split(N).join(M)}var U=n.indexOf("#");-1!==U&&(this.hash=n.substr(U),n=n.slice(0,U));var K=n.indexOf("?");if(-1!==K?(this.search=n.substr(K),this.query=n.substr(K+1),t&&(this.query=x.parse(this.query)),n=n.slice(0,K)):t&&(this.search="",this.query={}),n&&(this.pathname=n),k[o]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var q=this.pathname||"",$=this.search||"";this.path=q+$}return this.href=this.format(),this},n.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,o="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&l(this.query)&&Object.keys(this.query).length&&(o=x.stringify(this.query));var a=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||k[t])&&i!==!1?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i||(i=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),a=a.replace("#","%23"),t+i+r+a+n},n.prototype.resolve=function(e){return this.resolveObject(i(e,!1,!0)).format()},n.prototype.resolveObject=function(e){if(s(e)){var t=new n;t.parse(e,!1,!0),e=t}var r=new n;if(Object.keys(this).forEach(function(e){r[e]=this[e]},this),r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol)return Object.keys(e).forEach(function(t){"protocol"!==t&&(r[t]=e[t])}),k[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r;if(e.protocol&&e.protocol!==r.protocol){if(!k[e.protocol])return Object.keys(e).forEach(function(t){r[t]=e[t]}),r.href=r.format(),r;if(r.protocol=e.protocol,e.host||E[e.protocol])r.pathname=e.pathname;else{for(var i=(e.pathname||"").split("/");i.length&&!(e.host=i.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==i[0]&&i.unshift(""),i.length<2&&i.unshift(""),r.pathname=i.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var o=r.pathname||"",a=r.search||"";r.path=o+a}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var u=r.pathname&&"/"===r.pathname.charAt(0),l=e.host||e.pathname&&"/"===e.pathname.charAt(0),h=l||u||r.host&&e.pathname,d=h,p=r.pathname&&r.pathname.split("/")||[],i=e.pathname&&e.pathname.split("/")||[],v=r.protocol&&!k[r.protocol];if(v&&(r.hostname="",r.port=null,r.host&&(""===p[0]?p[0]=r.host:p.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===i[0]?i[0]=e.host:i.unshift(e.host)),e.host=null),h=h&&(""===i[0]||""===p[0])),l)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,p=i;else if(i.length)p||(p=[]),p.pop(),p=p.concat(i),r.search=e.search,r.query=e.query;else if(!f(e.search)){if(v){r.hostname=r.host=p.shift();var y=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;y&&(r.auth=y.shift(),r.host=r.hostname=y.shift())}return r.search=e.search,r.query=e.query,c(r.pathname)&&c(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!p.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),
r;for(var g=p.slice(-1)[0],b=(r.host||e.host)&&("."===g||".."===g)||""===g,m=0,_=p.length;_>=0;_--)g=p[_],"."==g?p.splice(_,1):".."===g?(p.splice(_,1),m++):m&&(p.splice(_,1),m--);if(!h&&!d)for(;m--;m)p.unshift("..");!h||""===p[0]||p[0]&&"/"===p[0].charAt(0)||p.unshift(""),b&&"/"!==p.join("/").substr(-1)&&p.push("");var w=""===p[0]||p[0]&&"/"===p[0].charAt(0);if(v){r.hostname=r.host=w?"":p.length?p.shift():"";var y=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;y&&(r.auth=y.shift(),r.host=r.hostname=y.shift())}return h=h||r.host&&p.length,h&&!w&&p.unshift(""),p.length?r.pathname=p.join("/"):(r.pathname=null,r.path=null),c(r.pathname)&&c(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},n.prototype.parseHost=function(){var e=this.host,t=p.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{punycode:93,querystring:96}],98:[function(e,t,r){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],99:[function(e,t,r){(function(t,n){function i(e,t){var n={seen:[],stylize:a};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),v(t)?n.showHidden=t:t&&r._extend(n,t),w(n.showHidden)&&(n.showHidden=!1),w(n.depth)&&(n.depth=2),w(n.colors)&&(n.colors=!1),w(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=o),s(n,e,n.depth)}function o(e,t){var r=i.styles[t];return r?"["+i.colors[r][0]+"m"+e+"["+i.colors[r][1]+"m":e}function a(e,t){return e}function u(e){var t={};return e.forEach(function(e,r){t[e]=!0}),t}function s(e,t,n){if(e.customInspect&&t&&x(t.inspect)&&t.inspect!==r.inspect&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(n,e);return m(i)||(i=s(e,i,n)),i}var o=l(e,t);if(o)return o;var a=Object.keys(t),v=u(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(t)),k(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return c(t);if(0===a.length){if(x(t)){var y=t.name?": "+t.name:"";return e.stylize("[Function"+y+"]","special")}if(j(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(E(t))return e.stylize(Date.prototype.toString.call(t),"date");if(k(t))return c(t)}var g="",b=!1,_=["{","}"];if(p(t)&&(b=!0,_=["[","]"]),x(t)){var w=t.name?": "+t.name:"";g=" [Function"+w+"]"}if(j(t)&&(g=" "+RegExp.prototype.toString.call(t)),E(t)&&(g=" "+Date.prototype.toUTCString.call(t)),k(t)&&(g=" "+c(t)),0===a.length&&(!b||0==t.length))return _[0]+g+_[1];if(0>n)return j(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var A;return A=b?f(e,t,n,v,a):a.map(function(r){return h(e,t,n,v,r,b)}),e.seen.pop(),d(A,g,_)}function l(e,t){if(w(t))return e.stylize("undefined","undefined");if(m(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return b(t)?e.stylize(""+t,"number"):v(t)?e.stylize(""+t,"boolean"):y(t)?e.stylize("null","null"):void 0}function c(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,r,n,i){for(var o=[],a=0,u=t.length;u>a;++a)P(t,String(a))?o.push(h(e,t,r,n,String(a),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(h(e,t,r,n,i,!0))}),o}function h(e,t,r,n,i,o){var a,u,l;if(l=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},l.get?u=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(u=e.stylize("[Setter]","special")),P(n,i)||(a="["+i+"]"),u||(e.seen.indexOf(l.value)<0?(u=y(r)?s(e,l.value,null):s(e,l.value,r-1),u.indexOf("\n")>-1&&(u=o?u.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+u.split("\n").map(function(e){return"   "+e}).join("\n"))):u=e.stylize("[Circular]","special")),w(a)){if(o&&i.match(/^\d+$/))return u;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+u}function d(e,t,r){var n=0,i=e.reduce(function(e,t){return n++,t.indexOf("\n")>=0&&n++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}function p(e){return Array.isArray(e)}function v(e){return"boolean"==typeof e}function y(e){return null===e}function g(e){return null==e}function b(e){return"number"==typeof e}function m(e){return"string"==typeof e}function _(e){return"symbol"==typeof e}function w(e){return void 0===e}function j(e){return A(e)&&"[object RegExp]"===C(e)}function A(e){return"object"==typeof e&&null!==e}function E(e){return A(e)&&"[object Date]"===C(e)}function k(e){return A(e)&&("[object Error]"===C(e)||e instanceof Error)}function x(e){return"function"==typeof e}function F(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function C(e){return Object.prototype.toString.call(e)}function O(e){return 10>e?"0"+e.toString(10):e.toString(10)}function S(){var e=new Date,t=[O(e.getHours()),O(e.getMinutes()),O(e.getSeconds())].join(":");return[e.getDate(),I[e.getMonth()],t].join(" ")}function P(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var D=/%[sdj%]/g;r.format=function(e){if(!m(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(i(arguments[r]));return t.join(" ")}for(var r=1,n=arguments,o=n.length,a=String(e).replace(D,function(e){if("%%"===e)return"%";if(r>=o)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(t){return"[Circular]"}default:return e}}),u=n[r];o>r;u=n[++r])a+=y(u)||!A(u)?" "+u:" "+i(u);return a},r.deprecate=function(e,i){function o(){if(!a){if(t.throwDeprecation)throw new Error(i);t.traceDeprecation?console.trace(i):console.error(i),a=!0}return e.apply(this,arguments)}if(w(n.process))return function(){return r.deprecate(e,i).apply(this,arguments)};if(t.noDeprecation===!0)return e;var a=!1;return o};var B,T={};r.debuglog=function(e){if(w(B)&&(B=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!T[e])if(new RegExp("\\b"+e+"\\b","i").test(B)){var n=t.pid;T[e]=function(){var t=r.format.apply(r,arguments);console.error("%s %d: %s",e,n,t)}}else T[e]=function(){};return T[e]},r.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},r.isArray=p,r.isBoolean=v,r.isNull=y,r.isNullOrUndefined=g,r.isNumber=b,r.isString=m,r.isSymbol=_,r.isUndefined=w,r.isRegExp=j,r.isObject=A,r.isDate=E,r.isError=k,r.isFunction=x,r.isPrimitive=F,r.isBuffer=e("./support/isBuffer");var I=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];r.log=function(){console.log("%s - %s",S(),r.format.apply(r,arguments))},r.inherits=e("inherits"),r._extend=function(e,t){if(!t||!A(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":98,_process:92,inherits:91}],100:[function(e,t,r){"use strict";e("array.prototype.find"),e("array.prototype.findindex");var n=e("./lib/FDBFactory");t.exports=new n},{"./lib/FDBFactory":107,"array.prototype.find":133,"array.prototype.findindex":134}],101:[function(e,t,r){"use strict";t.exports=function(e,t){this.deletePending=!1,this.transactions=[],this.rawObjectStores={},this.connections=[],this.name=e,this.version=t,this.processTransactions=function(){setImmediate(function(){var e=this.transactions.some(function(e){return e._started&&!e._finished});if(!e){var t=this.transactions.find(function(e){return!e._started&&!e._finished});t&&(t._start(),t.addEventListener("complete",this.processTransactions.bind(this)),t.addEventListener("abort",this.processTransactions.bind(this)))}}.bind(this))}}},{}],102:[function(e,t,r){"use strict";t.exports=function(e,t){this._eventPath=[],this._stopPropagation=!1,this._stopImmediatePropagation=!1,this._canceled=!1,this._initialized=!0,this._dispatch=!1,this.type=e,this.target=null,this.currentTarget=null,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.eventPhase=this.NONE,this.stopPropagation=function(){this._stopPropagation=!0}.bind(this),this.stopImmediatePropagation=function(){this._stopPropagation=!0,this._stopImmediatePropagation=!0}.bind(this),t=void 0!==t?t:{},this.bubbles=void 0!==t.bubbles?t.bubbles:!1,this.cancelable=void 0!==t.cancelable?t.cancelable:!1,this.preventDefault=function(){this.cancelable&&(this._canceled=!0)}.bind(this),this.defaultPrevented=!1,this.isTrusted=!1,this.timestamp=Date.now()}},{}],103:[function(e,t,r){"use strict";function n(e,t){return e._stopImmediatePropagation||e.eventPhase===e.CAPTURING_PHASE&&t.capture===!1||e.eventPhase===e.BUBBLING_PHASE&&t.capture===!0}function i(e,t){if(e.currentTarget=t,t._listeners.forEach(function(t){e.type!==t.type||n(e,t)||t.callback.call(e.currentTarget,e)}),e.currentTarget["on"+e.type]){var r={type:e.type,callback:e.currentTarget["on"+e.type],capture:!1};if(n(e,r))return;r.callback.call(e.currentTarget,e)}}var o=e("./errors/InvalidStateError");t.exports=function(){this._listeners=[],this.addEventListener=function(e,t,r){null!==t&&(r=void 0!==r?r:!1,this._listeners.push({type:e,callback:t,capture:r}))},this.removeEventListener=function(e,t,r){r=void 0!==r?r:!1;var n=this._listeners.findIndex(function(n){return n.type===e&&n.callback===t&&n.capture===r});this._listeners.splice(n,1)},this.dispatchEvent=function(e){if(e._dispatch||!e._initialized)throw new o("The object is in an invalid state.");return e._isTrusted=!1,e._dispatch=!0,e.target=this,e.eventPhase=e.CAPTURING_PHASE,e._eventPath.forEach(function(t){e._stopPropagation||i(e,t)}),e.eventPhase=e.AT_TARGET,e._stopPropagation||i(e,e.target),e.bubbles&&(e._eventPath.reverse(),e.eventPhase=e.BUBBLING_PHASE,e._eventPath.forEach(function(t){e._stopPropagation||i(e,t)})),e._dispatch=!1,e.eventPhase=e.NONE,e.currentTarget=null,e._canceled?!1:!0}}},{"./errors/InvalidStateError":124}],104:[function(e,t,r){"use strict";function n(e){return e.source.hasOwnProperty("_rawIndex")?e.source.objectStore:e.source}var i=e("./structuredClone"),o=e("./FDBKeyRange"),a=e("./errors/DataError"),u=e("./errors/InvalidStateError"),s=e("./errors/ReadOnlyError"),l=e("./errors/TransactionInactiveError"),c=e("./cmp"),f=e("./extractKey"),h=e("./validateKey");t.exports=function(e,t,r,d){this._gotValue=!1,this._range=t,this._position=void 0,this._objectStorePosition=void 0,this._request=d;var p={source:e,direction:void 0!==r?r:"next",key:void 0,primaryKey:void 0};Object.defineProperty(this,"source",{get:function(){return p.source}}),Object.defineProperty(this,"direction",{get:function(){return p.direction}}),Object.defineProperty(this,"key",{get:function(){return p.key}}),Object.defineProperty(this,"primaryKey",{get:function(){return p.primaryKey}}),this._iterate=function(e){var t,r=!this.source.hasOwnProperty("_rawIndex");t=r?this.source._rawObjectStore.records:this.source._rawIndex.records;var n;if("next"===this.direction)n=t.find(function(t){if(void 0!==e&&-1===c(t.key,e))return!1;if(void 0!==this._position&&r&&1!==c(t.key,this._position))return!1;if(void 0!==this._position&&!r){var n=c(t.key,this._position);if(-1===n)return!1;if(0===n&&1!==c(t.value,this._objectStorePosition))return!1}return void 0===this._range||o.check(this._range,t.key)?!0:!1}.bind(this));else if("nextunique"===this.direction)n=t.find(function(t){return void 0!==e&&-1===c(t.key,e)?!1:void 0!==this._position&&1!==c(t.key,this._position)?!1:void 0===this._range||o.check(this._range,t.key)?!0:!1}.bind(this));else if("prev"===this.direction)n=t.reverse().find(function(t){if(void 0!==e&&1===c(t.key,e))return!1;if(void 0!==this._position&&r&&-1!==c(t.key,this._position))return!1;if(void 0!==this._position&&!r){var n=c(t.key,this._position);if(1===n)return!1;if(0===n&&-1!==c(t.value,this._objectStorePosition))return!1}return void 0===this._range||o.check(this._range,t.key)?!0:!1}.bind(this)),t.reverse();else if("prevunique"===this.direction){var a=t.reverse().find(function(t){return void 0!==e&&1===c(t.key,e)?!1:void 0!==this._position&&-1!==c(t.key,this._position)?!1:void 0===this._range||o.check(this._range,t.key)?!0:!1}.bind(this));t.reverse(),a&&(n=t.find(function(e){return 0===c(e.key,a.key)}))}var u;return n?(this._position=n.key,r||(this._objectStorePosition=n.value),p.key=n.key,r?this.value=i(n.value):(this.value=i(this.source.objectStore._rawObjectStore.getValue(n.value)),p.primaryKey=i(n.value)),this._gotValue=!0,u=this):(p.key=void 0,r||(this._objectStorePosition=void 0),this.value=void 0,u=null),u},this.update=function(e){if(void 0===e)throw new TypeError;var t=n(this),r=this.source.hasOwnProperty("_rawIndex")?this.primaryKey:this._position,o=t.transaction;if("readonly"===o.mode)throw new s;if(!o._active)throw new l;if(t._rawObjectStore.deleted)throw new u;if(!this._gotValue||!this.hasOwnProperty("value"))throw new u;if(null!==t.keyPath){var c;try{c=f(t.keyPath,e)}catch(h){}if(c!==r)throw new a}var d={key:r,value:i(e)};return o._execRequestAsync({source:this,operation:t._rawObjectStore.storeRecord.bind(t._rawObjectStore,d,!1,o._rollbackLog)})},this.advance=function(e){if(!Number.isInteger(e)||0>=e)throw new TypeError;var t=n(this),r=t.transaction;if(!r._active)throw new l;if(t._rawObjectStore.deleted)throw new u;if(!this._gotValue)throw new u;this._request.readyState="pending",r._execRequestAsync({source:this.source,operation:function(){for(var t,r=0;e>r&&(t=this._iterate(),t);r++);return t}.bind(this),request:this._request}),this._gotValue=!1},this["continue"]=function(e){var t=n(this),r=t.transaction;if(!r._active)throw new l;if(t._rawObjectStore.deleted)throw new u;if(!this._gotValue)throw new u;if(void 0!==e){h(e);var i=c(e,this._position);if(0>=i&&("next"===this.direction||"nextunique"===this.direction)||i>=0&&("prev"===this.direction||"prevunique"===this.direction))throw new a}this._request.readyState="pending",r._execRequestAsync({source:this.source,operation:this._iterate.bind(this,e),request:this._request}),this._gotValue=!1},this["delete"]=function(){var e=n(this),t=this.source.hasOwnProperty("_rawIndex")?this.primaryKey:this._position,r=e.transaction;if("readonly"===r.mode)throw new s;if(!r._active)throw new l;if(e._rawObjectStore.deleted)throw new u;if(!this._gotValue||!this.hasOwnProperty("value"))throw new u;return r._execRequestAsync({source:this,operation:e._rawObjectStore.deleteRecord.bind(e._rawObjectStore,t,r._rollbackLog)})},this.toString=function(){return"[object IDBCursor]"}}},{"./FDBKeyRange":109,"./cmp":118,"./errors/DataError":122,"./errors/InvalidStateError":124,"./errors/ReadOnlyError":126,"./errors/TransactionInactiveError":127,"./extractKey":129,"./structuredClone":130,"./validateKey":131}],105:[function(e,t,r){"use strict";function n(){o.apply(this,arguments),this.value=void 0,this.toString=function(){return"[object IDBCursorWithValue]"}}var i=e("util"),o=e("./FDBCursor");i.inherits(n,o),t.exports=n},{"./FDBCursor":104,util:99}],106:[function(e,t,r){"use strict";function n(e){if(!e._runningVersionchangeTransaction)throw new h;var t=e._rawDatabase.transactions.find(function(e){return e._active&&"versionchange"===e.mode});if(!t)throw new p;return t}function i(e){e._closePending=!0;var t=e._rawDatabase.transactions.every(function(e){return e._finished});t?(e._closed=!0,e._rawDatabase.connections=e._rawDatabase.connections.filter(function(t){return e!==t})):setImmediate(function(){i(e)})}function o(e){u.call(this),this._closePending=!1,this._closed=!1,this._runningVersionchangeTransaction=!1,this._rawDatabase=e,this._rawDatabase.connections.push(this),this.name=e.name,this.version=e.version,this.objectStoreNames=Object.keys(e.rawObjectStores).sort(),this.createObjectStore=function(e,t){if(void 0===e)throw new TypeError;var r=n(this);if(this._rawDatabase.rawObjectStores.hasOwnProperty(e))throw new c;t=t||{};var i=void 0!==t.keyPath?t.keyPath:null,o=void 0!==t.autoIncrement?t.autoIncrement:!1;if(null!==i&&v(i),o&&(""===i||Array.isArray(i)))throw new f;r._rollbackLog.push(function(t){this.objectStoreNames=t,delete this._rawDatabase.rawObjectStores[e]}.bind(this,this.objectStoreNames.slice()));var a=new l(this._rawDatabase,e,i,o);return this.objectStoreNames.push(e),this.objectStoreNames.sort(),this._rawDatabase.rawObjectStores[e]=a,r.objectStore(e)},this.deleteObjectStore=function(e){if(void 0===e)throw new TypeError;var t=n(this);if(!this._rawDatabase.rawObjectStores.hasOwnProperty(e))throw new d;this.objectStoreNames=this.objectStoreNames.filter(function(t){return t!==e}),t._rollbackLog.push(function(t){t.deleted=!1,this._rawDatabase.rawObjectStores[e]=t,this.objectStoreNames.push(e),this.objectStoreNames.sort()}.bind(this,this._rawDatabase.rawObjectStores[e])),this._rawDatabase.rawObjectStores[e].deleted=!0,delete this._rawDatabase.rawObjectStores[e]},this.transaction=function(e,t){if(t=void 0!==t?t:"readonly","readonly"!==t&&"readwrite"!==t&&"versionchange"!==t)throw new TypeError("Invalid mode: "+t);var r=this._rawDatabase.transactions.some(function(e){return e._active&&"versionchange"===e.mode});if(r)throw new h;if(this._closePending)throw new h;if(Array.isArray(e)||(e=[e]),0===e.length&&"versionchange"!==t)throw new f;e.forEach(function(e){if(this.objectStoreNames.indexOf(e)<0)throw new d("No objectStore named "+e+" in this database")}.bind(this));var n=new s(e,t);return n.db=this,this._rawDatabase.transactions.push(n),this._rawDatabase.processTransactions(),n},this.close=function(){i(this)},this.toString=function(){return"[object IDBDatabase]"}}var a=e("util"),u=e("./EventTarget"),s=e("./FDBTransaction"),l=e("./ObjectStore"),c=e("./errors/ConstraintError"),f=e("./errors/InvalidAccessError"),h=e("./errors/InvalidStateError"),d=e("./errors/NotFoundError"),p=e("./errors/TransactionInactiveError"),v=e("./validateKeyPath");a.inherits(o,u),t.exports=o},{"./EventTarget":103,"./FDBTransaction":113,"./ObjectStore":117,"./errors/ConstraintError":120,"./errors/InvalidAccessError":123,"./errors/InvalidStateError":124,"./errors/NotFoundError":125,"./errors/TransactionInactiveError":127,"./validateKeyPath":132,util:99}],107:[function(e,t,r){"use strict";function n(e,t,r,n){try{var i;if(!e.hasOwnProperty(t))return void n();i=e[t],i.deletePending=!0;var o=i.connections.filter(function(e){return!e._closed});o.forEach(function(e){if(!e._closePending){var t=new c("versionchange",{oldVersion:i.version,newVersion:null});e.dispatchEvent(t)}});var a=o.some(function(e){return!e._closed});if(r&&a){var u=new c("blocked",{oldVersion:i.version,newVersion:null});r.dispatchEvent(u)}}catch(s){n(s)}var l=function(){var r=o.some(function(e){return!e._closed});return r?void setImmediate(l):(delete e[t],void n())};l()}function i(e,t,r,n){e._runningVersionchangeTransaction=!0;var i=e.version,o=e._rawDatabase.connections.filter(function(t){return e!==t});o.forEach(function(e){if(!e._closed){var r=new c("versionchange",{oldVersion:i,newVersion:t});e.dispatchEvent(r)}});var a=o.some(function(e){return!e._closed});if(a){var u=new c("blocked",{oldVersion:i,newVersion:t});r.dispatchEvent(u)}var s=function(){var a=o.some(function(e){return!e._closed});if(a)return void setImmediate(s);e._rawDatabase.version=t,e.version=t;var u=e.transaction(e.objectStoreNames,"versionchange");r.result=e,r.transaction=u,u._rollbackLog.push(function(){e._rawDatabase.version=i,e.version=i});var l=new c("upgradeneeded",{oldVersion:i,newVersion:t});r.dispatchEvent(l),r.readyState="done",u.addEventListener("error",function(){e._runningVersionchangeTransaction=!1}),u.addEventListener("abort",function(){e._runningVersionchangeTransaction=!1,r.transaction=null,setImmediate(function(){n(new f)})}),u.addEventListener("complete",function(){e._runningVersionchangeTransaction=!1,r.transaction=null,setImmediate(function(){n(e._closePending?new f:null)})})};s()}function o(e,t,r,n,o){var a;if(e.hasOwnProperty(t)?a=e[t]:(a=new u(t,0),e[t]=a),void 0===r&&(r=0!==a.version?a.version:1),a.version>r)return o(new h);var s=new l(e[t]);a.version<r?i(s,r,n,function(e){return e?o(e):void o(null,s)}):o(null,s)}var a=e("./Event"),u=e("./Database"),s=e("./FDBOpenDBRequest"),l=e("./FDBDatabase"),c=e("./FDBVersionChangeEvent"),f=e("./errors/AbortError"),h=e("./errors/VersionError"),d=e("./cmp");t.exports=function(){this._databases={},this.cmp=d,this.deleteDatabase=function(e){var t=new s;return t.source=null,setImmediate(function(){var r=this._databases.hasOwnProperty(e)?this._databases[e].version:null;n(this._databases,e,t,function(e){var n;return e?(t.error=new Error,t.error.name=e.name,n=new a("error",{bubbles:!0,cancelable:!1}),n._eventPath=[],void t.dispatchEvent(n)):(t.result=void 0,n=new c("success",{oldVersion:r,newVersion:null}),void t.dispatchEvent(n))})}.bind(this)),t},this.open=function(e,t){if(arguments.length>1&&(isNaN(t)||1>t||t>=9007199254740992))throw new TypeError;var r=new s;return r.source=null,setImmediate(function(){o(this._databases,e,t,r,function(e,t){var n;return e?(r.result=void 0,r.error=new Error,r.error.name=e.name,n=new a("error",{bubbles:!0,cancelable:!1}),n._eventPath=[],void r.dispatchEvent(n)):(r.result=t,n=new a("success"),n._eventPath=[],void r.dispatchEvent(n))})}.bind(this)),r},this.toString=function(){return"[object IDBFactory]"}}},{"./Database":101,"./Event":102,"./FDBDatabase":106,"./FDBOpenDBRequest":111,"./FDBVersionChangeEvent":114,"./cmp":118,"./errors/AbortError":119,"./errors/VersionError":128}],108:[function(e,t,r){"use strict";function n(e){if(!e.objectStore.transaction._active)throw new c;if(e._rawIndex.deleted||e.objectStore._rawObjectStore.deleted)throw new l}var i=e("./structuredClone"),o=e("./FDBCursor"),a=e("./FDBCursorWithValue"),u=e("./FDBKeyRange"),s=e("./FDBRequest"),l=e("./errors/InvalidStateError"),c=e("./errors/TransactionInactiveError"),f=e("./cmp"),h=e("./validateKey");t.exports=function(e,t){this._rawIndex=t,this.name=t.name,this.objectStore=e,this.keyPath=t.keyPath,this.multiEntry=t.multiEntry,this.unique=t.unique,this.openCursor=function(e,t){n(this),null===e&&(e=void 0),void 0===e||e instanceof u||(e=u.only(i(h(e))));var r=new s;r.source=this,r.transaction=this.objectStore.transaction;var o=new a(this,e,t);return o._request=r,this.objectStore.transaction._execRequestAsync({source:this,operation:o._iterate.bind(o),request:r})},this.openKeyCursor=function(e,t){n(this),null===e&&(e=void 0),void 0===e||e instanceof u||(e=u.only(i(h(e))));var r=new s;r.source=this,r.transaction=this.objectStore.transaction;var a=new o(this,e,t);return a._request=r,this.objectStore.transaction._execRequestAsync({source:this,operation:a._iterate.bind(a),request:r})},this.get=function(e){return n(this),e instanceof u||(e=i(h(e))),this.objectStore.transaction._execRequestAsync({source:this,operation:this._rawIndex.getValue.bind(this._rawIndex,e)})},this.getKey=function(e){return n(this),e instanceof u||(e=i(h(e))),this.objectStore.transaction._execRequestAsync({source:this,operation:this._rawIndex.getKey.bind(this._rawIndex,e)})},this.count=function(e){return n(this),void 0===e||e instanceof u||(e=i(h(e))),this.objectStore.transaction._execRequestAsync({source:this,operation:function(){var t;return e instanceof u?(t=0,this._rawIndex.records.forEach(function(r){u.check(e,r.key)&&(t+=1)})):void 0!==e?(t=0,this._rawIndex.records.forEach(function(r){0===f(r.key,e)&&(t+=1)})):t=this._rawIndex.records.length,t}.bind(this)})},this.toString=function(){return"[object IDBIndex]"}}},{"./FDBCursor":104,"./FDBCursorWithValue":105,"./FDBKeyRange":109,"./FDBRequest":112,"./cmp":118,"./errors/InvalidStateError":124,"./errors/TransactionInactiveError":127,"./structuredClone":130,"./validateKey":131}],109:[function(e,t,r){"use strict";function n(){this.lower=void 0,this.upper=void 0,this.lowerOpen=void 0,this.upperOpen=void 0,this.toString=function(){return"[object IDBKeyRange]"}}var i=e("./errors/DataError"),o=e("./cmp"),a=e("./validateKey");n.only=function(e){if(void 0===e)throw new TypeError;a(e);var t=new n;return t.lower=e,t.upper=e,t.lowerOpen=!1,t.upperOpen=!1,t},n.lowerBound=function(e,t){if(void 0===e)throw new TypeError;a(e);var r=new n;return r.lower=e,r.lowerOpen=t===!0?!0:!1,r.upperOpen=!0,r},n.upperBound=function(e,t){if(void 0===e)throw new TypeError;a(e);var r=new n;return r.upper=e,r.lowerOpen=!0,r.upperOpen=t===!0?!0:!1,r},n.bound=function(e,t,r,u){if(void 0===e||void 0===t)throw new TypeError;var s=o(e,t);if(1===s||0===s&&(r||u))throw new i;a(e),a(t);var l=new n;return l.lower=e,l.upper=t,l.lowerOpen=r===!0?!0:!1,l.upperOpen=u===!0?!0:!1,l},n.check=function(e,t){var r;return void 0!==e.lower&&(r=o(e.lower,t),1===r||0===r&&e.lowerOpen)?!1:void 0!==e.upper&&(r=o(e.upper,t),-1===r||0===r&&e.upperOpen)?!1:!0},t.exports=n},{"./cmp":118,"./errors/DataError":122,"./validateKey":131}],110:[function(e,t,r){"use strict";function n(e){if(e._rawObjectStore.deleted)throw new p;if(!e.transaction._active)throw new g}function i(e,t){if("readonly"===this.transaction.mode)throw new y;if(n(this),null!==this.keyPath){if(void 0!==t)throw new h;var r=m(this.keyPath,e);if(void 0!==r)_(r);else if(!this._rawObjectStore.keyGenerator)throw new h}if(null===this.keyPath&&null===this._rawObjectStore.keyGenerator&&void 0===t)throw new h;return void 0!==t&&_(t),{key:o(t),value:o(e)}}var o=e("./structuredClone"),a=e("./Index"),u=e("./FDBCursorWithValue"),s=e("./FDBIndex"),l=e("./FDBKeyRange"),c=e("./FDBRequest"),f=e("./errors/ConstraintError"),h=e("./errors/DataError"),d=e("./errors/InvalidAccessError"),p=e("./errors/InvalidStateError"),v=e("./errors/NotFoundError"),y=e("./errors/ReadOnlyError"),g=e("./errors/TransactionInactiveError"),b=e("./cmp"),m=e("./extractKey"),_=e("./validateKey"),w=e("./validateKeyPath");t.exports=function(e,t){this._rawObjectStore=t,this._rawIndexesCache={},this.name=t.name,this.keyPath=t.keyPath,this.indexNames=Object.keys(t.rawIndexes).sort(),this.autoIncrement=t.autoIncrement,this.transaction=e,this.put=function(e,t){var r=i.call(this,e,t);return this.transaction._execRequestAsync({source:this,operation:this._rawObjectStore.storeRecord.bind(this._rawObjectStore,r,!1,this.transaction._rollbackLog)})},this.add=function(e,t){var r=i.call(this,e,t);return this.transaction._execRequestAsync({source:this,operation:this._rawObjectStore.storeRecord.bind(this._rawObjectStore,r,!0,this.transaction._rollbackLog)})},this["delete"]=function(e){if("readonly"===this.transaction.mode)throw new y;return n(this),e instanceof l||(e=o(_(e))),this.transaction._execRequestAsync({source:this,operation:this._rawObjectStore.deleteRecord.bind(this._rawObjectStore,e,this.transaction._rollbackLog)})},this.get=function(e){return n(this),e instanceof l||(e=o(_(e))),this.transaction._execRequestAsync({source:this,operation:this._rawObjectStore.getValue.bind(this._rawObjectStore,e)})},this.clear=function(){if("readonly"===this.transaction.mode)throw new y;return n(this),this.transaction._execRequestAsync({source:this,operation:this._rawObjectStore.clear.bind(this._rawObjectStore,this.transaction._rollbackLog)})},this.openCursor=function(e,t){n(this),null===e&&(e=void 0),void 0===e||e instanceof l||(e=l.only(o(_(e))));var r=new c;r.source=this,r.transaction=this.transaction;var i=new u(this,e,t);return i._request=r,this.transaction._execRequestAsync({source:this,operation:i._iterate.bind(i),request:r})},this.createIndex=function(e,t,r){if(void 0===t)throw new TypeError;r=void 0!==r?r:{};var i=void 0!==r.multiEntry?r.multiEntry:!1,o=void 0!==r.unique?r.unique:!1;if("versionchange"!==this.transaction.mode)throw new p;if(n(this),this.indexNames.indexOf(e)>=0)throw new f;if(w(t),Array.isArray(t)&&i)throw new d;this.transaction._rollbackLog.push(function(t){this.indexNames=t,delete this._rawObjectStore.rawIndexes[e]}.bind(this,this.indexNames.slice()));var u=new a(this._rawObjectStore,e,t,i,o);return this.indexNames.push(e),this.indexNames.sort(),this._rawObjectStore.rawIndexes[e]=u,u.initialize(this.transaction),new s(this,u)},this.index=function(e){if(void 0===e)throw new TypeError;if(this._rawIndexesCache.hasOwnProperty(e))return this._rawIndexesCache[e];if(this.indexNames.indexOf(e)<0)throw new v;if(this._rawObjectStore.deleted)throw new p;var t=new s(this,this._rawObjectStore.rawIndexes[e]);return this._rawIndexesCache[e]=t,t},this.deleteIndex=function(e){if(void 0===e)throw new TypeError;if("versionchange"!==this.transaction.mode)throw new p;if(n(this),!this._rawObjectStore.rawIndexes.hasOwnProperty(e))throw new v;this.transaction._rollbackLog.push(function(t){t.deleted=!1,this._rawObjectStore.rawIndexes[e]=t,this.indexNames.push(e),this.indexNames.sort()}.bind(this,this._rawObjectStore.rawIndexes[e])),this.indexNames=this.indexNames.filter(function(t){return t!==e}),this._rawObjectStore.rawIndexes[e].deleted=!0,this.transaction._execRequestAsync({source:this,operation:function(){delete this._rawObjectStore.rawIndexes[e]}.bind(this)})},this.count=function(e){return n(this),void 0===e||e instanceof l||(e=o(_(e))),this.transaction._execRequestAsync({source:this,operation:function(){var t;return e instanceof l?(t=0,this._rawObjectStore.records.forEach(function(r){l.check(e,r.key)&&(t+=1)})):void 0!==e?(t=0,this._rawObjectStore.records.forEach(function(r){0===b(r.key,e)&&(t+=1)})):t=this._rawObjectStore.records.length,t}.bind(this)})},this.toString=function(){return"[object IDBObjectStore]"}}},{"./FDBCursorWithValue":105,"./FDBIndex":108,"./FDBKeyRange":109,"./FDBRequest":112,"./Index":115,"./cmp":118,"./errors/ConstraintError":120,"./errors/DataError":122,"./errors/InvalidAccessError":123,"./errors/InvalidStateError":124,"./errors/NotFoundError":125,"./errors/ReadOnlyError":126,"./errors/TransactionInactiveError":127,"./extractKey":129,"./structuredClone":130,"./validateKey":131,"./validateKeyPath":132}],111:[function(e,t,r){"use strict";function n(){o.call(this),this.onupgradeneeded=null,this.onblocked=null,this.toString=function(){return"[object IDBOpenDBRequest]"}}var i=e("util"),o=e("./FDBRequest");i.inherits(n,o),t.exports=n},{"./FDBRequest":112,util:99}],112:[function(e,t,r){"use strict";function n(){o.call(this),this.result=null,this.error=null,this.source=null,this.transaction=null,this.readyState="pending",this.onsuccess=null,this.onerror=null,this.toString=function(){return"[object IDBRequest]"}}var i=e("util"),o=e("./EventTarget");i.inherits(n,o),t.exports=n},{"./EventTarget":103,util:99}],113:[function(e,t,r){"use strict";function n(e,t){a.call(this),this._scope=e,this._started=!1,this._active=!0,this._finished=!1,this._requests=[],this._rollbackLog=[],this.mode=t,this.db=null,this.error=null,this.onabort=null,this.oncomplete=null,this.onerror=null,this._abort=function(e){this._rollbackLog.reverse().forEach(function(e){e()});var t;null!==e&&(t=new Error,t.name=e,this.error=t),this._requests.forEach(function(e){var t=e.request;if("done"!==t.readyState&&(t.readyState="done",t.source)){t.result=void 0,t.error=new l;var r=new o("error",{bubbles:!0,cancelable:!0});r._eventPath=[this.db,this],t.dispatchEvent(r)}}.bind(this)),setImmediate(function(){var e=new o("abort",{bubbles:!0,cancelable:!1});e._eventPath=[this.db],this.dispatchEvent(e)}.bind(this)),this._finished=!0},this.abort=function(){if(this._finished)throw new h;this._active=!1,this._abort(null)},this.objectStore=function(e){if(this._scope.indexOf(e)<0)throw new f;if(!this._active)throw new h;return new u(this,this.db._rawDatabase.rawObjectStores[e])},this._execRequestAsync=function(e){var t=e.source,r=e.operation,n=e.hasOwnProperty("request")?e.request:null;if(!this._active)throw new c;
return n||(t?(n=new s,n.source=t,n.transaction=t.transaction):n={readyState:"pending"}),this._requests.push({request:n,operation:r}),n},this._start=function(){var e;if(this._started=!0,this._requests.length>0){var t=this._requests.shift(),r=t.request,n=t.operation;if("done"===r.readyState)return void setImmediate(this._start.bind(this));if(r.source){var i;try{var a=n();r.readyState="done",r.result=a,r.error=void 0,this._active=!0,e=new o("success",{bubbles:!1,cancelable:!1})}catch(u){r.readyState="done",r.result=void 0,r.error=u,this._active=!0,e=new o("error",{bubbles:!0,cancelable:!0}),i=this._abort.bind(this,u.name)}try{e._eventPath=[this.db,this],r.dispatchEvent(e)}catch(u){throw this._abort("AbortError"),u}e._canceled||i&&i()}else n();return void(this._requests.length>0?this._start():setImmediate(this._start.bind(this)))}this._finished||(this._active=!1,this._finished=!0,this.error||(e=new o,e.type="complete",this.dispatchEvent(e)))},this.toString=function(){return"[object IDBRequest]"}}var i=e("util"),o=e("./Event"),a=e("./EventTarget"),u=e("./FDBObjectStore"),s=e("./FDBRequest"),l=e("./errors/AbortError"),c=e("./errors/TransactionInactiveError"),f=e("./errors/NotFoundError"),h=e("./errors/InvalidStateError");i.inherits(n,a),t.exports=n},{"./Event":102,"./EventTarget":103,"./FDBObjectStore":110,"./FDBRequest":112,"./errors/AbortError":119,"./errors/InvalidStateError":124,"./errors/NotFoundError":125,"./errors/TransactionInactiveError":127,util:99}],114:[function(e,t,r){"use strict";function n(e,t){o.call(this,e),t=void 0!==t?t:{},this.oldVersion=void 0!==t.oldVersion?t.oldVersion:0,this.newVersion=void 0!==t.newVersion?t.newVersion:null,this.toString=function(){return"[object IDBVersionChangeEvent]"}}var i=e("util"),o=e("./Event");i.inherits(n,o),t.exports=n},{"./Event":102,util:99}],115:[function(e,t,r){"use strict";var n=e("./FDBKeyRange"),i=e("./errors/ConstraintError"),o=e("./cmp"),a=e("./extractKey"),u=e("./validateKey");t.exports=function(e,t,r,s,l){this.records=[],this.rawObjectStore=e,this.initialized=!1,this.deleted=!1,this.name=t,this.keyPath=r,this.multiEntry=s,this.unique=l,this._getRecord=function(e){var t;return t=e instanceof n?this.records.find(function(t){return n.check(e,t.key)}):this.records.find(function(t){return 0===o(t.key,e)})},this.getKey=function(e){var t=this._getRecord(e);return void 0!==t?t.value:void 0},this.getValue=function(e){var t=this._getRecord(e);return void 0!==t?this.rawObjectStore.getValue(t.value):void 0},this.storeRecord=function(e){var t=a(this.keyPath,e.value);if(void 0!==t){if(this.multiEntry&&Array.isArray(t)){var r=[];t.forEach(function(e){if(r.indexOf(e)<0)try{u(e),r.push(e)}catch(t){}}),t=r}else try{u(t)}catch(n){return}if(this.multiEntry&&Array.isArray(t))this.unique&&t.forEach(function(e){this.records.forEach(function(t){if(0===o(t.key,e))throw new i})}.bind(this));else if(this.unique){var s=this.records.findIndex(function(e){return 0===o(e.key,t)});if(s>=0)throw new i}var l=function(e){var t=this.records.findIndex(function(t){return o(t.key,e.key)>=0});if(-1===t)t=this.records.length;else for(;t<this.records.length&&0===o(this.records[t].key,e.key)&&-1===o(this.records[t].value,e.value);)t+=1;this.records.splice(t,0,e)}.bind(this);this.multiEntry&&Array.isArray(t)?t.forEach(function(t){l({key:t,value:e.key})}):l({key:t,value:e.key})}},this.initialize=function(e){if(this.initialized)throw new Error("Index already initialized");e._execRequestAsync({source:null,operation:function(){try{this.rawObjectStore.records.forEach(function(e){this.storeRecord(e)}.bind(this)),this.initialized=!0}catch(t){e._abort(t.name)}}.bind(this)})}}},{"./FDBKeyRange":109,"./cmp":118,"./errors/ConstraintError":120,"./extractKey":129,"./validateKey":131}],116:[function(e,t,r){"use strict";var n=e("./errors/ConstraintError");t.exports=function(){this.num=0,this.next=function(){if(this.num>=9007199254740992)throw new n;return this.num+=1,this.num},this.setIfLarger=function(e){if(e>9007199254740992)throw new n;e>this.num&&(this.num=Math.floor(e))}}},{"./errors/ConstraintError":120}],117:[function(e,t,r){"use strict";var n=e("./structuredClone"),i=e("../lib/FDBKeyRange"),o=e("./KeyGenerator"),a=e("./errors/ConstraintError"),u=e("./errors/DataError"),s=e("./cmp"),l=e("./extractKey");t.exports=function(e,t,r,c){this.rawDatabase=e,this.records=[],this.rawIndexes={},this.keyGenerator=c===!0?new o:null,this.deleted=!1,this.name=t,this.keyPath=r,this.autoIncrement=c,this.getValue=function(e){var t;return t=e instanceof i?this.records.find(function(t){return i.check(e,t.key)}):this.records.find(function(t){return 0===s(t.key,e)}),void 0!==t?n(t.value):void 0},this.storeRecord=function(e,t,r){if(null!==this.keyPath){var n=l(this.keyPath,e.value);void 0!==n&&(e.key=n)}var i;if(null!==this.keyGenerator&&void 0===e.key){if(r&&r.push(function(e){this.keyGenerator.num=e}.bind(this,this.keyGenerator.num)),e.key=this.keyGenerator.next(),null!==this.keyPath){var o,c=this.keyPath,f=e.value;for(i=0;i>=0;){if("object"!=typeof f)throw new u;i=c.indexOf("."),i>=0&&(o=c.slice(0,i),c=c.slice(i+1),f.hasOwnProperty(o)||(f[o]={}),f=f[o])}o=c,f[o]=e.key}}else null!==this.keyGenerator&&"number"==typeof e.key&&this.keyGenerator.setIfLarger(e.key);if(i=this.records.findIndex(function(t){return 0===s(t.key,e.key)}),i>=0){if(t)throw new a;this.deleteRecord(e.key,r)}return 0===this.records.length&&(i=0),i=this.records.findIndex(function(t){return 1===s(t.key,e.key)}),-1===i&&(i=this.records.length),this.records.splice(i,0,e),Object.keys(this.rawIndexes).forEach(function(t){this.rawIndexes[t].initialized&&this.rawIndexes[t].storeRecord(e)}.bind(this)),r&&r.push(this.deleteRecord.bind(this,e.key)),e.key},this.deleteRecord=function(e,t){var r;r=e instanceof i?e:i.only(e),this.records=this.records.filter(function(e){var n=i.check(r,e.key);return n&&t&&t.push(this.storeRecord.bind(this,e,!0)),!n}.bind(this)),Object.keys(this.rawIndexes).forEach(function(e){var t=this.rawIndexes[e];t.records=t.records.filter(function(e){return!i.check(r,e.value)})}.bind(this))},this.clear=function(e){e&&this.records.forEach(function(t){e.push(this.storeRecord.bind(this,t,!0))}.bind(this)),this.records=[],Object.keys(this.rawIndexes).forEach(function(e){var t=this.rawIndexes[e];t.records=[]}.bind(this))}}},{"../lib/FDBKeyRange":109,"./KeyGenerator":116,"./cmp":118,"./errors/ConstraintError":120,"./errors/DataError":122,"./extractKey":129,"./structuredClone":130}],118:[function(e,t,r){"use strict";function n(e){if("number"==typeof e)return"Number";if(e instanceof Date)return"Date";if(Array.isArray(e))return"Array";if("string"==typeof e)return"String";throw new o}function i(e,t){if(void 0===t)throw new TypeError;a(e),a(t);var r=n(e),o=n(t);if(r!==o)return"Array"===r?1:"String"!==r||"Date"!==o&&"Number"!==o?"Date"===r&&"Number"===o?1:-1:1;if("Array"===r){for(var u=Math.min(e.length,t.length),s=0;u>s;s++){var l=i(e[s],t[s]);if(0!==l)return l}return e.length>t.length?1:e.length<t.length?-1:0}if("Date"===r){if(e.getTime()===t.getTime())return 0}else if(e===t)return 0;return e>t?1:-1}var o=e("./errors/DataError"),a=e("./validateKey");t.exports=i},{"./errors/DataError":122,"./validateKey":131}],119:[function(e,t,r){"use strict";function n(e){this.name=this.constructor.name,this.message=void 0!==e?e:" A request was aborted, for example through a call to IDBTransaction.abort.",Error.captureStackTrace&&Error.captureStackTrace(this,n)}var i=e("util");i.inherits(n,Error),t.exports=n},{util:99}],120:[function(e,t,r){"use strict";function n(e){this.name=this.constructor.name,this.message=void 0!==e?e:" A mutation operation in the transaction failed because a constraint was not satisfied. For example, an object such as an object store or index already exists and a request attempted to create a new one.",Error.captureStackTrace&&Error.captureStackTrace(this,n)}var i=e("util");i.inherits(n,Error),t.exports=n},{util:99}],121:[function(e,t,r){"use strict";function n(e){this.name=this.constructor.name,this.message=void 0!==e?e:"The data being stored could not be cloned by the internal structured cloning algorithm.",Error.captureStackTrace&&Error.captureStackTrace(this,n)}var i=e("util");i.inherits(n,Error),t.exports=n},{util:99}],122:[function(e,t,r){"use strict";function n(e){this.name=this.constructor.name,this.message=void 0!==e?e:"Data provided to an operation does not meet requirements.",Error.captureStackTrace&&Error.captureStackTrace(this,n)}var i=e("util");i.inherits(n,Error),t.exports=n},{util:99}],123:[function(e,t,r){"use strict";function n(e){this.name=this.constructor.name,this.message=void 0!==e?e:"An invalid operation was performed on an object. For example transaction creation attempt was made, but an empty scope was provided.",Error.captureStackTrace&&Error.captureStackTrace(this,n)}var i=e("util");i.inherits(n,Error),t.exports=n},{util:99}],124:[function(e,t,r){"use strict";function n(e){this.name=this.constructor.name,this.message=void 0!==e?e:"An operation was called on an object on which it is not allowed or at a time when it is not allowed. Also occurs if a request is made on a source object that has been deleted or removed. Use TransactionInactiveError or ReadOnlyError when possible, as they are more specific variations of InvalidStateError.",Error.captureStackTrace&&Error.captureStackTrace(this,n)}var i=e("util");i.inherits(n,Error),t.exports=n},{util:99}],125:[function(e,t,r){"use strict";function n(e){this.name=this.constructor.name,this.message=void 0!==e?e:"The operation failed because the requested database object could not be found. For example, an object store did not exist but was being opened.",Error.captureStackTrace&&Error.captureStackTrace(this,n)}var i=e("util");i.inherits(n,Error),t.exports=n},{util:99}],126:[function(e,t,r){"use strict";function n(e){this.name=this.constructor.name,this.message=void 0!==e?e:'The mutating operation was attempted in a "readonly" transaction.',Error.captureStackTrace&&Error.captureStackTrace(this,n)}var i=e("util");i.inherits(n,Error),t.exports=n},{util:99}],127:[function(e,t,r){"use strict";function n(e){this.name=this.constructor.name,this.message=void 0!==e?e:"A request was placed against a transaction which is currently not active, or which is finished.",Error.captureStackTrace&&Error.captureStackTrace(this,n)}var i=e("util");i.inherits(n,Error),t.exports=n},{util:99}],128:[function(e,t,r){"use strict";function n(e){this.name=this.constructor.name,this.message=void 0!==e?e:"An attempt was made to open a database using a lower version than the existing version.",Error.captureStackTrace&&Error.captureStackTrace(this,n)}var i=e("util");i.inherits(n,Error),t.exports=n},{util:99}],129:[function(e,t,r){"use strict";function n(e,t){if(Array.isArray(e)){var r=[];return e.forEach(function(e){void 0!==e&&null!==e&&"string"!=typeof e&&e.toString&&(e=e.toString()),r.push(i(o(n(e,t))))}),r}if(""===e)return t;for(var a=e,u=t;null!==a;){var s,l=a.indexOf(".");if(l>=0?(s=a.slice(0,l),a=a.slice(l+1)):(s=a,a=null),!u.hasOwnProperty(s))return;u=u[s]}return u}var i=e("./structuredClone"),o=e("./validateKey");t.exports=n},{"./structuredClone":130,"./validateKey":131}],130:[function(e,t,r){"use strict";var n=e("realistic-structured-clone"),i=e("./errors/DataCloneError");t.exports=function(e){try{return n(e)}catch(t){throw new i}}},{"./errors/DataCloneError":121,"realistic-structured-clone":135}],131:[function(e,t,r){"use strict";function n(e,t){if("number"==typeof e){if(isNaN(e))throw new i}else if(e instanceof Date){if(isNaN(e.valueOf()))throw new i}else{if(Array.isArray(e)){t=void 0!==t?t:[],e.forEach(function(e){if("object"==typeof e&&t.indexOf(e)>=0)throw new i;t.push(e)});var r=0;if(e=e.map(function(e){return r+=1,n(e,t)}),r!==e.length)throw new i;return e}if("string"!=typeof e)throw new i}return e}var i=e("./errors/DataError");t.exports=n},{"./errors/DataError":122}],132:[function(e,t,r){"use strict";function n(e,t){if(void 0===e||null===e||"string"==typeof e||!e.toString||"array"!==t&&Array.isArray(e)||(e=e.toString()),"string"==typeof e){if(""===e&&"string"!==t)return;try{var r=/^(?:[\$A-Z_a-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B2\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA7AD\uA7B0\uA7B1\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB5F\uAB64\uAB65\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC])(?:[\$0-9A-Z_a-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B2\u08E4-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58\u0C59\u0C60-\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D60-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA69D\uA69F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA7AD\uA7B0\uA7B1\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB5F\uAB64\uAB65\uABC0-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2D\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC])*$/;if(e.length>=1&&r.test(e))return}catch(i){throw new SyntaxError(i.message)}if(e.indexOf(" ")>=0)throw new SyntaxError("The keypath argument contains an invalid key path (no spaces allowed).")}if(Array.isArray(e)&&e.length>0){if(t)throw new SyntaxError("The keypath argument contains an invalid key path (nested arrays).");return void e.forEach(function(e){n(e,"array")})}if("string"==typeof e&&e.indexOf(".")>=0)return e=e.split("."),void e.forEach(function(e){n(e,"string")});throw new SyntaxError}t.exports=n},{}],133:[function(e,t,r){!function(e){if(!Array.prototype.find){var t=function(e){var t=Object(this),r=t.length<0?0:t.length>>>0;if(0===r)return void 0;if("function"!=typeof e||"[object Function]"!==Object.prototype.toString.call(e))throw new TypeError("Array#find: predicate must be a function");for(var n,i=arguments[1],o=0;r>o;o++)if(n=t[o],e.call(i,n,o,t))return n;return void 0};if(Object.defineProperty)try{Object.defineProperty(Array.prototype,"find",{value:t,configurable:!0,enumerable:!1,writable:!0})}catch(r){}Array.prototype.find||(Array.prototype.find=t)}}(this)},{}],134:[function(e,t,r){!function(e){if(!Array.prototype.findIndex){var t=function(e){var t=Object(this),r=Math.max(0,t.length)>>>0;if(0===r)return-1;if("function"!=typeof e||"[object Function]"!==Object.prototype.toString.call(e))throw new TypeError("Array#findIndex: predicate must be a function");for(var n=arguments.length>1?arguments[1]:void 0,i=0;r>i;i++)if(e.call(n,t[i],i,t))return i;return-1};if(Object.defineProperty)try{Object.defineProperty(Array.prototype,"findIndex",{value:t,configurable:!0,writable:!0})}catch(r){}Array.prototype.findIndex||(Array.prototype.findIndex=t)}}(this)},{}],135:[function(e,t,r){"use strict";function n(e){this.name=this.constructor.name,this.message=e,Error.captureStackTrace&&Error.captureStackTrace(this,n)}function i(e,t){t=void 0!==t?t:[];for(var r=0;r<t.length;r++)if(t[r].source===e)return t[r].destination;var o,u=typeof e;if("string"===u||"number"===u||"boolean"===u||"undefined"===u||null===e)return e;var s="none";if(e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date)o=new e.constructor(e.valueOf());else if(e instanceof RegExp)o=new RegExp(e.source,"g".substr(0,Number(e.global))+"i".substr(0,Number(e.ignoreCase))+"m".substr(0,Number(e.multiline)));else if(Array.isArray(e))o=new Array(e.length),s="own";else if(a(e))o={},s="own";else if(e instanceof Map)o=new Map,s="map";else{if(!(e instanceof Set))throw new n;o=new Set,s="set"}if(t.push({source:e,destination:o}),"map"===s)throw new n("Map support not implemented yet");if("set"===s)throw new n("Set support not implemented yet");if("own"===s)for(var l in e)if(e.hasOwnProperty(l)){var c=e[l],f=i(c,t);o[l]=f}return o}var o=e("util"),a=e("lodash.isplainobject");o.inherits(n,Error),t.exports=i},{"lodash.isplainobject":136,util:99}],136:[function(e,t,r){function n(e){return!!e&&"object"==typeof e}function i(e,t){return a(e,t,s)}function o(e){var t;if(!n(e)||h.call(e)!=l||u(e)||!f.call(e,"constructor")&&(t=e.constructor,"function"==typeof t&&!(t instanceof t)))return!1;var r;return i(e,function(e,t){r=t}),void 0===r||f.call(e,r)}var a=e("lodash._basefor"),u=e("lodash.isarguments"),s=e("lodash.keysin"),l="[object Object]",c=Object.prototype,f=c.hasOwnProperty,h=c.toString;t.exports=o},{"lodash._basefor":137,"lodash.isarguments":138,"lodash.keysin":139}],137:[function(e,t,r){function n(e){return function(t,r,n){for(var o=i(t),a=n(t),u=a.length,s=e?u:-1;e?s--:++s<u;){var l=a[s];if(r(o[l],l,o)===!1)break}return t}}function i(e){return o(e)?e:Object(e)}function o(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var a=n();t.exports=a},{}],138:[function(e,t,r){function n(e){return!!e&&"object"==typeof e}function i(e){return function(t){return null==t?void 0:t[e]}}function o(e){return null!=e&&a(h(e))}function a(e){return"number"==typeof e&&e>-1&&e%1==0&&f>=e}function u(e){return n(e)&&o(e)&&l.call(e,"callee")&&!c.call(e,"callee")}var s=Object.prototype,l=s.hasOwnProperty,c=s.propertyIsEnumerable,f=9007199254740991,h=i("length");t.exports=u},{}],139:[function(e,t,r){function n(e,t){return e="number"==typeof e||l.test(e)?+e:-1,t=null==t?h:t,e>-1&&e%1==0&&t>e}function i(e){return"number"==typeof e&&e>-1&&e%1==0&&h>=e}function o(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function a(e){if(null==e)return[];o(e)||(e=Object(e));var t=e.length;t=t&&i(t)&&(s(e)||u(e))&&t||0;for(var r=e.constructor,a=-1,l="function"==typeof r&&r.prototype===e,c=Array(t),h=t>0;++a<t;)c[a]=a+"";for(var d in e)h&&n(d,t)||"constructor"==d&&(l||!f.call(e,d))||c.push(d);return c}var u=e("lodash.isarguments"),s=e("lodash.isarray"),l=/^\d+$/,c=Object.prototype,f=c.hasOwnProperty,h=9007199254740991;t.exports=a},{"lodash.isarguments":138,"lodash.isarray":140}],140:[function(e,t,r){function n(e){return!!e&&"object"==typeof e}function i(e,t){var r=null==e?void 0:e[t];return s(r)?r:void 0}function o(e){return"number"==typeof e&&e>-1&&e%1==0&&b>=e}function a(e){return u(e)&&v.call(e)==c}function u(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function s(e){return null==e?!1:a(e)?y.test(d.call(e)):n(e)&&f.test(e)}var l="[object Array]",c="[object Function]",f=/^\[object .+?Constructor\]$/,h=Object.prototype,d=Function.prototype.toString,p=h.hasOwnProperty,v=h.toString,y=RegExp("^"+d.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),g=i(Array,"isArray"),b=9007199254740991,m=g||function(e){return n(e)&&o(e.length)&&v.call(e)==l};t.exports=m},{}],141:[function(e,t,r){(function(r){var n=t.exports={},i=e("localstorage-memory");n.hasLocalStorage=e("has-localstorage"),n.create=function(){var e;return n.hasLocalStorage()?(e=r.localStorage,e={get length(){return r.localStorage.length},getItem:r.localStorage.getItem.bind(r.localStorage),setItem:r.localStorage.setItem.bind(r.localStorage),removeItem:r.localStorage.removeItem.bind(r.localStorage),key:r.localStorage.key.bind(r.localStorage),clear:r.localStorage.clear.bind(r.localStorage)},e.isPersistent=!0):(e=i,e.isPersistent=!1),e.getObject=n.getObject.bind(null,e),e.setObject=n.setObject.bind(null,e),e},n.setObject=function(e,t,r){return"object"!=typeof r?e.setItem(t,r):e.setItem(t,JSON.stringify(r))},n.getObject=function(e,t){var r=e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch(n){return r}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"has-localstorage":143,"localstorage-memory":144}],142:[function(e,t,r){var n=e("./api");t.exports=n.create()},{"./api":141}],143:[function(e,t,r){function n(){try{if("undefined"==typeof localStorage)return!1;if(localStorage.setItem("Storage-Test","1"),"1"!==localStorage.getItem("Storage-Test"))return!1;localStorage.removeItem("Storage-Test")}catch(e){return!1}return!0}"object"==typeof r&&(t.exports=n)},{}],144:[function(e,t,r){!function(e){var n={},i={};n.length=0,n.getItem=function(e){return i[e]||null},n.setItem=function(e,t){"undefined"==typeof t?n.removeItem(e):(i[e]=""+t,n.length++)},n.removeItem=function(e){delete i[e],n.length--},n.key=function(e){return Object.keys(i)[e]||null},n.clear=function(){i={},n.length=0},"object"==typeof r?t.exports=n:e.localStorageMemory=n}(this)},{}],145:[function(e,t,r){"use strict";function n(e,t){if(0===e.level)return e.value;for(var r="\r\n",n=t?f:l,i=1;i<e.level;i++)r=""+r+(s[i]?" ":h),r=""+r+"  ";return""+r+n+c+" "+e.value}function i(e,t){var r=n(e,t);return e.nodes.length>0&&!function(){var t=e.nodes.length-1;e.nodes.forEach(function(e,n){s[e.level]=n===t,r+=i(e,n===t)})}(),r}var o=e("babel-runtime/helpers/create-class")["default"],a=e("babel-runtime/helpers/class-call-check")["default"],u=e("babel-runtime/core-js/object/define-property")["default"];u(r,"__esModule",{value:!0});var s=[],l=String.fromCharCode(9500),c=String.fromCharCode(9472),f=String.fromCharCode(9492),h=String.fromCharCode(9474),d=function(){function e(){a(this,e)}return o(e,null,[{key:"generate",value:function(){var e=void 0===arguments[0]?{}:arguments[0];return i(e)}}]),e}();r["default"]=d,t.exports=r["default"]},{"babel-runtime/core-js/object/define-property":2,"babel-runtime/helpers/class-call-check":9,"babel-runtime/helpers/create-class":10}],146:[function(e,t,r){"use strict";var n=e("babel-runtime/core-js/object/define-property")["default"];n(r,"__esModule",{value:!0});var i=e("./rack");i.Middleware=e("./middleware"),r["default"]=i,t.exports=r["default"]},{"./middleware":147,"./rack":148,"babel-runtime/core-js/object/define-property":2}],147:[function(e,t,r){"use strict";var n=e("babel-runtime/helpers/create-class")["default"],i=e("babel-runtime/helpers/class-call-check")["default"],o=e("babel-runtime/core-js/object/define-property")["default"],a=e("babel-runtime/core-js/promise")["default"],u=e("babel-runtime/helpers/interop-require-default")["default"];o(r,"__esModule",{value:!0});var s=e("./asciiTree"),l=u(s),c=function(){function e(){var t=void 0===arguments[0]?"Middleware":arguments[0];i(this,e),this.name=t}return n(e,[{key:"handle",value:function(){var e=void 0===arguments[0]?{}:arguments[0];return a.resolve(e)}},{key:"generateTree",value:function(){var e=void 0===arguments[0]?0:arguments[0],t={value:this.name,level:e,nodes:[]};return t}},{key:"toString",value:function(){var e=this.generateTree(0);return l["default"].generate(e)}}]),e}();r["default"]=c,t.exports=r["default"]},{"./asciiTree":145,"babel-runtime/core-js/object/define-property":2,"babel-runtime/core-js/promise":7,"babel-runtime/helpers/class-call-check":9,"babel-runtime/helpers/create-class":10,"babel-runtime/helpers/interop-require-default":13}],148:[function(e,t,r){"use strict";var n=e("babel-runtime/helpers/inherits")["default"],i=e("babel-runtime/helpers/get")["default"],o=e("babel-runtime/helpers/create-class")["default"],a=e("babel-runtime/helpers/class-call-check")["default"],u=e("babel-runtime/core-js/object/define-property")["default"],s=e("babel-runtime/helpers/interop-require-default")["default"];u(r,"__esModule",{value:!0});var l=e("./middleware"),c=s(l),f=function d(e,t,r){var n=this;if(-1>e||e>=t.length)throw new Error("Index "+e+" is out of bounds.");var i=t[e];return i.handle(r).then(function(r){return e+=1,e<t.length?d.call(n,e,t,r):r})},h=function(e){function t(){var e=void 0===arguments[0]?"Rack":arguments[0];a(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this._middlewares=[]}return n(t,e),o(t,[{key:"getMiddleware",
value:function(){var e=void 0===arguments[0]?-1:arguments[0],t=this.middlewares;if(-1>e||e>=t.length)throw new Error("Index "+e+" is out of bounds.");return t[e]}},{key:"use",value:function(e){if(null!==e&&void 0!==e){if(e instanceof c["default"])return void this._middlewares.push(e);throw new Error("Unable to use the middleware. It must be an instance of Middleware.")}}},{key:"useBefore",value:function(e,t){if(null!==t&&void 0!==t){if(t instanceof c["default"]){var r=this.middlewares,n=r.findIndex(function(t){return t instanceof e});return void(n>-1&&(r.splice(n,0,t),this._middlewares=r))}throw new Error("Unable to use the middleware. It must be an instance of Middleware.")}}},{key:"useAfter",value:function(e,t){if(null!==t&&void 0!==t){if(t instanceof c["default"]){var r=this.middlewares,n=r.findIndex(function(t){return t instanceof e});return void(n>-1&&(r.splice(n+1,0,t),this._middlewares=r))}throw new Error("Unable to use the middleware. It must be an instance of Middleware.")}}},{key:"swap",value:function(e,t){if(null!==t&&void 0!==t){if(t instanceof c["default"]){var r=this.middlewares,n=r.findIndex(function(t){return t instanceof e});return void(n>-1&&(r.splice(n,1,t),this._middlewares=r))}throw new Error("Unable to use the middleware. It must be an instance of Middleware.")}}},{key:"remove",value:function(e){var t=this.middlewares,r=t.findIndex(function(t){return t instanceof e});r>-1&&(t.splice(r,1),this._middlewares=t,this.remove(e))}},{key:"reset",value:function(){this._middlewares=[]}},{key:"execute",value:function(e){return f.call(this,0,this.middlewares,e)}},{key:"handle",value:function(e){return this.execute(e)}},{key:"generateTree",value:function(){var e=void 0===arguments[0]?0:arguments[0],r=i(Object.getPrototypeOf(t.prototype),"generateTree",this).call(this,e),n=this.middlewares;return n.forEach(function(t){r.nodes.push(t.generateTree(e+1))}),r}},{key:"middlewares",get:function(){return this._middlewares.slice()}}]),t}(c["default"]);r["default"]=h,t.exports=r["default"]},{"./middleware":147,"babel-runtime/core-js/object/define-property":2,"babel-runtime/helpers/class-call-check":9,"babel-runtime/helpers/create-class":10,"babel-runtime/helpers/get":11,"babel-runtime/helpers/inherits":12,"babel-runtime/helpers/interop-require-default":13}],149:[function(e,t,r){function n(e){var t=e?e.length:0;return t?e[t-1]:void 0}t.exports=n},{}],150:[function(e,t,r){var n=e("../internal/createAggregator"),i=n(function(e,t,r){e[r]=t});t.exports=i},{"../internal/createAggregator":183}],151:[function(e,t,r){var n=e("../internal/arrayReduce"),i=e("../internal/baseEach"),o=e("../internal/createReduce"),a=o(n,i);t.exports=a},{"../internal/arrayReduce":156,"../internal/baseEach":164,"../internal/createReduce":188}],152:[function(e,t,r){function n(e){var t=e?i(e):0;return o(t)?t:a(e).length}var i=e("../internal/getLength"),o=e("../internal/isLength"),a=e("../object/keys");t.exports=n},{"../internal/getLength":192,"../internal/isLength":202,"../object/keys":225}],153:[function(e,t,r){function n(e,t){if("function"!=typeof e)throw new TypeError(i);return t=o(void 0===t?e.length-1:+t||0,0),function(){for(var r=arguments,n=-1,i=o(r.length-t,0),a=Array(i);++n<i;)a[n]=r[t+n];switch(t){case 0:return e.call(this,a);case 1:return e.call(this,r[0],a);case 2:return e.call(this,r[0],r[1],a)}var u=Array(t+1);for(n=-1;++n<t;)u[n]=r[n];return u[t]=a,e.apply(this,u)}}var i="Expected a function",o=Math.max;t.exports=n},{}],154:[function(e,t,r){function n(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}t.exports=n},{}],155:[function(e,t,r){function n(e,t){for(var r=-1,n=e.length;++r<n&&t(e[r],r,e)!==!1;);return e}t.exports=n},{}],156:[function(e,t,r){function n(e,t,r,n){var i=-1,o=e.length;for(n&&o&&(r=e[++i]);++i<o;)r=t(r,e[i],i,e);return r}t.exports=n},{}],157:[function(e,t,r){function n(e,t){for(var r=-1,n=e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}t.exports=n},{}],158:[function(e,t,r){function n(e,t){return void 0===e?t:e}t.exports=n},{}],159:[function(e,t,r){function n(e,t,r){for(var n=-1,o=i(t),a=o.length;++n<a;){var u=o[n],s=e[u],l=r(s,t[u],u,e,t);(l===l?l===s:s!==s)&&(void 0!==s||u in e)||(e[u]=l)}return e}var i=e("../object/keys");t.exports=n},{"../object/keys":225}],160:[function(e,t,r){function n(e,t){return null==t?e:i(t,o(t),e)}var i=e("./baseCopy"),o=e("../object/keys");t.exports=n},{"../object/keys":225,"./baseCopy":163}],161:[function(e,t,r){function n(e,t,r){var n=typeof e;return"function"==n?void 0===t?e:a(e,t,r):null==e?u:"object"==n?i(e):void 0===t?s(e):o(e,t)}var i=e("./baseMatches"),o=e("./baseMatchesProperty"),a=e("./bindCallback"),u=e("../utility/identity"),s=e("../utility/property");t.exports=n},{"../utility/identity":230,"../utility/property":231,"./baseMatches":172,"./baseMatchesProperty":173,"./bindCallback":181}],162:[function(e,t,r){function n(e,t,r,p,v,y,g){var m;if(r&&(m=v?r(e,p,v):r(e)),void 0!==m)return m;if(!h(e))return e;var _=f(e);if(_){if(m=s(e),!t)return i(e,m)}else{var j=q.call(e),A=j==b;if(j!=w&&j!=d&&(!A||v))return R[j]?l(e,j,t):v?e:{};if(m=c(A?{}:e),!t)return a(m,e)}y||(y=[]),g||(g=[]);for(var E=y.length;E--;)if(y[E]==e)return g[E];return y.push(e),g.push(m),(_?o:u)(e,function(i,o){m[o]=n(i,t,r,o,e,y,g)}),m}var i=e("./arrayCopy"),o=e("./arrayEach"),a=e("./baseAssign"),u=e("./baseForOwn"),s=e("./initCloneArray"),l=e("./initCloneByTag"),c=e("./initCloneObject"),f=e("../lang/isArray"),h=e("../lang/isObject"),d="[object Arguments]",p="[object Array]",v="[object Boolean]",y="[object Date]",g="[object Error]",b="[object Function]",m="[object Map]",_="[object Number]",w="[object Object]",j="[object RegExp]",A="[object Set]",E="[object String]",k="[object WeakMap]",x="[object ArrayBuffer]",F="[object Float32Array]",C="[object Float64Array]",O="[object Int8Array]",S="[object Int16Array]",P="[object Int32Array]",D="[object Uint8Array]",B="[object Uint8ClampedArray]",T="[object Uint16Array]",I="[object Uint32Array]",R={};R[d]=R[p]=R[x]=R[v]=R[y]=R[F]=R[C]=R[O]=R[S]=R[P]=R[_]=R[w]=R[j]=R[E]=R[D]=R[B]=R[T]=R[I]=!0,R[g]=R[b]=R[m]=R[A]=R[k]=!1;var $=Object.prototype,q=$.toString;t.exports=n},{"../lang/isArray":210,"../lang/isObject":216,"./arrayCopy":154,"./arrayEach":155,"./baseAssign":160,"./baseForOwn":167,"./initCloneArray":195,"./initCloneByTag":196,"./initCloneObject":197}],163:[function(e,t,r){function n(e,t,r){r||(r={});for(var n=-1,i=t.length;++n<i;){var o=t[n];r[o]=e[o]}return r}t.exports=n},{}],164:[function(e,t,r){var n=e("./baseForOwn"),i=e("./createBaseEach"),o=i(n);t.exports=o},{"./baseForOwn":167,"./createBaseEach":185}],165:[function(e,t,r){var n=e("./createBaseFor"),i=n();t.exports=i},{"./createBaseFor":186}],166:[function(e,t,r){function n(e,t){return i(e,t,o)}var i=e("./baseFor"),o=e("../object/keysIn");t.exports=n},{"../object/keysIn":226,"./baseFor":165}],167:[function(e,t,r){function n(e,t){return i(e,t,o)}var i=e("./baseFor"),o=e("../object/keys");t.exports=n},{"../object/keys":225,"./baseFor":165}],168:[function(e,t,r){function n(e,t,r){if(null!=e){void 0!==r&&r in i(e)&&(t=[r]);for(var n=0,o=t.length;null!=e&&o>n;)e=e[t[n++]];return n&&n==o?e:void 0}}var i=e("./toObject");t.exports=n},{"./toObject":206}],169:[function(e,t,r){function n(e,t,r,u,s,l){return e===t?!0:null==e||null==t||!o(e)&&!a(t)?e!==e&&t!==t:i(e,t,n,r,u,s,l)}var i=e("./baseIsEqualDeep"),o=e("../lang/isObject"),a=e("./isObjectLike");t.exports=n},{"../lang/isObject":216,"./baseIsEqualDeep":170,"./isObjectLike":203}],170:[function(e,t,r){function n(e,t,r,n,h,v,y){var g=u(e),b=u(t),m=c,_=c;g||(m=p.call(e),m==l?m=f:m!=f&&(g=s(e))),b||(_=p.call(t),_==l?_=f:_!=f&&(b=s(t)));var w=m==f,j=_==f,A=m==_;if(A&&!g&&!w)return o(e,t,m);if(!h){var E=w&&d.call(e,"__wrapped__"),k=j&&d.call(t,"__wrapped__");if(E||k)return r(E?e.value():e,k?t.value():t,n,h,v,y)}if(!A)return!1;v||(v=[]),y||(y=[]);for(var x=v.length;x--;)if(v[x]==e)return y[x]==t;v.push(e),y.push(t);var F=(g?i:a)(e,t,r,n,h,v,y);return v.pop(),y.pop(),F}var i=e("./equalArrays"),o=e("./equalByTag"),a=e("./equalObjects"),u=e("../lang/isArray"),s=e("../lang/isTypedArray"),l="[object Arguments]",c="[object Array]",f="[object Object]",h=Object.prototype,d=h.hasOwnProperty,p=h.toString;t.exports=n},{"../lang/isArray":210,"../lang/isTypedArray":220,"./equalArrays":189,"./equalByTag":190,"./equalObjects":191}],171:[function(e,t,r){function n(e,t,r){var n=t.length,a=n,u=!r;if(null==e)return!a;for(e=o(e);n--;){var s=t[n];if(u&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++n<a;){s=t[n];var l=s[0],c=e[l],f=s[1];if(u&&s[2]){if(void 0===c&&!(l in e))return!1}else{var h=r?r(c,f,l):void 0;if(!(void 0===h?i(f,c,r,!0):h))return!1}}return!0}var i=e("./baseIsEqual"),o=e("./toObject");t.exports=n},{"./baseIsEqual":169,"./toObject":206}],172:[function(e,t,r){function n(e){var t=o(e);if(1==t.length&&t[0][2]){var r=t[0][0],n=t[0][1];return function(e){return null==e?!1:e[r]===n&&(void 0!==n||r in a(e))}}return function(e){return i(e,t)}}var i=e("./baseIsMatch"),o=e("./getMatchData"),a=e("./toObject");t.exports=n},{"./baseIsMatch":171,"./getMatchData":193,"./toObject":206}],173:[function(e,t,r){function n(e,t){var r=u(e),n=s(e)&&l(t),d=e+"";return e=h(e),function(u){if(null==u)return!1;var s=d;if(u=f(u),(r||!n)&&!(s in u)){if(u=1==e.length?u:i(u,a(e,0,-1)),null==u)return!1;s=c(e),u=f(u)}return u[s]===t?void 0!==t||s in u:o(t,u[s],void 0,!0)}}var i=e("./baseGet"),o=e("./baseIsEqual"),a=e("./baseSlice"),u=e("../lang/isArray"),s=e("./isKey"),l=e("./isStrictComparable"),c=e("../array/last"),f=e("./toObject"),h=e("./toPath");t.exports=n},{"../array/last":149,"../lang/isArray":210,"./baseGet":168,"./baseIsEqual":169,"./baseSlice":179,"./isKey":201,"./isStrictComparable":204,"./toObject":206,"./toPath":207}],174:[function(e,t,r){function n(e,t,r,h,d){if(!s(e))return e;var p=u(t)&&(a(t)||c(t)),v=p?void 0:f(t);return i(v||t,function(i,a){if(v&&(a=i,i=t[a]),l(i))h||(h=[]),d||(d=[]),o(e,t,a,n,r,h,d);else{var u=e[a],s=r?r(u,i,a,e,t):void 0,c=void 0===s;c&&(s=i),void 0===s&&(!p||a in e)||!c&&(s===s?s===u:u!==u)||(e[a]=s)}}),e}var i=e("./arrayEach"),o=e("./baseMergeDeep"),a=e("../lang/isArray"),u=e("./isArrayLike"),s=e("../lang/isObject"),l=e("./isObjectLike"),c=e("../lang/isTypedArray"),f=e("../object/keys");t.exports=n},{"../lang/isArray":210,"../lang/isObject":216,"../lang/isTypedArray":220,"../object/keys":225,"./arrayEach":155,"./baseMergeDeep":175,"./isArrayLike":198,"./isObjectLike":203}],175:[function(e,t,r){function n(e,t,r,n,f,h,d){for(var p=h.length,v=t[r];p--;)if(h[p]==v)return void(e[r]=d[p]);var y=e[r],g=f?f(y,v,r,e,t):void 0,b=void 0===g;b&&(g=v,u(v)&&(a(v)||l(v))?g=a(y)?y:u(y)?i(y):[]:s(v)||o(v)?g=o(y)?c(y):s(y)?y:{}:b=!1),h.push(v),d.push(g),b?e[r]=n(g,v,f,h,d):(g===g?g!==y:y===y)&&(e[r]=g)}var i=e("./arrayCopy"),o=e("../lang/isArguments"),a=e("../lang/isArray"),u=e("./isArrayLike"),s=e("../lang/isPlainObject"),l=e("../lang/isTypedArray"),c=e("../lang/toPlainObject");t.exports=n},{"../lang/isArguments":209,"../lang/isArray":210,"../lang/isPlainObject":217,"../lang/isTypedArray":220,"../lang/toPlainObject":221,"./arrayCopy":154,"./isArrayLike":198}],176:[function(e,t,r){function n(e){return function(t){return null==t?void 0:t[e]}}t.exports=n},{}],177:[function(e,t,r){function n(e){var t=e+"";return e=o(e),function(r){return i(r,e,t)}}var i=e("./baseGet"),o=e("./toPath");t.exports=n},{"./baseGet":168,"./toPath":207}],178:[function(e,t,r){function n(e,t,r,n,i){return i(e,function(e,i,o){r=n?(n=!1,e):t(r,e,i,o)}),r}t.exports=n},{}],179:[function(e,t,r){function n(e,t,r){var n=-1,i=e.length;t=null==t?0:+t||0,0>t&&(t=-t>i?0:i+t),r=void 0===r||r>i?i:+r||0,0>r&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var o=Array(i);++n<i;)o[n]=e[n+t];return o}t.exports=n},{}],180:[function(e,t,r){function n(e){return null==e?"":e+""}t.exports=n},{}],181:[function(e,t,r){function n(e,t,r){if("function"!=typeof e)return i;if(void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 3:return function(r,n,i){return e.call(t,r,n,i)};case 4:return function(r,n,i,o){return e.call(t,r,n,i,o)};case 5:return function(r,n,i,o,a){return e.call(t,r,n,i,o,a)}}return function(){return e.apply(t,arguments)}}var i=e("../utility/identity");t.exports=n},{"../utility/identity":230}],182:[function(e,t,r){(function(e){function r(e){var t=new n(e.byteLength),r=new i(t);return r.set(new i(e)),t}var n=e.ArrayBuffer,i=e.Uint8Array;t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],183:[function(e,t,r){function n(e,t){return function(r,n,u){var s=t?t():{};if(n=i(n,u,3),a(r))for(var l=-1,c=r.length;++l<c;){var f=r[l];e(s,f,n(f,l,r),r)}else o(r,function(t,r,i){e(s,t,n(t,r,i),i)});return s}}var i=e("./baseCallback"),o=e("./baseEach"),a=e("../lang/isArray");t.exports=n},{"../lang/isArray":210,"./baseCallback":161,"./baseEach":164}],184:[function(e,t,r){function n(e){return a(function(t,r){var n=-1,a=null==t?0:r.length,u=a>2?r[a-2]:void 0,s=a>2?r[2]:void 0,l=a>1?r[a-1]:void 0;for("function"==typeof u?(u=i(u,l,5),a-=2):(u="function"==typeof l?l:void 0,a-=u?1:0),s&&o(r[0],r[1],s)&&(u=3>a?void 0:u,a=1);++n<a;){var c=r[n];c&&e(t,c,u)}return t})}var i=e("./bindCallback"),o=e("./isIterateeCall"),a=e("../function/restParam");t.exports=n},{"../function/restParam":153,"./bindCallback":181,"./isIterateeCall":200}],185:[function(e,t,r){function n(e,t){return function(r,n){var u=r?i(r):0;if(!o(u))return e(r,n);for(var s=t?u:-1,l=a(r);(t?s--:++s<u)&&n(l[s],s,l)!==!1;);return r}}var i=e("./getLength"),o=e("./isLength"),a=e("./toObject");t.exports=n},{"./getLength":192,"./isLength":202,"./toObject":206}],186:[function(e,t,r){function n(e){return function(t,r,n){for(var o=i(t),a=n(t),u=a.length,s=e?u:-1;e?s--:++s<u;){var l=a[s];if(r(o[l],l,o)===!1)break}return t}}var i=e("./toObject");t.exports=n},{"./toObject":206}],187:[function(e,t,r){function n(e,t){return i(function(r){var n=r[0];return null==n?n:(r.push(t),e.apply(void 0,r))})}var i=e("../function/restParam");t.exports=n},{"../function/restParam":153}],188:[function(e,t,r){function n(e,t){return function(r,n,u,s){var l=arguments.length<3;return"function"==typeof n&&void 0===s&&a(r)?e(r,n,u,l):o(r,i(n,s,4),u,l,t)}}var i=e("./baseCallback"),o=e("./baseReduce"),a=e("../lang/isArray");t.exports=n},{"../lang/isArray":210,"./baseCallback":161,"./baseReduce":178}],189:[function(e,t,r){function n(e,t,r,n,o,a,u){var s=-1,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;for(;++s<l;){var f=e[s],h=t[s],d=n?n(o?h:f,o?f:h,s):void 0;if(void 0!==d){if(d)continue;return!1}if(o){if(!i(t,function(e){return f===e||r(f,e,n,o,a,u)}))return!1}else if(f!==h&&!r(f,h,n,o,a,u))return!1}return!0}var i=e("./arraySome");t.exports=n},{"./arraySome":157}],190:[function(e,t,r){function n(e,t,r){switch(r){case i:case o:return+e==+t;case a:return e.name==t.name&&e.message==t.message;case u:return e!=+e?t!=+t:e==+t;case s:case l:return e==t+""}return!1}var i="[object Boolean]",o="[object Date]",a="[object Error]",u="[object Number]",s="[object RegExp]",l="[object String]";t.exports=n},{}],191:[function(e,t,r){function n(e,t,r,n,o,u,s){var l=i(e),c=l.length,f=i(t),h=f.length;if(c!=h&&!o)return!1;for(var d=c;d--;){var p=l[d];if(!(o?p in t:a.call(t,p)))return!1}for(var v=o;++d<c;){p=l[d];var y=e[p],g=t[p],b=n?n(o?g:y,o?y:g,p):void 0;if(!(void 0===b?r(y,g,n,o,u,s):b))return!1;v||(v="constructor"==p)}if(!v){var m=e.constructor,_=t.constructor;if(m!=_&&"constructor"in e&&"constructor"in t&&!("function"==typeof m&&m instanceof m&&"function"==typeof _&&_ instanceof _))return!1}return!0}var i=e("../object/keys"),o=Object.prototype,a=o.hasOwnProperty;t.exports=n},{"../object/keys":225}],192:[function(e,t,r){var n=e("./baseProperty"),i=n("length");t.exports=i},{"./baseProperty":176}],193:[function(e,t,r){function n(e){for(var t=o(e),r=t.length;r--;)t[r][2]=i(t[r][1]);return t}var i=e("./isStrictComparable"),o=e("../object/pairs");t.exports=n},{"../object/pairs":228,"./isStrictComparable":204}],194:[function(e,t,r){function n(e,t){var r=null==e?void 0:e[t];return i(r)?r:void 0}var i=e("../lang/isNative");t.exports=n},{"../lang/isNative":214}],195:[function(e,t,r){function n(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&o.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var i=Object.prototype,o=i.hasOwnProperty;t.exports=n},{}],196:[function(e,t,r){function n(e,t,r){var n=e.constructor;switch(t){case c:return i(e);case o:case a:return new n(+e);case f:case h:case d:case p:case v:case y:case g:case b:case m:var w=e.buffer;return new n(r?i(w):w,e.byteOffset,e.length);case u:case l:return new n(e);case s:var j=new n(e.source,_.exec(e));j.lastIndex=e.lastIndex}return j}var i=e("./bufferClone"),o="[object Boolean]",a="[object Date]",u="[object Number]",s="[object RegExp]",l="[object String]",c="[object ArrayBuffer]",f="[object Float32Array]",h="[object Float64Array]",d="[object Int8Array]",p="[object Int16Array]",v="[object Int32Array]",y="[object Uint8Array]",g="[object Uint8ClampedArray]",b="[object Uint16Array]",m="[object Uint32Array]",_=/\w*$/;t.exports=n},{"./bufferClone":182}],197:[function(e,t,r){function n(e){var t=e.constructor;return"function"==typeof t&&t instanceof t||(t=Object),new t}t.exports=n},{}],198:[function(e,t,r){function n(e){return null!=e&&o(i(e))}var i=e("./getLength"),o=e("./isLength");t.exports=n},{"./getLength":192,"./isLength":202}],199:[function(e,t,r){function n(e,t){return e="number"==typeof e||i.test(e)?+e:-1,t=null==t?o:t,e>-1&&e%1==0&&t>e}var i=/^\d+$/,o=9007199254740991;t.exports=n},{}],200:[function(e,t,r){function n(e,t,r){if(!a(r))return!1;var n=typeof t;if("number"==n?i(r)&&o(t,r.length):"string"==n&&t in r){var u=r[t];return e===e?e===u:u!==u}return!1}var i=e("./isArrayLike"),o=e("./isIndex"),a=e("../lang/isObject");t.exports=n},{"../lang/isObject":216,"./isArrayLike":198,"./isIndex":199}],201:[function(e,t,r){function n(e,t){var r=typeof e;if("string"==r&&u.test(e)||"number"==r)return!0;if(i(e))return!1;var n=!a.test(e);return n||null!=t&&e in o(t)}var i=e("../lang/isArray"),o=e("./toObject"),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,u=/^\w*$/;t.exports=n},{"../lang/isArray":210,"./toObject":206}],202:[function(e,t,r){function n(e){return"number"==typeof e&&e>-1&&e%1==0&&i>=e}var i=9007199254740991;t.exports=n},{}],203:[function(e,t,r){function n(e){return!!e&&"object"==typeof e}t.exports=n},{}],204:[function(e,t,r){function n(e){return e===e&&!i(e)}var i=e("../lang/isObject");t.exports=n},{"../lang/isObject":216}],205:[function(e,t,r){function n(e){for(var t=s(e),r=t.length,n=r&&e.length,l=!!n&&u(n)&&(o(e)||i(e)),f=-1,h=[];++f<r;){var d=t[f];(l&&a(d,n)||c.call(e,d))&&h.push(d)}return h}var i=e("../lang/isArguments"),o=e("../lang/isArray"),a=e("./isIndex"),u=e("./isLength"),s=e("../object/keysIn"),l=Object.prototype,c=l.hasOwnProperty;t.exports=n},{"../lang/isArguments":209,"../lang/isArray":210,"../object/keysIn":226,"./isIndex":199,"./isLength":202}],206:[function(e,t,r){function n(e){return i(e)?e:Object(e)}var i=e("../lang/isObject");t.exports=n},{"../lang/isObject":216}],207:[function(e,t,r){function n(e){if(o(e))return e;var t=[];return i(e).replace(a,function(e,r,n,i){t.push(n?i.replace(u,"$1"):r||e)}),t}var i=e("./baseToString"),o=e("../lang/isArray"),a=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,u=/\\(\\)?/g;t.exports=n},{"../lang/isArray":210,"./baseToString":180}],208:[function(e,t,r){function n(e,t,r,n){return t&&"boolean"!=typeof t&&a(e,t,r)?t=!1:"function"==typeof t&&(n=r,r=t,t=!1),"function"==typeof r?i(e,t,o(r,n,3)):i(e,t)}var i=e("../internal/baseClone"),o=e("../internal/bindCallback"),a=e("../internal/isIterateeCall");t.exports=n},{"../internal/baseClone":162,"../internal/bindCallback":181,"../internal/isIterateeCall":200}],209:[function(e,t,r){function n(e){return o(e)&&i(e)&&u.call(e,"callee")&&!s.call(e,"callee")}var i=e("../internal/isArrayLike"),o=e("../internal/isObjectLike"),a=Object.prototype,u=a.hasOwnProperty,s=a.propertyIsEnumerable;t.exports=n},{"../internal/isArrayLike":198,"../internal/isObjectLike":203}],210:[function(e,t,r){var n=e("../internal/getNative"),i=e("../internal/isLength"),o=e("../internal/isObjectLike"),a="[object Array]",u=Object.prototype,s=u.toString,l=n(Array,"isArray"),c=l||function(e){return o(e)&&i(e.length)&&s.call(e)==a};t.exports=c},{"../internal/getNative":194,"../internal/isLength":202,"../internal/isObjectLike":203}],211:[function(e,t,r){function n(e){return null==e?!0:a(e)&&(o(e)||l(e)||i(e)||s(e)&&u(e.splice))?!e.length:!c(e).length}var i=e("./isArguments"),o=e("./isArray"),a=e("../internal/isArrayLike"),u=e("./isFunction"),s=e("../internal/isObjectLike"),l=e("./isString"),c=e("../object/keys");t.exports=n},{"../internal/isArrayLike":198,"../internal/isObjectLike":203,"../object/keys":225,"./isArguments":209,"./isArray":210,"./isFunction":213,"./isString":219}],212:[function(e,t,r){function n(e,t,r,n){r="function"==typeof r?o(r,n,3):void 0;var a=r?r(e,t):void 0;return void 0===a?i(e,t,r):!!a}var i=e("../internal/baseIsEqual"),o=e("../internal/bindCallback");t.exports=n},{"../internal/baseIsEqual":169,"../internal/bindCallback":181}],213:[function(e,t,r){function n(e){return i(e)&&u.call(e)==o}var i=e("./isObject"),o="[object Function]",a=Object.prototype,u=a.toString;t.exports=n},{"./isObject":216}],214:[function(e,t,r){function n(e){return null==e?!1:i(e)?c.test(s.call(e)):o(e)&&a.test(e)}var i=e("./isFunction"),o=e("../internal/isObjectLike"),a=/^\[object .+?Constructor\]$/,u=Object.prototype,s=Function.prototype.toString,l=u.hasOwnProperty,c=RegExp("^"+s.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=n},{"../internal/isObjectLike":203,"./isFunction":213}],215:[function(e,t,r){function n(e){return"number"==typeof e||i(e)&&u.call(e)==o}var i=e("../internal/isObjectLike"),o="[object Number]",a=Object.prototype,u=a.toString;t.exports=n},{"../internal/isObjectLike":203}],216:[function(e,t,r){function n(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}t.exports=n},{}],217:[function(e,t,r){function n(e){var t;if(!a(e)||c.call(e)!=u||o(e)||!l.call(e,"constructor")&&(t=e.constructor,"function"==typeof t&&!(t instanceof t)))return!1;var r;return i(e,function(e,t){r=t}),void 0===r||l.call(e,r)}var i=e("../internal/baseForIn"),o=e("./isArguments"),a=e("../internal/isObjectLike"),u="[object Object]",s=Object.prototype,l=s.hasOwnProperty,c=s.toString;t.exports=n},{"../internal/baseForIn":166,"../internal/isObjectLike":203,"./isArguments":209}],218:[function(e,t,r){function n(e){return i(e)&&u.call(e)==o}var i=e("./isObject"),o="[object RegExp]",a=Object.prototype,u=a.toString;t.exports=n},{"./isObject":216}],219:[function(e,t,r){function n(e){return"string"==typeof e||i(e)&&u.call(e)==o}var i=e("../internal/isObjectLike"),o="[object String]",a=Object.prototype,u=a.toString;t.exports=n},{"../internal/isObjectLike":203}],220:[function(e,t,r){function n(e){return o(e)&&i(e.length)&&!!O[P.call(e)]}var i=e("../internal/isLength"),o=e("../internal/isObjectLike"),a="[object Arguments]",u="[object Array]",s="[object Boolean]",l="[object Date]",c="[object Error]",f="[object Function]",h="[object Map]",d="[object Number]",p="[object Object]",v="[object RegExp]",y="[object Set]",g="[object String]",b="[object WeakMap]",m="[object ArrayBuffer]",_="[object Float32Array]",w="[object Float64Array]",j="[object Int8Array]",A="[object Int16Array]",E="[object Int32Array]",k="[object Uint8Array]",x="[object Uint8ClampedArray]",F="[object Uint16Array]",C="[object Uint32Array]",O={};O[_]=O[w]=O[j]=O[A]=O[E]=O[k]=O[x]=O[F]=O[C]=!0,O[a]=O[u]=O[m]=O[s]=O[l]=O[c]=O[f]=O[h]=O[d]=O[p]=O[v]=O[y]=O[g]=O[b]=!1;var S=Object.prototype,P=S.toString;t.exports=n},{"../internal/isLength":202,"../internal/isObjectLike":203}],221:[function(e,t,r){function n(e){return i(e,o(e))}var i=e("../internal/baseCopy"),o=e("../object/keysIn");t.exports=n},{"../internal/baseCopy":163,"../object/keysIn":226}],222:[function(e,t,r){var n=e("../internal/assignWith"),i=e("../internal/baseAssign"),o=e("../internal/createAssigner"),a=o(function(e,t,r){return r?n(e,t,r):i(e,t)});t.exports=a},{"../internal/assignWith":159,"../internal/baseAssign":160,"../internal/createAssigner":184}],223:[function(e,t,r){var n=e("./assign"),i=e("../internal/assignDefaults"),o=e("../internal/createDefaults"),a=o(n,i);t.exports=a},{"../internal/assignDefaults":158,"../internal/createDefaults":187,"./assign":222}],224:[function(e,t,r){function n(e,t){if(null==e)return!1;var r=p.call(e,t);if(!r&&!l(t)){if(t=h(t),e=1==t.length?e:i(e,o(t,0,-1)),null==e)return!1;t=f(t),r=p.call(e,t)}return r||c(e.length)&&s(t,e.length)&&(u(e)||a(e))}var i=e("../internal/baseGet"),o=e("../internal/baseSlice"),a=e("../lang/isArguments"),u=e("../lang/isArray"),s=e("../internal/isIndex"),l=e("../internal/isKey"),c=e("../internal/isLength"),f=e("../array/last"),h=e("../internal/toPath"),d=Object.prototype,p=d.hasOwnProperty;t.exports=n},{"../array/last":149,"../internal/baseGet":168,"../internal/baseSlice":179,"../internal/isIndex":199,"../internal/isKey":201,"../internal/isLength":202,"../internal/toPath":207,"../lang/isArguments":209,"../lang/isArray":210}],225:[function(e,t,r){var n=e("../internal/getNative"),i=e("../internal/isArrayLike"),o=e("../lang/isObject"),a=e("../internal/shimKeys"),u=n(Object,"keys"),s=u?function(e){var t=null==e?void 0:e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&i(e)?a(e):o(e)?u(e):[]}:a;t.exports=s},{"../internal/getNative":194,"../internal/isArrayLike":198,"../internal/shimKeys":205,"../lang/isObject":216}],226:[function(e,t,r){function n(e){if(null==e)return[];s(e)||(e=Object(e));var t=e.length;t=t&&u(t)&&(o(e)||i(e))&&t||0;for(var r=e.constructor,n=-1,l="function"==typeof r&&r.prototype===e,f=Array(t),h=t>0;++n<t;)f[n]=n+"";for(var d in e)h&&a(d,t)||"constructor"==d&&(l||!c.call(e,d))||f.push(d);return f}var i=e("../lang/isArguments"),o=e("../lang/isArray"),a=e("../internal/isIndex"),u=e("../internal/isLength"),s=e("../lang/isObject"),l=Object.prototype,c=l.hasOwnProperty;t.exports=n},{"../internal/isIndex":199,"../internal/isLength":202,"../lang/isArguments":209,"../lang/isArray":210,"../lang/isObject":216}],227:[function(e,t,r){var n=e("../internal/baseMerge"),i=e("../internal/createAssigner"),o=i(n);t.exports=o},{"../internal/baseMerge":174,"../internal/createAssigner":184}],228:[function(e,t,r){function n(e){e=o(e);for(var t=-1,r=i(e),n=r.length,a=Array(n);++t<n;){var u=r[t];a[t]=[u,e[u]]}return a}var i=e("./keys"),o=e("../internal/toObject");t.exports=n},{"../internal/toObject":206,"./keys":225}],229:[function(e,t,r){function n(e,t,r){var n=null==e?void 0:e[t];return void 0===n&&(null==e||u(t,e)||(t=l(t),e=1==t.length?e:i(e,o(t,0,-1)),n=null==e?void 0:e[s(t)]),n=void 0===n?r:n),a(n)?n.call(e):n}var i=e("../internal/baseGet"),o=e("../internal/baseSlice"),a=e("../lang/isFunction"),u=e("../internal/isKey"),s=e("../array/last"),l=e("../internal/toPath");t.exports=n},{"../array/last":149,"../internal/baseGet":168,"../internal/baseSlice":179,"../internal/isKey":201,"../internal/toPath":207,"../lang/isFunction":213}],230:[function(e,t,r){function n(e){return e}t.exports=n},{}],231:[function(e,t,r){function n(e){return a(e)?i(e):o(e)}var i=e("../internal/baseProperty"),o=e("../internal/basePropertyDeep"),a=e("../internal/isKey");t.exports=n},{"../internal/baseProperty":176,"../internal/basePropertyDeep":177,"../internal/isKey":201}],232:[function(t,r,n){!function(n,i){"use strict";"object"==typeof r&&r.exports&&"function"==typeof t?r.exports=i():"function"==typeof e&&"object"==typeof e.amd?e(i):n.log=i()}(this,function(){"use strict";function e(e){return typeof console===u?!1:void 0!==console[e]?t(console,e):void 0!==console.log?t(console,"log"):a}function t(e,t){var r=e[t];if("function"==typeof r.bind)return r.bind(e);try{return Function.prototype.bind.call(r,e)}catch(n){return function(){return Function.prototype.apply.apply(r,[e,arguments])}}}function r(e,t,r){return function(){typeof console!==u&&(n.call(this,t,r),this[e].apply(this,arguments))}}function n(e,t){for(var r=0;r<s.length;r++){var n=s[r];this[n]=e>r?a:this.methodFactory(n,e,t)}}function i(t,n,i){return e(t)||r.apply(this,arguments)}function o(e,t,r){function o(e){var t=(s[e]||"silent").toUpperCase();try{return void(window.localStorage[f]=t)}catch(r){}try{window.document.cookie=encodeURIComponent(f)+"="+t+";"}catch(r){}}function a(){var e;try{e=window.localStorage[f]}catch(t){}if(typeof e===u)try{var r=window.document.cookie,n=r.indexOf(encodeURIComponent(f)+"=");n&&(e=/^([^;]+)/.exec(r.slice(n))[1])}catch(t){}return void 0===c.levels[e]&&(e=void 0),e}var l,c=this,f="loglevel";e&&(f+=":"+e),c.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},c.methodFactory=r||i,c.getLevel=function(){return l},c.setLevel=function(t,r){if("string"==typeof t&&void 0!==c.levels[t.toUpperCase()]&&(t=c.levels[t.toUpperCase()]),!("number"==typeof t&&t>=0&&t<=c.levels.SILENT))throw"log.setLevel() called with invalid level: "+t;return l=t,r!==!1&&o(t),n.call(c,t,e),typeof console===u&&t<c.levels.SILENT?"No console available for logging":void 0},c.setDefaultLevel=function(e){a()||c.setLevel(e,!1)},c.enableAll=function(e){c.setLevel(c.levels.TRACE,e)},c.disableAll=function(e){c.setLevel(c.levels.SILENT,e)};var h=a();null==h&&(h=null==t?"WARN":t),c.setLevel(h,!1)}var a=function(){},u="undefined",s=["trace","debug","info","warn","error"],l=new o,c={};l.getLogger=function(e){if("string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=c[e];return t||(t=c[e]=new o(e,l.getLevel(),l.methodFactory)),t};var f=typeof window!==u?window.log:void 0;return l.noConflict=function(){return typeof window!==u&&window.log===l&&(window.log=f),l},l})},{}],233:[function(e,t,r){t.exports=e("./lib")},{"./lib":234}],234:[function(t,r,n){!function(n,i){"use strict";"object"==typeof r&&r.exports&&"function"==typeof t?r.exports=i():"function"==typeof e&&"object"==typeof e.amd?e(i):n.Queue=i()}(this,function(){"use strict";function e(e,t){this.pendingPromises=0,this.maxPendingPromises="undefined"!=typeof e?e:1/0,this.maxQueuedPromises="undefined"!=typeof t?t:1/0,this.queue=[]}var t="undefined"!=typeof Promise?Promise:function(){return{then:function(){throw new Error("Queue.configure() before use Queue")}}},r=function(){},n=function(e){return e&&"function"==typeof e.then?e:new t(function(t){t(e)})};return e.configure=function(e){t=e},e.prototype.add=function(e){var n=this;return new t(function(t,i,o){return n.queue.length>=n.maxQueuedPromises?void i(new Error("Queue limit reached")):(n.queue.push({promiseGenerator:e,resolve:t,reject:i,notify:o||r}),void n._dequeue())})},e.prototype.getPendingLength=function(){return this.pendingPromises},e.prototype.getQueueLength=function(){return this.queue.length},e.prototype._dequeue=function(){var e=this;if(this.pendingPromises>=this.maxPendingPromises)return!1;var t=this.queue.shift();return t?(this.pendingPromises++,n(t.promiseGenerator()).then(function(r){e.pendingPromises--,e._dequeue(),t.resolve(r)},function(r){e.pendingPromises--,e._dequeue(),t.reject(r)},function(e){t.notify(e)}),!0):!1},e})},{}],235:[function(e,t,r){!function(){"use strict";function e(e){return"function"==typeof e}function r(e){return"[object Array]"===Object.prototype.toString.call(e)}function n(e){return e instanceof Date?e.getTime():e instanceof Array?e.map(n):e}function i(e){return function(t,n){if(!r(n)||!n.length)return e(t,n);for(var i=0,o=n.length;o>i;i++)if(e(t,n[i]))return!0;return!1}}function o(e){return function(t,n){if(!r(n)||!n.length)return e(t,n);for(var i=0,o=n.length;o>i;i++)if(!e(t,n[i]))return!1;return!0}}function a(e,t){return e.v(e.a,t)}function u(e,t){for(var r=0;r<e.length;r++)if(a(t,e[r]))return r;return-1}function s(e,t){return{a:e,v:t}}function l(e,t){var r=[];return c(t,e.k,0,r),1===r.length?a(e.nv,r[0]):!!~u(r,e.nv);
}function c(e,t,n,i){if(n===t.length||void 0==e)return void i.push(e);if(r(e))for(var o=0,a=e.length;a>o;o++)c(e[o],t,n,i);else c(e[t[n]],t,n+1,i)}function f(e,t){return{a:{k:e,nv:t},v:l}}function h(e){e=n(e),(!e||"Object"!==e.constructor.toString()&&"functionObject(){[nativecode]}"!==e.constructor.toString().replace(/\n/g,"").replace(/ /g,""))&&(e={$eq:e});var t=[];for(var r in e){var i=e[r];if("$options"!==r)if(v[r])y[r]&&(i=y[r](i,e)),t.push(s(n(i),v[r]));else{if(36===r.charCodeAt(0))throw new Error("Unknown operation "+r);t.push(f(r.split("."),h(i)))}}return 1===t.length?t[0]:s(t,v.$and)}function d(e,t){var r=h(e);return t&&(r={a:r,v:function(e,r){return a(e,t(r))}}),r}function p(t,r,n){function i(e){return a(o,e)}e(r)&&(n=r,r=void 0);var o=d(t,n);return r?r.filter(i):i}var v={$eq:i(function(e,t){return e(t)}),$ne:o(function(e,t){return"undefined"==typeof t?!1:!e(t)}),$or:function(e,t){for(var r=0,n=e.length;n>r;r++)if(a(e[r],t))return!0;return!1},$gt:i(function(e,t){return typeof n(t)==typeof e&&n(t)>e}),$gte:i(function(e,t){return typeof n(t)==typeof e&&n(t)>=e}),$lt:i(function(e,t){return typeof n(t)==typeof e&&n(t)<e}),$lte:i(function(e,t){return typeof n(t)==typeof e&&n(t)<=e}),$mod:i(function(e,t){return t%e[0]==e[1]}),$in:function(e,t){if(!(t instanceof Array))return!!~e.indexOf(n(t));for(var r=t.length;r--;)if(~e.indexOf(n(t[r])))return!0;return!1},$nin:function(e,t){return!v.$in(e,t)},$not:function(e,t){return!a(e,t)},$type:function(e,t){return void 0!=t?t instanceof e||t.constructor==e:!1},$all:function(e,t){t||(t=[]);for(var r=e.length;r--;)if(!~n(t).indexOf(e[r]))return!1;return!0},$size:function(e,t){return t?e===t.length:!1},$nor:function(e,t){for(var r=0,n=e.length;n>r;r++)if(a(e[r],t))return!1;return!0},$and:function(e,t){for(var r=0,n=e.length;n>r;r++)if(!a(e[r],t))return!1;return!0},$regex:i(function(e,t){return"string"==typeof t&&e.test(t)}),$where:function(e,t){return e.call(t,t)},$elemMatch:function(e,t){return r(t)?!!~u(t,e):a(e,t)},$exists:function(e,t){return void 0!=t===e}},y={$eq:function(e){return e instanceof RegExp?function(t){return"string"==typeof t&&e.test(t)}:e instanceof Function?e:r(e)&&!e.length?function(e){return r(e)&&!e.length}:function(t){return e===n(t)}},$ne:function(e){return y.$eq(e)},$and:function(e){return e.map(h)},$or:function(e){return e.map(h)},$nor:function(e){return e.map(h)},$not:function(e){return h(e)},$regex:function(e,t){return new RegExp(e,t.$options)},$where:function(e){return"string"==typeof e?new Function("obj","return "+e):e},$elemMatch:function(e){return h(e)},$exists:function(e){return!!e}};p.use=function(t){if(e(t))return t(p);for(var r in t)36===r.charCodeAt(0)&&(v[r]=t[r])},p.indexOf=function(e,t,r){return u(t,d(e,r))},"undefined"!=typeof t&&"undefined"!=typeof t.exports&&(t.exports=p),"undefined"!=typeof window&&(window.sift=p)}()},{}],236:[function(e,t,r){function n(){}function i(e){var t={}.toString.call(e);switch(t){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}function o(e){return e===Object(e)}function a(e){if(!o(e))return e;var t=[];for(var r in e)null!=e[r]&&t.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t.join("&")}function u(e){for(var t,r,n={},i=e.split("&"),o=0,a=i.length;a>o;++o)r=i[o],t=r.split("="),n[decodeURIComponent(t[0])]=decodeURIComponent(t[1]);return n}function s(e){var t,r,n,i,o=e.split(/\r?\n/),a={};o.pop();for(var u=0,s=o.length;s>u;++u)r=o[u],t=r.indexOf(":"),n=r.slice(0,t).toLowerCase(),i=g(r.slice(t+1)),a[n]=i;return a}function l(e){return e.split(/ *; */).shift()}function c(e){return y(e.split(/ *; */),function(e,t){var r=t.split(/ *= */),n=r.shift(),i=r.shift();return n&&i&&(e[n]=i),e},{})}function f(e,t){t=t||{},this.req=e,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||"undefined"==typeof this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText,this.setStatusProperties(this.xhr.status),this.header=this.headers=s(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this.setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this.parseBody(this.text?this.text:this.xhr.response):null}function h(e,t){var r=this;v.call(this),this._query=this._query||[],this.method=e,this.url=t,this.header={},this._header={},this.on("end",function(){var e=null,t=null;try{t=new f(r)}catch(n){return e=new Error("Parser is unable to parse the response"),e.parse=!0,e.original=n,r.callback(e)}if(r.emit("response",t),e)return r.callback(e,t);if(t.status>=200&&t.status<300)return r.callback(e,t);var i=new Error(t.statusText||"Unsuccessful HTTP response");i.original=e,i.response=t,i.status=t.status,r.callback(i,t)})}function d(e,t){return"function"==typeof t?new h("GET",e).end(t):1==arguments.length?new h("GET",e):new h(e,t)}var p,v=e("emitter"),y=e("reduce");p="undefined"!=typeof window?window:"undefined"!=typeof self?self:this,d.getXHR=function(){if(!(!p.XMLHttpRequest||p.location&&"file:"==p.location.protocol&&p.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}return!1};var g="".trim?function(e){return e.trim()}:function(e){return e.replace(/(^\s*|\s*$)/g,"")};d.serializeObject=a,d.parseString=u,d.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},d.serialize={"application/x-www-form-urlencoded":a,"application/json":JSON.stringify},d.parse={"application/x-www-form-urlencoded":u,"application/json":JSON.parse},f.prototype.get=function(e){return this.header[e.toLowerCase()]},f.prototype.setHeaderProperties=function(e){var t=this.header["content-type"]||"";this.type=l(t);var r=c(t);for(var n in r)this[n]=r[n]},f.prototype.parse=function(e){return this.parser=e,this},f.prototype.parseBody=function(e){var t=this.parser||d.parse[this.type];return t&&e&&(e.length||e instanceof Object)?t(e):null},f.prototype.setStatusProperties=function(e){1223===e&&(e=204);var t=e/100|0;this.status=this.statusCode=e,this.statusType=t,this.info=1==t,this.ok=2==t,this.clientError=4==t,this.serverError=5==t,this.error=4==t||5==t?this.toError():!1,this.accepted=202==e,this.noContent=204==e,this.badRequest=400==e,this.unauthorized=401==e,this.notAcceptable=406==e,this.notFound=404==e,this.forbidden=403==e},f.prototype.toError=function(){var e=this.req,t=e.method,r=e.url,n="cannot "+t+" "+r+" ("+this.status+")",i=new Error(n);return i.status=this.status,i.method=t,i.url=r,i},d.Response=f,v(h.prototype),h.prototype.use=function(e){return e(this),this},h.prototype.timeout=function(e){return this._timeout=e,this},h.prototype.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},h.prototype.abort=function(){return this.aborted?void 0:(this.aborted=!0,this.xhr.abort(),this.clearTimeout(),this.emit("abort"),this)},h.prototype.set=function(e,t){if(o(e)){for(var r in e)this.set(r,e[r]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},h.prototype.unset=function(e){return delete this._header[e.toLowerCase()],delete this.header[e],this},h.prototype.getHeader=function(e){return this._header[e.toLowerCase()]},h.prototype.type=function(e){return this.set("Content-Type",d.types[e]||e),this},h.prototype.accept=function(e){return this.set("Accept",d.types[e]||e),this},h.prototype.auth=function(e,t){var r=btoa(e+":"+t);return this.set("Authorization","Basic "+r),this},h.prototype.query=function(e){return"string"!=typeof e&&(e=a(e)),e&&this._query.push(e),this},h.prototype.field=function(e,t){return this._formData||(this._formData=new p.FormData),this._formData.append(e,t),this},h.prototype.attach=function(e,t,r){return this._formData||(this._formData=new p.FormData),this._formData.append(e,t,r),this},h.prototype.send=function(e){var t=o(e),r=this.getHeader("Content-Type");if(t&&o(this._data))for(var n in e)this._data[n]=e[n];else"string"==typeof e?(r||this.type("form"),r=this.getHeader("Content-Type"),"application/x-www-form-urlencoded"==r?this._data=this._data?this._data+"&"+e:e:this._data=(this._data||"")+e):this._data=e;return!t||i(e)?this:(r||this.type("json"),this)},h.prototype.callback=function(e,t){var r=this._callback;this.clearTimeout(),r(e,t)},h.prototype.crossDomainError=function(){var e=new Error("Origin is not allowed by Access-Control-Allow-Origin");e.crossDomain=!0,this.callback(e)},h.prototype.timeoutError=function(){var e=this._timeout,t=new Error("timeout of "+e+"ms exceeded");t.timeout=e,this.callback(t)},h.prototype.withCredentials=function(){return this._withCredentials=!0,this},h.prototype.end=function(e){var t=this,r=this.xhr=d.getXHR(),o=this._query.join("&"),a=this._timeout,u=this._formData||this._data;this._callback=e||n,r.onreadystatechange=function(){if(4==r.readyState){var e;try{e=r.status}catch(n){e=0}if(0==e){if(t.timedout)return t.timeoutError();if(t.aborted)return;return t.crossDomainError()}t.emit("end")}};var s=function(e){e.total>0&&(e.percent=e.loaded/e.total*100),t.emit("progress",e)};this.hasListeners("progress")&&(r.onprogress=s);try{r.upload&&this.hasListeners("progress")&&(r.upload.onprogress=s)}catch(l){}if(a&&!this._timer&&(this._timer=setTimeout(function(){t.timedout=!0,t.abort()},a)),o&&(o=d.serializeObject(o),this.url+=~this.url.indexOf("?")?"&"+o:"?"+o),r.open(this.method,this.url,!0),this._withCredentials&&(r.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof u&&!i(u)){var c=this.getHeader("Content-Type"),f=d.serialize[c?c.split(";")[0]:""];f&&(u=f(u))}for(var h in this.header)null!=this.header[h]&&r.setRequestHeader(h,this.header[h]);return this.emit("request",this),r.send(u),this},h.prototype.then=function(e,t){return this.end(function(r,n){r?t(r):e(n)})},d.Request=h,d.get=function(e,t,r){var n=d("GET",e);return"function"==typeof t&&(r=t,t=null),t&&n.query(t),r&&n.end(r),n},d.head=function(e,t,r){var n=d("HEAD",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},d.del=function(e,t){var r=d("DELETE",e);return t&&r.end(t),r},d.patch=function(e,t,r){var n=d("PATCH",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},d.post=function(e,t,r){var n=d("POST",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},d.put=function(e,t,r){var n=d("PUT",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},t.exports=d},{emitter:237,reduce:238}],237:[function(e,t,r){function n(e){return e?i(e):void 0}function i(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}t.exports=n,n.prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},n.prototype.once=function(e,t){function r(){n.off(e,r),t.apply(this,arguments)}var n=this;return this._callbacks=this._callbacks||{},r.fn=t,this.on(e,r),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r=this._callbacks[e];if(!r)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var n,i=0;i<r.length;i++)if(n=r[i],n===t||n.fn===t){r.splice(i,1);break}return this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),r=this._callbacks[e];if(r){r=r.slice(0);for(var n=0,i=r.length;i>n;++n)r[n].apply(this,t)}return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],238:[function(e,t,r){t.exports=function(e,t,r){for(var n=0,i=e.length,o=3==arguments.length?r:e[n++];i>n;)o=t.call(null,o,e[n],++n,e);return o}},{}],239:[function(t,r,n){var i=[].slice;!function(t,i){return"function"==typeof e&&null!=e.amd?e([],i):"undefined"!=typeof n&&null!==n?r.exports=i():t.UrlPattern=i()}(this,function(){var e,t,r,n,o,a,u,s,l,c,f,h,d,p,v;return l=function(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},u=function(e,t){var r,n,i;for(i=[],r=-1,n=e.length;++r<n;)i=i.concat(t(e[r]));return i},p=function(e,t){var r,n,i;for(i="",r=-1,n=e.length;++r<n;)i+=t(e[r]);return i},d=function(e){return new RegExp(e.toString()+"|").exec("").length-1},f=function(e,t){var r,n,i,o,a;for(o={},r=-1,i=e.length;++r<i;)n=e[r],a=t[r],null!=a&&(null!=o[n]?(Array.isArray(o[n])||(o[n]=[o[n]]),o[n].push(a)):o[n]=a);return o},e={},e.Result=function(e,t){this.value=e,this.rest=t},e.Tagged=function(e,t){this.tag=e,this.value=t},e.tag=function(t,r){return function(n){var i,o;return i=r(n),null!=i?(o=new e.Tagged(t,i.value),new e.Result(o,i.rest)):void 0}},e.regex=function(t){return function(r){var n,i;return n=t.exec(r),null!=n?(i=n[0],new e.Result(i,r.slice(i.length))):void 0}},e.sequence=function(){var t;return t=1<=arguments.length?i.call(arguments,0):[],function(r){var n,i,o,a,u,s;for(n=-1,i=t.length,s=[],a=r;++n<i;){if(o=t[n],u=o(a),null==u)return;s.push(u.value),a=u.rest}return new e.Result(s,a)}},e.pick=function(){var t,r;return t=arguments[0],r=2<=arguments.length?i.call(arguments,1):[],function(n){var i,o;return o=e.sequence.apply(e,r)(n),null!=o?(i=o.value,o.value=i[t],o):void 0}},e.string=function(t){var r;return r=t.length,function(n){return n.slice(0,r)===t?new e.Result(t,n.slice(r)):void 0}},e.lazy=function(e){var t;return t=null,function(r){return null==t&&(t=e()),t(r)}},e.baseMany=function(t,r,n,i,o){var a,u,s,l;for(s=o,l=n?"":[];;){if(null!=r&&(a=r(s),null!=a))break;if(u=t(s),null==u)break;n?l+=u.value:l.push(u.value),s=u.rest}return i&&0===l.length?void 0:new e.Result(l,s)},e.many1=function(t){return function(r){return e.baseMany(t,null,!1,!0,r)}},e.concatMany1Till=function(t,r){return function(n){return e.baseMany(t,r,!0,!0,n)}},e.firstChoice=function(){var e;return e=1<=arguments.length?i.call(arguments,0):[],function(t){var r,n,i,o;for(r=-1,n=e.length;++r<n;)if(i=e[r],o=i(t),null!=o)return o}},h=function(t){var r;return r={},r.wildcard=e.tag("wildcard",e.string(t.wildcardChar)),r.optional=e.tag("optional",e.pick(1,e.string(t.optionalSegmentStartChar),e.lazy(function(){return r.pattern}),e.string(t.optionalSegmentEndChar))),r.name=e.regex(new RegExp("^["+t.segmentNameCharset+"]+")),r.named=e.tag("named",e.pick(1,e.string(t.segmentNameStartChar),e.lazy(function(){return r.name}))),r.escapedChar=e.pick(1,e.string(t.escapeChar),e.regex(/^./)),r["static"]=e.tag("static",e.concatMany1Till(e.firstChoice(e.lazy(function(){return r.escapedChar}),e.regex(/^./)),e.firstChoice(e.string(t.segmentNameStartChar),e.string(t.optionalSegmentStartChar),e.string(t.optionalSegmentEndChar),r.wildcard))),r.token=e.lazy(function(){return e.firstChoice(r.wildcard,r.optional,r.named,r["static"])}),r.pattern=e.many1(e.lazy(function(){return r.token})),r},s={escapeChar:"\\",segmentNameStartChar:":",segmentValueCharset:"a-zA-Z0-9-_~ %",segmentNameCharset:"a-zA-Z0-9",optionalSegmentStartChar:"(",optionalSegmentEndChar:")",wildcardChar:"*"},a=function(e,t){if(Array.isArray(e))return p(e,function(e){return a(e,t)});switch(e.tag){case"wildcard":return"(.*?)";case"named":return"(["+t+"]+)";case"static":return l(e.value);case"optional":return"(?:"+a(e.value,t)+")?"}},o=function(e,t){return null==t&&(t=s.segmentValueCharset),"^"+a(e,t)+"$"},n=function(e){if(Array.isArray(e))return u(e,n);switch(e.tag){case"wildcard":return["_"];case"named":return[e.value];case"static":return[];case"optional":return n(e.value)}},c=function(e,t,r,n){var i,o,a,u;if(null==n&&(n=!1),u=e[t],null!=u){if(i=r[t]||0,o=Array.isArray(u)?u.length-1:0,!(i>o))return a=Array.isArray(u)?u[i]:u,n&&(r[t]=i+1),a;if(n)throw new Error("too few values provided for key `"+t+"`")}else if(n)throw new Error("no values provided for key `"+t+"`")},r=function(e,t,n){var i,o;if(Array.isArray(e)){for(i=-1,o=e.length;++i<o;)if(r(e[i],t,n))return!0;return!1}switch(e.tag){case"wildcard":return null!=c(t,"_",n,!1);case"named":return null!=c(t,e.value,n,!1);case"static":return!1;case"optional":return r(e.value,t,n)}},v=function(e,t,n){if(Array.isArray(e))return p(e,function(e){return v(e,t,n)});switch(e.tag){case"wildcard":return c(t,"_",n,!0);case"named":return c(t,e.value,n,!0);case"static":return e.value;case"optional":return r(e.value,t,n)?v(e.value,t,n):""}},t=function(e,r){var i,a,u,l,c;if(e instanceof t)return this.isRegex=e.isRegex,this.regex=e.regex,this.ast=e.ast,void(this.names=e.names);if(this.isRegex=e instanceof RegExp,"string"!=typeof e&&!this.isRegex)throw new TypeError("argument must be a regex or a string");if(this.isRegex){if(this.regex=e,null!=r){if(!Array.isArray(r))throw new Error("if first argument is a regex the second argument may be an array of group names but you provided something else");if(i=d(this.regex),r.length!==i)throw new Error("regex contains "+i+" groups but array of group names contains "+r.length);this.names=r}}else{if(""===e)throw new Error("argument must not be the empty string");if(c=e.replace(/\s+/g,""),c!==e)throw new Error("argument must not contain whitespace");if(a={escapeChar:(null!=r?r.escapeChar:void 0)||s.escapeChar,segmentNameStartChar:(null!=r?r.segmentNameStartChar:void 0)||s.segmentNameStartChar,segmentNameCharset:(null!=r?r.segmentNameCharset:void 0)||s.segmentNameCharset,segmentValueCharset:(null!=r?r.segmentValueCharset:void 0)||s.segmentValueCharset,optionalSegmentStartChar:(null!=r?r.optionalSegmentStartChar:void 0)||s.optionalSegmentStartChar,optionalSegmentEndChar:(null!=r?r.optionalSegmentEndChar:void 0)||s.optionalSegmentEndChar,wildcardChar:(null!=r?r.wildcardChar:void 0)||s.wildcardChar},l=h(a),u=l.pattern(e),null==u)throw new Error("couldn't parse pattern");if(""!==u.rest)throw new Error("could only partially parse pattern");this.ast=u.value,this.regex=new RegExp(o(this.ast,a.segmentValueCharset)),this.names=n(this.ast)}},t.prototype.match=function(e){var t,r;return r=this.regex.exec(e),null==r?null:(t=r.slice(1),this.names?f(this.names,t):t)},t.prototype.stringify=function(e){if(null==e&&(e={}),this.isRegex)throw new Error("can't stringify patterns generated from a regex");if(e!==Object(e))throw new Error("argument must be an object or undefined");return v(this.ast,e,{})},t.escapeForRegex=l,t.concatMap=u,t.stringConcatMap=p,t.regexGroupCount=d,t.keysAndValuesToObject=f,t.P=e,t.newParser=h,t.defaultOptions=s,t.astNodeToRegexString=o,t.astNodeToNames=n,t.getParam=c,t.astNodeContainsSegmentsForProvidedParams=r,t.stringify=v,t})},{}],240:[function(e,t,r){var n=e("babel-runtime/helpers/create-class")["default"],i=e("babel-runtime/helpers/class-call-check")["default"],o=e("babel-runtime/core-js/symbol")["default"],a=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(r,"__esModule",{value:!0});var u=e("./errors"),s=e("lodash/lang/isPlainObject"),l=a(s),c=e("lodash/lang/clone"),f=a(c),h=o(),d=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(i(this,e),!(0,l["default"])(t))throw new u.KinveyError("acl argument must be an object");this.acl=t}return n(e,[{key:"creator",get:function(){return this.acl.creator}},{key:"readers",get:function(){return this.acl.r||[]}},{key:"writers",get:function(){return this.acl.w||[]}},{key:"readerGroups",get:function(){return this.acl.groups?this.acl.groups.r:[]}},{key:"writerGroups",get:function(){return this.acl.groups?this.acl.groups.w:[]}},{key:"globallyReadable",set:function(e){this.acl.gr=e||!1}},{key:"globallyWritable",set:function(e){this.acl.gw=e||!1}}]),n(e,[{key:"addReader",value:function(e){var t=this.acl.r||[];return-1===t.indexOf(e)&&t.push(e),this.acl.r=t,this}},{key:"addReaderGroup",value:function(e){var t=this.acl.groups||{},r=t.w||[];return-1===r.indexOf(e)&&r.push(e),t.w=r,this.acl.groups=t,this}},{key:"addWriter",value:function(e){var t=this.acl.w||[];return-1===t.indexOf(e)&&t.push(e),this.acl.w=t,this}},{key:"isGloballyReadable",value:function(){return this.acl.gr||!1}},{key:"isGloballyWritable",value:function(){return this.acl.gw||!1}},{key:"removeReader",value:function(e){var t=this.acl.r||[],r=t.indexOf(e);return-1!==r&&t.splice(r,1),this.acl.r=t,this}},{key:"removeReaderGroup",value:function(e){var t=this.acl.groups||{},r=t.r||[],n=r.indexOf(e);return-1!==n&&r.splice(n,1),t.r=r,this.acl.groups=t,this}},{key:"removeWriter",value:function(e){var t=this.acl.w||[],r=t.indexOf(e);return-1!==r&&t.splice(r,1),this.acl.w=t,this}},{key:"removeWriterGroup",value:function(e){var t=this.acl.groups||{},r=t.w||[],n=r.indexOf(e);return-1!==n&&r.splice(n,1),t.w=r,this.acl.groups=t,this}},{key:"toJSON",value:function(){return(0,f["default"])(this.acl)}}]),e}(),p=function(){function e(t){i(this,e),this[h]=new d(t)}return n(e,[{key:"creator",get:function(){return this[h].creator}},{key:"readers",get:function(){return this[h].readers}},{key:"readerGroups",get:function(){return this[h].readerGroups}},{key:"writerGroups",get:function(){return this[h].writerGroups}},{key:"writers",get:function(){return this[h].writers}},{key:"globallyReadable",set:function(e){this[h].globallyReadable=e}},{key:"globallyWritable",set:function(e){this[h].globallyWritable=e}}]),n(e,[{key:"addReader",value:function(e){return this[h].addReader(e),this}},{key:"addReaderGroup",value:function(e){return this[h].addReaderGroup(e),this}},{key:"addWriter",value:function(e){return this[h].addWriter(e),this}},{key:"isGloballyReadable",value:function(){return this[h].isGloballyReadable()}},{key:"isGloballyWritable",value:function(){return this[h].isGloballyWritable()}},{key:"removeReader",value:function(e){return this[h].removeReader(e),this}},{key:"removeReaderGroup",value:function(e){return this[h].removeReaderGroup(e),this}},{key:"removeWriter",value:function(e){return this[h].removeWriter(e),this}},{key:"removeWriterGroup",value:function(e){return this[h].removeWriterGroup(e),this}},{key:"toJSON",value:function(){return this[h].toJSON()}}]),e}();r["default"]=p,t.exports=r["default"]},{"./errors":259,"babel-runtime/core-js/symbol":8,"babel-runtime/helpers/class-call-check":9,"babel-runtime/helpers/create-class":10,"babel-runtime/helpers/interop-require-default":13,"lodash/lang/clone":208,"lodash/lang/isPlainObject":217}],241:[function(e,t,r){var n=e("babel-runtime/helpers/create-class")["default"],i=e("babel-runtime/helpers/class-call-check")["default"],o=e("babel-runtime/core-js/symbol")["default"],a=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(r,"__esModule",{value:!0});var u=e("./errors"),s=e("./query"),l=a(s),c=e("lodash/lang/clone"),f=a(c),h=e("lodash/lang/isObject"),d=a(h),p=e("lodash/lang/isString"),v=a(p),y=e("lodash/lang/isFunction"),g=a(y),b=o(),m=function(){function e(){i(this,e),this._query=null,this._initial={},this._key={},this._reduce=function(){}.toString()}return n(e,[{key:"by",value:function(e){return this._key[e]=!0,this}},{key:"initial",value:function(e,t){if(!t&&!(0,d["default"])(e))throw new u.KinveyError("objectOrKey argument must be an Object.");return(0,d["default"])(e)?this._initial=e:this._initial[e]=t,this}},{key:"process",value:function(e){return this._query?this._query.process(e):e}},{key:"query",value:function(e){if(!(e instanceof l["default"]))throw new u.KinveyError("query argument must be of type Kinvey.Query.");return this._query=e,this}},{key:"reduce",value:function(e){if((0,g["default"])(e)&&(e=e.toString()),!(0,v["default"])(e))throw new u.KinveyError("fn argument must be of type function or string.");return this._reduce=e,this}},{key:"toJSON",value:function(){var e={key:this._key,initial:this._initial,reduce:this._reduce,condition:this._query?this._query.toJSON().filter:{}};return(0,f["default"])(e)}}]),e}(),_=function(){function e(){i(this,e),this[b]=new m}return n(e,[{key:"by",value:function(e){return this[b].by(e),this}},{key:"initial",value:function(e,t){return this[b].initial(e,t),this}},{key:"process",value:function(e){return this[b].process(e)}},{key:"query",value:function(e){return this[b].query(e),this}},{key:"reduce",value:function(e){return this[b].reduce(e),this}},{key:"toJSON",value:function(){return this[b].toJSON()}}]),e}();r["default"]=_,t.exports=r["default"]},{"./errors":259,"./query":264,"babel-runtime/core-js/symbol":8,"babel-runtime/helpers/class-call-check":9,"babel-runtime/helpers/create-class":10,"babel-runtime/helpers/interop-require-default":13,"lodash/lang/clone":208,"lodash/lang/isFunction":213,"lodash/lang/isObject":216,"lodash/lang/isString":219}],242:[function(e,t,r){var n=e("babel-runtime/helpers/create-class")["default"],i=e("babel-runtime/helpers/class-call-check")["default"],o=e("babel-runtime/core-js/promise")["default"];Object.defineProperty(r,"__esModule",{value:!0});var a=e("../utils/user"),u=function(){function e(){i(this,e)}return n(e,null,[{key:"all",value:function(t){return e.session(t)["catch"](function(){return e.basic(t)})}},{key:"app",value:function(e){if(!e.appId||!e.appSecret){var t=new Error("Missing client credentials");return o.reject(t)}var r=o.resolve({scheme:"Basic",username:e.appId,password:e.appSecret});return r}},{key:"basic",value:function(t){return e.master(t)["catch"](function(){return e.app(t)})}},{key:"default",value:function(t){return e.session(t)["catch"](function(r){return e.master(t)["catch"](function(){return o.reject(r)})})}},{key:"master",value:function(e){if(!e.appId||!e.masterSecret){var t=new Error("Missing client credentials");return o.reject(t)}var r=o.resolve({scheme:"Basic",username:e.appId,password:e.masterSecret});return r}},{key:"none",value:function(){return o.resolve(null)}},{key:"session",value:function(){return(0,a.getActiveUser)().then(function(e){if(!e)throw new Error("There is not an active user.");return{scheme:"Kinvey",credentials:e._kmd.authtoken}})}}]),e}();r["default"]=u,t.exports=r["default"]},{"../utils/user":284,"babel-runtime/core-js/promise":7,"babel-runtime/helpers/class-call-check":9,"babel-runtime/helpers/create-class":10}],243:[function(e,t,r){(function(n){var i=e("babel-runtime/helpers/create-class")["default"],o=e("babel-runtime/helpers/class-call-check")["default"],a=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(r,"__esModule",{value:!0});var u=e("../../errors"),s=e("../../query"),l=a(s),c=e("bluebird"),f=a(c),h=!1,d=e("fake-indexeddb"),p=function(){function e(t){o(this,e),this.dbInfo=t,this.queue=[]}return i(e,[{key:"transaction",value:function(e,t,r){void 0===e&&(e=!1);var n=this,i=arguments.length<=3||void 0===arguments[3]?!1:arguments[3],o=this.dbInfo.name,a=this.dbInfo.collection;if(this.db&&(i||!h))if(-1!==this.db.objectStoreNames.indexOf(a)){var s=e?"readwrite":"readonly";try{var l=this.db.transaction([a],s);if(l){var c=l.objectStore(a);return t(c)}return r(new u.KinveyError("Unable to open a transaction for the database. Please try this database transaction again."))}catch(f){return r(f)}}else if(!e)return r(new u.KinveyError("The collection "+a+" was not found in the database."));if(i!==!0&&h)return this.queue.push(function(){return n.transaction(e,t,r)});h=!0;var p=void 0;if(this.db){var v=this.db.version+1;this.db.close(),p=d.open(o,v)}else p=d.open(o);p.onupgradeneeded=function(){e&&p.result.createObjectStore(a,{keyPath:"_id"})},p.onsuccess=function(){n.db=p.result,n.db.onversionchange=function(){n.db&&(n.db.close(),n.db=null)};var i=function(e){return function(t){if(e(t),h=!1,n.queue.length>0){var r=n.queue;n.queue=[],r.forEach(function(e){return e()})}}};n.transaction(e,i(t),i(r),!0)},p.onerror=function(e){r(e)}}},{key:"find",value:function(e){var t=this,r=new f["default"](function(e,r){t.transaction(!1,function(t){var n=t.openCursor(),i=[];n.onsuccess=function(){var t=n.result;t?(i.push(t.value),t["continue"]()):e(i)},n.onerror=function(e){r(e)}},r)}).then(function(t){return e?e.process(t):t})["catch"](function(){return[]});return r}},{key:"count",value:function(e){var t=this.find(e).then(function(e){return e.length});return t}},{key:"findAndModify",value:function(e,t){var r=this,n=new f["default"](function(n,i){r.transaction(!0,function(r){var o=r.transaction,a=r.get(e),u=void 0;a.onsuccess=function(){u=t(a.result||null),r.put(u)},o.oncomplete=function(){n(u)},o.onerror=function(e){i(e)}},i)});return n}},{key:"group",value:function(e){var t=new l["default"]({filter:e.condition}),r=this.find(t).then(function(t){var r={};t.forEach(function(t){var n={};for(var i in e.key)e.key.hasOwnProperty(i)&&(n[i]=t[i]);var o=JSON.stringify(n);if(!r[o]){r[o]=n;for(var a in e.initial)e.initial.hasOwnProperty(a)&&(r[o][a]=e.initial[a])}e.reduce(t,r[o])});var n=[];for(var i in r)r.hasOwnProperty(i)&&n.push(r[i]);return n});return r}},{key:"get",value:function(e){var t=this,r=new f["default"](function(r,n){t.transaction(!1,function(t){var i=t.get(e);i.onsuccess=function(){return i.result?r(i.result):void n(new u.KinveyError("Entity not found in the collection."))},i.onerror=function(e){n(e)}},n)});return r}},{key:"save",value:function(e){var t=this,r=new f["default"](function(r,n){t.transaction(!0,function(t){var i=t.put(e);i.onsuccess=function(){r(e)},i.onerror=function(e){n(e)}},n)});return r}},{key:"batch",value:function(e){var t=this,r=new f["default"](function(r,n){t.transaction(!0,function(t){var i=t.transaction;e.forEach(function(e){t.put(e)}),i.oncomplete=function(){r(e)},i.onerror=function(e){n(e)}},n)});return r}},{key:"delete",value:function(e){var t=this,r=new f["default"](function(r,n){t.transaction(!0,function(t){var i=t.transaction,o=t.get(e);t["delete"](e),i.oncomplete=function(){return o.result?void r({count:1,documents:[o.result]}):n(new u.KinveyError("This entity was not found in the collection."))},i.onerror=function(e){n(e)}},n)});return r}},{key:"clean",value:function(e){var t=this,r=this.find(e).then(function(e){return 0===e.length?{count:0,documents:[]}:new f["default"](function(r,n){t.transaction(!0,function(t){var i=t.transaction;e.forEach(function(e){t["delete"](e._id)}),i.oncomplete=function(){r({count:e.length,documents:e})},i.onerror=function(e){n(e)}},n)})});return r}},{key:"clear",value:function(){var e=this,t=new f["default"](function(t,r){e.db&&(e.db.close(),e.db=null);var n=d.deleteDatabase(e.dbInfo.name);n.onsuccess=function(){t(null)},n.onerror=function(e){r(e)}});return t}}],[{key:"isSupported",value:function(){return d?!0:!1}}]),e}();r["default"]=p,t.exports=r["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../errors":259,"../../query":264,"babel-runtime/helpers/class-call-check":9,"babel-runtime/helpers/create-class":10,"babel-runtime/helpers/interop-require-default":13,bluebird:86,"fake-indexeddb":100}],244:[function(e,t,r){var n=e("babel-runtime/helpers/create-class")["default"],i=e("babel-runtime/helpers/class-call-check")["default"],o=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(r,"__esModule",{value:!0});var a=e("./serializer"),u=o(a),s=e("../../errors"),l=e("lodash/object/assign"),c=o(l),f=e("bluebird"),h=o(f),d=e("humble-localstorage"),p=o(d),v=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];i(this,e),t=(0,c["default"])({name:"kinvey",collection:"data"},t),this.keyPrefix=t.name+"."+t.collection}return n(e,[{key:"serializeKey",value:function(e){return this.keyPrefix+"."+e}},{key:"deserializeKey",value:function(e){return e.replace(this.keyPrefix+".","")}},{key:"find",value:function(e){for(var t=[],r=0,n=p["default"].length;n>r;r++){var i=p["default"].key(r);0===i.indexOf(this.keyPrefix)&&t.push(this.get(this.deserializeKey(i)))}return h["default"].all(t).then(function(t){
return e?e.process(t):t})}},{key:"count",value:function(e){var t=this.find(e).then(function(e){return e.length});return t}},{key:"findAndModify",value:function(e,t){var r=this,n=this.get(e).then(function(e){return e=t(e||null),r.save(e)});return n}},{key:"group",value:function(e){var t=new Query({filter:e.condition}),r=this.find(t).then(function(t){var r={};t.forEach(function(t){var n={};for(var i in e.key)e.key.hasOwnProperty(i)&&(n[i]=t[i]);var o=JSON.stringify(n);if(!r[o]){r[o]=n;for(var a in e.initial)e.initial.hasOwnProperty(a)&&(r[o][a]=e.initial[a])}e.reduce(t,r[o])});var n=[];for(var i in r)r.hasOwnProperty(i)&&n.push(r[i]);return n});return r}},{key:"get",value:function(e){var t=p["default"].getItem(this.serializeKey(e)),r=new u["default"],n=r.deserialize(t);return n}},{key:"save",value:function(e){var t=this;if(!e)return h["default"].resolve(null);var r=new u["default"],n=r.serialize(e).then(function(r){try{return p["default"].setItem(t.serializeKey(e._id),r),e}catch(n){if("QuotaExceededError"===n.name||"NS_ERROR_DOM_QUOTA_REACHED"===n.name)throw n;throw n}});return n}},{key:"batch",value:function(e){var t=this,r=[];return e.forEach(function(e){r.push(t.save(e))}),h["default"].all(r)}},{key:"delete",value:function(e){return p["default"].removeItem(this.serializeKey(e)),h["default"].resolve()}},{key:"clean",value:function(){return h["default"].reject(new s.KinveyError("LocalStorageAdapter.clean() method is unsupported."))}},{key:"clear",value:function(){return p["default"].clear(),h["default"].resolve()}}],[{key:"isSupported",value:function(){var e="kinvey";try{return p["default"].setItem(e,e),p["default"].removeItem(e),!0}catch(t){return!1}}}]),e}();r["default"]=v,t.exports=r["default"]},{"../../errors":259,"./serializer":245,"babel-runtime/helpers/class-call-check":9,"babel-runtime/helpers/create-class":10,"babel-runtime/helpers/interop-require-default":13,bluebird:86,"humble-localstorage":142,"lodash/object/assign":222}],245:[function(e,t,r){(function(n){var i=e("babel-runtime/helpers/create-class")["default"],o=e("babel-runtime/helpers/class-call-check")["default"],a=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(r,"__esModule",{value:!0});var u=e("bluebird"),s=a(u),l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c="~~kinvey_type~",f=/^~~kinvey_type~([^~]+)~/,h="__ksc__:",d=h.length,p="arbf",v="blob",y="si08",g="ui08",b="uic8",m="si16",_="si32",w="ur16",j="ui32",A="fl32",E="fl64",k=d+p.length,x=function(){function e(){o(this,e)}return i(e,[{key:"serialize",value:function(e){var t=new s["default"](function(t,r){var n="";if(e&&(n=e.toString()),e&&("[object ArrayBuffer]"===e.toString()||e.buffer&&"[object ArrayBuffer]"===e.buffer.toString())){var i=void 0,o=h;e instanceof ArrayBuffer?(i=e,o+=p):(i=e.buffer,"[object Int8Array]"===n?o+=y:"[object Uint8Array]"===n?o+=g:"[object Uint8ClampedArray]"===n?o+=b:"[object Int16Array]"===n?o+=m:"[object Uint16Array]"===n?o+=w:"[object Int32Array]"===n?o+=_:"[object Uint32Array]"===n?o+=j:"[object Float32Array]"===n?o+=A:"[object Float64Array]"===n?o+=E:r(new Error("Failed to get type for BinaryArray"))),t(o+this.bufferToString(i))}else if("[object Blob]"===n){var a=new FileReader;a.onload=function(){var r=c+e.type+"~"+this.bufferToString(this.result);t(h+v+r)},a.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(u){r(u)}});return t}},{key:"deserialize",value:function(e){var t=new s["default"](function(t,r){e.substring(0,d)!==h&&t(JSON.parse(e));var n=e.substring(k),i=e.substring(d,k),o=void 0;if(i===v&&f.test(n)){var a=n.match(f);o=a[1],n=n.substring(a[0].length)}var u=this.stringToBuffer(n);switch(i){case p:return t(u);case v:return t(this._createBlob([u],{type:o}));case y:return t(new Int8Array(u));case g:return t(new Uint8Array(u));case b:return t(new Uint8ClampedArray(u));case m:return t(new Int16Array(u));case w:return t(new Uint16Array(u));case _:return t(new Int32Array(u));case j:return t(new Uint32Array(u));case A:return t(new Float32Array(u));case E:return t(new Float64Array(u));default:return r(new Error("Unkown type: "+i))}});return t}},{key:"stringToBuffer",value:function(e){var t=.75*e.length,r=e.length,n=void 0,i=0,o=void 0,a=void 0,u=void 0,s=void 0;"="===e[e.length-1]&&(t--,"="===e[e.length-2]&&t--);var c=new ArrayBuffer(t),f=new Uint8Array(c);for(n=0;r>n;n+=4)o=l.indexOf(e[n]),a=l.indexOf(e[n+1]),u=l.indexOf(e[n+2]),s=l.indexOf(e[n+3]),f[i++]=o<<2|a>>4,f[i++]=(15&a)<<4|u>>2,f[i++]=(3&u)<<6|63&s;return c}},{key:"bufferToString",value:function(e){for(var t=new Uint8Array(e),r="",n=0,i=t.length;i>n;n+=3)r+=l[t[n]>>2],r+=l[(3&t[n])<<4|t[n+1]>>4],r+=l[(15&t[n+1])<<2|t[n+2]>>6],r+=l[63&t[n+2]];return t.length%3===2?r=r.substring(0,r.length-1)+"=":t.length%3===1&&(r=r.substring(0,r.length-2)+"=="),r}},{key:"_createBlob",value:function(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(r){if("TypeError"!==r.name)throw r;for(var i=n.BlobBuilder||n.MSBlobBuilder||n.MozBlobBuilder||n.WebKitBlobBuilder,o=new i,a=0,u=e.length;u>a;a+=1)o.append(e[a]);return o.getBlob(t.type)}}}]),e}();r["default"]=x,t.exports=r["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"babel-runtime/helpers/class-call-check":9,"babel-runtime/helpers/create-class":10,"babel-runtime/helpers/interop-require-default":13,bluebird:86}],246:[function(e,t,r){(function(n){var i=e("babel-runtime/helpers/create-class")["default"],o=e("babel-runtime/helpers/class-call-check")["default"],a=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(r,"__esModule",{value:!0});var u=e("../../errors"),s=e("promise-queue"),l=a(s),c=e("../../query"),f=a(c),h=e("bluebird"),d=a(h),p=e("lodash/lang/isArray"),v=a(p),y=e("lodash/lang/isFunction"),g=a(y),b=e("lodash/lang/isString"),m=a(b);l["default"].configure(d["default"]);var _=function(){function e(t){o(this,e),this.dbInfo=t,this.queue=new l["default"](1,1/0)}return i(e,[{key:"transaction",value:function(t,r){var i=this,o=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],a=this.dbInfo.name,s=this.dbInfo.collection,l='"'+s+'"',c="sqlite_master"===s,f=(0,v["default"])(t);t=f?t:[[t,r]],this.db||(this.db=n.openDatabase(a,1,"",5242880));var h=new d["default"](function(r,n){var h=o||!(0,g["default"])(i.db.readTransaction);i.db[h?"transaction":"readTransaction"](function(e){o&&!c&&e.executeSQL("CREATE TABLE IF NOT EXISTS "+l+" (key BLOB PRIMARY KEY NOT NULL, value BLOB NOT NULL)");var n=i.sql.length,a=[];t.forEach(function(t){var i=t[0].replace("#{collection}",l);e.executeSQL(i,t[1],function(e,t){var i={rowCount:t.rowsAffected,result:[]};if(t.rows.length)for(var o=0,u=t.rows.length;u>o;o++){var s=t.rows.item(o).value,l=c?s:JSON.parse(s);i.result.push(l)}a.push(i),n-=1,0===n&&r(f?a:a.shift())})})},function(t){if(t=(0,m["default"])(t)?t:t.message,t&&-1!==t.indexOf("no such table"))return n(new u.KinveyError("The collection was not found for this app backend.",s));var r="SELECT name AS value from #{collection} WHERE type = ? and name = ?",i=["table",s],o=new e({name:a,collection:"sqlite_master"});return o.transaction(r,i,!1).then(function(e){t=0===e.result.length?new u.KinveyError("The collection was not found for this app backend.",s):new u.KinveyError("Database Error",t),n(t)})})});return h}},{key:"find",value:function(e){var t="SELECT value FROM #{collection}",r=this.transaction(t,[]["false"]).then(function(t){var r=t.result;return e?e.process(r):r});return r}},{key:"count",value:function(e){var t=this.find(e).then(function(e){return{count:e.length}});return t}},{key:"findAndModify",value:function(e,t){var r=this,n=this.queue.add(function(){return r.get(e).then(null,function(e){if("Entity Not Found"===e.name)return null;throw e}).then(function(e){return e=t(e),r.save(e)})});return n}},{key:"group",value:function(e){var t=new f["default"]({filter:e.condition}),r=this.find(t).then(function(t){var r={};t.forEach(function(t){var n={};for(var i in e.key)e.key.hasOwnProperty(i)&&(n[i]=t[i]);var o=JSON.stringify(n);if(!r[o]){r[o]=n;for(var a in e.initial)e.initial.hasOwnProperty(a)&&(r[o][a]=e.initial[a])}e.reduce(t,r[o])});var n=[];for(var i in r)r.hasOwnProperty(i)&&n.push(r[i]);return n});return r}},{key:"get",value:function(e){var t="SELECT value FROM #{collection} WHERE key = ?",r=this.transaction(t,[e],!1).then(function(e){var t=e.result;if(0===t.length)throw new u.KinveyError("The entity was not found in the collection.");return t[0]});return r}},{key:"save",value:function(e){var t="REPLACE INTO #{collection} (key, value) VALUES (?, ?)",r=[e._id,JSON.stringify(e)],n=this.transaction(t,r,!0).then(function(){return e});return n}},{key:"batch",value:function(e){var t=[];e=e.map(function(e){return t.push(["REPLACE INTO #{collection} (key, value) VALUES (?, ?)",[e._id,JSON.stringify(e)]]),e});var r=this.transaction(t,null,!0).then(function(){return e});return r}},{key:"delete",value:function(e){var t=this,r=[["SELECT value FROM #{collection} WHERE key = ?",[e]],["DELETE FROM #{collection} WHERE key = ?",[e]]],n=this.transaction(r,null,!0).then(function(r){var n=r[0].result,i=r[1].rowCount;if(i=i?i:n.length,0===i)throw new u.KinveyError("The entity not found in the collection.",{collection:t.dbInfo.collection,id:e});return{count:i,documents:n}});return n}},{key:"clean",value:function(e){var t=this,r=this.queue.add(function(){return t.find(e).then(function(e){if(0===e.length)return{count:0,documents:[]};var r=[],n=e.map(function(e){return r.push("?"),e._id}),i="DELETE FROM #{collection} WHERE key IN("+r.join(",")+")";return t.transaction(i,n,!0).then(function(t){var r=t.rowCount?t.rowCount:e.length;return{count:r,documents:e}})})});return r}},{key:"clear",value:function(){var t=this,r=this.queue.add(function(){var r="SELECT name AS value FROM #{collection} WHERE type = ?",n=["table"],i=new e({name:t.dbInfo.name,collection:"sqlite_master"});return i.transaction(r,n,!1).then(function(e){var t=e.result;if(0===t.length)return null;var r=/^[a-zA-Z0-9\-]{1,128}/,n=t.filter(function(e){return r.text(e)}).map(function(e){return["DROP TABLE IF EXISTS '"+e+"'"]});return i.transaction(n,null,!0)}).then(function(){return null})});return r}}],[{key:"isSupported",value:function(){return n.openDatabase?!0:!1}}]),e}();r["default"]=_,t.exports=r["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../errors":259,"../../query":264,"babel-runtime/helpers/class-call-check":9,"babel-runtime/helpers/create-class":10,"babel-runtime/helpers/interop-require-default":13,bluebird:86,"lodash/lang/isArray":210,"lodash/lang/isFunction":213,"lodash/lang/isString":219,"promise-queue":233}],247:[function(e,t,r){var n=e("babel-runtime/helpers/create-class")["default"],i=e("babel-runtime/helpers/class-call-check")["default"],o=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(r,"__esModule",{value:!0});var a=e("../enums/storeAdapter"),u=o(a),s=e("../errors"),l=e("../query"),c=o(l),f=e("../aggregation"),h=o(f),d=e("./adapters/indexeddb"),p=o(d),v=e("./adapters/localstorage"),y=o(v),g=e("./adapters/websql"),b=o(g),m=e("bluebird"),_=o(m),w=e("loglevel"),j=o(w),A=e("lodash/object/assign"),E=o(A),k=e("lodash/object/result"),x=o(k),F=e("lodash/lang/isString"),C=o(F),O=e("lodash/lang/isArray"),S=o(O),P=o(O),D=/^[a-zA-Z0-9\-]{1,128}/,B=function(){function e(t,r){if(void 0===t&&(t=[u["default"].IndexedDB]),i(this,e),r=(0,E["default"])({name:"kinvey",collection:"data"},r),!(0,C["default"])(r.name)||!D.test(r.name))throw new s.KinveyError("The database name has an invalid format.","The database name must be a string containing only alphanumeric characters and dashes.");if(!(0,C["default"])(r.collection)||!D.test(r.collection))throw new s.KinveyError("The collection name has an invalid format.","The collection name must be a string containing only alphanumeric characters and dashes.");(0,S["default"])(t)||(t=[t]);for(var n=0,o=t.length;o>n;n++){var a=t[n];if((0,C["default"])(a))switch(a){case u["default"].IndexedDB:a=p["default"];break;case u["default"].LocalStorage:a=y["default"];break;case u["default"].WebSQL:a=b["default"];break;default:continue}if(a.isSupported()){this.adapter=new a(r);break}}if(!this.adapter)throw new s.KinveyError("Please provide a supported storage adapter.")}return n(e,[{key:"generateObjectId",value:function(){for(var e=arguments.length<=0||void 0===arguments[0]?24:arguments[0],t="abcdef0123456789",r="",n=0,i=t.length;e>n;n+=1){var o=Math.floor(Math.random()*i);r+=t.substring(o,o+1)}return""+this.objectIdPrefix+r}},{key:"find",value:function(e){return!e||e instanceof c["default"]||(e=new c["default"]((0,x["default"])(e,"toJSON",e))),this.adapter.find(e)}},{key:"count",value:function(e){return!e||e instanceof c["default"]||(e=new c["default"]((0,x["default"])(e,"toJSON",e))),e&&e.sort(null).limit(null).skip(0),this.adapter.count(e)}},{key:"findAndModify",value:function(e,t){return(0,C["default"])(e)||(j["default"].warn(e+" is not a string. Casting to a string value.",e),e=String(e)),(0,P["default"])(t)?this.adapter.findAndModify(e,t):_["default"].reject(new s.KinveyError("fn argument must be a function"))}},{key:"group",value:function(e){return e instanceof h["default"]||(e=new h["default"](e)),this.adapter.group(e)}},{key:"get",value:function(e){return(0,C["default"])(e)||(j["default"].warn(e+" is not a string. Casting to a string value.",e),e=String(e)),this.adapter.get(e)}},{key:"save",value:function(e){return(0,S["default"])(e)?this.batch(e):e?(e._id=e._id||this.generateObjectId(),this.adapter.save(e)):_["default"].resolve(null)}},{key:"batch",value:function(e){return(0,S["default"])(e)||(e=[e]),this.adapter.batch(e)}},{key:"delete",value:function(e){return(0,C["default"])(e)||(j["default"].warn(e+" is not a string. Casting to a string value.",e),e=String(e)),this.adapter["delete"](e)}},{key:"clean",value:function(e){return!e||e instanceof c["default"]||(e=new c["default"]((0,x["default"])(e,"toJSON",e))),e&&e.sort(null).limit(null).skip(0),this.adapter.clean(e)}},{key:"clear",value:function(){return this.adapter.clear()}},{key:"objectIdPrefix",get:function(){return"local_"}}]),e}();r["default"]=B,t.exports=r["default"]},{"../aggregation":241,"../enums/storeAdapter":258,"../errors":259,"../query":264,"./adapters/indexeddb":243,"./adapters/localstorage":244,"./adapters/websql":246,"babel-runtime/helpers/class-call-check":9,"babel-runtime/helpers/create-class":10,"babel-runtime/helpers/interop-require-default":13,bluebird:86,"lodash/lang/isArray":210,"lodash/lang/isString":219,"lodash/object/assign":222,"lodash/object/result":229,loglevel:232}],248:[function(e,t,r){var n=e("babel-runtime/helpers/create-class")["default"],i=e("babel-runtime/helpers/class-call-check")["default"],o=e("babel-runtime/core-js/symbol")["default"],a=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(r,"__esModule",{value:!0});var u=e("./errors"),s=e("url"),l=a(s),c=e("lodash/lang/clone"),f=a(c),h=o(),d=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];i(this,e);var r="https",n="baas.kinvey.com",o=void 0,a=void 0;if(!t.appId&&!t.appKey)throw new u.KinveyError("No App Id was provided. Unable to create a new Client without an App Id.");if(!t.appSecret&&!t.masterSecret)throw new u.KinveyError("No App Secret or Master Secret was provided. Unable to create a new Client without an App Key.");o=t.apiUrl||r+"://"+n,a=l["default"].parse(o),0!==a.protocol.indexOf(r)&&t.allowHttp===!1&&(a.protocol=r),this.apiProtocol=a.protocol,this.apiHost=a.host,this.appId=t.appId||t.appKey,this.appSecret=t.appSecret||void 0,this.masterSecret=t.masterSecret||void 0,this.encryptionKey=t.encryptionKey||void 0}return n(e,[{key:"toJSON",value:function(){var e={apiProtocol:this.apiProtocol,apiHost:this.apiHost,appId:this.appId,appSecret:this.appSecret,masterSecret:this.masterSecret,encryptionKey:this.encryptionKey};return(0,f["default"])(e)}},{key:"apiUrl",get:function(){return l["default"].format({protocol:this.apiProtocol,host:this.apiHost})}}],[{key:"init",value:function(t){var r=new e(t);return e[h]=r,r}},{key:"sharedInstance",value:function(){var t=e[h];if(!t)throw new u.KinveyError("You have not initialized the library. Please call Kinvey.init() to initialize the library.");return t}}]),e}();r["default"]=d,t.exports=r["default"]},{"./errors":259,"babel-runtime/core-js/symbol":8,"babel-runtime/helpers/class-call-check":9,"babel-runtime/helpers/create-class":10,"babel-runtime/helpers/interop-require-default":13,"lodash/lang/clone":208,url:97}],249:[function(e,t,r){var n=e("babel-runtime/helpers/create-class")["default"],i=e("babel-runtime/helpers/class-call-check")["default"],o=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(r,"__esModule",{value:!0});var a=e("../aggregation"),u=o(a),s=e("../request"),l=e("../enums/httpMethod"),c=o(l),f=e("../enums/DataPolicy"),h=o(f),d=e("../client"),p=o(d),v=e("../query"),y=o(v),g=e("../auth"),b=o(g),m=e("../models/model"),_=o(m),w=e("lodash/object/assign"),j=o(w),A=e("lodash/object/result"),E=o(A),k=e("loglevel"),x=o(k),F=e("lodash/lang/isArray"),C=o(F),O="appdata",S=function(){function e(t){var r=arguments.length<=1||void 0===arguments[1]?p["default"].sharedInstance():arguments[1],n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];i(this,e),n=(0,j["default"])({model:_["default"]},n),this.collection=t,this.client=r,this.model=n.model}return n(e,[{key:"find",value:function(e){var t=this,r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];x["default"].debug("Retrieving the models in the "+this.collection+" collection.",e),r=(0,j["default"])({dataPolicy:h["default"].CloudOnly,auth:b["default"]["default"]},r),!e||e instanceof y["default"]||(e=new y["default"]((0,E["default"])(e,"toJSON",e)));var n=new s.Request(c["default"].GET,this.path,e,null,r),i=n.execute().then(function(e){var n=e.data,i=[];return(0,C["default"])(n)||(n=[n]),n.forEach(function(e){i.push(new t.model(e,r))}),i});return i.then(function(e){x["default"].info("Retrieved the models in the "+t.collection+" collection.",e)})["catch"](function(e){x["default"].error("Failed to retrieve the models in the "+t.collection+" collection.",e)}),i}},{key:"get",value:function(e){var t=this,r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];x["default"].debug("Retrieving a model in the "+this.collection+" collection with id = "+e+"."),r=(0,j["default"])({dataPolicy:h["default"].CloudOnly,auth:b["default"]["default"]},r);var n=new s.Request(c["default"].GET,this.path+"/id",null,null,r),i=n.execute().then(function(e){return new t.model(e.data,r)});return i.then(function(r){x["default"].info("Retrieved the model in the "+t.collection+" collection with id = "+e+".",r)})["catch"](function(r){x["default"].error("Failed to retrieve the model in the "+t.collection+" collection with id = "+e+".",r)}),i}},{key:"save",value:function(e){var t=this,r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(x["default"].debug("Saving the model to the "+this.collection+" collection.",e),e.id)return x["default"].debug("The model has an id = "+e.id+", updating the model instead."),this.update(e,r);r=(0,j["default"])({dataPolicy:h["default"].CloudOnly,auth:b["default"]["default"]},r);var n=new s.Request(c["default"].POST,this.path,null,(0,E["default"])(e,"toJSON",e),r),i=n.execute().then(function(e){return new this.model(e.data,r)});return i.then(function(e){x["default"].info("Saved the model to the "+t.collection+" collection.",e)})["catch"](function(e){x["default"].error("Failed to save the model to the "+t.collection+" collection.",e)}),i}},{key:"update",value:function(e){var t=this,r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];x["default"].debug("Update the model to the "+this.collection+" collection.",e),r=(0,j["default"])({dataPolicy:h["default"].CloudOnly,auth:b["default"]["default"]},r);var n=new s.Request(c["default"].PUT,this.path+"/"+e.id,null,(0,E["default"])(e,"toJSON",e),r),i=n.execute().then(function(){return e});return i.then(function(e){x["default"].info("Updated the model to the "+t.collection+" collection.",e)})["catch"](function(e){x["default"].error("Failed to update the model to the "+t.collection+" collection.",e)}),i}},{key:"clean",value:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?new y["default"]:arguments[0],r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];x["default"].debug("Deleting the models in the "+this.collection+" collection by query.",t),!t||t instanceof y["default"]||(t=new y["default"]((0,E["default"])(t,"toJSON",t))),r=(0,j["default"])({dataPolicy:h["default"].CloudOnly,auth:b["default"]["default"]},r);var n=new s.Request(c["default"].DELETE,this.path,t,null,r),i=n.execute().then(function(e){return e.data});return i.then(function(t){x["default"].info("Deleted the models in the "+e.collection+" collection.",t)})["catch"](function(t){x["default"].error("Failed to delete the models in the "+e.collection+" collection.",t)}),i}},{key:"destroy",value:function(e){var t=this,r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];x["default"].debug("Deleting a model in the "+this.collection+" collection with id = "+e+"."),r=(0,j["default"])({dataPolicy:h["default"].CloudOnly,auth:b["default"]["default"]},r);var n=new s.Request(c["default"].DELETE,this.path+"/"+e,null,null,r),i=n.execute().then(function(e){return e.data});return i.then(function(r){x["default"].info("Deleted the model in the "+t.collection+" collection with id = "+e+".",r)})["catch"](function(r){x["default"].error("Failed to delete the model in the "+t.collection+" collection with id = "+e+".",r)}),i}},{key:"count",value:function(e){var t=this,r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];x["default"].debug("Counting the number of models in the "+this.collection+" collection.",e),r=(0,j["default"])({dataPolicy:h["default"].CloudOnly,auth:b["default"]["default"]},r),!e||e instanceof y["default"]||(e=new y["default"]((0,E["default"])(e,"toJSON",e)));var n=new s.Request(c["default"].GET,this.path+"/_count",e,null,r),i=n.execute().then(function(e){return e.data});return i.then(function(e){x["default"].info("Counted the number of models in the "+t.collection+" collection.",e)})["catch"](function(e){x["default"].error("Failed to count the number of models in the "+t.collection+" collection.",e)}),i}},{key:"group",value:function(e){var t=this,r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];x["default"].debug("Grouping the models in the "+this.collection+" collection.",e,r),r=(0,j["default"])({dataPolicy:h["default"].CloudOnly,auth:b["default"]["default"]},r),!e||e instanceof u["default"]||(e=new u["default"]((0,E["default"])(e,"toJSON",e)));var n=new s.Request(c["default"].POST,this.path+"/_group",null,e.toJSON(),r),i=n.execute().then(function(e){return e.data});return i.then(function(e){x["default"].info("Grouped the models in the "+t.collection+" collection.",e)})["catch"](function(e){x["default"].error("Failed to group the models in the "+t.collection+" collection.",e)}),i}},{key:"path",get:function(){var e="/"+O+"/"+this.client.appId;return this.collection&&(e=e+"/"+this.collection),e}}]),e}();r["default"]=S,t.exports=r["default"]},{"../aggregation":241,"../auth":242,"../client":248,"../enums/DataPolicy":251,"../enums/httpMethod":253,"../models/model":262,"../query":264,"../request":265,"babel-runtime/helpers/class-call-check":9,"babel-runtime/helpers/create-class":10,"babel-runtime/helpers/interop-require-default":13,"lodash/lang/isArray":210,"lodash/object/assign":222,"lodash/object/result":229,loglevel:232}],250:[function(e,t,r){var n=e("babel-runtime/helpers/get")["default"],i=e("babel-runtime/helpers/inherits")["default"],o=e("babel-runtime/helpers/create-class")["default"],a=e("babel-runtime/helpers/class-call-check")["default"],u=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(r,"__esModule",{value:!0});var s=e("../client"),l=u(s),c=e("../auth"),f=u(c),h=e("../enums/dataPolicy"),d=u(h),p=e("../request"),v=e("../enums/httpMethod"),y=u(v),g=e("./datastore"),b=u(g),m=e("../errors"),_=e("../query"),w=u(_),j=e("bluebird"),A=u(j),E=e("lodash/object/assign"),k=u(E),x=e("lodash/lang/isObject"),F=u(x),C=e("lodash/lang/isArray"),O=u(C),S="user",P="rpc",D=function(e){function t(){var e=arguments.length<=0||void 0===arguments[0]?l["default"].sharedInstance():arguments[0];a(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,null,e)}return i(t,e),o(t,[{key:"login",value:function(e,t){var r=this,n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];if(n.dataPolicy=d["default"].CloudOnly,n.auth=f["default"].app,(0,F["default"])(e)||(e={username:e,password:t}),!(e.username&&e.password||e._socialIdentity))return A["default"].reject(new m.KinveyError("Username and/or password missing. Please provide both a username and password to login."));var i=new p.Request(y["default"].POST,this.path+"/login",null,e,n),o=i.execute().then(function(e){return new r.model(e.data,n)});return o}},{key:"logout",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];e.dataPolicy=d["default"].CloudOnly,e.auth=f["default"].session;var t=new p.Request(y["default"].POST,this.path+"/_logout",null,null,e),r=t.execute().then(function(){return null});return r}},{key:"find",value:function(e){var r=this,i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],o=void 0;if(i=(0,k["default"])({dataPolicy:d["default"].CloudFirst,auth:f["default"]["default"]},i),!e||e instanceof w["default"]||(e=new w["default"](result(e,"toJSON",e))),i.discover){var a=new p.Request(y["default"].POST,this.path+"/_lookup",null,e,i);o=a.execute().then(function(e){var t=e.data,n=[];return(0,O["default"])(t)||(t=[t]),t.forEach(function(e){n.push(new r.model(e,i))}),n})}else o=n(Object.getPrototypeOf(t.prototype),"find",this).call(this,e,i);return o}},{key:"verifyEmail",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];t=(0,k["default"])({dataPolicy:d["default"].CloudFirst,auth:f["default"].app},t);var r=new p.Request(y["default"].POST,this.rpcPath+"/"+e+"/user-email-verification-initiate",null,null,t),n=r.execute().then(function(){return null});return n}},{key:"forgotUsername",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];t=(0,k["default"])({dataPolicy:d["default"].CloudFirst,auth:f["default"].app},t);var r=new p.Request(y["default"].POST,this.rpcPath+"/user-forgot-username",{email:e},null,t),n=r.execute().then(function(){return null});return n}},{key:"resetPassword",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];t=(0,k["default"])({dataPolicy:d["default"].CloudFirst,auth:f["default"].app},t);var r=new p.Request(y["default"].POST,this.rpcPath+"/"+e+"/user-password-reset-initiate",null,null,t),n=r.execute().then(function(){return null});return n}},{key:"exists",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];t=(0,k["default"])({dataPolicy:d["default"].CloudFirst,auth:f["default"].app},t);var r=new p.Request(y["default"].POST,this.rpcPath+"/check-username-exists",{username:e},null,t),n=r.execute().then(function(){var e=response.data;return e?e.usernameExists:!1});return n}},{key:"restore",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];t=(0,k["default"])({dataPolicy:d["default"].CloudFirst,auth:f["default"].master},t);var r=new p.Request(y["default"].POST,this.path+"/"+e+"/_restore",null,null,t),n=r.execute().then(function(){return null});return n}},{key:"path",get:function(){return"/"+S+"/"+this.client.appId}},{key:"rpcPath",get:function(){return"/"+P+"/"+this.client.appId}}]),t}(b["default"]);r["default"]=D,t.exports=r["default"]},{"../auth":242,"../client":248,"../enums/dataPolicy":252,"../enums/httpMethod":253,"../errors":259,"../query":264,"../request":265,"./datastore":249,"babel-runtime/helpers/class-call-check":9,"babel-runtime/helpers/create-class":10,"babel-runtime/helpers/get":11,"babel-runtime/helpers/inherits":12,"babel-runtime/helpers/interop-require-default":13,bluebird:86,"lodash/lang/isArray":210,"lodash/lang/isObject":216,"lodash/object/assign":222}],251:[function(e,t,r){var n=e("babel-runtime/core-js/object/freeze")["default"];Object.defineProperty(r,"__esModule",{value:!0});var i={LocalFirst:"LocalFist",LocalOnly:"LocalOnly",CloudFirst:"CloudFirst",CloudOnly:"CloudOnly"};n(i),r["default"]=i,t.exports=r["default"]},{"babel-runtime/core-js/object/freeze":3}],252:[function(e,t,r){var n=e("babel-runtime/core-js/object/freeze")["default"];Object.defineProperty(r,"__esModule",{value:!0});var i={LocalFirst:"LocalFist",LocalOnly:"LocalOnly",CloudFirst:"CloudFirst",CloudOnly:"CloudOnly"};n(i),r["default"]=i,t.exports=r["default"]},{"babel-runtime/core-js/object/freeze":3}],253:[function(e,t,r){var n=e("babel-runtime/core-js/object/freeze")["default"];Object.defineProperty(r,"__esModule",{value:!0});var i={GET:"GET",POST:"POST",PATCH:"PATCH",PUT:"PUT",DELETE:"DELETE"};n(i),r["default"]=i,t.exports=r["default"]},{"babel-runtime/core-js/object/freeze":3}],254:[function(e,t,r){var n=e("babel-runtime/core-js/object/freeze")["default"];Object.defineProperty(r,"__esModule",{value:!0});var i={Network:"Network",Storage:"Storage"};n(i),r["default"]=i,t.exports=r["default"]},{"babel-runtime/core-js/object/freeze":3}],255:[function(e,t,r){var n=e("babel-runtime/core-js/object/freeze")["default"];Object.defineProperty(r,"__esModule",{value:!0});var i={Blob:"blob",Document:"document",DOMString:"domstring",JSON:"json",Text:"text"};n(i),r["default"]=i,t.exports=r["default"]},{"babel-runtime/core-js/object/freeze":3}],256:[function(e,t,r){var n=e("babel-runtime/core-js/object/freeze")["default"];Object.defineProperty(r,"__esModule",{value:!0});var i={Facebook:"Facebook",Google:"Google",LinkedIn:"LinkedIn",Twitter:"Twitter"};n(i),r["default"]=i,t.exports=r["default"]},{"babel-runtime/core-js/object/freeze":3}],257:[function(e,t,r){var n=e("babel-runtime/core-js/object/freeze")["default"];Object.defineProperty(r,"__esModule",{value:!0});var i={OK:200,Created:201,RedirectTemporarily:301,RedirectPermanetly:302,NotFound:404,ServerError:500};n(i),r["default"]=i,t.exports=r["default"]},{"babel-runtime/core-js/object/freeze":3}],258:[function(e,t,r){var n=e("babel-runtime/core-js/object/freeze")["default"];Object.defineProperty(r,"__esModule",{value:!0});var i={IndexedDB:"IndexedDB",LocalStorage:"LocalStorage",WebSQL:"WebSQL"};n(i),r["default"]=i,t.exports=r["default"]},{"babel-runtime/core-js/object/freeze":3}],259:[function(e,t,r){var n=e("babel-runtime/helpers/get")["default"],i=e("babel-runtime/helpers/inherits")["default"],o=e("babel-runtime/helpers/class-call-check")["default"];Object.defineProperty(r,"__esModule",{value:!0});var a=function(e){function t(){var e=arguments.length<=0||void 0===arguments[0]?"An error occurred.":arguments[0],r=arguments.length<=1||void 0===arguments[1]?"":arguments[1];o(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.message=e,this.debug=r}return i(t,e),t}(Error);r.KinveyError=a;var u=function(e){function t(e,r){void 0===e&&(e="An active user already exists."),o(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,r)}return i(t,e),t}(a);r.ActiveUserError=u;var s=function(e){function t(e,r){void 0===e&&(e="The item was not found."),o(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,r)}return i(t,e),t}(a);r.NotFoundError=s},{"babel-runtime/helpers/class-call-check":9,"babel-runtime/helpers/get":11,"babel-runtime/helpers/inherits":12}],260:[function(e,t,r){var n=e("babel-runtime/helpers/create-class")["default"],i=e("babel-runtime/helpers/class-call-check")["default"],o=e("babel-runtime/core-js/symbol")["default"],a=e("babel-runtime/helpers/interop-require-default")["default"];
Object.defineProperty(r,"__esModule",{value:!0});var u=e("lodash/lang/clone"),s=a(u),l=e("lodash/lang/isPlainObject"),c=a(l),f=e("../utils/isDefined"),h=a(f),d=o(),p=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(i(this,e),!(0,c["default"])(t))throw new Error("kmd argument must be an object");this.kmd=t}return n(e,[{key:"toJSON",value:function(){return(0,s["default"])(this.kmd)}},{key:"createdAt",get:function(){return(0,h["default"])(this.kmd.ect)?Date.parse(this.kmd.ect):void 0}},{key:"emailVerification",get:function(){return this.kmd.emailVerification}},{key:"lastModified",get:function(){return(0,h["default"])(this.kmd.lmt)?Date.parse(this.kmd.lmt):void 0}},{key:"authtoken",get:function(){return this.kmd.authtoken}}]),e}(),v=function(){function e(t){i(this,e),this[d]=new p(t)}return n(e,[{key:"toJSON",value:function(){return this[d].toJSON()}},{key:"createdAt",get:function(){return this[d].createdAt}},{key:"emailVerification",get:function(){return this[d].emailVerification}},{key:"lastModified",get:function(){return this[d].lastModified}},{key:"authtoken",get:function(){return this[d].authtoken}}]),e}();r["default"]=v,t.exports=r["default"]},{"../utils/isDefined":280,"babel-runtime/core-js/symbol":8,"babel-runtime/helpers/class-call-check":9,"babel-runtime/helpers/create-class":10,"babel-runtime/helpers/interop-require-default":13,"lodash/lang/clone":208,"lodash/lang/isPlainObject":217}],261:[function(e,t,r){var n=e("babel-runtime/helpers/get")["default"],i=e("babel-runtime/helpers/inherits")["default"],o=e("babel-runtime/helpers/create-class")["default"],a=e("babel-runtime/helpers/class-call-check")["default"],u=e("babel-runtime/core-js/promise")["default"],s=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(r,"__esModule",{value:!0});var l=e("../auth"),c=s(l),f=e("../enums/dataPolicy"),h=s(f),d=e("./model"),p=s(d),v=e("../query"),y=s(v),g=e("../errors"),b=e("../enums/httpMethod"),m=s(b),_=e("lodash/object/assign"),w=s(_),j="blob",A=function(e){function t(){a(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return i(t,e),o(t,[{key:"find",value:function(e){var t=this,r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(e&&!(e instanceof y["default"]))return u.reject(new g.KinveyError("query argument must be an instance of Kinvey.Query"));r=(0,w["default"])({dataPolicy:h["default"].CloudFirst,auth:c["default"]["default"]},r),r.flags={},r.tls!==!1&&(r.flags.tls=!0),r.ttl&&(r.flags.ttl_in_seconds=r.ttl);var n="/"+j+"/"+this.client.appId,i=new Request(m["default"].GET,n,e,null,r),o=i.execute().then(function(e){if(r.download){var n=e.map(function(e){return t.downloadByUrl(e,r)});return u.all(n)}return e});return o}},{key:"download",value:function(e){var t=this,r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];r=(0,w["default"])({dataPolicy:h["default"].CloudFirst,auth:c["default"]["default"]},r),r.flags={},r.tls!==!1&&(r.flags.tls=!0),r.ttl&&(r.flags.ttl_in_seconds=r.ttl);var n="/"+j+"/"+this.client.appId+"/"+e,i=new Request(m["default"].GET,n,null,null,r),o=i.execute().then(function(e){return r.stream?e:t.downloadByUrl(e,r)});return o}},{key:"downloadByUrl",value:function(){}},{key:"stream",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return t.stream=!0,this.download(e,t)}},{key:"upload",value:function(){}},{key:"destroy",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];t=(0,w["default"])({dataPolicy:h["default"].CloudFirst,auth:c["default"]["default"]},t);var r="/"+j+"/"+this.client.appId+"/"+e,n=new Request(m["default"].DELETE,r,null,null,t),i=n.execute()["catch"](function(e){return t.silent&&"BLOB_NOT_FOUND"===e.name?{count:0}:u.reject(e)});return i}}]),t}(p["default"]);r["default"]=A,t.exports=r["default"]},{"../auth":242,"../enums/dataPolicy":252,"../enums/httpMethod":253,"../errors":259,"../query":264,"./model":262,"babel-runtime/core-js/promise":7,"babel-runtime/helpers/class-call-check":9,"babel-runtime/helpers/create-class":10,"babel-runtime/helpers/get":11,"babel-runtime/helpers/inherits":12,"babel-runtime/helpers/interop-require-default":13,"lodash/object/assign":222}],262:[function(e,t,r){var n=e("babel-runtime/helpers/create-class")["default"],i=e("babel-runtime/helpers/class-call-check")["default"],o=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(r,"__esModule",{value:!0});var a=e("../acl"),u=o(a),s=e("../metadata"),l=o(s),c=e("lodash/object/defaults"),f=o(c),h=e("lodash/object/result"),d=o(h),p=e("lodash/lang/clone"),v=o(p),y=e("lodash/object/assign"),g=o(y),b=e("lodash/object/has"),m=o(b),_=e("lodash/collection/size"),w=o(_),j=e("lodash/lang/isEqual"),A=o(j),E=e("lodash/lang/isEmpty"),k=o(E),x="_id",F="_acl",C="_kmd",O=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];i(this,e),this.attributes={},this.changed={},this.validationError=null;var n=t;r.parse&&(n=this.parse(n,r)||{}),n=(0,f["default"])({},n,(0,d["default"])(this,"defaults",{})),this.set(n,r)}return n(e,[{key:"generateObjectId",value:function(){for(var e=arguments.length<=0||void 0===arguments[0]?24:arguments[0],t="abcdef0123456789",r="",n=0,i=t.length;e>n;n+=1){var o=Math.floor(Math.random()*i);r+=t.substring(o,o+1)}return""+this.objectIdPrefix+r}},{key:"get",value:function(e){return this.attributes[e]}},{key:"has",value:function(e){return this.get(e)?!0:!1}},{key:"set",value:function(e,t){var r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];if(!e)return this;var n=void 0;if("object"==typeof e?(n=e,r=t):(n={})[e]=t,!this._validate(n,r))return!1;var i=r.unset,o=[],a=this._changing;this._changing=!0,a||(this._previousAttributes=(0,v["default"])(this.attributes,!0),this.changed={});var u=this.attributes,s=this.changed,l=this._previousAttributes;for(var c in n)n.hasOwnProperty(c)&&(t=n[c],(0,A["default"])(u[c],t)||o.push(c),(0,A["default"])(l[c],t)?delete s[c]:s[c]=t,i?delete u[c]:u[c]=t);return this._changing=!1,this}},{key:"unset",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return this.set(e,void 0,(0,g["default"])({},t,{unset:!0}))}},{key:"hasChanged",value:function(e){return e?(0,m["default"])(this.changed,e):!(0,k["default"])(this.changed)}},{key:"changedAttributes",value:function(e){if(!e)return this.hasChanged()?(0,v["default"])(this.changed,!0):!1;var t=this._changing?this._previousAttributes:this.attributes,r={};for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];if((0,A["default"])(t[n],i))continue;r[n]=i}return(0,w["default"])(r)?r:!1}},{key:"previousAttribute",value:function(e){return e&&this._previousAttributes?this._previousAttributes[e]:null}},{key:"parse",value:function(e){return e}},{key:"isNew",value:function(){var e=this.id;return!this.has(x)||0===e.indexOf(this.objectIdPrefix)}},{key:"isValid",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return this._validate({},(0,f["default"])({validate:!0},e))}},{key:"toJSON",value:function(){return(0,v["default"])(this.attributes,!0)}},{key:"_validate",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(!t.validate||!this.validate)return!0;e=(0,g["default"])({},this.attributes,e);var r=this.validationError=this.validate(e,t)||null;return r?!1:!0}},{key:"id",get:function(){return this.get(x)}},{key:"acl",get:function(){return new u["default"](this.get(F))}},{key:"metadata",get:function(){return new l["default"](this.get(C))}},{key:"defaults",get:function(){var e={};return e[x]=this.generateObjectId(),e[F]={},e[C]={},e}},{key:"objectIdPrefix",get:function(){return"local_"}}]),e}();r["default"]=O,t.exports=r["default"]},{"../acl":240,"../metadata":260,"babel-runtime/helpers/class-call-check":9,"babel-runtime/helpers/create-class":10,"babel-runtime/helpers/interop-require-default":13,"lodash/collection/size":152,"lodash/lang/clone":208,"lodash/lang/isEmpty":211,"lodash/lang/isEqual":212,"lodash/object/assign":222,"lodash/object/defaults":223,"lodash/object/has":224,"lodash/object/result":229}],263:[function(e,t,r){var n=e("babel-runtime/helpers/get")["default"],i=e("babel-runtime/helpers/inherits")["default"],o=e("babel-runtime/helpers/create-class")["default"],a=e("babel-runtime/helpers/class-call-check")["default"],u=e("babel-runtime/core-js/symbol")["default"],s=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(r,"__esModule",{value:!0});var l=e("../errors"),c=e("./model"),f=s(c),h=e("../datastores/users"),d=s(h),p=e("../enums/socialAdapter"),v=s(p),y=e("../social/facebook"),g=s(y),b=e("../social/google"),m=s(b),_=e("../social/linkedIn"),w=s(_),j=e("../social/twitter"),A=s(j),E=e("../../utils/user"),k=e("lodash/lang/isFunction"),x=s(k),F=e("lodash/lang/isString"),C=s(F),O=e("bluebird"),S=s(O),P=u(),D=function(e){function t(){a(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return i(t,e),o(t,[{key:"isActive",value:function(){var e=this;return t.getActive().then(function(t){return t?e.id===t.id:!1})}},{key:"logout",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],r=this.isActive().then(function(t){if(!t)return null;var r=new d["default"];return r.logout(e)}).then(function(){return t.setActive(null)});return r}},{key:"authtoken",get:function(){return this.metadata.authtoken}}],[{key:"getActive",value:function(){var e=t[P];return e?(0,E.getActiveUser)().then(function(e){return e?(e=new t(e),t[P]=e,e):null}):S["default"].resolve(e)}},{key:"setActive",value:function(e){return!e||e instanceof t||(e=new t(result(e,"toJSON",e))),(0,E.setActiveUser)(e?e.toJSON():e).then(function(){return e?(t[P]=e,e):null})}},{key:"login",value:function(e,r){var n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],i=t.getActive().then(function(t){if(t)throw new l.ActiveUserError("A user is already logged in.");var i=new d["default"];return i.login(e,r,n)}).then(function(e){var r=new t(e);return t.setActive(r).then(function(){return r})});return i}},{key:"loginWithProvider",value:function(e,r,n){if(void 0===r&&(r={}),(0,C["default"])(e)||(e=String(e)),!r.access_token||!r.expires_in)return S["default"].reject(new l.KinveyError("token argument must contain both an access_token and expires_in property.",r));var i={_socialIdentity:{}};return i._socialIdentity[e]=r,t.login(i,n)}},{key:"connect",value:function(e,r){void 0===e&&(e=v["default"].Facebook);var n=e,i=void 0;if((0,C["default"])(e))switch(e){case v["default"].Google:e=m["default"];break;case v["default"].LinkedIn:e=w["default"];break;case v["default"].Twitter:e=A["default"];break;default:e=g["default"]}return(0,x["default"])(e)&&(n=new e),(0,x["default"])(n.connect)?i=n.connect(r).then(function(e){return t.loginWithProvider(n.name,e,r)}):S["default"].reject(new l.KinveyError("Unable to connect with the social adapter.","Please provide a connect function for the adapter."))}}]),t}(f["default"]);r["default"]=D,t.exports=r["default"]},{"../../utils/user":284,"../datastores/users":250,"../enums/socialAdapter":256,"../errors":259,"../social/facebook":268,"../social/google":269,"../social/linkedIn":270,"../social/twitter":272,"./model":262,"babel-runtime/core-js/symbol":8,"babel-runtime/helpers/class-call-check":9,"babel-runtime/helpers/create-class":10,"babel-runtime/helpers/get":11,"babel-runtime/helpers/inherits":12,"babel-runtime/helpers/interop-require-default":13,bluebird:86,"lodash/lang/isFunction":213,"lodash/lang/isString":219}],264:[function(e,t,r){var n=e("babel-runtime/helpers/create-class")["default"],i=e("babel-runtime/helpers/class-call-check")["default"],o=e("babel-runtime/core-js/symbol")["default"],a=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(r,"__esModule",{value:!0});var u=e("../utils/nested"),s=a(u),l=e("sift"),c=a(l),f=e("lodash/lang/clone"),h=a(f),d=e("lodash/lang/isArray"),p=a(d),v=e("lodash/lang/isNumber"),y=a(v),g=e("lodash/lang/isString"),b=a(g),m=e("lodash/lang/isObject"),_=a(m),w=e("lodash/lang/isRegExp"),j=a(w),A=o(),E=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];i(this,e),this._fields=t.fields,this._filter=t.filter||{},this._sort=t.sort||{},this._limit=t.limit||null,this._skip=t.skip||0,this.parent=null}return n(e,[{key:"equalTo",value:function(e,t){return this._filter[e]=t,this}},{key:"contains",value:function(e,t){return(0,p["default"])(t)||(t=[t]),this.addFilter(e,"$in",t)}},{key:"containsAll",value:function(e,t){return(0,p["default"])(t)||(t=[t]),this.addFilter(e,"$all",t)}},{key:"greaterThan",value:function(e,t){if(!(0,y["default"])(t)||!(0,b["default"])(t))throw new Error("You must supply a number or string.");return this.addFilter(e,"$gt",t)}},{key:"greaterThanOrEqualTo",value:function(e,t){if(!(0,y["default"])(t)||!(0,b["default"])(t))throw new Error("You must supply a number or string.");return this.addFilter(e,"$gte",t)}},{key:"lessThan",value:function(e,t){if(!(0,y["default"])(t)||!(0,b["default"])(t))throw new Error("You must supply a number or string.");return this.addFilter(e,"$lt",t)}},{key:"lessThanOrEqualTo",value:function(e,t){if(!(0,y["default"])(t)||!(0,b["default"])(t))throw new Error("You must supply a number or string.");return this.addFilter(e,"$lte",t)}},{key:"notEqualTo",value:function(e,t){return this.addFilter(e,"$ne",t)}},{key:"notContainedIn",value:function(e,t){return(0,p["default"])(t)||(t=[t]),this.addFilter(e,"$nin",t)}},{key:"and",value:function(){return this.join("$and",Array.prototype.slice.call(arguments))}},{key:"nor",value:function(){return this.parent&&this.parent.filter.$and?this.parent.nor.apply(this.parent,arguments):this.join("$nor",Array.prototype.slice.call(arguments))}},{key:"or",value:function(){return this.parent?this.parent.or.apply(this.parent,arguments):this.join("$or",Array.prototype.slice.call(arguments))}},{key:"exists",value:function(e,t){return t="undefined"==typeof t?!0:t||!1,this.addFilter(e,"$exists",t)}},{key:"mod",value:function(e,t){var r=arguments.length<=2||void 0===arguments[2]?0:arguments[2];if((0,b["default"])(t)&&(t=parseFloat(t)),(0,b["default"])(r)&&(r=parseFloat(r)),!(0,y["default"])(t))throw new Error("Divisor must be a number.");if(!(0,y["default"])(r))throw new Error("Remainder must be a number.");return this.addFilter(e,"$mod",[t,r])}},{key:"matches",value:function(e,t){var r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];if((0,j["default"])(t)||(t=new RegExp(t)),(t.ignoreCase||r.ignoreCase)&&r.ignoreCase!==!1)throw new Error("ignoreCase glag is not supported.");if(0!==t.source.indexOf("^"))throw new Error("regExp must have `^` at the beginning of the expression to make it an anchored expression.");var n=[];(t.multiline||r.multiline)&&r.multiline!==!1&&n.push("m"),r.extended&&n.push("x"),r.dotMatchesAll&&n.push("s");var i=this.addFilter(e,"$regex",t.source);return n.length&&this.addFilter(e,"$options",n.join("")),i}},{key:"near",value:function(e,t,r){if(!(0,p["default"])(t)||!t[0]||!t[1])throw new Error("coord argument must be of type: [number, number]");t[0]=parseFloat(t[0]),t[1]=parseFloat(t[1]);var n=this.addFilter(e,"$nearSphere",[t[0],t[1]]);return r&&this.addFilter(e,"$maxDistance",r),n}},{key:"withinBox",value:function(e,t,r){if(!(0,p["default"])(t)||!t[0]||!t[1])throw new Error("bottomLeftCoord argument must be of type: [number, number]");if(!(0,p["default"])(r)||!r[0]||!r[1])throw new Error("upperRightCoord argument must be of type: [number, number]");t[0]=parseFloat(t[0]),t[1]=parseFloat(t[1]),r[0]=parseFloat(r[0]),r[1]=parseFloat(r[1]);var n=[[t[0],t[1]],[r[0],r[1]]];return this.addFilter(e,"$within",{$box:n})}},{key:"withinPolygon",value:function(e,t){if(!(0,p["default"])(t)||t.length>3)throw new Error("coords argument must be of type: [[number, number]]");return t=t.map(function(e){if(!e[0]||!e[1])throw new Error("coords argument must be of type: [number, number]");return[parseFloat(e[0]),parseFloat(e[1])]}),this.addFilter(e,"$within",{$polygon:t})}},{key:"size",value:function(e,t){if((0,b["default"])(t)&&(t=parseFloat(t)),!(0,y["default"])(t))throw new Error("size argument must be of type: number");return this.addFilter(e,"$size",t)}},{key:"fields",value:function(){var e=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];if(!(0,p["default"])(e))throw new Error("fields argument must be of type: Array.");return this.parent?this.parent.fields(e):this._fields=e,this}},{key:"limit",value:function(e){if((0,b["default"])(e)&&(e=parseFloat(e)),e&&!(0,y["default"])(e))throw new Error("limit argument must be of type: number.");return this._parent?this.parent.limit(e):this._limit=e,this}},{key:"skip",value:function(e){if((0,b["default"])(e)&&(e=parseFloat(e)),!(0,y["default"])(e))throw new Error("skip argument must be of type: number.");return this.parent?this.parent.skip(e):this._skip=e,this}},{key:"ascending",value:function(e){return this.parent?this.parent.ascending(e):this._sort[e]=1,this}},{key:"descending",value:function(e){return this.parent?this.parent.descending(e):this._sort[e]=-1,this}},{key:"sort",value:function(e){if(e&&!(0,_["default"])(e))throw new Error("sort argument must be of type: Object.");return this.parent?this.parent.sort(e):this._sort=e||{},this}},{key:"addFilter",value:function(e,t,r){return(0,_["default"])(this._filter[e])||(this._filter[e]={}),this._filter[e][t]=r,this}},{key:"join",value:function(t,r){var n=this,i={};r=r.map(function(t){if(!(t instanceof e)){if(!(0,_["default"])(t))throw new Error("query argument must be of type: Kinvey.Query[] or Object[].");t=new e(t)}return t.toJSON().filter}),0===r.length&&(n=new e,r=[n.toJSON().filter],n.parent=this);for(var o in this._filter)this._filter.hasOwnProperty(o)&&(i[o]=this._filter[o],delete this._filter[o]);return this._filter[t]=[i].concat(r),n}},{key:"process",value:function(e){var t=this;if(e){if(!(0,p["default"])(e))throw new Error("response argument must be of type: Array.");var r=this.toJSON();return e=(0,c["default"])(r.filter,e),this._fields&&(e=e.map(function(e){for(var r in e)e.hasOwnProperty(r)&&-1===t._fields.indexOf(r)&&delete e[r];return e})),e=e.sort(function(e,r){for(var n in t._sort)if(t._sort.hasOwnProperty(n)){var i=(0,s["default"])(e,n),o=(0,s["default"])(r,n);if(i&&!o)return-1;if(o&&!i)return 1;if(i!==o){var a=t._sort[n];return(o>i?-1:1)*a}}return 0}),this._limit?e.slice(this._skip,this._skip+this._limit):e.slice(this._skip)}return e}},{key:"toJSON",value:function(){if(this.parent)return this.parent.toJSON();var e={fields:this._fields,filter:this._filter,sort:this._sort,skip:this._skip,limit:this._limit};return(0,h["default"])(e,!0)}}]),e}(),k=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];i(this,e),this[A]=new E(t)}return n(e,[{key:"equalTo",value:function(e,t){return this[A].equalTo(e,t),this}},{key:"contains",value:function(e,t){return this[A].contains(e,t),this}},{key:"containsAll",value:function(e,t){return this[A].containsAll(e,t),this}},{key:"greaterThan",value:function(e,t){return this[A].greaterThan(e,t),this}},{key:"greaterThanOrEqualTo",value:function(e,t){return this[A].greaterThanOrEqualToe(e,t),this}},{key:"lessThan",value:function(e,t){return this[A].lessThan(e,t),this}},{key:"lessThanOrEqualTo",value:function(e,t){return this[A].lessThanOrEqualTo(e,t),this}},{key:"notEqualTo",value:function(e,t){return this[A].notEqualTo(e,t),this}},{key:"notContainedIn",value:function(e,t){return this[A].notContainedIn(e,t),this}},{key:"and",value:function(){return this[A].and.apply(this[A],arguments),this}},{key:"nor",value:function(){return this[A].nor.apply(this[A],arguments),this}},{key:"or",value:function(){return this[A].or.apply(this[A],arguments),this}},{key:"exists",value:function(e,t){return this[A].exists(e,t),this}},{key:"mod",value:function(e,t){var r=arguments.length<=2||void 0===arguments[2]?0:arguments[2];return this[A].mod(e,t,r),this}},{key:"matches",value:function(e,t){var r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return this[A].matches(e,t,r),this}},{key:"near",value:function(e,t,r){return this[A].near(e,t,r),this}},{key:"withinBox",value:function(e,t,r){return this[A].withinBox(e,t,r),this}},{key:"withinPolygon",value:function(e,t){return this[A].withinPolygon(e,t),this}},{key:"size",value:function(e,t){return this[A].size(e,t),this}},{key:"fields",value:function(){var e=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];return this[A].fields(e),this}},{key:"limit",value:function(e){return this[A].limit(e),this}},{key:"skip",value:function(e){return this[A].skip(e),this}},{key:"ascending",value:function(e){return this[A].ascending(e),this}},{key:"descending",value:function(e){return this[A].descending(e),this}},{key:"sort",value:function(e){return this[A].sort(e),this}},{key:"process",value:function(e){return this[A].process(e)}},{key:"toJSON",value:function(){return this[A].toJSON()}}]),e}();r["default"]=k,t.exports=r["default"]},{"../utils/nested":281,"babel-runtime/core-js/symbol":8,"babel-runtime/helpers/class-call-check":9,"babel-runtime/helpers/create-class":10,"babel-runtime/helpers/interop-require-default":13,"lodash/lang/clone":208,"lodash/lang/isArray":210,"lodash/lang/isNumber":215,"lodash/lang/isObject":216,"lodash/lang/isRegExp":218,"lodash/lang/isString":219,sift:235}],265:[function(e,t,r){(function(t,n){var i=e("babel-runtime/helpers/create-class")["default"],o=e("babel-runtime/helpers/class-call-check")["default"],a=e("babel-runtime/helpers/get")["default"],u=e("babel-runtime/helpers/inherits")["default"],s=e("babel-runtime/core-js/object/keys")["default"],l=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(r,"__esModule",{value:!0});var c=e("../utils/isDefined"),f=l(c),h=e("lodash/lang/isFunction"),d=l(h),p=e("lodash/lang/isString"),v=l(p),y=e("./enums/httpMethod"),g=l(y),b=e("../rack/rack"),m=l(b),_=e("./enums/responseType"),w=l(_),j=e("./query"),A=l(j),E=e("url"),k=l(E),x=e("./client"),F=l(x),C=e("./auth"),O=l(C),S=e("./enums/dataPolicy"),P=l(S),D=e("./errors"),B=e("./requestProperties"),T=l(B),I=e("bluebird"),R=l(I),$=e("lodash/object/assign"),q=l($),L=e("lodash/object/merge"),N=l(L),M=e("lodash/object/result"),U=l(M),K=e("lodash/lang/clone"),H=l(K),z=e("lodash/collection/indexBy"),V=l(z),J=e("lodash/collection/reduce"),G=l(J),W=e("../utils/string"),Y=2e3,Q=200,X=1e4,Z=function(){function e(t,r,n,i){void 0===t&&(t=g["default"].GET),void 0===r&&(r="");var a=arguments.length<=4||void 0===arguments[4]?{}:arguments[4];o(this,e),a=(0,q["default"])({auth:O["default"].none,client:F["default"].sharedInstance(),dataPolicy:P["default"].CloudOnly,responseType:w["default"].Text,timeout:X},a);var u=a.client;u instanceof F["default"]||(u=new F["default"]((0,U["default"])(u,"toJSON",u))),!n||n instanceof A["default"]||(n=new A["default"]((0,U["default"])(n,"toJSON",n))),this.method=t,this.headers={},this.requestProperties=a.requestProperties,this.protocol=a.client.apiProtocol,this.host=a.client.apiHost,this.path=r,this.query=n,this.flags=a.flags,this.data=i,this.responseType=a.responseType,this.client=a.client,this.auth=a.auth,this.dataPolicy=a.dataPolicy,this.timeout=a.timeout,this.executing=!1;var s={};s.Accept="application/json",s["X-Kinvey-Api-Version"]="3",s["X-Kinvey-Device-Information"]={},a.contentType&&(s["X-Kinvey-Content-Type"]=a.contentType),a.skipBL===!0&&(s["X-Kinvey-Skip-Business-Logic"]=!0),a.trace===!0&&(s["X-Kinvey-Include-Headers-In-Response"]="X-Kinvey-Request-Id",s["X-Kinvey-ResponseWrapper"]=!0),this.addHeaders(s)}return i(e,[{key:"getHeader",value:function(e){(0,v["default"])(e)||(e=String(e));for(var t=s(this.headers),r=0,n=t.length;n>r;r++){var i=t[r];if(i.toLowerCase()===e.toLowerCase())return this.headers[i]}return void 0}},{key:"setHeader",value:function(e,t){(0,v["default"])(e)||(e=String(e)),(0,v["default"])(t)||(t=String(t));var r=this.headers;r[e.toLowerCase()]=t,this.headers=r}},{key:"addHeaders",value:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],r=s(t);r.forEach(function(r){var n=t[r];e.setHeader(r,n)})}},{key:"removeHeader",value:function(e){delete this.headers[e.toLowerCase()]}},{key:"execute",value:function(){var t=this;if(this.executing)return R["default"].reject(new D.KinveyError("The request is already executing."));var r=void 0;return this.executing=!0,this.dataPolicy===P["default"].LocalOnly?r=this.executeLocal():this.dataPolicy===P["default"].LocalFirst?r=this.executeLocal().then(function(r){if(r&&r.isSuccess()){if(t.method!==g["default"].GET){var n=new e(t.method,t.path,t.query,r.data,{auth:t.auth,client:t.client,dataPolicy:P["default"].CloudOnly});return n.execute().then(function(){return r})}}else if(t.method===g["default"].GET){var n=new e(t.method,t.path,t.query,r.data,{auth:t.auth,client:t.client,dataPolicy:P["default"].CloudFirst});return n.execute()}return r}):this.dataPolicy===P["default"].CloudOnly?r=this.executeCloud():this.dataPolicy===P["default"].CloudFirst&&(r=this.executeCloud().then(function(r){if(r&&r.isSuccess()){var n=new e(t.method,t.path,t.query,r.data,{auth:t.auth,client:t.client,dataPolicy:P["default"].LocalOnly});return t.method===g["default"].GET&&(n.method=g["default"].PUT),n.execute().then(function(){return r})}if(t.method===g["default"].GET){var n=new e(t.method,t.path,t.query,r.data,{auth:t.auth,client:t.client,dataPolicy:P["default"].LocalOnly});return n.execute()}return r})),r.then(function(e){return t.response=e,e})["finally"](function(){t.executing=!1})}},{key:"executeLocal",value:function(){var e=m["default"].cacheRack;return e.execute(this)}},{key:"executeCloud",value:function(){var e=this,t=this.auth,r=m["default"].networkRack,i=R["default"].resolve();return i.then(function(){return(0,f["default"])(t)?(i=(0,d["default"])(t)?t(e.client):R["default"].resolve(t),i.then(function(t){if(null!==t){var r=t.credentials;(0,f["default"])(t.username)&&(r=new n(t.username+":"+t.password).toString("base64")),e.setHeader("Authorization",t.scheme+" "+r)}})):void 0}).then(function(){return r.execute(e)})}},{key:"abort",value:function(){throw new D.KinveyError("Method not supported")}},{key:"toJSON",value:function(){var e={method:this.method,headers:this.headers,requestProperties:(0,U["default"])(this.requestProperties,"toJSON",null),url:this.url,path:this.path,query:(0,U["default"])(this.query,"toJSON",null),flags:this.flags,data:this.data,responseType:this.responseType,dataPolicy:this.dataPolicy,client:(0,U["default"])(this.client,"toJSON",null),timeout:this.timeout};return(0,H["default"])(e,!0)}},{key:"method",get:function(){return this._method},set:function(e){switch((0,v["default"])(e)||(e=String(e)),e=e.toUpperCase()){case g["default"].GET:case g["default"].POST:case g["default"].PATCH:case g["default"].PUT:case g["default"].DELETE:this._method=e;break;default:throw new D.KinveyError("Invalid Http Method. GET, POST, PATCH, PUT, and DELETE are allowed.")}}},{key:"requestProperties",get:function(){return this._requestProperties},set:function(e){e instanceof T["default"]||(e=new T["default"]((0,U["default"])(e,"toJSON",e)));var t=e.appVersion;t?this.setHeader("X-Kinvey-Client-App-Version",t):this.removeHeader("X-Kinvey-Client-App-Version");var r=(0,U["default"])(e,"toJSON",{});delete r.appVersion;var n=JSON.stringify(e.toJSON()),i=(0,W.byteCount)(n);if(i>=Y)throw new D.KinveyError("The custom request properties are "+i+". It must be less then "+Y+" bytes.","Please remove some custom request properties.");this.setHeader("X-Kinvey-Custom-Request-Properties",n),this._requestProperties=e}},{key:"url",get:function(){return k["default"].format({protocol:this.protocol,host:this.host,pathname:this.path,query:(0,N["default"])({},this.flags,(0,U["default"])(this.query,"toJSON",{})),hash:this.hash})}},{key:"body",get:function(){return this._data},set:function(e){if(e){var t=this.getHeader("Content-Type");t||this.setHeader("Content-Type","application/json; charset=utf-8")}else this.removeHeader("Content-Type");this._data=e}},{key:"data",get:function(){return this._data},set:function(e){if(e){var t=this.getHeader("Content-Type");t||this.setHeader("Content-Type","application/json; charset=utf-8")}else this.removeHeader("Content-Type");this._data=e}},{key:"responseType",get:function(){return this._responseType},set:function(e){e=e||w["default"].DOMString;var r=void 0;switch(e){case w["default"].Blob:try{r=new t.Blob&&"blob"}catch(n){r="arraybuffer"}break;case w["default"].Document:r="document";break;case w["default"].JSON:r="json";break;default:r=""}this._responseType=r}}]),e}();r.Request=Z;var ee=function(e){function t(){o(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return u(t,e),i(t,[{key:"execute",value:function(){var e=this;if(this.executing)return R["default"].reject(new D.KinveyError("The request is already executing."));if(this.dataPolicy===P["default"].CloudFirst&&this.method===g["default"].GET){var r=function(){var r=e.query;return e.query=new A["default"],e.query.fields(["_id","_kmd"]),e.executing=!0,{v:e.executeLocal().then(function(n){if(n&&n.isSuccess()){var i=function(){var i=(0,V["default"])(n.data,"_id");return{v:e.executeCloud().then(function(n){if(n&&n.isSuccess()){var o=(0,V["default"])(n.data,"_id");for(var u in o)if(o.hasOwnProperty(u)){var l=o[u],c=i[u];if(l&&!c)continue;if(l&&c&&l._kmd&&c._kmd&&l._kmd.lmt>c._kmd.lmt)continue;delete o[u]}for(var f=s(o),h=[],d=0;d<f.length;){var p=new A["default"](r.toJSON());p.contains("_id",f.slice(d,f.length>Q+d?Q:f.length));var v=new Z(e.method,e.path,p,null,{auth:e.auth,client:e.client,dataPolicy:e.dataPolicy});h.push(v.execute()),d+=Q}return R["default"].all(h).then(function(e){var t=new Response(null,null,[]);return(0,G["default"])(e,function(e,t){return e.addHeaders(t.headers),e.data.concat(t.data),e},t)})["finally"](function(){e.executing=!1})}return a(Object.getPrototypeOf(t.prototype),"execute",e).call(e)})}}();if("object"==typeof i)return i.v}return a(Object.getPrototypeOf(t.prototype),"execute",e).call(e)})}}();if("object"==typeof r)return r.v}return a(Object.getPrototypeOf(t.prototype),"execute",this).call(this)}}]),t}(Z);r.DeltaSetRequest=ee}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer)},{"../rack/rack":279,"../utils/isDefined":280,"../utils/string":283,"./auth":242,"./client":248,"./enums/dataPolicy":252,"./enums/httpMethod":253,"./enums/responseType":255,"./errors":259,"./query":264,"./requestProperties":266,"babel-runtime/core-js/object/keys":5,"babel-runtime/helpers/class-call-check":9,"babel-runtime/helpers/create-class":10,"babel-runtime/helpers/get":11,"babel-runtime/helpers/inherits":12,"babel-runtime/helpers/interop-require-default":13,bluebird:86,buffer:87,"lodash/collection/indexBy":150,"lodash/collection/reduce":151,"lodash/lang/clone":208,"lodash/lang/isFunction":213,"lodash/lang/isString":219,"lodash/object/assign":222,"lodash/object/merge":227,"lodash/object/result":229,url:97}],266:[function(e,t,r){var n=e("babel-runtime/helpers/create-class")["default"],i=e("babel-runtime/helpers/class-call-check")["default"],o=e("babel-runtime/core-js/symbol")["default"],a=e("babel-runtime/core-js/object/keys")["default"],u=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(r,"__esModule",{value:!0});var s=e("lodash/lang/clone"),l=u(s),c=o(),f="appVersion",h=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];i(this,e),this.properties=t}return n(e,[{key:"addProperties",value:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];a(t).forEach(function(r){var n=t[r];n?e.properties[r]=n:delete e.properties[r]})}},{key:"clear",value:function(){this.properties={};
}},{key:"clearProperty",value:function(e){var t=this.properties;e&&t.hasOwnProperty(e)&&delete t[e]}},{key:"toJSON",value:function(){return(0,l["default"])(this.properties,!0)}},{key:"properties",get:function(){return this._properties},set:function(e){this._properties=(0,l["default"])(e,!0)}}]),e}(),d=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];i(this,e),this[c]=new h(t)}return n(e,[{key:"getProperty",value:function(e){var t=this.toJSON();return e&&t.hasOwnProperty(e)?t[e]:void 0}},{key:"setProperty",value:function(e,t){var r={};r[e]=t,this.addProperties(r)}},{key:"addProperties",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=this[c];t.addProperties(e)}},{key:"clear",value:function(){var e=this[c];e.clear()}},{key:"clearProperty",value:function(e){var t=this[c];t.clearProperty(e)}},{key:"toJSON",value:function(){var e=this[c];return e.toJSON()}},{key:"properties",set:function(e){var t=this[c];t.properties=e}},{key:"appVersion",get:function(){return this.getProperty(f)},set:function(e){e=Array.prototype.slice.call(arguments,1);var t=e[0],r=e[1],n=e[2],i="";t&&(i=(t+"").trim()),r&&(i=("."+r).trim()),n&&(i=("."+n).trim()),this.setProperty(f,i)}}]),e}();r["default"]=d,t.exports=r["default"]},{"babel-runtime/core-js/object/keys":5,"babel-runtime/core-js/symbol":8,"babel-runtime/helpers/class-call-check":9,"babel-runtime/helpers/create-class":10,"babel-runtime/helpers/interop-require-default":13,"lodash/lang/clone":208}],267:[function(e,t,r){var n=e("babel-runtime/helpers/create-class")["default"],i=e("babel-runtime/helpers/class-call-check")["default"],o=e("babel-runtime/core-js/object/keys")["default"],a=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(r,"__esModule",{value:!0});var u=e("lodash/lang/isString"),s=a(u),l=e("./enums/statusCode"),c=a(l),f=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?c["default"].OK:arguments[0],r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];i(this,e),this.statusCode=t,this.addHeaders(r),this.data=n}return n(e,[{key:"getHeader",value:function(e){(0,s["default"])(e)||(e=String(e));for(var t=o(this.headers),r=0,n=t.length;n>r;r++){var i=t[r];if(i.toLowerCase()===e.toLowerCase())return this.headers[i]}return void 0}},{key:"setHeader",value:function(e,t){(0,s["default"])(e)||(e=String(e)),(0,s["default"])(t)||(t=String(t));var r=this.headers;r[e.toLowerCase()]=t,this.headers=r}},{key:"addHeaders",value:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],r=o(t);r.forEach(function(r){var n=t[r];e.setHeader(r,n)})}},{key:"isSuccess",value:function(){return this.statusCode>=200&&this.statusCode<300}},{key:"toJSON",value:function(){var e={statusCode:this.statusCode,headers:this.headers,data:this.data};return e}}]),e}();r["default"]=f,t.exports=r["default"]},{"./enums/statusCode":257,"babel-runtime/core-js/object/keys":5,"babel-runtime/helpers/class-call-check":9,"babel-runtime/helpers/create-class":10,"babel-runtime/helpers/interop-require-default":13,"lodash/lang/isString":219}],268:[function(e,t,r){(function(n){var i=e("babel-runtime/helpers/get")["default"],o=e("babel-runtime/helpers/inherits")["default"],a=e("babel-runtime/helpers/create-class")["default"],u=e("babel-runtime/helpers/class-call-check")["default"],s=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(r,"__esModule",{value:!0});var l=e("./social"),c=s(l),f=e("../errors"),h=e("bluebird"),d=s(h),p=n.FB,v=function(e){function t(){u(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return o(t,e),a(t,[{key:"connect",value:function(){var e=new d["default"](function(e,t){return"undefined"==typeof p?t(new f.KinveyError("Facebook SDK not found.","Please load the Facebook SDK by following the guide at https://developers.facebook.com/docs/javascript/quickstart/v2.4.")):void p.getLoginStatus(function(r){return"connected"===r.status?e(r.authResponse):void p.login(function(r){if("connected"===r.status){var n=r.authResponse,i={access_token:n.accessToken,expires_in:n.expiresIn};return e(i)}return"not_authorized"===r.status?t(new f.KinveyError("The user did not authorize the application to connect to Facebook.")):void t("Unable to connect to Facebook.")})})});return e}},{key:"name",get:function(){return"facebook"}}]),t}(c["default"]);r["default"]=v,t.exports=r["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":259,"./social":271,"babel-runtime/helpers/class-call-check":9,"babel-runtime/helpers/create-class":10,"babel-runtime/helpers/get":11,"babel-runtime/helpers/inherits":12,"babel-runtime/helpers/interop-require-default":13,bluebird:86}],269:[function(e,t,r){},{}],270:[function(e,t,r){},{}],271:[function(e,t,r){(function(n){var i=e("babel-runtime/helpers/create-class")["default"],o=e("babel-runtime/helpers/class-call-check")["default"],a=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(r,"__esModule",{value:!0});var u=e("../errors"),s=e("../client"),l=a(s),c=e("../request"),f=e("../enums/httpMethod"),h=a(f),d=e("../auth"),p=a(d),v=e("url"),y=a(v),g=e("bluebird"),b=a(g),m=e("lodash/object/assign"),_=a(m),w=e("../../utils/platform"),j="user",A=function(){function e(){o(this,e)}return i(e,[{key:"requestToken",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];e=(0,_["default"])(e,{state:Math.random().toString(36).substr(2),flags:{provider:this.name,step:"requestToken"}});var t=e.redirect||n.location.toString(),r=l["default"].sharedInstance(),i="/"+j+"/"+r.appId,o={redirect:t,state:e.state},a=new c.Request(h["default"].POST,i,null,o,e);a.auth=p["default"].app;var s=a.execute().then(function(r){var i=r.url;return new b["default"](function(r,o){var a=100,s=0,l=void 0,c=void 0,f=void 0,h=void 0,d=function(e){var t=y["default"].parse(e.url).query;r(t.code)},p=function(e){var r=!1;try{r=0===e.url.indexOf(t)}catch(n){}r&&d(e.url)},v=function(){f.close()},g=function m(){(0,w.isPhoneGap)()?(f.removeEventListener("loadstart",p),f.removeEventListener("exit",m)):(0,w.isTitanium)()&&(l.removeEventListener("load",p),l.removeEventListener("error",p),f.removeEventListener("close",m),"iPhone OS"===Titanium.Platform.name?c.removeEventListener("click",v):"Android"===Titanium.Platform.name&&f.removeEventListener("androidback",m)),setTimeout(function(){f.close()},200),clearTimeout(h),f.closed=!0};if((0,w.isPhoneGap)())f=n.open(i,"_blank","location=yes"),f.addEventListener("loadstart",p),f.addEventListener("exit",closeHandler);else if((0,w.isTitanium)()){if(l=Titanium.UI.createWebView({width:"100%",height:"100%",url:i}),f=Titanium.UI.createWindow({backgroundColor:"white",barColor:"#000",title:"Kinvey - OAuth",modal:!0}),f.add(l),"iPhone OS"===Titanium.Platform.name){var b=Titanium.UI.createWindow({backgroundColor:"white",barColor:"#e3e3e3",title:"Kinvey - OAuth"});b.add(l),c=Titanium.UI.createButton({title:"Close",style:Titanium.UI.iPhone.SystemButtonStyle.DONE}),b.setLeftNavButton(c),c.addEventListener("click",v),f=Titanium.UI.iOS.createNavigationWindow({backgroundColor:"white",window:b,modal:!0})}else"Android"===Titanium.Platform.name&&f.addEventListener("androidback",g);l.addEventListener("load",p),l.addEventListener("error",p),f.addEventListener("close",g),f.open()}else f=n.open(i,"_blank","toolbar=no,location=no");return f?void(h=setInterval(function(){var r=!1;if(f.closed)return clearTimeout(h),o(new u.KinveyError("The popup was closed without authorizing the user."));if(e.timeout&&s>e.timeout)return g(),o(new u.KinveyError("The authorization request timed out."));if(f.location){try{r=0===f.location.href.indexOf(t)}catch(n){}if(r)return d({url:f.location})}s+=a},a)):(g(),o(new u.KinveyError("The popup was blocked.")))})});return s}},{key:"verifyToken",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];t=(0,_["default"])(t,{flags:{provider:this.name,step:"verifyToken"}});var r=l["default"].sharedInstance(),n="/"+j+"/"+r.appId,i=new c.Request(h["default"].POST,n,null,e,t);i.auth=p["default"].app;var o=i.execute();return o}}]),e}();r["default"]=A,t.exports=r["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/platform":282,"../auth":242,"../client":248,"../enums/httpMethod":253,"../errors":259,"../request":265,"babel-runtime/helpers/class-call-check":9,"babel-runtime/helpers/create-class":10,"babel-runtime/helpers/interop-require-default":13,bluebird:86,"lodash/object/assign":222,url:97}],272:[function(e,t,r){var n=e("babel-runtime/helpers/get")["default"],i=e("babel-runtime/helpers/inherits")["default"],o=e("babel-runtime/helpers/create-class")["default"],a=e("babel-runtime/helpers/class-call-check")["default"],u=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(r,"__esModule",{value:!0});var s=e("./social"),l=u(s),c=e("../errors"),f=function(e){function t(){a(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return i(t,e),o(t,[{key:"connect",value:function(e){var t=this;return this.requestToken(e).then(function(r){return t.verifyToken(r,e)})}},{key:"requestToken",value:function(e){return n(Object.getPrototypeOf(t.prototype),"requestToken",this).call(this,e).then(function(e){if(e.error||e.denied)throw new c.KinveyError("Error connecting with twitter.",e);return{oauth_token:e.oauth_token,oauth_token_secret:e.oauth_token_secret,oauth_verifier:e.oauth_verifier}})}},{key:"name",get:function(){return"twitter"}}]),t}(l["default"]);r["default"]=f,t.exports=r["default"]},{"../errors":259,"./social":271,"babel-runtime/helpers/class-call-check":9,"babel-runtime/helpers/create-class":10,"babel-runtime/helpers/get":11,"babel-runtime/helpers/inherits":12,"babel-runtime/helpers/interop-require-default":13}],273:[function(e,t,r){var n=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(r,"__esModule",{value:!0});var i=e("./core/client"),o=n(i),a={};a.Acl=e("./core/acl"),a.Aggregation=e("./core/aggregation"),a.Client=o["default"],a.Datastore=e("./core/datastores/datastore"),a.File=e("./core/models/file"),a.Group=e("./core/aggregation"),a.Metadata=e("./core/metadata"),a.Model=e("./core/models/model"),a.Query=e("./core/query"),a.User=e("./core/models/user"),a.DataPolicy=e("./core/enums/dataPolicy"),a.HttpMethod=e("./core/enums/httpMethod"),a.RackType=e("./core/enums/rackType"),a.ResponseType=e("./core/enums/responseType"),a.SocialAdapter=e("./core/enums/socialAdapter"),a.StatusCode=e("./core/enums/statusCode"),a.StoreAdapter=e("./core/enums/storeAdapter"),a.Error=e("./core/errors").KinveyError,a.ActiveUserError=e("./core/errors").ActiveUserError,a.NotFoundError=e("./core/errors").NotFoundError,a.Middleware=e("./rack/middleware/middleware"),a.Middleware.Cache=e("./rack/middleware/cache"),a.Middleware.Http=e("./rack/middleware/http"),a.Middleware.Parser=e("./rack/middleware/parser"),a.Middleware.Serializer=e("./rack/middleware/serializer"),a.Rack=e("./rack/rack"),a.init=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=o["default"].init(e);return t},r["default"]=a,t.exports=r["default"]},{"./core/acl":240,"./core/aggregation":241,"./core/client":248,"./core/datastores/datastore":249,"./core/enums/dataPolicy":252,"./core/enums/httpMethod":253,"./core/enums/rackType":254,"./core/enums/responseType":255,"./core/enums/socialAdapter":256,"./core/enums/statusCode":257,"./core/enums/storeAdapter":258,"./core/errors":259,"./core/metadata":260,"./core/models/file":261,"./core/models/model":262,"./core/models/user":263,"./core/query":264,"./rack/middleware/cache":274,"./rack/middleware/http":275,"./rack/middleware/middleware":276,"./rack/middleware/parser":277,"./rack/middleware/serializer":278,"./rack/rack":279,"babel-runtime/helpers/interop-require-default":13}],274:[function(e,t,r){var n=e("babel-runtime/helpers/get")["default"],i=e("babel-runtime/helpers/inherits")["default"],o=e("babel-runtime/helpers/create-class")["default"],a=e("babel-runtime/helpers/class-call-check")["default"],u=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(r,"__esModule",{value:!0});var s=e("./middleware"),l=u(s),c=e("../../core/cache/store"),f=u(c),h=e("../../core/enums/httpMethod"),d=u(h),p=e("../../core/enums/statusCode"),v=u(p),y=e("../../core/enums/storeAdapter"),g=u(y),b=function(e){function t(){a(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,"Kinvey Cache Middleware")}return i(t,e),o(t,[{key:"handle",value:function(e){return n(Object.getPrototypeOf(t.prototype),"handle",this).call(this,e).then(function(t){var r=e.method,n=e.query,i=t.id,o=new f["default"]([g["default"].IndexedDB,g["default"].WebSQL,g["default"].LocalStorage],{name:t.appId,collection:t.collection}),a=void 0;return r===d["default"].GET?a=i?o.get(i):o.find(n):r===d["default"].POST||r===d["default"].PUT?a=o.save(e.body):r===d["default"].DELETE&&(a=o.destroy(i)),a.then(function(t){var n=v["default"].OK;return r===d["default"].POST&&(n=v["default"].Created),e.response={statusCode:n,headers:{},data:t},e})["catch"](function(t){return e.response={statusCode:v["default"].ServerError,headers:{},data:t},e})})}}]),t}(l["default"]);r["default"]=b,t.exports=r["default"]},{"../../core/cache/store":247,"../../core/enums/httpMethod":253,"../../core/enums/statusCode":257,"../../core/enums/storeAdapter":258,"./middleware":276,"babel-runtime/helpers/class-call-check":9,"babel-runtime/helpers/create-class":10,"babel-runtime/helpers/get":11,"babel-runtime/helpers/inherits":12,"babel-runtime/helpers/interop-require-default":13}],275:[function(e,t,r){var n=e("babel-runtime/helpers/get")["default"],i=e("babel-runtime/helpers/inherits")["default"],o=e("babel-runtime/helpers/create-class")["default"],a=e("babel-runtime/helpers/class-call-check")["default"],u=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(r,"__esModule",{value:!0});var s=e("./middleware"),l=u(s),c=e("superagent"),f=u(c),h=e("../../core/enums/httpMethod"),d=u(h),p=e("../../core/errors"),v=u(p),y=e("bluebird"),g=u(y),b=function(e){function t(){a(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,"Kinvey Http Middleware")}return i(t,e),o(t,[{key:"handle",value:function(e){return new g["default"](function(t,r){var n=e.method,i=e.path,o=e.data,a=void 0;switch(n){case d["default"].GET:a=f["default"].get(i);break;case d["default"].POST:a=f["default"].post(i).send(o);break;case d["default"].PUT:a=f["default"].put(i).send(o);break;case d["default"].DELETE:a=f["default"].del(i);break;default:return rejct(new v["default"]("Invalid Http Method. GET, POST, PUT, and DELETE are allowed."))}a.set(e.headers),a.query(e.query),a.query(e.flags),a.timeout(e.timeout),a.end(function(n,i){return n?r(n):(console.log(i),e.response=i,void t(e))})})}}]),t}(l["default"]);r["default"]=b,t.exports=r["default"]},{"../../core/enums/httpMethod":253,"../../core/errors":259,"./middleware":276,"babel-runtime/helpers/class-call-check":9,"babel-runtime/helpers/create-class":10,"babel-runtime/helpers/get":11,"babel-runtime/helpers/inherits":12,"babel-runtime/helpers/interop-require-default":13,bluebird:86,superagent:236}],276:[function(e,t,r){var n=e("babel-runtime/helpers/get")["default"],i=e("babel-runtime/helpers/inherits")["default"],o=e("babel-runtime/helpers/create-class")["default"],a=e("babel-runtime/helpers/class-call-check")["default"],u=e("babel-runtime/core-js/symbol")["default"],s=e("babel-runtime/core-js/promise")["default"],l=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(r,"__esModule",{value:!0});var c=e("kinvey-rack"),f=l(c),h=e("url-pattern"),d=l(h),p=u(),v=function(e){function t(){var e=arguments.length<=0||void 0===arguments[0]?"Kinvey Middleware":arguments[0];a(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e)}return i(t,e),o(t,[{key:"protocol",get:function(){return this[p].protocol}}]),o(t,[{key:"handle",value:function(e){return new s(function(t,r){if(e){var n=new d["default"]("/:namespace/:appId/:collection(/)(:id)(/)"),i=n.match(e.path);return t(i)}r()})}}]),t}(f["default"].Middleware);r["default"]=v,t.exports=r["default"]},{"babel-runtime/core-js/promise":7,"babel-runtime/core-js/symbol":8,"babel-runtime/helpers/class-call-check":9,"babel-runtime/helpers/create-class":10,"babel-runtime/helpers/get":11,"babel-runtime/helpers/inherits":12,"babel-runtime/helpers/interop-require-default":13,"kinvey-rack":146,"url-pattern":239}],277:[function(e,t,r){var n=e("babel-runtime/helpers/get")["default"],i=e("babel-runtime/helpers/inherits")["default"],o=e("babel-runtime/helpers/create-class")["default"],a=e("babel-runtime/helpers/class-call-check")["default"],u=e("babel-runtime/core-js/promise")["default"],s=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(r,"__esModule",{value:!0});var l=e("./middleware"),c=s(l),f=function(e){function t(){var e=arguments.length<=0||void 0===arguments[0]?"Kinvey Parser Middleware":arguments[0];a(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e)}return i(t,e),o(t,[{key:"handle",value:function(e){var t=e.response;if(t&&t.data){var r=e.headers["content-type"]||e.headers["Content-Type"];if(0===r.indexOf("application/json")){try{t.data=JSON.parse(t.data)}catch(n){t.data=t.data}e.response=t}}return u.resolve(e)}}]),t}(c["default"]);r["default"]=f,t.exports=r["default"]},{"./middleware":276,"babel-runtime/core-js/promise":7,"babel-runtime/helpers/class-call-check":9,"babel-runtime/helpers/create-class":10,"babel-runtime/helpers/get":11,"babel-runtime/helpers/inherits":12,"babel-runtime/helpers/interop-require-default":13}],278:[function(e,t,r){var n=e("babel-runtime/helpers/get")["default"],i=e("babel-runtime/helpers/inherits")["default"],o=e("babel-runtime/helpers/create-class")["default"],a=e("babel-runtime/helpers/class-call-check")["default"],u=e("babel-runtime/core-js/promise")["default"],s=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(r,"__esModule",{value:!0});var l=e("./middleware"),c=s(l),f=function(e){function t(){a(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,"Kinvey Serializer Middleware")}return i(t,e),o(t,[{key:"handle",value:function(e){if(e&&e.body){var t=e.headers["content-type"]||e.headers["Content-Type"];0===t.indexOf("application/json")&&(e.body=JSON.stringify(e.body))}return u.resolve(e)}}]),t}(c["default"]);r["default"]=f,t.exports=r["default"]},{"./middleware":276,"babel-runtime/core-js/promise":7,"babel-runtime/helpers/class-call-check":9,"babel-runtime/helpers/create-class":10,"babel-runtime/helpers/get":11,"babel-runtime/helpers/inherits":12,"babel-runtime/helpers/interop-require-default":13}],279:[function(e,t,r){var n=e("babel-runtime/helpers/get")["default"],i=e("babel-runtime/helpers/inherits")["default"],o=e("babel-runtime/helpers/create-class")["default"],a=e("babel-runtime/helpers/class-call-check")["default"],u=e("babel-runtime/core-js/symbol")["default"],s=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(r,"__esModule",{value:!0});var l=e("lodash/lang/clone"),c=s(l),f=e("../core/response"),h=s(f),d=e("kinvey-rack"),p=s(d),v=e("./middleware/serializer"),y=s(v),g=e("./middleware/http"),b=s(g),m=e("./middleware/parser"),_=s(m),w=e("./middleware/cache"),j=s(w),A=e("bluebird"),E=s(A),k=u(),x=u(),F=function(e){function t(){a(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return i(t,e),o(t,[{key:"execute",value:function(e){var r=(0,c["default"])(result(e,"toJSON",e),!0),i=n(Object.getPrototypeOf(t.prototype),"execute",this).call(this,r).then(function(e){var t=e.response;return t?new h["default"](t.statusCode,t.headers,t.data):t});return E["default"].resolve(i)}}],[{key:"networkRack",get:function(){if(!t[k]){var e=new t("Kinvey Network Rack");e.use(new y["default"]),e.use(new b["default"]),e.use(new _["default"]),t[k]=e}return t[k]},set:function(e){t[k]=e}},{key:"cacheRack",get:function(){if(!t[x]){var e=new t("Kinvey Cache Rack");e.use(new j["default"]),t[x]=e}return t[x]},set:function(e){t[x]=e}}]),t}(p["default"]);r["default"]=F,t.exports=r["default"]},{"../core/response":267,"./middleware/cache":274,"./middleware/http":275,"./middleware/parser":277,"./middleware/serializer":278,"babel-runtime/core-js/symbol":8,"babel-runtime/helpers/class-call-check":9,"babel-runtime/helpers/create-class":10,"babel-runtime/helpers/get":11,"babel-runtime/helpers/inherits":12,"babel-runtime/helpers/interop-require-default":13,bluebird:86,"kinvey-rack":146,"lodash/lang/clone":208}],280:[function(e,t,r){function n(e){return void 0!==e&&null!==e}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=n,t.exports=r["default"]},{}],281:[function(e,t,r){function n(e,t,r){if(!t)return e="undefined"==typeof r?e:r;for(var n=e,i=t.split("."),o=i.shift();o&&n&&n.hasOwnProperty(o);){if(0===i.length)return n[o]="undefined"==typeof r?n[o]:r,n[o];n=n[o],o=i.shift()}return null}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=n,t.exports=r["default"]},{}],282:[function(e,t,r){(function(e){function t(){return"undefined"!=typeof e.cordova}function n(){return"undefined"!=typeof Titanium}Object.defineProperty(r,"__esModule",{value:!0}),r.isPhoneGap=t,r.isTitanium=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],283:[function(e,t,r){function n(e){var t=0,r=e.length;e=String(e||"");for(var n=0;r>n;n++){var i=encodeURI(e[n]).split("%").length;t+=1===i?1:i-1}return t}Object.defineProperty(r,"__esModule",{value:!0}),r.byteCount=n},{}],284:[function(e,t,r){function n(){var e=f["default"].sharedInstance(),t=new l["default"](u["default"].LocalStorage,{name:e.appId,collection:h});return t.find().then(function(e){return 0===e.length?null:e[0]})}function i(e){var t=f["default"].sharedInstance(),r=new l["default"](u["default"].LocalStorage,{name:t.appId,collection:h}),i=n().then(function(e){return e?r["delete"](e._id):void 0}).then(function(){return e?r.save(e):void 0});return i}var o=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(r,"__esModule",{value:!0}),r.getActiveUser=n,r.setActiveUser=i;var a=e("../core/enums/storeAdapter"),u=o(a),s=e("../core/cache/store"),l=o(s),c=e("../core/client"),f=o(c),h="activeUser"},{"../core/cache/store":247,"../core/client":248,"../core/enums/storeAdapter":258,"babel-runtime/helpers/interop-require-default":13}]},{},[273])(273)});
//# sourceMappingURL=kinvey.min.js.map
