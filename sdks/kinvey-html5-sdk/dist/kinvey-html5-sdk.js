/**
 * kinvey-html5-sdk - Kinvey JavaScript SDK for HTML5 applications.
 * @version 4.0.0
 * @author Kinvey, Inc.
 * @license Apache-2.0
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Kinvey=t():e.Kinvey=t()}(window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=62)}([function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},function(e,t,n){var r=n(67),i=n(5);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?i(e):t}},function(e,t,n){var r=n(30);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t,n){var r,i,o;i=[t,n(1),n(3),n(2),n(4),n(5),n(68)],void 0===(o="function"==typeof(r=function(e,t,r,i,o,a,s){"use strict";var u=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=u(t),r=u(r),i=u(i),o=u(o),a=u(a);var c=function(e){function n(){var e,o,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"An error occurred.",u=arguments.length>1?arguments[1]:void 0,c=arguments.length>2?arguments[2]:void 0,l=arguments.length>3?arguments[3]:void 0;(0,t.default)(this,n);for(var f=arguments.length,h=new Array(f>4?f-4:0),d=4;d<f;d++)h[d-4]=arguments[d];return o=(0,r.default)(this,(e=(0,i.default)(n)).call.apply(e,[this].concat(h))),Error.captureStackTrace&&Error.captureStackTrace((0,a.default)((0,a.default)(o)),n),o.name="BaseError",o.message=s,o.debug=u,o.code=c,o.kinveyRequestId=l,o}return(0,o.default)(n,e),n}((0,(s=u(s)).default)(Error));e.default=c})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[t,n(72),n(73),n(74),n(75),n(76),n(77),n(78),n(79),n(80),n(81),n(82),n(83),n(84),n(85),n(86),n(87),n(88),n(66),n(90),n(91),n(92),n(93),n(94),n(95),n(96),n(97),n(98),n(99),n(100),n(101),n(102),n(103),n(104),n(105),n(106),n(107),n(108),n(89),n(71)],void 0===(o="function"==typeof(r=function(e,t,r,i,o,a,s,u,c,l,f,h,d,p,y,v,b,g,m,w,_,x,k,E,S,O,P,C,A,I,j,T,N,M,D,R,q,K,B,U){"use strict";var L=n(0);Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"ActiveUserError",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"APIVersionNotAvailableError",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"APIVersionNotImplementedError",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"AppProblemError",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"BadRequestError",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"BLError",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"CORSDisabledError",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"DuplicateEndUsersError",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"FeatureUnavailableError",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"IncompleteRequestBodyError",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(e,"IndirectCollectionAccessDisallowedError",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(e,"InsufficientCredentialsError",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(e,"InvalidCachedQueryError",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(e,"InvalidCredentialsError",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(e,"InvalidIdentifierError",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(e,"InvalidQuerySyntaxError",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(e,"JSONParseError",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(e,"KinveyError",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(e,"KinveyInternalErrorRetry",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(e,"KinveyInternalErrorStop",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(e,"MissingConfigurationError",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(e,"MissingQueryError",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(e,"MissingRequestHeaderError",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(e,"MissingRequestParameterError",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(e,"MobileIdentityConnectError",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(e,"NetworkConnectionError",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(e,"NoActiveUserError",{enumerable:!0,get:function(){return C.default}}),Object.defineProperty(e,"NoResponseError",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(e,"NotFoundError",{enumerable:!0,get:function(){return I.default}}),Object.defineProperty(e,"ParameterValueOutOfRangeError",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(e,"PopupError",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(e,"QueryError",{enumerable:!0,get:function(){return N.default}}),Object.defineProperty(e,"ResultSetSizeExceededError",{enumerable:!0,get:function(){return M.default}}),Object.defineProperty(e,"ServerError",{enumerable:!0,get:function(){return D.default}}),Object.defineProperty(e,"StaleRequestError",{enumerable:!0,get:function(){return R.default}}),Object.defineProperty(e,"SyncError",{enumerable:!0,get:function(){return q.default}}),Object.defineProperty(e,"TimeoutError",{enumerable:!0,get:function(){return K.default}}),Object.defineProperty(e,"UserAlreadyExistsError",{enumerable:!0,get:function(){return B.default}}),Object.defineProperty(e,"WritesToCollectionDisallowedError",{enumerable:!0,get:function(){return U.default}}),t=L(t),r=L(r),i=L(i),o=L(o),a=L(a),s=L(s),u=L(u),c=L(c),l=L(l),f=L(f),h=L(h),d=L(d),p=L(p),y=L(y),v=L(v),b=L(b),g=L(g),m=L(m),w=L(w),_=L(_),x=L(x),k=L(k),E=L(E),S=L(S),O=L(O),P=L(P),C=L(C),A=L(A),I=L(I),j=L(j),T=L(T),N=L(N),M=L(M),D=L(D),R=L(R),q=L(q),K=L(K),B=L(B),U=L(U)})?r.apply(t,i):r)||(e.exports=o)},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},function(e,t,n){e.exports=n(114)},function(e,t){function n(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}e.exports=function(e){return function(){var t=this,r=arguments;return new Promise(function(i,o){var a=e.apply(t,r);function s(e){n(a,i,o,s,u,"next",e)}function u(e){n(a,i,o,s,u,"throw",e)}s(void 0)})}}},function(e,t,n){"use strict";var r=n(56),i=n(165),o=Object.prototype.toString;function a(e){return"[object Array]"===o.call(e)}function s(e){return null!==e&&"object"==typeof e}function u(e){return"[object Function]"===o.call(e)}function c(e,t){if(null!==e&&void 0!==e)if("object"!=typeof e&&(e=[e]),a(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:a,isArrayBuffer:function(e){return"[object ArrayBuffer]"===o.call(e)},isBuffer:i,isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:s,isUndefined:function(e){return void 0===e},isDate:function(e){return"[object Date]"===o.call(e)},isFile:function(e){return"[object File]"===o.call(e)},isBlob:function(e){return"[object Blob]"===o.call(e)},isFunction:u,isStream:function(e){return s(e)&&u(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:c,merge:function e(){var t={};function n(n,r){"object"==typeof t[r]&&"object"==typeof n?t[r]=e(t[r],n):t[r]=n}for(var r=0,i=arguments.length;r<i;r++)c(arguments[r],n);return t},extend:function(e,t,n){return c(t,function(t,i){e[i]=n&&"function"==typeof t?r(t,n):t}),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t,n){var r,i,o;i=[t,n(13),n(26),n(7),n(31)],void 0===(o="function"==typeof(r=function(e,t,r,i,o){"use strict";var a=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.init=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.appKey,a=e.appSecret,l=e.masterSecret,f=e.appVersion,h=e.instanceId,d=e.encryptionKey,p=e.defaultTimeout,y="https://baas.kinvey.com",v="https://auth.kinvey.com";if(h){if(!(0,t.default)(h))throw new i.KinveyError("Instance ID must be a string.");y="https://".concat(h,"-baas.kinvey.com"),v="https://".concat(h,"-auth.kinvey.com")}else(0,t.default)(e.apiHostname)&&(y=/^https?:\/\//i.test(e.apiHostname)?e.apiHostname:"https://".concat(e.apiHostname)),(0,t.default)(e.micHostname)&&(v=/^https?:\/\//i.test(e.micHostname)?e.micHostname:"https://".concat(e.micHostname));if(!(0,t.default)(n))throw new i.KinveyError("An appKey is required and must be a string.");if(!(0,t.default)(a)&&!(0,t.default)(l))throw new i.KinveyError("An appSecret is required and must be a string.");if(f&&!(0,t.default)(f))throw new i.KinveyError("An appVersion must be a string.");if(d&&!(0,t.default)(d))throw new i.KinveyError("An encryptionKey must be a string.");return{deviceId:(s={appKey:n,appSecret:a,masterSecret:l,encryptionKey:d,appVersion:f,defaultTimeout:(0,r.default)(p)&&p>=0?p:u,auth:{protocol:(0,o.parse)(v).protocol,host:(0,o.parse)(v).host,hostname:v},api:{protocol:(0,o.parse)(y).protocol,host:(0,o.parse)(y).host,hostname:y},device:{id:"".concat(c()).concat(c(),"-").concat(c(),"-").concat(c(),"-").concat(c(),"-").concat(c()).concat(c()).concat(c())}}).device.id,apiProtocol:s.api.protocol,apiHost:s.api.host,apiHostname:(0,o.format)({protocol:s.api.protocol,host:s.api.host}),micProtocol:s.auth.protocol,micHost:s.auth.host,micHostname:(0,o.format)({protocol:s.auth.protocol,host:s.auth.host}),appKey:s.appKey,appSecret:s.appSecret,masterSecret:s.masterSecret,encryptionKey:s.encryptionKey,appVersion:s.appVersion,defaultTimeout:s.defaultTimeout}},e.initialize=function(){return Promise.reject(new i.KinveyError("initialize() has been deprecated. Please use init()."))},e.getConfig=l,e.getAppVersion=function(){return l().appVersion},e.setAppVersion=function(e){l().appVersion=e},t=a(t),r=a(r);var s,u=6e4;function c(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function l(){if(!s)throw new i.KinveyError("You have not initialized the Kinvey JavaScript SDK.");return s}})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r=n(14),i=n(16),o=n(18),a="[object String]";e.exports=function(e){return"string"==typeof e||!i(e)&&o(e)&&r(e)==a}},function(e,t,n){var r=n(42),i=n(63),o=n(64),a="[object Null]",s="[object Undefined]",u=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?s:a:u&&u in Object(e)?i(e):o(e)}},function(e,t,n){var r=n(43),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();e.exports=o},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){var r,i,o;i=[t,n(1),n(8),n(26),n(13),n(21),n(28),n(7)],void 0===(o="function"==typeof(r=function(e,t,r,i,o,a,s,u){"use strict";var c=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.Query=void 0,t=c(t),r=c(r),i=c(i),o=c(o),a=c(a),s=c(s);var l=["_id","_acl"],f=["$nearSphere"],h=function(){function e(n){(0,t.default)(this,e);var r=Object.assign({},{fields:[],filter:{},sort:{},limit:1/0,skip:0},n);this.fields=r.fields,this.filter=r.filter,this.sort=r.sort,this.limit=r.limit,this.skip=r.skip}return(0,r.default)(e,[{key:"isSupportedOffline",value:function(){var e=this;return Object.keys(this.filter).reduce(function(t,n){if(t){var r=e.filter[n];return f.some(function(e){return!r||!(0,s.default)(r)||!Object.keys(r).some(function(t){return t===e})})}return t},!0)}},{key:"equalTo",value:function(e,t){return this.addFilter(e,t)}},{key:"notEqualTo",value:function(e,t){return this.addFilter(e,"$ne",t)}},{key:"contains",value:function(e,t){if(!t)throw new u.QueryError("You must supply a value.");return Array.isArray(t)?this.addFilter(e,"$in",t):this.addFilter(e,"$in",[t])}},{key:"notContainedIn",value:function(e,t){if(!t)throw new u.QueryError("You must supply a value.");return Array.isArray(t)?this.addFilter(e,"$nin",t):this.addFilter(e,"$nin",[t])}},{key:"containsAll",value:function(e,t){if(!t)throw new u.QueryError("You must supply a value.");return Array.isArray(t)?this.addFilter(e,"$all",t):this.addFilter(e,"$all",[t])}},{key:"greaterThan",value:function(e,t){if(!(0,i.default)(t)&&!(0,o.default)(t))throw new u.QueryError("You must supply a number or string.");return this.addFilter(e,"$gt",t)}},{key:"greaterThanOrEqualTo",value:function(e,t){if(!(0,i.default)(t)&&!(0,o.default)(t))throw new u.QueryError("You must supply a number or string.");return this.addFilter(e,"$gte",t)}},{key:"lessThan",value:function(e,t){if(!(0,i.default)(t)&&!(0,o.default)(t))throw new u.QueryError("You must supply a number or string.");return this.addFilter(e,"$lt",t)}},{key:"lessThanOrEqualTo",value:function(e,t){if(!(0,i.default)(t)&&!(0,o.default)(t))throw new u.QueryError("You must supply a number or string.");return this.addFilter(e,"$lte",t)}},{key:"exists",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.addFilter(e,"$exists",!0===t)}},{key:"mod",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!(0,i.default)(t))throw new u.QueryError("divisor must be a number");if(!(0,i.default)(n))throw new u.QueryError("remainder must be a number");return this.addFilter(e,"$mod",[t,n])}},{key:"matches",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=[],i=t;if(i instanceof RegExp||(i=new RegExp(i)),0!==i.source.indexOf("^"))throw new u.QueryError("regExp must have '^' at the beginning of the expression to make it an anchored expression.");if((i.ignoreCase||n.ignoreCase)&&!1!==n.ignoreCase)throw new u.QueryError("ignoreCase flag is not supported");return(i.multiline||n.multiline)&&!1!==n.multiline&&r.push("m"),!0===n.extended&&r.push("x"),!0===n.dotMatchesAll&&r.push("s"),r.length>0&&this.addFilter(e,"$options",r.join("")),this.addFilter(e,"$regex",i.source)}},{key:"near",value:function(e,t,n){if(!Array.isArray(t)||!(0,i.default)(t[0])||!(0,i.default)(t[1]))throw new u.QueryError("coord must be a [number, number]");var r=this.addFilter(e,"$nearSphere",[t[0],t[1]]);return(0,i.default)(n)&&this.addFilter(e,"$maxDistance",n),r}},{key:"withinBox",value:function(e,t,n){if(!Array.isArray(t)||!(0,i.default)(t[0])||!(0,i.default)(t[1]))throw new u.QueryError("bottomLeftCoord must be a [number, number]");if(!Array.isArray(n)||!(0,i.default)(n[0])||!(0,i.default)(n[1]))throw new u.QueryError("upperRightCoord must be a [number, number]");var r=[[t[0],t[1]],[n[0],n[1]]];return this.addFilter(e,"$within",{$box:r})}},{key:"withinPolygon",value:function(e,t){if(!1===Array.isArray(t)||0===t.length||t[0].length>3)throw new u.QueryError("coords must be a [[number, number]]");var n=t.map(function(e){if(!(0,i.default)(e[0])||!(0,i.default)(e[1]))throw new u.QueryError("coords argument must be a [number, number]");return[e[0],e[1]]});return this.addFilter(e,"$within",{$polygon:n})}},{key:"size",value:function(e,t){if(!(0,i.default)(t))throw new u.QueryError("size must be a number");return this.addFilter(e,"$size",t)}},{key:"ascending",value:function(e){return this._parent?this._parent.ascending(e):(this.sort||(this.sort={}),this.sort[e]=1),this}},{key:"descending",value:function(e){return this._parent?this._parent.descending(e):(this.sort||(this.sort={}),this.sort[e]=-1),this}},{key:"and",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.join("$and",t)}},{key:"nor",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r;return this._parent&&Object.hasOwnProperty.call(this._parent.filter,"$and")?(r=this._parent).nor.apply(r,t):this.join("$nor",t)}},{key:"or",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r;return this._parent?(r=this._parent).or.apply(r,t):this.join("$or",t)}},{key:"toQueryObject",value:function(){var e={};Object.keys(this.filter).length>0&&(e.query=this.filter),this.fields.length>0&&(e.fields=this.fields.join(",")),(0,i.default)(this.limit)&&this.limit<1/0&&(e.limit=this.limit),(0,i.default)(this.skip)&&this.skip>0&&(e.skip=this.skip),this.sort&&Object.keys(this.sort).length>0&&(e.sort=this.sort);var t=Object.keys(e);return t.forEach(function(t){e[t]=(0,o.default)(e[t])?e[t]:JSON.stringify(e[t])}),e}},{key:"toQueryString",value:function(){return this.toQueryObject()}},{key:"toPlainObject",value:function(){if(this._parent)return this._parent.toPlainObject();var e={fields:this.fields,filter:this.filter,sort:this.sort,skip:this.skip,limit:this.limit};return e}},{key:"toString",value:function(){return JSON.stringify(this.toQueryString())}},{key:"addFilter",value:function(e){var t=2==(arguments.length<=1?0:arguments.length-1)?{condition:arguments.length<=1?void 0:arguments[1],values:arguments.length<=2?void 0:arguments[2]}:{condition:void 0,values:arguments.length<=1?void 0:arguments[1]},n=t.condition,r=t.values;return this.filter||(this.filter={}),n?(this.filter[e]||(this.filter[e]={}),this.filter[e][n]=r):this.filter[e]=r,this}},{key:"join",value:function(t,n){var r=this,i=this,o=n.map(function(e){return e.filter});0===o.length&&(i=new e,o=[i.filter],i._parent=this);var a=Object.keys(this.filter).reduce(function(e,t){return e[t]=r.filter[t],delete r.filter[t],e},{});return this.addFilter(t,[a].concat(o)),i}},{key:"fields",get:function(){return this._fields.length>0?[].concat(this._fields,l):[]},set:function(e){if(!Array.isArray(e))throw new u.QueryError("fields must be an Array");this._parent?this._parent.fields=e:this._fields=e}},{key:"sort",get:function(){return this._sort},set:function(e){if(e&&!(0,a.default)(e))throw new u.QueryError("sort must an Object");this._parent?this._parent.sort=e:this._sort=e}},{key:"limit",get:function(){return this._limit},set:function(e){var t=e;if((0,o.default)(t)&&(t=parseFloat(t)),e&&!(0,i.default)(t))throw new u.QueryError("limit must be a number");this._parent?this._parent.limit=t:this._limit=t}},{key:"skip",get:function(){return this._skip},set:function(e){var t=e;if((0,o.default)(t)&&(t=parseFloat(t)),!(0,i.default)(t))throw new u.QueryError("skip must be a number");this._parent?this._parent.skip=t:this._skip=t}}]),e}();e.Query=h})?r.apply(t,i):r)||(e.exports=o)},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t,n){var r,i,o;i=[t,n(46),n(34),n(142),n(52),n(35)],void 0===(o="function"==typeof(r=function(e,t,n,r,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){"default"!==n&&"__esModule"!==n&&Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[n]}})}),Object.keys(n).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})}),Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return r[t]}})}),Object.keys(i).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return i[t]}})}),Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}})})})?r.apply(t,i):r)||(e.exports=o)},function(e,t){e.exports=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}},function(e,t,n){var r=n(14),i=n(65),o=n(18),a="[object Object]",s=Function.prototype,u=Object.prototype,c=s.toString,l=u.hasOwnProperty,f=c.call(Object);e.exports=function(e){if(!o(e)||r(e)!=a)return!1;var t=i(e);if(null===t)return!0;var n=l.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==f}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r=n(125),i=n(128);e.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},function(e,t,n){var r=n(14),i=n(28),o="[object AsyncFunction]",a="[object Function]",s="[object GeneratorFunction]",u="[object Proxy]";e.exports=function(e){if(!i(e))return!1;var t=r(e);return t==a||t==s||t==o||t==u}},function(e,t,n){var r,i,o;i=[t,n(9),n(10),n(1),n(8),n(17),n(36),n(146),n(27),n(16),n(7),n(145),n(144)],void 0===(o="function"==typeof(r=function(e,t,r,i,o,a,s,u,c,l,f,h,d){"use strict";var p=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.register=function(e){e&&(v=e)},e.clear=function(e){return y.add(function(){return v.clearAll(e)})},e.Cache=void 0,t=p(t),r=p(r),i=p(i),o=p(o),u=p(u),c=p(c),l=p(l);var y=new((h=p(h)).default)({concurrency:1}),v={find:function(){throw new Error("You must override the default cache adapter.")},reduce:function(){throw new Error("You must override the default cache adapter.")},count:function(){throw new Error("You must override the default cache adapter.")},findById:function(){throw new Error("You must override the default cache adapter.")},save:function(){throw new Error("You must override the default cache adapter.")},remove:function(){throw new Error("You must override the default cache adapter.")},removeById:function(){throw new Error("You must override the default cache adapter.")},clear:function(){throw new Error("You must override the default cache adapter.")},clearAll:function(){throw new Error("You must override the default cache adapter.")}};function b(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:24,t="abcdef0123456789",n="",r=0,i=t.length;r<e;r+=1){var o=Math.floor(Math.random()*i);n+=t.substring(o,o+1)}return n}var g=function(){function e(t,n){(0,i.default)(this,e),this.storeName=t,this.collectionName=n}return(0,o.default)(e,[{key:"find",value:function(e){var n=this;return y.add((0,r.default)(t.default.mark(function r(){var i,o,s,h,p,y;return t.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.find(n.storeName,n.collectionName);case 2:if(i=t.sent,!e||e instanceof a.Query){t.next=5;break}throw new f.KinveyError("Invalid query. It must be an instance of the Query class.");case 5:return i.length>0&&e&&(o=e.filter,s=e.sort,h=e.limit,p=e.skip,y=e.fields,o&&!(0,c.default)(o)&&(i=(0,u.default)(o,i)),(0,c.default)(s)||i.sort(function(e,t){return Object.keys(s).reduce(function(n,r){if(void 0!==n)return n;if(Object.prototype.hasOwnProperty.call(s,r)){var i=(0,d.nested)(e,r),o=(0,d.nested)(t,r),a=s[r];if(null!==i&&void 0!==i&&(null===o||void 0===o))return 1*a;if(null!==o&&void 0!==o&&(null===i||void 0===i))return-1*a;if(void 0===i&&null===o)return 0;if(null===i&&void 0===o)return 0;if(i!==o)return(i<o?-1:1)*a}return 0},void 0)}),p>0?i=h<1/0?i.slice(p,p+h):i.slice(p):h<1/0&&(i=i.slice(0,h)),(0,l.default)(y)&&y.length>0&&(i=i.map(function(e){var t=e;return Object.keys(t).forEach(function(e){-1===y.indexOf(e)&&delete t[e]}),t}))),t.abrupt("return",i);case 7:case"end":return t.stop()}},r,this)})))}},{key:"group",value:function(){var e=(0,r.default)(t.default.mark(function e(n){var r,i,o,a,u,c;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n instanceof s.Aggregation){e.next=2;break}throw new f.KinveyError("Invalid aggregation. It must be an instance of the Aggregation class.");case 2:return r=n.query,i=n.initial,o=n.key,a=n.reduceFn,u=Object.keys(o),e.next=6,this.find(r);case 6:if(c=e.sent,!(u.length>0)){e.next=9;break}return e.abrupt("return",u.reduce(function(e,t){return e[t]=c.reduce(function(e,n){return a(e,n,t)||e},i),e},{}));case 9:return e.abrupt("return",c.reduce(function(e,t){return a(t,e)||e},Object.assign({},i)));case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"count",value:function(){var e=(0,r.default)(t.default.mark(function e(n){var r,i=this;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=5;break}return e.next=3,this.find(n);case 3:return r=e.sent,e.abrupt("return",r.length);case 5:return e.abrupt("return",y.add(function(){return v.count(i.storeName,i.collectionName)}));case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"findById",value:function(e){var t=this;return y.add(function(){return v.findById(t.storeName,t.collectionName,e)})}},{key:"save",value:function(e){var n=this;return y.add((0,r.default)(t.default.mark(function r(){var i,o;return t.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e,o=!1,e){t.next=4;break}return t.abrupt("return",null);case 4:if((0,l.default)(e)||(o=!0,i=[e]),!((i=i.slice(0,i.length)).length>0)){t.next=11;break}return i=i.map(function(e){return e._id?e:Object.assign({},{_id:b(),_kmd:Object.assign({},e._kmd,{local:!0})},e)}),t.next=10,v.save(n.storeName,n.collectionName,i);case 10:return t.abrupt("return",o?i.shift():i);case 11:return t.abrupt("return",e);case 12:case"end":return t.stop()}},r,this)})))}},{key:"remove",value:function(){var e=(0,r.default)(t.default.mark(function e(n){var r,i,o=this;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.find(n);case 2:if(r=e.sent,!n){e.next=8;break}return e.next=6,Promise.all(r.map(function(e){return o.removeById(e._id)}));case 6:return i=e.sent,e.abrupt("return",i.reduce(function(e,t){return e+t},0));case 8:return e.next=10,this.clear();case 10:return e.abrupt("return",r.length);case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"removeById",value:function(e){var t=this;return y.add(function(){return v.removeById(t.storeName,t.collectionName,e)})}},{key:"clear",value:function(){var e=this;return y.add(function(){return v.clear(e.storeName,e.collectionName)})}}]),e}();e.Cache=g})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r=n(14),i=n(18),o="[object Number]";e.exports=function(e){return"number"==typeof e||i(e)&&r(e)==o}},function(e,t,n){var r=n(121),i=n(123),o=n(133),a=n(16),s=n(135),u=n(136),c=n(47),l=n(138),f="[object Map]",h="[object Set]",d=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(s(e)&&(a(e)||"string"==typeof e||"function"==typeof e.splice||u(e)||l(e)||o(e)))return!e.length;var t=i(e);if(t==f||t==h)return!e.size;if(c(e))return!r(e).length;for(var n in e)if(d.call(e,n))return!1;return!0}},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t,n){var r,i,o;i=[t,n(24),n(12)],void 0===(o="function"==typeof(r=function(e,t,r){"use strict";var i=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.register=function(e){e&&(a=e)},e.get=function(){var e=(0,r.getConfig)().appKey;return a.get("".concat(e,".").concat(o))},e.set=function(e){var t=(0,r.getConfig)().appKey;return e&&a.set("".concat(t,".").concat(o),e),e},e.remove=function(){var e=(0,r.getConfig)().appKey;return(0,t.default)(a.delete)?a.delete("".concat(e,".").concat(o)):a.remove("".concat(e,".").concat(o)),null},t=i(t);var o="active_user",a=new Map})?r.apply(t,i):r)||(e.exports=o)},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,r)}e.exports=n},function(e,t,n){"use strict";var r=n(116),i=n(117);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=m,t.resolve=function(e,t){return m(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?m(e,!1,!0).resolveObject(t):t},t.format=function(e){i.isString(e)&&(e=m(e));return e instanceof o?e.format():o.prototype.format.call(e)},t.Url=o;var a=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(c),f=["%","/","?",";","#"].concat(l),h=["/","?","#"],d=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,y={javascript:!0,"javascript:":!0},v={javascript:!0,"javascript:":!0},b={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},g=n(118);function m(e,t,n){if(e&&i.isObject(e)&&e instanceof o)return e;var r=new o;return r.parse(e,t,n),r}o.prototype.parse=function(e,t,n){if(!i.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var o=e.indexOf("?"),s=-1!==o&&o<e.indexOf("#")?"?":"#",c=e.split(s);c[0]=c[0].replace(/\\/g,"/");var m=e=c.join(s);if(m=m.trim(),!n&&1===e.split("#").length){var w=u.exec(m);if(w)return this.path=m,this.href=m,this.pathname=w[1],w[2]?(this.search=w[2],this.query=t?g.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var _=a.exec(m);if(_){var x=(_=_[0]).toLowerCase();this.protocol=x,m=m.substr(_.length)}if(n||_||m.match(/^\/\/[^@\/]+@[^@\/]+/)){var k="//"===m.substr(0,2);!k||_&&v[_]||(m=m.substr(2),this.slashes=!0)}if(!v[_]&&(k||_&&!b[_])){for(var E,S,O=-1,P=0;P<h.length;P++){-1!==(C=m.indexOf(h[P]))&&(-1===O||C<O)&&(O=C)}-1!==(S=-1===O?m.lastIndexOf("@"):m.lastIndexOf("@",O))&&(E=m.slice(0,S),m=m.slice(S+1),this.auth=decodeURIComponent(E)),O=-1;for(P=0;P<f.length;P++){var C;-1!==(C=m.indexOf(f[P]))&&(-1===O||C<O)&&(O=C)}-1===O&&(O=m.length),this.host=m.slice(0,O),m=m.slice(O),this.parseHost(),this.hostname=this.hostname||"";var A="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!A)for(var I=this.hostname.split(/\./),j=(P=0,I.length);P<j;P++){var T=I[P];if(T&&!T.match(d)){for(var N="",M=0,D=T.length;M<D;M++)T.charCodeAt(M)>127?N+="x":N+=T[M];if(!N.match(d)){var R=I.slice(0,P),q=I.slice(P+1),K=T.match(p);K&&(R.push(K[1]),q.unshift(K[2])),q.length&&(m="/"+q.join(".")+m),this.hostname=R.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),A||(this.hostname=r.toASCII(this.hostname));var B=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+B,this.href+=this.host,A&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==m[0]&&(m="/"+m))}if(!y[x])for(P=0,j=l.length;P<j;P++){var L=l[P];if(-1!==m.indexOf(L)){var F=encodeURIComponent(L);F===L&&(F=escape(L)),m=m.split(L).join(F)}}var z=m.indexOf("#");-1!==z&&(this.hash=m.substr(z),m=m.slice(0,z));var $=m.indexOf("?");if(-1!==$?(this.search=m.substr($),this.query=m.substr($+1),t&&(this.query=g.parse(this.query)),m=m.slice(0,$)):t&&(this.search="",this.query={}),m&&(this.pathname=m),b[x]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){B=this.pathname||"";var H=this.search||"";this.path=B+H}return this.href=this.format(),this},o.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,a="";this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(a=g.stringify(this.query));var s=this.search||a&&"?"+a||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||b[t])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),t+o+(n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}))+(s=s.replace("#","%23"))+r},o.prototype.resolve=function(e){return this.resolveObject(m(e,!1,!0)).format()},o.prototype.resolveObject=function(e){if(i.isString(e)){var t=new o;t.parse(e,!1,!0),e=t}for(var n=new o,r=Object.keys(this),a=0;a<r.length;a++){var s=r[a];n[s]=this[s]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var u=Object.keys(e),c=0;c<u.length;c++){var l=u[c];"protocol"!==l&&(n[l]=e[l])}return b[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!b[e.protocol]){for(var f=Object.keys(e),h=0;h<f.length;h++){var d=f[h];n[d]=e[d]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||v[e.protocol])n.pathname=e.pathname;else{for(var p=(e.pathname||"").split("/");p.length&&!(e.host=p.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),n.pathname=p.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var y=n.pathname||"",g=n.search||"";n.path=y+g}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var m=n.pathname&&"/"===n.pathname.charAt(0),w=e.host||e.pathname&&"/"===e.pathname.charAt(0),_=w||m||n.host&&e.pathname,x=_,k=n.pathname&&n.pathname.split("/")||[],E=(p=e.pathname&&e.pathname.split("/")||[],n.protocol&&!b[n.protocol]);if(E&&(n.hostname="",n.port=null,n.host&&(""===k[0]?k[0]=n.host:k.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===p[0]?p[0]=e.host:p.unshift(e.host)),e.host=null),_=_&&(""===p[0]||""===k[0])),w)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,k=p;else if(p.length)k||(k=[]),k.pop(),k=k.concat(p),n.search=e.search,n.query=e.query;else if(!i.isNullOrUndefined(e.search)){if(E)n.hostname=n.host=k.shift(),(A=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=A.shift(),n.host=n.hostname=A.shift());return n.search=e.search,n.query=e.query,i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!k.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var S=k.slice(-1)[0],O=(n.host||e.host||k.length>1)&&("."===S||".."===S)||""===S,P=0,C=k.length;C>=0;C--)"."===(S=k[C])?k.splice(C,1):".."===S?(k.splice(C,1),P++):P&&(k.splice(C,1),P--);if(!_&&!x)for(;P--;P)k.unshift("..");!_||""===k[0]||k[0]&&"/"===k[0].charAt(0)||k.unshift(""),O&&"/"!==k.join("/").substr(-1)&&k.push("");var A,I=""===k[0]||k[0]&&"/"===k[0].charAt(0);E&&(n.hostname=n.host=I?"":k.length?k.shift():"",(A=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=A.shift(),n.host=n.hostname=A.shift()));return(_=_||n.host&&k.length)&&!I&&k.unshift(""),k.length?n.pathname=k.join("/"):(n.pathname=null,n.path=null),i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},o.prototype.parseHost=function(){var e=this.host,t=s.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(module,exports,__webpack_require__){(function(global){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(global,factory){module.exports=function(global){"use strict";var _Base64=global.Base64,version="2.4.9",buffer;if(void 0!==module&&module.exports)try{buffer=eval("require('buffer').Buffer")}catch(e){buffer=void 0}var b64chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b64tab=function(e){for(var t={},n=0,r=e.length;n<r;n++)t[e.charAt(n)]=n;return t}(b64chars),fromCharCode=String.fromCharCode,cb_utob=function(e){if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?fromCharCode(192|t>>>6)+fromCharCode(128|63&t):fromCharCode(224|t>>>12&15)+fromCharCode(128|t>>>6&63)+fromCharCode(128|63&t)}var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return fromCharCode(240|t>>>18&7)+fromCharCode(128|t>>>12&63)+fromCharCode(128|t>>>6&63)+fromCharCode(128|63&t)},re_utob=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,utob=function(e){return e.replace(re_utob,cb_utob)},cb_encode=function(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0),r=[b64chars.charAt(n>>>18),b64chars.charAt(n>>>12&63),t>=2?"=":b64chars.charAt(n>>>6&63),t>=1?"=":b64chars.charAt(63&n)];return r.join("")},btoa=global.btoa?function(e){return global.btoa(e)}:function(e){return e.replace(/[\s\S]{1,3}/g,cb_encode)},_encode=buffer?buffer.from&&Uint8Array&&buffer.from!==Uint8Array.from?function(e){return(e.constructor===buffer.constructor?e:buffer.from(e)).toString("base64")}:function(e){return(e.constructor===buffer.constructor?e:new buffer(e)).toString("base64")}:function(e){return btoa(utob(e))},encode=function(e,t){return t?_encode(String(e)).replace(/[+\/]/g,function(e){return"+"==e?"-":"_"}).replace(/=/g,""):_encode(String(e))},encodeURI=function(e){return encode(e,!0)},re_btou=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),cb_btou=function(e){switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),n=t-65536;return fromCharCode(55296+(n>>>10))+fromCharCode(56320+(1023&n));case 3:return fromCharCode((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return fromCharCode((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},btou=function(e){return e.replace(re_btou,cb_btou)},cb_decode=function(e){var t=e.length,n=t%4,r=(t>0?b64tab[e.charAt(0)]<<18:0)|(t>1?b64tab[e.charAt(1)]<<12:0)|(t>2?b64tab[e.charAt(2)]<<6:0)|(t>3?b64tab[e.charAt(3)]:0),i=[fromCharCode(r>>>16),fromCharCode(r>>>8&255),fromCharCode(255&r)];return i.length-=[0,0,2,1][n],i.join("")},atob=global.atob?function(e){return global.atob(e)}:function(e){return e.replace(/[\s\S]{1,4}/g,cb_decode)},_decode=buffer?buffer.from&&Uint8Array&&buffer.from!==Uint8Array.from?function(e){return(e.constructor===buffer.constructor?e:buffer.from(e,"base64")).toString()}:function(e){return(e.constructor===buffer.constructor?e:new buffer(e,"base64")).toString()}:function(e){return btou(atob(e))},decode=function(e){return _decode(String(e).replace(/[-_]/g,function(e){return"-"==e?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},noConflict=function(){var e=global.Base64;return global.Base64=_Base64,e};if(global.Base64={VERSION:version,atob:atob,btoa:btoa,fromBase64:decode,toBase64:encode,utob:utob,encode:encode,encodeURI:encodeURI,btou:btou,decode:decode,noConflict:noConflict,__buffer__:buffer},"function"==typeof Object.defineProperty){var noEnum=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}};global.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",noEnum(function(){return decode(this)})),Object.defineProperty(String.prototype,"toBase64",noEnum(function(e){return encode(this,e)})),Object.defineProperty(String.prototype,"toBase64URI",noEnum(function(){return encode(this,!0)}))}}global.Meteor&&(Base64=global.Base64);void 0!==module&&module.exports?module.exports.Base64=global.Base64:(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){return global.Base64}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__));return{Base64:global.Base64}}(global)}("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==global?global:this)}).call(this,__webpack_require__(22))},function(e,t,n){var r,i,o;i=[t,n(3),n(2),n(4),n(1),n(8),n(16),n(13),n(24),n(27),n(7)],void 0===(o="function"==typeof(r=function(e,t,r,i,o,a,s,u,c,l,f){"use strict";var h=n(0);function d(e){return!(0,u.default)(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.KinveyHeaders=e.Headers=void 0,t=h(t),r=h(r),i=h(i),o=h(o),a=h(a),s=h(s),u=h(u),c=h(c),l=h(l);var p=function(){function e(t){var n=this;(0,o.default)(this,e),this.headers=new Map,this.normalizedNames=new Map,t&&(t instanceof e?t.keys().forEach(function(e){var r=t.get(e);n.set(e,r)}):Object.keys(t).forEach(function(e){var r=t[e];n.set(e,r)}))}return(0,a.default)(e,[{key:"has",value:function(e){if(!(0,u.default)(e))throw new Error("Please provide a name. Name must be a string.");return this.headers.has(e.toLowerCase())}},{key:"get",value:function(e){if(!(0,u.default)(e))throw new Error("Please provide a name. Name must be a string.");return this.headers.get(e.toLowerCase())}},{key:"keys",value:function(){return Array.from(this.normalizedNames.values())}},{key:"set",value:function(e,t){if(!(0,u.default)(e))throw new Error("Please provide a name. Name must be a string.");if(!(0,u.default)(t)&&!(0,s.default)(t)&&!(0,c.default)(t)||(0,s.default)(t)&&t.some(d))throw new Error("Please provide a value. Value must be a string or an array that contains only strings.");var n=e.toLowerCase();if((0,s.default)(t))this.headers.set(n,t.join(","));else{if((0,c.default)(t)){var r=t();return this.set(e,r)}this.headers.set(n,t)}return this.normalizedNames.has(n)||this.normalizedNames.set(n,e),this}},{key:"join",value:function(t){var n=this;return t instanceof e?t.keys().forEach(function(e){var r=t.get(e);n.set(e,r)}):Object.keys(t).forEach(function(e){var r=t[e];n.set(e,r)}),this}},{key:"delete",value:function(e){if(!(0,u.default)(e))throw new Error("Please provide a name. Name must be a string.");return this.headers.delete(e.toLowerCase())}},{key:"toObject",value:function(){var e=this;return this.keys().reduce(function(t,n){return t[n]=e.get(n),t},{})}},{key:"contentType",get:function(){return this.get("Content-Type")}}]),e}();e.Headers=p;var y=function(e){function n(e){var i;return(0,o.default)(this,n),(i=(0,t.default)(this,(0,r.default)(n).call(this,e))).has("Accept")||i.set("Accept","application/json; charset=utf-8"),i.has("Content-Type")||i.set("Content-Type","application/json; charset=utf-8"),i.has("X-Kinvey-Api-Version")||i.set("X-Kinvey-Api-Version","4"),i}return(0,i.default)(n,e),(0,a.default)(n,[{key:"requestStart",get:function(){return this.get("X-Kinvey-Request-Start")}},{key:"customRequestProperties",get:function(){return this.get("X-Kinvey-Custom-Request-Properties")},set:function(e){var t=JSON.stringify(e);if((0,l.default)(t))this.delete("X-Kinvey-Custom-Request-Properties");else{var n=function(e){if(e){for(var t=0,n=e.length,r=0;r<n;r+=1){var i=encodeURI(e[r]).split("%").length;t+=1===i?1:i-1}return t}return 0}(t);if(n>=2e3)throw new f.KinveyError("The custom properties are ".concat(n," bytes.")+"It must be less then 2000 bytes.","Please remove some custom properties.");this.set("X-Kinvey-Custom-Request-Properties",t)}}}]),n}(p);e.KinveyHeaders=y})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){(function(r){var i,o,a;!function(r,s){o=[t,n(31),n(13),n(21)],void 0===(a="function"==typeof(i=s)?i.apply(t,o):i)||(e.exports=a)}(0,function(e,t,i,o){"use strict";var a=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.formatKinveyUrl=function(e,n,r,i){var a=function e(t){if((0,o.default)(t))return Object.keys(t).reduce(function(n,r){var i=t[r];return(0,o.default)(i)&&(i=e(i)),void 0!==i&&null!==i&&(n[r]=i),n},{});return t}(i);return(0,t.format)({protocol:e,host:n,pathname:r,query:a})},e.serialize=function(e,t){if(t&&!(0,i.default)(t)){if(0===e.indexOf("application/x-www-form-urlencoded")){var n=[];return Object.keys(t).forEach(function(e){n.push("".concat(r.encodeURIComponent(e),"=").concat(r.encodeURIComponent(t[e])))}),n.join("&")}if(0===e.indexOf("application/json"))return JSON.stringify(t)}return t},e.parse=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"application/json",t=arguments.length>1?arguments[1]:void 0;if((0,i.default)(t)&&0===e.indexOf("application/json"))try{return JSON.parse(t)}catch(e){}return t},i=a(i),o=a(o)})}).call(this,n(22))},function(e,t,n){var r,i,o;i=[t,n(1),n(8),n(16),n(17)],void 0===(o="function"==typeof(r=function(e,t,r,i,o){"use strict";var a=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.count=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=new s({reduceFn:function(e,t,n){var r=t[n];return r&&(e[r]=void 0===e[r]?1:e[r]+1),e}});return t.by(e),t},e.sum=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=new s({initial:{sum:0},reduceFn:function(e,t,n){return e.sum+=t[n],e}});return t.by(e),t},e.min=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=new s({initial:{min:1/0},reduceFn:function(e,t,n){return e.min=Math.min(e.min,t[n]),e}});return t.by(e),t},e.max=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=new s({initial:{max:-1/0},reduceFn:function(e,t,n){return e.max=Math.max(e.max,t[n]),e}});return t.by(e),t},e.average=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=new s({initial:{count:0,average:0},reduceFn:function(e,t,n){return e.average=(e.average*e.count+t[n])/(e.count+1),e.count+=1,e}});return t.by(e),t},e.Aggregation=void 0,t=a(t),r=a(r),i=a(i);var s=function(){function e(n){(0,t.default)(this,e);var r=Object.assign({},{query:null,initial:{},key:{},reduceFn:function(){return null}},n);this.query=r.query,this.initial=r.initial,this.key=r.key,this.reduceFn=r.reduceFn}return(0,r.default)(e,[{key:"by",value:function(e){return this.key[e]=!0,this}},{key:"toPlainObject",value:function(){return{key:this.key,initial:this.initial,reduce:this.reduceFn,reduceFn:this.reduceFn,condition:this.query?this.query.toPlainObject().filter:{},query:this.query?this.query.toPlainObject():null}}},{key:"query",get:function(){return this._query},set:function(e){if(e&&!(e instanceof o.Query))throw new Error("Query must be an instance of Query class.");this._query=e}}]),e}();e.Aggregation=s})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[t,n(1),n(8),n(3),n(2),n(4),n(199)],void 0===(o="function"==typeof(r=function(e,t,r,i,o,a,s){"use strict";var u=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.isPromiseLike=function(e){return!!e&&"function"==typeof e.then&&"function"==typeof e.catch},e.isObservable=function(e){return e instanceof s.Observable},e.KinveyObservable=void 0,t=u(t),r=u(r),i=u(i),o=u(o),a=u(a);var c=function(e){function n(){return(0,t.default)(this,n),(0,i.default)(this,(0,o.default)(n).apply(this,arguments))}return(0,a.default)(n,e),(0,r.default)(n,[{key:"toPromise",value:function(){var e=this;return new Promise(function(t,n){var r;e.subscribe(function(e){r=e},n,function(){t(r)})})}}]),n}(s.Observable);e.KinveyObservable=c})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[t,n(9),n(10),n(1),n(8),n(12),n(37),n(29),n(36),n(150),n(17),n(19),n(7),n(16)],void 0===(o="function"==typeof(r=function(e,t,r,i,o,a,s,u,c,l,f,h,d,p){"use strict";var y=n(20),v=n(0);function b(e,t,n){return new h.KinveyRequest({method:e,auth:h.Auth.Session,url:t,body:n})}Object.defineProperty(e,"__esModule",{value:!0}),e.createRequest=b,e.NetworkStore=void 0,t=v(t),r=v(r),i=v(i),o=v(o),l=y(l),p=v(p);var g=function(){function e(t){(0,i.default)(this,e),this.collectionName=t}return(0,o.default)(e,[{key:"find",value:function(e){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=s.KinveyObservable.create(function(){var o=(0,r.default)(t.default.mark(function r(o){var s,u,c,l,p,y,v,g,m,w,_;return t.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e||e instanceof f.Query){t.next=3;break}throw new d.KinveyError("Invalid query. It must be an instance of the Query class.");case 3:return s=(0,a.getConfig)(),u=s.api,c=i.rawResponse,l=void 0!==c&&c,i.timeout,p=i.properties,i.trace,i.skipBL,y=i.kinveyFileTTL,v=i.kinveyFileTLS,g=Object.assign({},e?e.toQueryObject():{},{kinveyfile_ttl:y,kinveyfile_tls:v}),m=(0,h.formatKinveyUrl)(u.protocol,u.host,n.pathname,g),(w=b(h.RequestMethod.GET,m)).headers.customRequestProperties=p,t.next=11,w.execute();case 11:_=t.sent,!0===l?o.next(_):o.next(_.data),o.complete(),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),o.error(t.t0);case 19:case"end":return t.stop()}},r,this,[[0,16]])}));return function(e){return o.apply(this,arguments)}}());return o}},{key:"count",value:function(e){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=s.KinveyObservable.create(function(){var o=(0,r.default)(t.default.mark(function r(o){var s,u,c,l,p,y,v,g,m;return t.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e||e instanceof f.Query){t.next=3;break}throw new d.KinveyError("Invalid query. It must be an instance of the Query class.");case 3:return s=(0,a.getConfig)(),u=s.api,c=i.rawResponse,l=void 0!==c&&c,i.timeout,p=i.properties,i.trace,i.skipBL,y=Object.assign({},e?e.toQueryObject():{},{}),v=(0,h.formatKinveyUrl)(u.protocol,u.host,"".concat(n.pathname,"/_count"),y),(g=b(h.RequestMethod.GET,v)).headers.customRequestProperties=p,t.next=11,g.execute();case 11:m=t.sent,!0===l?o.next(m):o.next(m.data.count),o.complete(),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),o.error(t.t0);case 19:case"end":return t.stop()}},r,this,[[0,16]])}));return function(e){return o.apply(this,arguments)}}());return o}},{key:"group",value:function(e){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=s.KinveyObservable.create(function(){var o=(0,r.default)(t.default.mark(function r(o){var s,u,l,f,p,y,v,g,m;return t.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e instanceof c.Aggregation){t.next=3;break}throw new d.KinveyError("Invalid aggregation. It must be an instance of the Aggregation class.");case 3:return s=(0,a.getConfig)(),u=s.api,l=i.rawResponse,f=void 0!==l&&l,i.timeout,p=i.properties,i.trace,i.skipBL,y={},v=(0,h.formatKinveyUrl)(u.protocol,u.host,"".concat(n.pathname,"/_group"),y),(g=b(h.RequestMethod.POST,v,e.toPlainObject())).headers.customRequestProperties=p,t.next=11,g.execute();case 11:m=t.sent,!0===f?o.next(m):o.next(m.data),o.complete(),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),o.error(t.t0);case 19:case"end":return t.stop()}},r,this,[[0,16]])}));return function(e){return o.apply(this,arguments)}}());return o}},{key:"findById",value:function(e){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=s.KinveyObservable.create(function(){var o=(0,r.default)(t.default.mark(function r(o){var s,u,c,l,f,d,p,y,v,g,m;return t.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e){t.next=14;break}return s=(0,a.getConfig)(),u=s.api,c=i.rawResponse,l=void 0!==c&&c,i.timeout,f=i.properties,i.trace,i.skipBL,d=i.kinveyFileTTL,p=i.kinveyFileTLS,y={kinveyfile_ttl:d,kinveyfile_tls:p},v=(0,h.formatKinveyUrl)(u.protocol,u.host,"".concat(n.pathname,"/").concat(e),y),(g=b(h.RequestMethod.GET,v)).headers.customRequestProperties=f,t.next=10,g.execute();case 10:m=t.sent,!0===l?o.next(m):o.next(m.data),t.next=15;break;case 14:o.next(void 0);case 15:o.complete(),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(0),o.error(t.t0);case 21:case"end":return t.stop()}},r,this,[[0,18]])}));return function(e){return o.apply(this,arguments)}}());return o}},{key:"create",value:function(){var e=(0,r.default)(t.default.mark(function e(n){var r,i,o,s,u,c,l,f,y,v,g=arguments;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=g.length>1&&void 0!==g[1]?g[1]:{},!(0,p.default)(n)){e.next=3;break}throw new d.KinveyError("Unable to create an array of entities.","Please create entities one by one.");case 3:return i=(0,a.getConfig)(),o=i.api,s=r.rawResponse,u=void 0!==s&&s,r.timeout,c=r.properties,r.trace,r.skipBL,l={},f=(0,h.formatKinveyUrl)(o.protocol,o.host,this.pathname,l),(y=b(h.RequestMethod.POST,f,n)).headers.customRequestProperties=c,e.next=11,y.execute();case 11:if(v=e.sent,!0!==u){e.next=14;break}return e.abrupt("return",v);case 14:return e.abrupt("return",v.data);case 15:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=(0,r.default)(t.default.mark(function e(n){var r,i,o,s,u,c,l,f,y,v,g=arguments;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=g.length>1&&void 0!==g[1]?g[1]:{},!(0,p.default)(n)){e.next=3;break}throw new d.KinveyError("Unable to update an array of entities.","Please update entities one by one.");case 3:if(n._id){e.next=5;break}throw new d.KinveyError("The entity provided does not contain an _id. An _id is required to update the entity.",n);case 5:return i=(0,a.getConfig)(),o=i.api,s=r.rawResponse,u=void 0!==s&&s,r.timeout,c=r.properties,r.trace,r.skipBL,l={},f=(0,h.formatKinveyUrl)(o.protocol,o.host,"".concat(this.pathname,"/").concat(n._id),l),(y=b(h.RequestMethod.PUT,f,n)).headers.customRequestProperties=c,e.next=13,y.execute();case 13:if(v=e.sent,!0!==u){e.next=16;break}return e.abrupt("return",v);case 16:return e.abrupt("return",v.data);case 17:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"save",value:function(e,t){return e._id?this.update(e,t):this.create(e,t)}},{key:"remove",value:function(){var e=(0,r.default)(t.default.mark(function e(n){var r,i,o,s,u,c,l,p,y,v,g=arguments;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=g.length>1&&void 0!==g[1]?g[1]:{},!n||n instanceof f.Query){e.next=3;break}throw new d.KinveyError("Invalid query. It must be an instance of the Query class.");case 3:return i=(0,a.getConfig)(),o=i.api,s=r.rawResponse,u=void 0!==s&&s,r.timeout,c=r.properties,r.trace,r.skipBL,l=Object.assign({},n?n.toQueryObject():{},{}),p=(0,h.formatKinveyUrl)(o.protocol,o.host,this.pathname,l),(y=b(h.RequestMethod.DELETE,p)).headers.customRequestProperties=c,e.next=11,y.execute();case 11:if(v=e.sent,!0!==u){e.next=14;break}return e.abrupt("return",v);case 14:return e.abrupt("return",v.data);case 15:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"removeById",value:function(){var e=(0,r.default)(t.default.mark(function e(n){var r,i,o,s,u,c,l,f,d,p,y=arguments;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=y.length>1&&void 0!==y[1]?y[1]:{},i=(0,a.getConfig)(),o=i.api,s=r.rawResponse,u=void 0!==s&&s,r.timeout,c=r.properties,r.trace,r.skipBL,l={},f=(0,h.formatKinveyUrl)(o.protocol,o.host,"".concat(this.pathname,"/").concat(n),l),(d=b(h.RequestMethod.DELETE,f)).headers.customRequestProperties=c,e.next=9,d.execute();case 9:if(p=e.sent,!0!==u){e.next=12;break}return e.abrupt("return",p);case 12:return e.abrupt("return",p.data);case 13:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"subscribe",value:function(){var e=(0,r.default)(t.default.mark(function e(n){var r,i,o,s;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,a.getConfig)(),i=r.api,o=r.device,s=new h.KinveyRequest({method:h.RequestMethod.POST,auth:h.Auth.Session,url:(0,h.formatKinveyUrl)(i.protocol,i.host,"".concat(this.pathname,"/_subscribe")),body:{deviceId:o.id}}),e.next=4,s.execute();case 4:return l.subscribeToChannel(this.channelName,n),l.subscribeToChannel(this.personalChannelName,n),e.abrupt("return",this);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"unsubscribe",value:function(){var e=(0,r.default)(t.default.mark(function e(){var n,r,i,o;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,a.getConfig)(),r=n.api,i=n.device,o=new h.KinveyRequest({method:h.RequestMethod.POST,auth:h.Auth.Session,url:(0,h.formatKinveyUrl)(r.protocol,r.host,"".concat(this.pathname,"/_unsubscribe")),body:{deviceId:i.id}}),e.next=4,o.execute();case 4:return l.unsubscribeFromChannel(this.channelName),l.unsubscribeFromChannel(this.personalChannelName),e.abrupt("return",this);case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"collection",get:function(){return this.collectionName}},{key:"pathname",get:function(){var e=(0,a.getConfig)(),t=e.appKey;return"/".concat("appdata","/").concat(t,"/").concat(this.collectionName)}},{key:"channelName",get:function(){var e=(0,a.getConfig)(),t=e.appKey;return"".concat(t,".c-").concat(this.collectionName)}},{key:"personalChannelName",get:function(){var e=(0,u.get)();return"".concat(this.channelName,".u-").concat(e._id)}}]),e}();e.NetworkStore=g})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[t,n(9),n(10),n(1),n(3),n(2),n(4),n(25),n(12),n(13)],void 0===(o="function"==typeof(r=function(e,t,r,i,o,a,s,u,c,l){"use strict";var f=n(0);function h(e){return(0,l.default)(e)&&/^[a-z0-9-]+$/i.test(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.isValidTag=h,e.clear=function(){return p.apply(this,arguments)},e.DataStoreCache=void 0,t=f(t),r=f(r),i=f(i),o=f(o),a=f(a),s=f(s),l=f(l);var d=function(e){function t(e,n){var r;(0,i.default)(this,t);var s=(0,c.getConfig)(),u=s.appKey;if(n&&!h(n))throw new Error('A tag can only contain letters, numbers, and "-".');return r=n?(0,o.default)(this,(0,a.default)(t).call(this,u,"".concat(e,".").concat(n))):(0,o.default)(this,(0,a.default)(t).call(this,u,e)),(0,o.default)(r)}return(0,s.default)(t,e),t}(u.Cache);function p(){return(p=(0,r.default)(t.default.mark(function e(){var n,r;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,c.getConfig)(),r=n.appKey,e.next=3,(0,u.clear)(r);case 3:return e.abrupt("return",null);case 4:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}e.DataStoreCache=d})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){"use strict";(function(t){var r=n(11),i=n(167),o={"Content-Type":"application/x-www-form-urlencoded"};function a(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var s={adapter:function(){var e;return"undefined"!=typeof XMLHttpRequest?e=n(58):void 0!==t&&(e=n(58)),e}(),transformRequest:[function(e,t){return i(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(a(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)?(a(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],function(e){s.headers[e]={}}),r.forEach(["post","put","patch"],function(e){s.headers[e]=r.merge(o)}),e.exports=s}).call(this,n(57))},function(e,t,n){var r,i,o;i=[t,n(1),n(8),n(21),n(7)],void 0===(o="function"==typeof(r=function(e,t,r,i,o){"use strict";var a=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.Kmd=void 0,t=a(t),r=a(r),i=a(i);var s=function(){function e(n){if((0,t.default)(this,e),!(0,i.default)(n))throw new o.KinveyError("entity argument must be an object");n._kmd=n._kmd||{},this.entity=n}return(0,r.default)(e,[{key:"isEmailConfirmed",value:function(){return!!this.emailVerification&&"confirmed"===this.emailVerification.status}},{key:"isLocal",value:function(){return!0===this.entity._kmd.local}},{key:"toPlainObject",value:function(){return this.entity._kmd}},{key:"authtoken",get:function(){return this.entity._kmd.authtoken}},{key:"ect",get:function(){return this.createdAt}},{key:"createdAt",get:function(){if(this.entity._kmd.ect)return new Date(this.entity._kmd.ect)}},{key:"lmt",get:function(){return this.updatedAt}},{key:"lastModified",get:function(){return this.updatedAt}},{key:"updatedAt",get:function(){if(this.entity._kmd.lmt)return new Date(this.entity._kmd.lmt)}},{key:"emailVerification",get:function(){if(this.entity._kmd.emailVerification)return this.entity._kmd.emailVerification.status}}]),e}();e.Kmd=s})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r=n(15).Symbol;e.exports=r},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(this,n(22))},function(e,t){e.exports=function(e,t){return function(n){return e(t(n))}}},function(e,t,n){var r,i,o;i=[t],void 0===(o="function"==typeof(r=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.register=function(e){e&&(t=e)},e.open=function(e){return t.open(e)};var t={open:function(){throw new Error("You must override the default popup.")}}})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[t,n(33),n(7)],void 0===(o="function"==typeof(r=function(e,t,n){"use strict";function r(e,n){var r=t.Base64.encode("".concat(e,":").concat(n));return"Basic ".concat(r)}function i(e,n){var r=t.Base64.encode("".concat(e,":").concat(n));return"Basic ".concat(r)}function o(e,t,n){try{return r(e,t)}catch(t){return i(e,n)}}Object.defineProperty(e,"__esModule",{value:!0}),e.app=r,e.master=i,e.session=function(e){if(!e||!e._kmd||!e._kmd.authtoken)throw new n.ActiveUserError("There is no active user to authorize the request. Please login and retry the request.");return"Kinvey ".concat(e._kmd.authtoken)},e.basic=o,e.defaultAuth=function(e,t,n){try{return e(e)}catch(e){return i(t,n)}},e.all=function(e,t,n,r){try{return e(e)}catch(e){return o(t,n,r)}},e.Auth=void 0,e.Auth={All:"All",App:"App",Basic:"Basic",Default:"Default",Master:"Master",Session:"Session"}})?r.apply(t,i):r)||(e.exports=o)},function(e,t){var n=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}},function(e,t){var n=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return n.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,t){var n=9007199254740991;e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){n(2);var r=n(143);function i(t,n,o){return"undefined"!=typeof Reflect&&Reflect.get?e.exports=i=Reflect.get:e.exports=i=function(e,t,n){var i=r(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}},i(t,n,o||t)}e.exports=i},function(e,t,n){var r,i,o;i=[t,n(1),n(8),n(7),n(34),n(35)],void 0===(o="function"==typeof(r=function(e,t,r,i,o,a){"use strict";var s=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.Response=void 0,t=s(t),r=s(r);var u={Ok:200,Created:201,Empty:204,MovedPermanently:301,Found:302,NotModified:304,TemporaryRedirect:307,PermanentRedirect:308,Unauthorized:401,Forbidden:403,NotFound:404,ServerError:500},c=function(){function e(n){(0,t.default)(this,e),this.statusCode=n.statusCode,this.headers=n.headers,this.data=n.data}return(0,r.default)(e,[{key:"isSuccess",value:function(){return this.statusCode>=200&&this.statusCode<300||this.statusCode===u.MovedPermanently||this.statusCode===u.Found||this.statusCode===u.NotModified||this.statusCode===u.TemporaryRedirect||this.statusCode===u.PermanentRedirect}},{key:"headers",get:function(){return this._headers},set:function(e){this._headers=new o.Headers(e)}},{key:"data",get:function(){return this._data},set:function(e){this._data=(0,a.parse)(this.headers.contentType,e)}},{key:"error",get:function(){if(!this.isSuccess()){var e=this.data||{},t=e.name||e.error,n=e.message||e.description,r=e.debug,o=this.statusCode,a=this.headers.get("X-Kinvey-Request-ID");return"ESOCKETTIMEDOUT"===o||"ETIMEDOUT"===o?new i.TimeoutError("The network request timed out."):"ENOENT"===o?new i.NetworkConnectionError("You do not have a network connection."):"APIVersionNotAvailable"===t?new i.APIVersionNotAvailableError(n,r,o,a):"APIVersionNotImplemented"===t?new i.APIVersionNotImplementedError(n,r,o,a):"AppProblem"===t?new i.AppProblemError(n,r,o,a):"AppProblem"===t?new i.AppProblemError(n,r,o,a):"BadRequest"===t?new i.BadRequestError(n,r,o,a):"BLInternalError"===t||"BLRuntimeError"===t||"BLSyntaxError"===t||"BLTimeoutError"===t||"BLViolationError"===t?new i.BLError(n,r,o,a):"CORSDisabled"===t?new i.CORSDisabledError(n,r,o,a):"DuplicateEndUsers"===t?new i.DuplicateEndUsersError(n,r,o,a):"FeatureUnavailable"===t?new i.FeatureUnavailableError(n,r,o,a):"IncompleteRequestBody"===t?new i.IncompleteRequestBodyError(n,r,o,a):"IndirectCollectionAccessDisallowed"===t?new i.IndirectCollectionAccessDisallowedError(n,r,o,a):"InsufficientCredentials"===t?new i.InsufficientCredentialsError(n,r,o,a):"InvalidCredentials"===t?new i.InvalidCredentialsError(n,r,o,a):"InvalidIdentifier"===t?new i.InvalidIdentifierError(n,r,o,a):"InvalidQuerySyntax"===t?new i.InvalidQuerySyntaxError(n,r,o,a):"JSONParseError"===t?new i.JSONParseError(n,r,o,a):"KinveyInternalErrorRetry"===t?new i.KinveyInternalErrorRetry(n,r,o,a):"KinveyInternalErrorStop"===t?new i.KinveyInternalErrorStop(n,r,o,a):"MissingQuery"===t?new i.MissingQueryError(n,r,o,a):"MissingRequestHeader"===t?new i.MissingRequestHeaderError(n,r,o,a):"MissingRequestParameter"===t?new i.MissingRequestParameterError(n,r,o,a):"MissingConfiguration"===t?new i.MissingConfigurationError(n,r,o,a):"EntityNotFound"===t||"CollectionNotFound"===t||"AppNotFound"===t||"UserNotFound"===t||"BlobNotFound"===t||"DocumentNotFound"===t?new i.NotFoundError(n,r,o,a):"ParameterValueOutOfRange"===t?new i.ParameterValueOutOfRangeError(n,r,o,a):"ResultSetSizeExceeded"===t?new i.ResultSetSizeExceededError(n,r,o,a):"ServerError"===t?new i.ServerError(n,r,o,a):"StaleRequest"===t?new i.StaleRequestError(n,r,o,a):"UserAlreadyExists"===t?new i.UserAlreadyExistsError(n,r,o,a):"WritesToCollectionDisallowed"===t?new i.WritesToCollectionDisallowedError(n,r,o,a):o===u.Unauthorized||o===u.Forbidden?new i.InsufficientCredentialsError(n,r,o,a):o===u.NotFound?new i.NotFoundError(n,r,o,a):o===u.ServerError?new i.ServerError(n,r,o,a):new i.KinveyError(n,r,o,a)}return null}}]),e}();e.Response=c})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[t,n(9),n(10),n(13),n(7),n(39),n(38),n(149)],void 0===(o="function"==typeof(r=function(e,t,r,i,o,a,s,u){"use strict";var c=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.collection=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.Cache,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=r&&"tag"in r;if(null==e||!(0,i.default)(e))throw new o.KinveyError("A collection is required and must be a string.");if(c&&!(0,a.isValidTag)(r.tag))throw new o.KinveyError("Please provide a valid data store tag.");if(n===l.Network){if(c)throw new o.KinveyError('The tagged option is not valid for data stores of type "Network"');t=new s.NetworkStore(e)}else if(n===l.Cache)t=new u.CacheStore(e,Object.assign({},r,{autoSync:!0}));else{if(n!==l.Sync)throw new Error("Unknown data store type.");t=new u.CacheStore(e,Object.assign({},r,{autoSync:!1}))}return t},e.getInstance=function(e,t,n){return e(e,t,n)},e.clear=f,e.clearCache=function(){return d.apply(this,arguments)},e.DataStoreType=void 0,t=c(t),r=c(r),i=c(i);var l={Cache:"Cache",Network:"Network",Sync:"Sync"};function f(){return h.apply(this,arguments)}function h(){return(h=(0,r.default)(t.default.mark(function e(){return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,a.clear)());case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function d(){return(d=(0,r.default)(t.default.mark(function e(){return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f());case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}e.DataStoreType=l})?r.apply(t,i):r)||(e.exports=o)},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function i(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!function(e){return"number"==typeof e}(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,a,s,u,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var l=new Error('Uncaught, unspecified "error" event. ('+t+")");throw l.context=t,l}if(o(n=this._events[e]))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(i(n))for(s=Array.prototype.slice.call(arguments,1),a=(c=n.slice()).length,u=0;u<a;u++)c[u].apply(this,s);return!0},n.prototype.addListener=function(e,t){var a;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(a=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&a>0&&this._events[e].length>a&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){if(!r(t))throw TypeError("listener must be a function");var n=!1;function i(){this.removeListener(e,i),n||(n=!0,t.apply(this,arguments))}return i.listener=t,this.on(e,i),this},n.prototype.removeListener=function(e,t){var n,o,a,s;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(a=(n=this._events[e]).length,o=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(n)){for(s=a;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){o=s;break}if(o<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,n){var r,i,o;i=[t,n(1),n(8),n(21),n(7)],void 0===(o="function"==typeof(r=function(e,t,r,i,o){"use strict";var a=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.Acl=void 0,t=a(t),r=a(r),i=a(i);var s=function(){function e(n){if((0,t.default)(this,e),!(0,i.default)(n))throw new o.KinveyError("entity must be an object.");n._acl=n._acl||{},this.entity=n}return(0,r.default)(e,[{key:"addReader",value:function(e){var t=this.readers;return-1===t.indexOf(e)&&t.push(e),this.entity._acl.r=t,this}},{key:"addReaderGroup",value:function(e){var t=this.readerGroups;return-1===t.indexOf(e)&&t.push(e),this.entity._acl=Object.assign({},this.entity._acl,{groups:{}}),this.entity._acl.groups=Object.assign({},this.entity._acl.groups,{r:t}),this}},{key:"addWriter",value:function(e){var t=this.writers;return-1===t.indexOf(e)&&t.push(e),this.entity._acl.w=t,this}},{key:"addWriterGroup",value:function(e){var t=this.writerGroups;return-1===t.indexOf(e)&&t.push(e),this.entity._acl=Object.assign({},this.entity._acl,{groups:{}}),this.entity._acl.groups=Object.assign({},this.entity._acl.groups,{w:t}),this}},{key:"isGloballyReadable",value:function(){return!0===this.entity._acl.gr}},{key:"isGloballyWritable",value:function(){return!0===this.entity._acl.gw}},{key:"removeReader",value:function(e){var t=this.readers,n=t.indexOf(e);return-1!==n&&t.splice(n,1),this.entity._acl.r=t,this}},{key:"removeReaderGroup",value:function(e){var t=this.readerGroups,n=t.indexOf(e);return-1!==n&&t.splice(n,1),this.entity._acl.groups=Object.assign({},this.entity._acl.groups,{r:t}),this}},{key:"removeWriter",value:function(e){var t=this.writers,n=t.indexOf(e);return-1!==n&&t.splice(n,1),this.entity._acl.w=t,this}},{key:"removeWriterGroup",value:function(e){var t=this.writerGroups,n=t.indexOf(e);return-1!==n&&t.splice(n,1),this.entity._acl.groups=Object.assign({},this.entity._acl.groups,{w:t}),this}},{key:"toPlainObject",value:function(){return this.entity._acl}},{key:"creator",get:function(){return this.entity._acl.creator}},{key:"readers",get:function(){return Array.isArray(this.entity._acl.r)?this.entity._acl.r:[]}},{key:"writers",get:function(){return Array.isArray(this.entity._acl.w)?this.entity._acl.w:[]}},{key:"readerGroups",get:function(){return this.entity._acl.groups&&Array.isArray(this.entity._acl.groups.r)?this.entity._acl.groups.r:[]}},{key:"writerGroups",get:function(){return this.entity._acl.groups&&Array.isArray(this.entity._acl.groups.w)?this.entity._acl.groups.w:[]}},{key:"globallyReadable",set:function(e){this.entity._acl.gr=!0===e}},{key:"globallyWritable",set:function(e){this.entity._acl.gw=!0===e}}]),e}();e.Acl=s})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var u,c=[],l=!1,f=-1;function h(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&d())}function d(){if(!l){var e=s(h);l=!0;for(var t=c.length;t;){for(u=c,c=[];++f<t;)u&&u[f].run();f=-1,t=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function y(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||l||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=y,i.addListener=y,i.once=y,i.off=y,i.removeListener=y,i.removeAllListeners=y,i.emit=y,i.prependListener=y,i.prependOnceListener=y,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";var r=n(11),i=n(168),o=n(170),a=n(171),s=n(172),u=n(59),c="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||n(173);e.exports=function(e){return new Promise(function(t,l){var f=e.data,h=e.headers;r.isFormData(f)&&delete h["Content-Type"];var d=new XMLHttpRequest,p="onreadystatechange",y=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in d||s(e.url)||(d=new window.XDomainRequest,p="onload",y=!0,d.onprogress=function(){},d.ontimeout=function(){}),e.auth){var v=e.auth.username||"",b=e.auth.password||"";h.Authorization="Basic "+c(v+":"+b)}if(d.open(e.method.toUpperCase(),o(e.url,e.params,e.paramsSerializer),!0),d.timeout=e.timeout,d[p]=function(){if(d&&(4===d.readyState||y)&&(0!==d.status||d.responseURL&&0===d.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in d?a(d.getAllResponseHeaders()):null,r={data:e.responseType&&"text"!==e.responseType?d.response:d.responseText,status:1223===d.status?204:d.status,statusText:1223===d.status?"No Content":d.statusText,headers:n,config:e,request:d};i(t,l,r),d=null}},d.onerror=function(){l(u("Network Error",e,null,d)),d=null},d.ontimeout=function(){l(u("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",d)),d=null},r.isStandardBrowserEnv()){var g=n(174),m=(e.withCredentials||s(e.url))&&e.xsrfCookieName?g.read(e.xsrfCookieName):void 0;m&&(h[e.xsrfHeaderName]=m)}if("setRequestHeader"in d&&r.forEach(h,function(e,t){void 0===f&&"content-type"===t.toLowerCase()?delete h[t]:d.setRequestHeader(t,e)}),e.withCredentials&&(d.withCredentials=!0),e.responseType)try{d.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&d.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&d.upload&&d.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){d&&(d.abort(),l(e),d=null)}),void 0===f&&(f=null),d.send(f)})}},function(e,t,n){"use strict";var r=n(169);e.exports=function(e,t,n,i,o){var a=new Error(e);return r(a,t,n,i,o)}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,t,n){var r,i,o;i=[n(55),n(36),n(53),n(41),n(17),n(197),n(198),n(161),n(109)],void 0===(o="function"==typeof(r=function(t,r,i,o,a,s,u,c,l){"use strict";var f=n(20);i=f(i),s=f(s),c=f(c);var h={Acl:t.Acl,Aggregation:r.Aggregation,DataStore:i,DataStoreType:i.DataStoreType,CustomEndpoint:u.endpoint,Files:s,Kmd:o.Kmd,Metadata:o.Kmd,Query:a.Query,User:l.User,AuthorizationGrant:l.User.AuthorizationGrant};Object.keys(c).forEach(function(e){h[e]=c[e]}),e.exports=h})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r=n(42),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(e){}var i=a.call(e);return r&&(t?e[s]=n:delete e[s]),i}},function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},function(e,t,n){var r=n(44)(Object.getPrototypeOf,Object);e.exports=r},function(e,t,n){var r,i,o;i=[t,n(1),n(3),n(2),n(4),n(5),n(6)],void 0===(o="function"==typeof(r=function(e,t,r,i,o,a,s){"use strict";var u=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=u(t),r=u(r),i=u(i),o=u(o),a=u(a);var c=function(e){function n(){var e,o,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"An error occurred.";(0,t.default)(this,n);for(var u=arguments.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=arguments[l];return o=(0,r.default)(this,(e=(0,i.default)(n)).call.apply(e,[this,s].concat(c))),Error.captureStackTrace&&Error.captureStackTrace((0,a.default)((0,a.default)(o)),n),o.name="KinveyError",o}return(0,o.default)(n,e),n}((s=u(s)).default);e.default=c})?r.apply(t,i):r)||(e.exports=o)},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(t){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?e.exports=r=function(e){return n(e)}:e.exports=r=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},r(t)}e.exports=r},function(e,t,n){var r=n(2),i=n(30),o=n(69),a=n(70);function s(t){var n="function"==typeof Map?new Map:void 0;return e.exports=s=function(e){if(null===e||!o(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return a(e,arguments,r(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i(t,e)},s(t)}e.exports=s},function(e,t){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}},function(e,t,n){var r=n(30);function i(t,n,o){return!function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?e.exports=i=function(e,t,n){var i=[null];i.push.apply(i,t);var o=new(Function.bind.apply(e,i));return n&&r(o,n.prototype),o}:e.exports=i=Reflect.construct,i.apply(null,arguments)}e.exports=i},function(e,t,n){var r,i,o;i=[t,n(1),n(3),n(2),n(4),n(5),n(6)],void 0===(o="function"==typeof(r=function(e,t,r,i,o,a,s){"use strict";var u=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=u(t),r=u(r),i=u(i),o=u(o),a=u(a);var c=function(e){function n(){var e,o,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"This collection is configured to disallow any modifications to an existing entity or creation of new entities.";(0,t.default)(this,n);for(var u=arguments.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=arguments[l];return o=(0,r.default)(this,(e=(0,i.default)(n)).call.apply(e,[this,s].concat(c))),Error.captureStackTrace&&Error.captureStackTrace((0,a.default)((0,a.default)(o)),n),o.name="WritesToCollectionDisallowedError",o}return(0,o.default)(n,e),n}((s=u(s)).default);e.default=c})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[t,n(1),n(3),n(2),n(4),n(5),n(6)],void 0===(o="function"==typeof(r=function(e,t,r,i,o,a,s){"use strict";var u=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=u(t),r=u(r),i=u(i),o=u(o),a=u(a);var c=function(e){function n(){var e,o,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"An active user already exists.";(0,t.default)(this,n);for(var u=arguments.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=arguments[l];return o=(0,r.default)(this,(e=(0,i.default)(n)).call.apply(e,[this,s].concat(c))),Error.captureStackTrace&&Error.captureStackTrace((0,a.default)((0,a.default)(o)),n),o.name="ActiveUserError",o}return(0,o.default)(n,e),n}((s=u(s)).default);e.default=c})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[t,n(1),n(3),n(2),n(4),n(5),n(6)],void 0===(o="function"==typeof(r=function(e,t,r,i,o,a,s){"use strict";var u=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=u(t),r=u(r),i=u(i),o=u(o),a=u(a);var c=function(e){function n(){var e,o,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"This API version is not available for your app.";(0,t.default)(this,n);for(var u=arguments.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=arguments[l];return o=(0,r.default)(this,(e=(0,i.default)(n)).call.apply(e,[this,s].concat(c))),Error.captureStackTrace&&Error.captureStackTrace((0,a.default)((0,a.default)(o)),n),o.name="APIVersionNotAvailableError",o}return(0,o.default)(n,e),n}((s=u(s)).default);e.default=c})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[t,n(1),n(3),n(2),n(4),n(5),n(6)],void 0===(o="function"==typeof(r=function(e,t,r,i,o,a,s){"use strict";var u=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=u(t),r=u(r),i=u(i),o=u(o),a=u(a);var c=function(e){function n(){var e,o,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"This API version is not implemented.";(0,t.default)(this,n);for(var u=arguments.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=arguments[l];return o=(0,r.default)(this,(e=(0,i.default)(n)).call.apply(e,[this,s].concat(c))),Error.captureStackTrace&&Error.captureStackTrace((0,a.default)((0,a.default)(o)),n),o.name="APIVersionNotImplementedError",o}return(0,o.default)(n,e),n}((s=u(s)).default);e.default=c})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[t,n(1),n(3),n(2),n(4),n(5),n(6)],void 0===(o="function"==typeof(r=function(e,t,r,i,o,a,s){"use strict";var u=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=u(t),r=u(r),i=u(i),o=u(o),a=u(a);var c=function(e){function n(){var e,o,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"There is a problem with this app backend that prevents execution of this operation. Please contact support@kinvey.com for assistance.";(0,t.default)(this,n);for(var u=arguments.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=arguments[l];return o=(0,r.default)(this,(e=(0,i.default)(n)).call.apply(e,[this,s].concat(c))),Error.captureStackTrace&&Error.captureStackTrace((0,a.default)((0,a.default)(o)),n),o.name="AppProblemError",o}return(0,o.default)(n,e),n}((s=u(s)).default);e.default=c})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[t,n(1),n(3),n(2),n(4),n(5),n(6)],void 0===(o="function"==typeof(r=function(e,t,r,i,o,a,s){"use strict";var u=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=u(t),r=u(r),i=u(i),o=u(o),a=u(a);var c=function(e){function n(){var e,o,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unable to understand request.";(0,t.default)(this,n);for(var u=arguments.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=arguments[l];return o=(0,r.default)(this,(e=(0,i.default)(n)).call.apply(e,[this,s].concat(c))),Error.captureStackTrace&&Error.captureStackTrace((0,a.default)((0,a.default)(o)),n),o.name="BadRequestError",o}return(0,o.default)(n,e),n}((s=u(s)).default);e.default=c})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[t,n(1),n(3),n(2),n(4),n(5),n(6)],void 0===(o="function"==typeof(r=function(e,t,r,i,o,a,s){"use strict";var u=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=u(t),r=u(r),i=u(i),o=u(o),a=u(a);var c=function(e){function n(){var e,o,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"The Business Logic script did not complete.";(0,t.default)(this,n);for(var u=arguments.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=arguments[l];return o=(0,r.default)(this,(e=(0,i.default)(n)).call.apply(e,[this,s].concat(c))),Error.captureStackTrace&&Error.captureStackTrace((0,a.default)((0,a.default)(o)),n),o.name="BLError",o}return(0,o.default)(n,e),n}((s=u(s)).default);e.default=c})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[t,n(1),n(3),n(2),n(4),n(5),n(6)],void 0===(o="function"==typeof(r=function(e,t,r,i,o,a,s){"use strict";var u=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=u(t),r=u(r),i=u(i),o=u(o),a=u(a);var c=function(e){function n(){var e,o,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Cross Origin Support is disabled for this application.";(0,t.default)(this,n);for(var u=arguments.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=arguments[l];return o=(0,r.default)(this,(e=(0,i.default)(n)).call.apply(e,[this,s].concat(c))),Error.captureStackTrace&&Error.captureStackTrace((0,a.default)((0,a.default)(o)),n),o.name="CORSDisabledError",o}return(0,o.default)(n,e),n}((s=u(s)).default);e.default=c})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[t,n(1),n(3),n(2),n(4),n(5),n(6)],void 0===(o="function"==typeof(r=function(e,t,r,i,o,a,s){"use strict";var u=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=u(t),r=u(r),i=u(i),o=u(o),a=u(a);var c=function(e){function n(){var e,o,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"More than one user registered with this username for this application.";(0,t.default)(this,n);for(var u=arguments.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=arguments[l];return o=(0,r.default)(this,(e=(0,i.default)(n)).call.apply(e,[this,s].concat(c))),Error.captureStackTrace&&Error.captureStackTrace((0,a.default)((0,a.default)(o)),n),o.name="DuplicateEndUsersError",o}return(0,o.default)(n,e),n}((s=u(s)).default);e.default=c})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[t,n(1),n(3),n(2),n(4),n(5),n(6)],void 0===(o="function"==typeof(r=function(e,t,r,i,o,a,s){"use strict";var u=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=u(t),r=u(r),i=u(i),o=u(o),a=u(a);var c=function(e){function n(){var e,o,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Requested functionality is unavailable in this API version.";(0,t.default)(this,n);for(var u=arguments.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=arguments[l];return o=(0,r.default)(this,(e=(0,i.default)(n)).call.apply(e,[this,s].concat(c))),Error.captureStackTrace&&Error.captureStackTrace((0,a.default)((0,a.default)(o)),n),o.name="FeatureUnavailableError",o}return(0,o.default)(n,e),n}((s=u(s)).default);e.default=c})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[t,n(1),n(3),n(2),n(4),n(5),n(6)],void 0===(o="function"==typeof(r=function(e,t,r,i,o,a,s){"use strict";var u=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=u(t),r=u(r),i=u(i),o=u(o),a=u(a);var c=function(e){function n(){var e,o,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"The request body is either missing or incomplete.";(0,t.default)(this,n);for(var u=arguments.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=arguments[l];return o=(0,r.default)(this,(e=(0,i.default)(n)).call.apply(e,[this,s].concat(c))),Error.captureStackTrace&&Error.captureStackTrace((0,a.default)((0,a.default)(o)),n),o.name="IncompleteRequestBodyError",o}return(0,o.default)(n,e),n}((s=u(s)).default);e.default=c})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[t,n(1),n(3),n(2),n(4),n(5),n(6)],void 0===(o="function"==typeof(r=function(e,t,r,i,o,a,s){"use strict";var u=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=u(t),r=u(r),i=u(i),o=u(o),a=u(a);var c=function(e){function n(){var e,o,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Please use the appropriate API to access this collection for this app backend.";(0,t.default)(this,n);for(var u=arguments.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=arguments[l];return o=(0,r.default)(this,(e=(0,i.default)(n)).call.apply(e,[this,s].concat(c))),Error.captureStackTrace&&Error.captureStackTrace((0,a.default)((0,a.default)(o)),n),o.name="IndirectCollectionAccessDisallowedError",o}return(0,o.default)(n,e),n}((s=u(s)).default);e.default=c})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[t,n(1),n(3),n(2),n(4),n(5),n(6)],void 0===(o="function"==typeof(r=function(e,t,r,i,o,a,s){"use strict";var u=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=u(t),r=u(r),i=u(i),o=u(o),a=u(a);var c=function(e){function n(){var e,o,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"The credentials used to authenticate this request are not authorized to run this operation. Please retry your request with appropriate credentials.";(0,t.default)(this,n);for(var u=arguments.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=arguments[l];return o=(0,r.default)(this,(e=(0,i.default)(n)).call.apply(e,[this,s].concat(c))),Error.captureStackTrace&&Error.captureStackTrace((0,a.default)((0,a.default)(o)),n),o.name="InsufficientCredentialsError",o}return(0,o.default)(n,e),n}((s=u(s)).default);e.default=c})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[t,n(1),n(3),n(2),n(4),n(5),n(6)],void 0===(o="function"==typeof(r=function(e,t,r,i,o,a,s){"use strict";var u=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=u(t),r=u(r),i=u(i),o=u(o),a=u(a);var c=function(e){function n(){var e,o,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Invalid cached query.";(0,t.default)(this,n);for(var u=arguments.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=arguments[l];return o=(0,r.default)(this,(e=(0,i.default)(n)).call.apply(e,[this,s].concat(c))),Error.captureStackTrace&&Error.captureStackTrace((0,a.default)((0,a.default)(o)),n),o.name="InvalidCachedQuery",o}return(0,o.default)(n,e),n}((s=u(s)).default);e.default=c})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[t,n(1),n(3),n(2),n(4),n(5),n(6)],void 0===(o="function"==typeof(r=function(e,t,r,i,o,a,s){"use strict";var u=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=u(t),r=u(r),i=u(i),o=u(o),a=u(a);var c=function(e){function n(){var e,o,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Invalid credentials. Please retry your request with correct credentials.";(0,t.default)(this,n);for(var u=arguments.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=arguments[l];return o=(0,r.default)(this,(e=(0,i.default)(n)).call.apply(e,[this,s].concat(c))),Error.captureStackTrace&&Error.captureStackTrace((0,a.default)((0,a.default)(o)),n),o.name="InvalidCredentialsError",o}return(0,o.default)(n,e),n}((s=u(s)).default);e.default=c})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[t,n(1),n(3),n(2),n(4),n(5),n(6)],void 0===(o="function"==typeof(r=function(e,t,r,i,o,a,s){"use strict";var u=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=u(t),r=u(r),i=u(i),o=u(o),a=u(a);var c=function(e){function n(){var e,o,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"One of more identifier names in the request has an invalid format.";(0,t.default)(this,n);for(var u=arguments.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=arguments[l];return o=(0,r.default)(this,(e=(0,i.default)(n)).call.apply(e,[this,s].concat(c))),Error.captureStackTrace&&Error.captureStackTrace((0,a.default)((0,a.default)(o)),n),o.name="InvalidIdentifierError",o}return(0,o.default)(n,e),n}((s=u(s)).default);e.default=c})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[t,n(1),n(3),n(2),n(4),n(5),n(6)],void 0===(o="function"==typeof(r=function(e,t,r,i,o,a,s){"use strict";var u=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=u(t),r=u(r),i=u(i),o=u(o),a=u(a);var c=function(e){function n(){var e,o,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"The query string in the request has an invalid syntax.";(0,t.default)(this,n);for(var u=arguments.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=arguments[l];return o=(0,r.default)(this,(e=(0,i.default)(n)).call.apply(e,[this,s].concat(c))),Error.captureStackTrace&&Error.captureStackTrace((0,a.default)((0,a.default)(o)),n),o.name="InvalidQuerySyntaxError",o}return(0,o.default)(n,e),n}((s=u(s)).default);e.default=c})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[t,n(1),n(3),n(2),n(4),n(5),n(6)],void 0===(o="function"==typeof(r=function(e,t,r,i,o,a,s){"use strict";var u=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=u(t),r=u(r),i=u(i),o=u(o),a=u(a);var c=function(e){function n(){var e,o,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unable to parse the JSON in the request.";(0,t.default)(this,n);for(var u=arguments.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=arguments[l];return o=(0,r.default)(this,(e=(0,i.default)(n)).call.apply(e,[this,s].concat(c))),Error.captureStackTrace&&Error.captureStackTrace((0,a.default)((0,a.default)(o)),n),o.name="JSONParseError",o}return(0,o.default)(n,e),n}((s=u(s)).default);e.default=c})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[t,n(1),n(3),n(2),n(4),n(5),n(6)],void 0===(o="function"==typeof(r=function(e,t,r,i,o,a,s){"use strict";var u=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=u(t),r=u(r),i=u(i),o=u(o),a=u(a);var c=function(e){function n(){var e,o,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"This username is already taken. Please retry your request with a different username.";(0,t.default)(this,n);for(var u=arguments.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=arguments[l];return o=(0,r.default)(this,(e=(0,i.default)(n)).call.apply(e,[this,s].concat(c))),Error.captureStackTrace&&Error.captureStackTrace((0,a.default)((0,a.default)(o)),n),o.name="UserAlreadyExistsError",o}return(0,o.default)(n,e),n}((s=u(s)).default);e.default=c})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[t,n(1),n(3),n(2),n(4),n(5),n(6)],void 0===(o="function"==typeof(r=function(e,t,r,i,o,a,s){"use strict";var u=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=u(t),r=u(r),i=u(i),o=u(o),a=u(a);var c=function(e){function n(){var e,o,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"The Kinvey server encountered an unexpected error. Please retry your request.";(0,t.default)(this,n);for(var u=arguments.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=arguments[l];return o=(0,r.default)(this,(e=(0,i.default)(n)).call.apply(e,[this,s].concat(c))),Error.captureStackTrace&&Error.captureStackTrace((0,a.default)((0,a.default)(o)),n),o.name="KinveyInternalErrorRetry",o}return(0,o.default)(n,e),n}((s=u(s)).default);e.default=c})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[t,n(1),n(3),n(2),n(4),n(5),n(6)],void 0===(o="function"==typeof(r=function(e,t,r,i,o,a,s){"use strict";var u=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=u(t),r=u(r),i=u(i),o=u(o),a=u(a);var c=function(e){function n(){var e,o,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"The Kinvey server encountered an unexpected error. Please contact support@kinvey.com for assistance.";(0,t.default)(this,n);for(var u=arguments.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=arguments[l];return o=(0,r.default)(this,(e=(0,i.default)(n)).call.apply(e,[this,s].concat(c))),Error.captureStackTrace&&Error.captureStackTrace((0,a.default)((0,a.default)(o)),n),o.name="KinveyInternalErrorStop",o}return(0,o.default)(n,e),n}((s=u(s)).default);e.default=c})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[t,n(1),n(3),n(2),n(4),n(5),n(6)],void 0===(o="function"==typeof(r=function(e,t,r,i,o,a,s){"use strict";var u=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=u(t),r=u(r),i=u(i),o=u(o),a=u(a);var c=function(e){function n(){var e,o,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Missing configuration error.";(0,t.default)(this,n);for(var u=arguments.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=arguments[l];return o=(0,r.default)(this,(e=(0,i.default)(n)).call.apply(e,[this,s].concat(c))),Error.captureStackTrace&&Error.captureStackTrace((0,a.default)((0,a.default)(o)),n),o.name="MissingConfigurationError",o}return(0,o.default)(n,e),n}((s=u(s)).default);e.default=c})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[t,n(1),n(3),n(2),n(4),n(5),n(6)],void 0===(o="function"==typeof(r=function(e,t,r,i,o,a,s){"use strict";var u=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=u(t),r=u(r),i=u(i),o=u(o),a=u(a);var c=function(e){function n(){var e,o,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"The request is missing a query string.";(0,t.default)(this,n);for(var u=arguments.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=arguments[l];return o=(0,r.default)(this,(e=(0,i.default)(n)).call.apply(e,[this,s].concat(c))),Error.captureStackTrace&&Error.captureStackTrace((0,a.default)((0,a.default)(o)),n),o.name="MissingQueryError",o}return(0,o.default)(n,e),n}((s=u(s)).default);e.default=c})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[t,n(1),n(3),n(2),n(4),n(5),n(6)],void 0===(o="function"==typeof(r=function(e,t,r,i,o,a,s){"use strict";var u=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=u(t),r=u(r),i=u(i),o=u(o),a=u(a);var c=function(e){function n(){var e,o,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"The request is missing a required header.";(0,t.default)(this,n);for(var u=arguments.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=arguments[l];return o=(0,r.default)(this,(e=(0,i.default)(n)).call.apply(e,[this,s].concat(c))),Error.captureStackTrace&&Error.captureStackTrace((0,a.default)((0,a.default)(o)),n),o.name="MissingRequestHeaderError",o}return(0,o.default)(n,e),n}((s=u(s)).default);e.default=c})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[t,n(1),n(3),n(2),n(4),n(5),n(6)],void 0===(o="function"==typeof(r=function(e,t,r,i,o,a,s){"use strict";var u=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=u(t),r=u(r),i=u(i),o=u(o),a=u(a);var c=function(e){function n(){var e,o,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"A required parameter is missing from the request.";(0,t.default)(this,n);for(var u=arguments.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=arguments[l];return o=(0,r.default)(this,(e=(0,i.default)(n)).call.apply(e,[this,s].concat(c))),Error.captureStackTrace&&Error.captureStackTrace((0,a.default)((0,a.default)(o)),n),o.name="MissingRequestParameterError",o}return(0,o.default)(n,e),n}((s=u(s)).default);e.default=c})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[t,n(1),n(3),n(2),n(4),n(5),n(6)],void 0===(o="function"==typeof(r=function(e,t,r,i,o,a,s){"use strict";var u=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=u(t),r=u(r),i=u(i),o=u(o),a=u(a);var c=function(e){function n(){var e,o,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"An error has occurred with Mobile Identity Connect.";(0,t.default)(this,n);for(var u=arguments.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=arguments[l];return o=(0,r.default)(this,(e=(0,i.default)(n)).call.apply(e,[this,s].concat(c))),Error.captureStackTrace&&Error.captureStackTrace((0,a.default)((0,a.default)(o)),n),o.name="MobileIdentityConnectError",o}return(0,o.default)(n,e),n}((s=u(s)).default);e.default=c})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[t,n(1),n(3),n(2),n(4),n(5),n(6)],void 0===(o="function"==typeof(r=function(e,t,r,i,o,a,s){"use strict";var u=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=u(t),r=u(r),i=u(i),o=u(o),a=u(a);var c=function(e){function n(){var e,o,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"There was an error connecting to the network.";(0,t.default)(this,n);for(var u=arguments.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=arguments[l];return o=(0,r.default)(this,(e=(0,i.default)(n)).call.apply(e,[this,s].concat(c))),Error.captureStackTrace&&Error.captureStackTrace((0,a.default)((0,a.default)(o)),n),o.name="NetworkConnectionError",o}return(0,o.default)(n,e),n}((s=u(s)).default);e.default=c})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[t,n(1),n(3),n(2),n(4),n(5),n(6)],void 0===(o="function"==typeof(r=function(e,t,r,i,o,a,s){"use strict";var u=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=u(t),r=u(r),i=u(i),o=u(o),a=u(a);var c=function(e){function n(){var e,o,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"There is not an active user.";(0,t.default)(this,n);for(var u=arguments.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=arguments[l];return o=(0,r.default)(this,(e=(0,i.default)(n)).call.apply(e,[this,s].concat(c))),Error.captureStackTrace&&Error.captureStackTrace((0,a.default)((0,a.default)(o)),n),o.name="NoActiveUserError",o}return(0,o.default)(n,e),n}((s=u(s)).default);e.default=c})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[t,n(1),n(3),n(2),n(4),n(5),n(6)],void 0===(o="function"==typeof(r=function(e,t,r,i,o,a,s){"use strict";var u=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=u(t),r=u(r),i=u(i),o=u(o),a=u(a);var c=function(e){function n(){var e,o,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"No response was provided.";(0,t.default)(this,n);for(var u=arguments.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=arguments[l];return o=(0,r.default)(this,(e=(0,i.default)(n)).call.apply(e,[this,s].concat(c))),Error.captureStackTrace&&Error.captureStackTrace((0,a.default)((0,a.default)(o)),n),o.name="NoResponseError",o}return(0,o.default)(n,e),n}((s=u(s)).default);e.default=c})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[t,n(1),n(3),n(2),n(4),n(5),n(6)],void 0===(o="function"==typeof(r=function(e,t,r,i,o,a,s){"use strict";var u=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=u(t),r=u(r),i=u(i),o=u(o),a=u(a);var c=function(e){function n(){var e,o,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"The entity was not found.",u=arguments.length>1?arguments[1]:void 0,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:404;(0,t.default)(this,n);for(var l=arguments.length,f=new Array(l>3?l-3:0),h=3;h<l;h++)f[h-3]=arguments[h];return o=(0,r.default)(this,(e=(0,i.default)(n)).call.apply(e,[this,s,u,c].concat(f))),Error.captureStackTrace&&Error.captureStackTrace((0,a.default)((0,a.default)(o)),n),o.name="NotFoundError",o}return(0,o.default)(n,e),n}((s=u(s)).default);e.default=c})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[t,n(1),n(3),n(2),n(4),n(5),n(6)],void 0===(o="function"==typeof(r=function(e,t,r,i,o,a,s){"use strict";var u=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=u(t),r=u(r),i=u(i),o=u(o),a=u(a);var c=function(e){function n(){var e,o,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"The value specified for one of the request parameters is out of range.";(0,t.default)(this,n);for(var u=arguments.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=arguments[l];return o=(0,r.default)(this,(e=(0,i.default)(n)).call.apply(e,[this,s].concat(c))),Error.captureStackTrace&&Error.captureStackTrace((0,a.default)((0,a.default)(o)),n),o.name="ParameterValueOutOfRangeError",o}return(0,o.default)(n,e),n}((s=u(s)).default);e.default=c})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[t,n(1),n(3),n(2),n(4),n(5),n(6)],void 0===(o="function"==typeof(r=function(e,t,r,i,o,a,s){"use strict";var u=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=u(t),r=u(r),i=u(i),o=u(o),a=u(a);var c=function(e){function n(){var e,o,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unable to open a popup on this platform.";(0,t.default)(this,n);for(var u=arguments.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=arguments[l];return o=(0,r.default)(this,(e=(0,i.default)(n)).call.apply(e,[this,s].concat(c))),Error.captureStackTrace&&Error.captureStackTrace((0,a.default)((0,a.default)(o)),n),o.name="PopupError",o}return(0,o.default)(n,e),n}((s=u(s)).default);e.default=c})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[t,n(1),n(3),n(2),n(4),n(5),n(6)],void 0===(o="function"==typeof(r=function(e,t,r,i,o,a,s){"use strict";var u=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=u(t),r=u(r),i=u(i),o=u(o),a=u(a);var c=function(e){function n(){var e,o,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"An error occurred with the query.";(0,t.default)(this,n);for(var u=arguments.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=arguments[l];return o=(0,r.default)(this,(e=(0,i.default)(n)).call.apply(e,[this,s].concat(c))),Error.captureStackTrace&&Error.captureStackTrace((0,a.default)((0,a.default)(o)),n),o.name="QueryError",o}return(0,o.default)(n,e),n}((s=u(s)).default);e.default=c})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[t,n(1),n(3),n(2),n(4),n(5),n(6)],void 0===(o="function"==typeof(r=function(e,t,r,i,o,a,s){"use strict";var u=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=u(t),r=u(r),i=u(i),o=u(o),a=u(a);var c=function(e){function n(){var e,o,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Result set size exceeded.";(0,t.default)(this,n);for(var u=arguments.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=arguments[l];return o=(0,r.default)(this,(e=(0,i.default)(n)).call.apply(e,[this,s].concat(c))),Error.captureStackTrace&&Error.captureStackTrace((0,a.default)((0,a.default)(o)),n),o.name="ResultSetSizeExceededError",o}return(0,o.default)(n,e),n}((s=u(s)).default);e.default=c})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[t,n(1),n(3),n(2),n(4),n(5),n(6)],void 0===(o="function"==typeof(r=function(e,t,r,i,o,a,s){"use strict";var u=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=u(t),r=u(r),i=u(i),o=u(o),a=u(a);var c=function(e){function n(){var e,o,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"An error occurred on the server.",u=arguments.length>1?arguments[1]:void 0,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500;(0,t.default)(this,n);for(var l=arguments.length,f=new Array(l>3?l-3:0),h=3;h<l;h++)f[h-3]=arguments[h];return o=(0,r.default)(this,(e=(0,i.default)(n)).call.apply(e,[this,s,u,c].concat(f))),Error.captureStackTrace&&Error.captureStackTrace((0,a.default)((0,a.default)(o)),n),o.name="ServerError",o}return(0,o.default)(n,e),n}((s=u(s)).default);e.default=c})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[t,n(1),n(3),n(2),n(4),n(5),n(6)],void 0===(o="function"==typeof(r=function(e,t,r,i,o,a,s){"use strict";var u=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=u(t),r=u(r),i=u(i),o=u(o),a=u(a);var c=function(e){function n(){var e,o,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"The time window for this request has expired.";(0,t.default)(this,n);for(var u=arguments.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=arguments[l];return o=(0,r.default)(this,(e=(0,i.default)(n)).call.apply(e,[this,s].concat(c))),Error.captureStackTrace&&Error.captureStackTrace((0,a.default)((0,a.default)(o)),n),o.name="StaleRequestError",o}return(0,o.default)(n,e),n}((s=u(s)).default);e.default=c})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[t,n(1),n(3),n(2),n(4),n(5),n(6)],void 0===(o="function"==typeof(r=function(e,t,r,i,o,a,s){"use strict";var u=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=u(t),r=u(r),i=u(i),o=u(o),a=u(a);var c=function(e){function n(){var e,o,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"An error occurred during sync.";(0,t.default)(this,n);for(var u=arguments.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=arguments[l];return o=(0,r.default)(this,(e=(0,i.default)(n)).call.apply(e,[this,s].concat(c))),Error.captureStackTrace&&Error.captureStackTrace((0,a.default)((0,a.default)(o)),n),o.name="SyncError",o}return(0,o.default)(n,e),n}((s=u(s)).default);e.default=c})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[t,n(1),n(3),n(2),n(4),n(5),n(6)],void 0===(o="function"==typeof(r=function(e,t,r,i,o,a,s){"use strict";var u=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=u(t),r=u(r),i=u(i),o=u(o),a=u(a);var c=function(e){function n(){var e,o,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"The request timed out.";(0,t.default)(this,n);for(var u=arguments.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=arguments[l];return o=(0,r.default)(this,(e=(0,i.default)(n)).call.apply(e,[this,s].concat(c))),Error.captureStackTrace&&Error.captureStackTrace((0,a.default)((0,a.default)(o)),n),o.name="TimeoutError",o}return(0,o.default)(n,e),n}((s=u(s)).default);e.default=c})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[t,n(110)],void 0===(o="function"==typeof(r=function(e,t){"use strict";var r=n(20);Object.defineProperty(e,"__esModule",{value:!0}),e.User=void 0;var i=(t=r(t)).User;e.User=i,Object.keys(t).forEach(function(e){var n=t[e];n!==t.User&&(i[e]=n)})})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[t,n(9),n(10),n(1),n(8),n(21),n(13),n(16),n(27),n(53),n(55),n(41),n(19),n(29),n(12),n(7),n(17),n(37),n(112),n(111)],void 0===(o="function"==typeof(r=function(e,t,r,i,o,a,s,u,c,l,f,h,d,p,y,v,b,g,m,w){"use strict";var _=n(20),x=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.getActiveUser=O,e.signup=P,e.login=A,e.loginWithMIC=function(e,t,n){return j.apply(this,arguments)},e.logout=function(){return T.apply(this,arguments)},e.me=function(){return N.apply(this,arguments)},e.update=function(e){return M.apply(this,arguments)},e.remove=function(e){return D.apply(this,arguments)},e.verifyEmail=function(e){return R.apply(this,arguments)},e.forgotUsername=function(e){return q.apply(this,arguments)},e.resetPassword=function(e){return K.apply(this,arguments)},e.lookup=function(e){return g.KinveyObservable.create(function(){var n=(0,r.default)(t.default.mark(function n(r){var i,o,a,s,u;return t.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e||e instanceof b.Query){t.next=3;break}throw new v.KinveyError("Invalid query. It must be an instance of the Query class.");case 3:return i=(0,y.getConfig)(),o=i.api,a=i.appKey,s=new d.KinveyRequest({method:d.RequestMethod.POST,auth:d.Auth.Default,url:(0,d.formatKinveyUrl)(o.protocol,o.host,"/".concat(k,"/").concat(a,"/_lookup")),body:e?e.filter:void 0}),t.next=7,s.execute();case 7:u=t.sent,r.next(u.data),r.complete(),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),r.error(t.t0);case 15:case"end":return t.stop()}},n,this,[[0,12]])}));return function(e){return n.apply(this,arguments)}}())},e.exists=function(e){return B.apply(this,arguments)},Object.defineProperty(e,"AuthorizationGrant",{enumerable:!0,get:function(){return m.AuthorizationGrant}}),e.User=void 0,t=x(t),r=x(r),i=x(i),o=x(o),a=x(a),s=x(s),u=x(u),c=x(c),m=_(m);var k="user",E="rpc",S=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,i.default)(this,e),this.data=t}return(0,o.default)(e,[{key:"isActive",value:function(){var e=(0,p.get)();return!(!e||e._id!==this._id)}},{key:"isEmailVerified",value:function(){var e=this.metadata;if(e){var t=e.emailVerification;return"confirmed"===t}return!1}},{key:"me",value:function(){var e=(0,r.default)(t.default.mark(function e(){var n,r,i,o,a,s;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,y.getConfig)(),r=n.api,i=n.appKey,o=new d.KinveyRequest({method:d.RequestMethod.GET,auth:d.Auth.Session,url:(0,d.formatKinveyUrl)(r.protocol,r.host,"/".concat(k,"/").concat(i,"/_me"))}),e.next=4,o.execute();case 4:return a=e.sent,delete(s=a.data).password,s._socialIdentity&&(s._socialIdentity=(0,w.mergeSocialIdentity)(this._socialIdentity,s._socialIdentity)),this.isActive()&&(0,p.set)(s),this.data=s,e.abrupt("return",this);case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=(0,r.default)(t.default.mark(function e(n){var r,i,o,a,s,c,l;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(0,y.getConfig)(),i=r.api,o=r.appKey,r.masterSecret,a=Object.assign({},this.data,n),n){e.next=4;break}throw new v.KinveyError("No user was provided to be updated.");case 4:if(!(0,u.default)(n)){e.next=6;break}throw new v.KinveyError("Only one user can be updated at one time.");case 6:if(a._id){e.next=8;break}throw new v.KinveyError("User must have an _id.");case 8:return s=new d.KinveyRequest({method:d.RequestMethod.PUT,auth:d.Auth.Default,url:(0,d.formatKinveyUrl)(i.protocol,i.host,"/".concat(k,"/").concat(o,"/").concat(this._id)),body:a}),e.next=11,s.execute();case 11:return c=e.sent,delete(l=c.data).password,l._socialIdentity&&(l._socialIdentity=(0,w.mergeSocialIdentity)(this._socialIdentity,l._socialIdentity)),this.isActive()&&(0,p.set)(l),this.data=l,e.abrupt("return",this);case 18:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_id",get:function(){if(this.data)return this.data._id}},{key:"_acl",get:function(){if(this.data)return new f.Acl(this.data)}},{key:"_kmd",get:function(){if(this.data)return new h.Kmd(this.data)}},{key:"metadata",get:function(){return this._kmd}},{key:"authtoken",get:function(){var e=this._kmd;if(e)return e.authtoken}},{key:"_socialIdentity",get:function(){return this.data._socialIdentity}},{key:"username",get:function(){if(this.data)return this.data.username}},{key:"email",get:function(){if(this.data)return this.data.email}}]),e}();function O(){var e=(0,p.get)();return e?new S(e):null}function P(e){return C.apply(this,arguments)}function C(){return(C=(0,r.default)(t.default.mark(function e(n){var r,i,o,a,s,u,l,f,h,b,g,m=arguments;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=m.length>1&&void 0!==m[1]?m[1]:{},i=(0,y.getConfig)(),o=i.api,a=i.appKey,s=(0,p.get)(),u=r.state,!0!==(l=void 0===u||u)||!s){e.next=6;break}throw new v.ActiveUserError("An active user already exists. Please logout the active user before you signup.");case 6:return f=(0,d.formatKinveyUrl)(o.protocol,o.host,"/".concat(k,"/").concat(a)),(h=new d.KinveyRequest({method:d.RequestMethod.POST,auth:d.Auth.App,url:f})).body=n instanceof S?(0,c.default)(n.data)?null:n.data:(0,c.default)(n)?null:n,e.next=11,h.execute();case 11:return b=e.sent,g=b.data,!0===l&&(0,p.set)(g),e.abrupt("return",new S(g));case 15:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function A(e,t){return I.apply(this,arguments)}function I(){return(I=(0,r.default)(t.default.mark(function e(n,r){var i,o,s,u,c,l,f,h;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=(0,y.getConfig)(),o=i.api,s=i.appKey,u=O(),c=n,!u){e.next=5;break}throw new v.ActiveUserError("An active user already exists. Please logout the active user before you login.");case 5:if((0,a.default)(c)||(c={username:n,password:r}),c.username&&(c.username=String(c.username).trim()),c.password&&(c.password=String(c.password).trim()),c.username&&""!==c.username&&c.password&&""!==c.password||c._socialIdentity){e.next=10;break}throw new v.KinveyError("Username and/or password missing. Please provide both a username and password to login.");case 10:return l=new d.KinveyRequest({method:d.RequestMethod.POST,auth:d.Auth.App,url:(0,d.formatKinveyUrl)(o.protocol,o.host,"/".concat(k,"/").concat(s,"/login")),body:c}),e.next=13,l.execute();case 13:return f=e.sent,delete(h=f.data).password,c._socialIdentity&&(h._socialIdentity=(0,w.mergeSocialIdentity)(c._socialIdentity,h._socialIdentity)),(0,p.set)(h),e.abrupt("return",new S(h));case 19:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function j(){return(j=(0,r.default)(t.default.mark(function e(n,r,i){var o,a,s;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!O()){e.next=3;break}throw new v.ActiveUserError("An active user already exists. Please logout the active user before you login with Mobile Identity Connect.");case 3:return e.next=5,m.login(n,r,i);case 5:return o=e.sent,(a={})[m.IDENTITY]=o,s={_socialIdentity:a},e.prev=9,e.next=12,A(s);case 12:return e.abrupt("return",e.sent);case 15:if(e.prev=15,e.t0=e.catch(9),!(e.t0 instanceof v.NotFoundError)){e.next=21;break}return e.next=20,P(s);case 20:return e.abrupt("return",e.sent);case 21:throw e.t0;case 22:case"end":return e.stop()}},e,this,[[9,15]])}))).apply(this,arguments)}function T(){return(T=(0,r.default)(t.default.mark(function e(){var n,r,i,o,a,s;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(0,y.getConfig)(),r=n.api,i=n.appKey,!(o=O())){e.next=16;break}return e.prev=3,a=(0,d.formatKinveyUrl)(r.protocol,r.host,"/".concat(k,"/").concat(i,"/_logout")),s=new d.KinveyRequest({method:d.RequestMethod.POST,auth:d.Auth.Session,url:a}),e.next=8,s.execute();case 8:e.next=12;break;case 10:e.prev=10,e.t0=e.catch(3);case 12:return(0,p.remove)(),e.next=15,(0,l.clear)();case 15:return e.abrupt("return",o);case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}},e,this,[[3,10]])}))).apply(this,arguments)}function N(){return(N=(0,r.default)(t.default.mark(function e(){var n;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=O())){e.next=3;break}return e.abrupt("return",n.me());case 3:return e.abrupt("return",null);case 4:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function M(){return(M=(0,r.default)(t.default.mark(function e(n){var r;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=O())){e.next=3;break}return e.abrupt("return",r.update(n));case 3:return e.abrupt("return",null);case 4:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function D(){return(D=(0,r.default)(t.default.mark(function e(n){var r,i,o,a,u,c,l,f,h=arguments;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=h.length>1&&void 0!==h[1]?h[1]:{},i=(0,y.getConfig)(),o=i.api,a=i.appKey,u=r.hard,n){e.next=5;break}throw new v.KinveyError("An id was not provided.");case 5:if((0,s.default)(n)){e.next=7;break}throw new v.KinveyError("The id provided is not a string.");case 7:return c=(0,d.formatKinveyUrl)(o.protocol,o.host,"/user/".concat(a,"/").concat(n),{hard:u?!0===u:void 0}),l=new d.KinveyRequest({method:d.RequestMethod.DELETE,auth:d.Auth.Default,url:c}),e.next=11,l.execute();case 11:return f=e.sent,(0,p.remove)(),e.abrupt("return",f.data);case 14:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function R(){return(R=(0,r.default)(t.default.mark(function e(n){var r,i,o,a,u;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(0,y.getConfig)(),i=r.api,o=r.appKey,n){e.next=3;break}throw new v.KinveyError("A username was not provided.");case 3:if((0,s.default)(n)){e.next=5;break}throw new v.KinveyError("The provided username is not a string.");case 5:return a=new d.KinveyRequest({method:d.RequestMethod.POST,auth:d.Auth.App,url:(0,d.formatKinveyUrl)(i.protocol,i.host,"/".concat(E,"/").concat(o,"/").concat(n,"/user-email-verification-initiate"))}),e.next=8,a.execute();case 8:return u=e.sent,e.abrupt("return",u.data);case 10:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function q(){return(q=(0,r.default)(t.default.mark(function e(n){var r,i,o,a,u;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(0,y.getConfig)(),i=r.api,o=r.appKey,n){e.next=3;break}throw new v.KinveyError("An email was not provided.");case 3:if((0,s.default)(n)){e.next=5;break}throw new v.KinveyError("The provided email is not a string.");case 5:return a=new d.KinveyRequest({method:d.RequestMethod.POST,auth:d.Auth.App,url:(0,d.formatKinveyUrl)(i.protocol,i.host,"/".concat(E,"/").concat(o,"/user-forgot-username")),body:{email:n}}),e.next=8,a.execute();case 8:return u=e.sent,e.abrupt("return",u.data);case 10:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function K(){return(K=(0,r.default)(t.default.mark(function e(n){var r,i,o,a,u;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(0,y.getConfig)(),i=r.api,o=r.appKey,n){e.next=3;break}throw new v.KinveyError("A username was not provided.");case 3:if((0,s.default)(n)){e.next=5;break}throw new v.KinveyError("The provided username is not a string.");case 5:return a=new d.KinveyRequest({method:d.RequestMethod.POST,auth:d.Auth.App,url:(0,d.formatKinveyUrl)(i.protocol,i.host,"/".concat(E,"/").concat(o,"/").concat(n,"/user-password-reset-initiate"))}),e.next=8,a.execute();case 8:return u=e.sent,e.abrupt("return",u.data);case 10:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function B(){return(B=(0,r.default)(t.default.mark(function e(n){var r,i,o,a,u;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(0,y.getConfig)(),i=r.api,o=r.appKey,n){e.next=3;break}throw new v.KinveyError("A username was not provided.");case 3:if((0,s.default)(n)){e.next=5;break}throw new v.KinveyError("The provided username is not a string.");case 5:return a=new d.KinveyRequest({method:d.RequestMethod.POST,auth:d.Auth.App,url:(0,d.formatKinveyUrl)(i.protocol,i.host,"/".concat(E,"/").concat(o,"/check-username-exists")),body:{username:n}}),e.next=8,a.execute();case 8:return u=e.sent,e.abrupt("return",!0===u.data.usernameExists);case 10:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}e.User=S})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[t],void 0===(o="function"==typeof(r=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mergeSocialIdentity=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=JSON.parse(JSON.stringify(e));return Object.keys(t).reduce(function(n,r){return n[r]=Object.assign({},e[r],t[r]),n},n)}})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[t,n(9),n(10),n(13),n(113),n(31),n(33),n(12),n(19),n(45),n(7)],void 0===(o="function"==typeof(r=function(e,t,r,i,o,a,s,u,c,l,f){"use strict";var h=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.login=function(e){return k.apply(this,arguments)},e.AuthorizationGrant=e.IDENTITY=void 0,t=h(t),r=h(r),i=h(i),o=h(o);var d="kinveyAuth";e.IDENTITY=d;var p={AuthorizationCodeLoginPage:"AuthorizationCodeLoginPage",AuthorizationCodeAPI:"AuthorizationCodeAPI"};function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;return 0===String(e).indexOf("v")?e:"v".concat(e)}function v(e,t,n){return b.apply(this,arguments)}function b(){return(b=(0,r.default)(t.default.mark(function e(n,r,i){var a,l,f,h;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,u.getConfig)(),l=a.auth,f=new c.KinveyRequest({method:c.RequestMethod.POST,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:function(){var e=(0,u.getConfig)(),t=e.appSecret,r=s.Base64.encode("".concat(n,":").concat(t));return"Basic ".concat(r)}},url:(0,c.formatKinveyUrl)(l.protocol,l.host,(0,o.default)(y(i),"/oauth/auth")),body:{client_id:n,redirect_uri:r,response_type:"code"}}),e.next=4,f.execute();case 4:return h=e.sent,e.abrupt("return",h.data);case 6:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function g(e,n,i){return new Promise(function(){var s=(0,r.default)(t.default.mark(function r(s,h){var d,p,v,b,g,m;return t.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:d=(0,u.getConfig)(),p=d.auth,v={client_id:e,redirect_uri:n,response_type:"code",scope:"openid"},b=(0,c.formatKinveyUrl)(p.protocol,p.host,(0,o.default)(y(i),"/oauth/auth"),v),g=(0,l.open)(b),m=!1,g.onLoaded(function(e){try{if(e.url&&0===e.url.indexOf(n)&&!1===m){var t=(0,a.parse)(e.url,!0),r=t.query||{},i=r.code,o=r.error,u=r.error_description;m=!0,g.removeAllListeners(),g.close(),i?s(i):h(o?new f.KinveyError(o,u):new f.KinveyError("No code or error was provided."))}}catch(o){}}),g.onClosed(function(){m||(g.removeAllListeners(),h(new f.KinveyError("Login has been cancelled.")))});case 7:case"end":return t.stop()}},r,this)}));return function(e,t){return s.apply(this,arguments)}}())}function m(e,t,n,r,i){return w.apply(this,arguments)}function w(){return(w=(0,r.default)(t.default.mark(function e(n,r,i,o,l){var h,d,p,y,v;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return h=new c.KinveyRequest({method:c.RequestMethod.POST,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:function(){var e=(0,u.getConfig)(),t=e.appSecret,n=s.Base64.encode("".concat(o,":").concat(t));return"Basic ".concat(n)}},url:n.temp_login_uri,body:{client_id:o,redirect_uri:l,response_type:"code",username:r,password:i,scope:"openid"}}),e.next=3,h.execute();case 3:if(d=e.sent,p=d.headers.get("location")){e.next=7;break}throw new f.MobileIdentityConnectError("Unable to authorize user with username ".concat(r,"."),"A location header was not provided with a code to exchange for an auth token.");case 7:return y=(0,a.parse)(p,!0)||{},v=y.query||{},e.abrupt("return",v.code);case 10:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function _(e,t,n){return x.apply(this,arguments)}function x(){return(x=(0,r.default)(t.default.mark(function e(n,r,i){var o,a,l,f,h;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=(0,u.getConfig)(),a=o.auth,l=new c.KinveyRequest({method:c.RequestMethod.POST,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:function(){var e=(0,u.getConfig)(),t=e.appSecret,n=s.Base64.encode("".concat(r,":").concat(t));return"Basic ".concat(n)}},url:(0,c.formatKinveyUrl)(a.protocol,a.host,"/oauth/token"),body:{grant_type:"authorization_code",client_id:r,redirect_uri:i,code:n}}),e.next=4,l.execute();case 4:return f=e.sent,h=f.data,e.abrupt("return",Object.assign({},{identity:d,client_id:r,redirect_uri:i,protocol:a.protocol,host:a.host},h));case 7:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function k(){return(k=(0,r.default)(t.default.mark(function e(n){var r,o,a,s,c,l,h,d,y,b,w,x,k=arguments;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=k.length>1&&void 0!==k[1]?k[1]:p.AuthorizationCodeLoginPage,o=k.length>2&&void 0!==k[2]?k[2]:{},a=(0,u.getConfig)(),s=a.appKey,c=o.micId,l=o.version,h=o.username,d=o.password,y=s,(0,i.default)(n)){e.next=7;break}throw new f.KinveyError("A redirectUri is required and must be a string.");case 7:if((0,i.default)(c)&&(y="".concat(y,".").concat(c)),r!==p.AuthorizationCodeAPI){e.next=17;break}return e.next=11,v(y,n,l);case 11:return w=e.sent,e.next=14,m(w,h,d,y,n);case 14:b=e.sent,e.next=24;break;case 17:if(r&&r!==p.AuthorizationCodeLoginPage){e.next=23;break}return e.next=20,g(y,n,l);case 20:b=e.sent,e.next=24;break;case 23:throw new f.KinveyError("The authorization grant ".concat(r," is unsupported. ")+"Please use a supported authorization grant.");case 24:return e.next=26,_(b,y,n);case 26:return x=e.sent,e.abrupt("return",x);case 28:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}e.AuthorizationGrant=p,Object.freeze(p)})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i;!function(o,a,s){void 0!==e&&e.exports?e.exports=s():void 0===(i="function"==typeof(r=s)?r.call(t,n,t,e):r)||(e.exports=i)}(0,0,function(){return function(){return function(e){var t=[];if(e[0].match(/^[^/:]+:\/*$/)&&e.length>1){var n=e.shift();e[0]=n+e[0]}e[0].match(/^file:\/\/\//)?e[0]=e[0].replace(/^([^/:]+):\/*/,"$1:///"):e[0]=e[0].replace(/^([^/:]+):\/*/,"$1://");for(var r=0;r<e.length;r++){var i=e[r];if("string"!=typeof i)throw new TypeError("Url must be a string. Received "+i);""!==i&&(r>0&&(i=i.replace(/^[\/]+/,"")),i=r<e.length-1?i.replace(/[\/]+$/,""):i.replace(/[\/]+$/,"/"),t.push(i))}var o=t.join("/"),a=(o=o.replace(/\/(\?|&|#[^!])/g,"$1")).split("?");return o=a.shift()+(a.length>0?"?":"")+a.join("&")}("object"==typeof arguments[0]?arguments[0]:[].slice.call(arguments))}})},function(e,t,n){var r=function(){return this||"object"==typeof self&&self}()||Function("return this")(),i=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,o=i&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,e.exports=n(115),i)r.regeneratorRuntime=o;else try{delete r.regeneratorRuntime}catch(e){r.regeneratorRuntime=void 0}},function(e,t){!function(t){"use strict";var n,r=Object.prototype,i=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag",c="object"==typeof e,l=t.regeneratorRuntime;if(l)c&&(e.exports=l);else{(l=t.regeneratorRuntime=c?e.exports:{}).wrap=w;var f="suspendedStart",h="suspendedYield",d="executing",p="completed",y={},v={};v[a]=function(){return this};var b=Object.getPrototypeOf,g=b&&b(b(j([])));g&&g!==r&&i.call(g,a)&&(v=g);var m=E.prototype=x.prototype=Object.create(v);k.prototype=m.constructor=E,E.constructor=k,E[u]=k.displayName="GeneratorFunction",l.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===k||"GeneratorFunction"===(t.displayName||t.name))},l.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,u in e||(e[u]="GeneratorFunction")),e.prototype=Object.create(m),e},l.awrap=function(e){return{__await:e}},S(O.prototype),O.prototype[s]=function(){return this},l.AsyncIterator=O,l.async=function(e,t,n,r){var i=new O(w(e,t,n,r));return l.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},S(m),m[u]="Generator",m[a]=function(){return this},m.toString=function(){return"[object Generator]"},l.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},l.values=j,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(A),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,i){return s.type="throw",s.arg=e,t.next=r,i&&(t.method="next",t.arg=n),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=i.call(a,"catchLoc"),c=i.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),A(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;A(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=n),y}}}function w(e,t,n,r){var i=t&&t.prototype instanceof x?t:x,o=Object.create(i.prototype),a=new I(r||[]);return o._invoke=function(e,t,n){var r=f;return function(i,o){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw o;return T()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=P(a,n);if(s){if(s===y)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var u=_(e,t,n);if("normal"===u.type){if(r=n.done?p:h,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=p,n.method="throw",n.arg=u.arg)}}}(e,n,a),o}function _(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function x(){}function k(){}function E(){}function S(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function O(e){var t;this._invoke=function(n,r){function o(){return new Promise(function(t,o){!function t(n,r,o,a){var s=_(e[n],e,r);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"==typeof c&&i.call(c,"__await")?Promise.resolve(c.__await).then(function(e){t("next",e,o,a)},function(e){t("throw",e,o,a)}):Promise.resolve(c).then(function(e){u.value=e,o(u)},function(e){return t("throw",e,o,a)})}a(s.arg)}(n,r,t,o)})}return t=t?t.then(o,o):o()}}function P(e,t){var r=e.iterator[t.method];if(r===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=n,P(e,t),"throw"===t.method))return y;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var i=_(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,y;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,y):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,y)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function j(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(i.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=n,t.done=!0,t};return o.next=o}}return{next:T}}function T(){return{value:n,done:!0}}}(function(){return this||"object"==typeof self&&self}()||Function("return this")())},function(e,t,n){(function(e,r){var i;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(o){"object"==typeof t&&t&&t.nodeType,"object"==typeof e&&e&&e.nodeType;var a="object"==typeof r&&r;a.global!==a&&a.window!==a&&a.self;var s,u=2147483647,c=36,l=1,f=26,h=38,d=700,p=72,y=128,v="-",b=/^xn--/,g=/[^\x20-\x7E]/,m=/[\x2E\u3002\uFF0E\uFF61]/g,w={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},_=c-l,x=Math.floor,k=String.fromCharCode;function E(e){throw new RangeError(w[e])}function S(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function O(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+S((e=e.replace(m,".")).split("."),t).join(".")}function P(e){for(var t,n,r=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function C(e){return S(e,function(e){var t="";return e>65535&&(t+=k((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=k(e)}).join("")}function A(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:c}function I(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function j(e,t,n){var r=0;for(e=n?x(e/d):e>>1,e+=x(e/t);e>_*f>>1;r+=c)e=x(e/_);return x(r+(_+1)*e/(e+h))}function T(e){var t,n,r,i,o,a,s,h,d,b,g=[],m=e.length,w=0,_=y,k=p;for((n=e.lastIndexOf(v))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&E("not-basic"),g.push(e.charCodeAt(r));for(i=n>0?n+1:0;i<m;){for(o=w,a=1,s=c;i>=m&&E("invalid-input"),((h=A(e.charCodeAt(i++)))>=c||h>x((u-w)/a))&&E("overflow"),w+=h*a,!(h<(d=s<=k?l:s>=k+f?f:s-k));s+=c)a>x(u/(b=c-d))&&E("overflow"),a*=b;k=j(w-o,t=g.length+1,0==o),x(w/t)>u-_&&E("overflow"),_+=x(w/t),w%=t,g.splice(w++,0,_)}return C(g)}function N(e){var t,n,r,i,o,a,s,h,d,b,g,m,w,_,S,O=[];for(m=(e=P(e)).length,t=y,n=0,o=p,a=0;a<m;++a)(g=e[a])<128&&O.push(k(g));for(r=i=O.length,i&&O.push(v);r<m;){for(s=u,a=0;a<m;++a)(g=e[a])>=t&&g<s&&(s=g);for(s-t>x((u-n)/(w=r+1))&&E("overflow"),n+=(s-t)*w,t=s,a=0;a<m;++a)if((g=e[a])<t&&++n>u&&E("overflow"),g==t){for(h=n,d=c;!(h<(b=d<=o?l:d>=o+f?f:d-o));d+=c)S=h-b,_=c-b,O.push(k(I(b+S%_,0))),h=x(S/_);O.push(k(I(h,0))),o=j(n,w,r==i),n=0,++r}++n,++t}return O.join("")}s={version:"1.4.1",ucs2:{decode:P,encode:C},decode:T,encode:N,toASCII:function(e){return O(e,function(e){return g.test(e)?"xn--"+N(e):e})},toUnicode:function(e){return O(e,function(e){return b.test(e)?T(e.slice(4).toLowerCase()):e})}},void 0===(i=function(){return s}.call(t,n,t,e))||(e.exports=i)}()}).call(this,n(32)(e),n(22))},function(e,t,n){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,n){"use strict";t.decode=t.parse=n(119),t.encode=t.stringify=n(120)},function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,o){t=t||"&",n=n||"=";var a={};if("string"!=typeof e||0===e.length)return a;var s=/\+/g;e=e.split(t);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var c=e.length;u>0&&c>u&&(c=u);for(var l=0;l<c;++l){var f,h,d,p,y=e[l].replace(s,"%20"),v=y.indexOf(n);v>=0?(f=y.substr(0,v),h=y.substr(v+1)):(f=y,h=""),d=decodeURIComponent(f),p=decodeURIComponent(h),r(a,d)?i(a[d])?a[d].push(p):a[d]=[a[d],p]:a[d]=p}return a};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){"use strict";var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,s){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?o(a(e),function(a){var s=encodeURIComponent(r(a))+n;return i(e[a])?o(e[a],function(e){return s+encodeURIComponent(r(e))}).join(t):s+encodeURIComponent(r(e[a]))}).join(t):s?encodeURIComponent(r(s))+n+encodeURIComponent(r(e)):""};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function o(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var a=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},function(e,t,n){var r=n(47),i=n(122),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=[];for(var n in Object(e))o.call(e,n)&&"constructor"!=n&&t.push(n);return t}},function(e,t,n){var r=n(44)(Object.keys,Object);e.exports=r},function(e,t,n){var r=n(124),i=n(129),o=n(130),a=n(131),s=n(132),u=n(14),c=n(48),l=c(r),f=c(i),h=c(o),d=c(a),p=c(s),y=u;(r&&"[object DataView]"!=y(new r(new ArrayBuffer(1)))||i&&"[object Map]"!=y(new i)||o&&"[object Promise]"!=y(o.resolve())||a&&"[object Set]"!=y(new a)||s&&"[object WeakMap]"!=y(new s))&&(y=function(e){var t=u(e),n="[object Object]"==t?e.constructor:void 0,r=n?c(n):"";if(r)switch(r){case l:return"[object DataView]";case f:return"[object Map]";case h:return"[object Promise]";case d:return"[object Set]";case p:return"[object WeakMap]"}return t}),e.exports=y},function(e,t,n){var r=n(23)(n(15),"DataView");e.exports=r},function(e,t,n){var r=n(24),i=n(126),o=n(28),a=n(48),s=/^\[object .+?Constructor\]$/,u=Function.prototype,c=Object.prototype,l=u.toString,f=c.hasOwnProperty,h=RegExp("^"+l.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||i(e))&&(r(e)?h:s).test(a(e))}},function(e,t,n){var r=n(127),i=function(){var e=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=function(e){return!!i&&i in e}},function(e,t,n){var r=n(15)["__core-js_shared__"];e.exports=r},function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},function(e,t,n){var r=n(23)(n(15),"Map");e.exports=r},function(e,t,n){var r=n(23)(n(15),"Promise");e.exports=r},function(e,t,n){var r=n(23)(n(15),"Set");e.exports=r},function(e,t,n){var r=n(23)(n(15),"WeakMap");e.exports=r},function(e,t,n){var r=n(134),i=n(18),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(e){return i(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=u},function(e,t,n){var r=n(14),i=n(18),o="[object Arguments]";e.exports=function(e){return i(e)&&r(e)==o}},function(e,t,n){var r=n(24),i=n(49);e.exports=function(e){return null!=e&&i(e.length)&&!r(e)}},function(e,t,n){(function(e){var r=n(15),i=n(137),o="object"==typeof t&&t&&!t.nodeType&&t,a=o&&"object"==typeof e&&e&&!e.nodeType&&e,s=a&&a.exports===o?r.Buffer:void 0,u=(s?s.isBuffer:void 0)||i;e.exports=u}).call(this,n(32)(e))},function(e,t){e.exports=function(){return!1}},function(e,t,n){var r=n(139),i=n(140),o=n(141),a=o&&o.isTypedArray,s=a?i(a):r;e.exports=s},function(e,t,n){var r=n(14),i=n(49),o=n(18),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&i(e.length)&&!!a[r(e)]}},function(e,t){e.exports=function(e){return function(t){return e(t)}}},function(e,t,n){(function(e){var r=n(43),i="object"==typeof t&&t&&!t.nodeType&&t,o=i&&"object"==typeof e&&e&&!e.nodeType&&e,a=o&&o.exports===i&&r.process,s=function(){try{var e=o&&o.require&&o.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=s}).call(this,n(32)(e))},function(e,t,n){var r,i,o;i=[t,n(50),n(3),n(2),n(51),n(4),n(1),n(8),n(9),n(10),n(26),n(7),n(12),n(29),n(25),n(147),n(33),n(34),n(35),n(52),n(46)],void 0===(o="function"==typeof(r=function(e,t,r,i,o,a,s,u,c,l,f,h,d,p,y,v,b,g,m,w,_){"use strict";var x=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.register=function(e){S=e},e.KinveyRequest=e.Request=e.RequestMethod=void 0,t=x(t),r=x(r),i=x(i),o=x(o),a=x(a),s=x(s),u=x(u),c=x(c),l=x(l),f=x(f);var k=new((v=x(v)).default),E={GET:"GET",POST:"POST",PUT:"PUT",DELETE:"DELETE"};e.RequestMethod=E;var S=function(){var e=(0,l.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("You must override the default http function.");case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),O=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,s.default)(this,e);var n=(0,d.getConfig)(),r=n.defaultTimeout,i=t.headers,o=t.method,a=t.url,u=t.body,c=t.timeout,l=void 0===c?r:c;this.headers=i,this.method=o,this.url=a,this.body=u,this.timeout=l}return(0,u.default)(e,[{key:"execute",value:function(){var e=(0,l.default)(c.default.mark(function e(){var t,n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S({headers:this.headers.toObject(),method:this.method,url:this.url,body:(0,m.serialize)(this.headers.contentType,this.body)});case 2:if(t=e.sent,!(n=new w.Response({statusCode:t.statusCode,headers:t.headers,data:t.data})).isSuccess()){e.next=6;break}return e.abrupt("return",n);case 6:throw n.error;case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"headers",get:function(){return this._headers},set:function(e){this._headers=new g.Headers(e)}},{key:"timeout",get:function(){return this._timeout},set:function(e){if(!(0,f.default)(e)||isNaN(e))throw new h.KinveyError("Invalid timeout. Timeout must be a number.");this._timeout=e}}]),e}();e.Request=O;var P=function(e){function n(e){var t;return(0,s.default)(this,n),(t=(0,r.default)(this,(0,i.default)(n).call(this,e))).headers=e.headers,t.auth=e.auth,t}return(0,a.default)(n,e),(0,u.default)(n,[{key:"execute",value:function(){var e=(0,l.default)(c.default.mark(function e(){var r,a,s,u,l,f,v,g,w,x,S,O,P,C,A,I,j,T,N,M,D=this,R=arguments;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=!(R.length>0&&void 0!==R[0])||R[0],e.prev=1,this.auth&&this.headers.set("Authorization",this.authorizationHeader),e.next=5,(0,o.default)((0,i.default)(n.prototype),"execute",this).call(this);case 5:return a=e.sent,e.abrupt("return",a);case 9:if(e.prev=9,e.t0=e.catch(1),!r){e.next=56;break}if(!(e.t0 instanceof h.InvalidCredentialsError)){e.next=55;break}if(s=(0,d.getConfig)(),u=s.appKey,l=s.appSecret,f=s.auth,v=s.api,g=(0,p.get)(),w=g&&g._socialIdentity||{},x=Object.keys(w).find(function(e){return"kinveyAuth"===w[e].identity}),S=w[x],!k.paused){e.next=20;break}return e.abrupt("return",k.add(function(){return D.execute(!1).catch(function(){return Promise.reject(e.t0)})}));case 20:if(!S){e.next=44;break}return e.prev=21,k.pause(),O=new n({method:E.POST,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:function(){var e=b.Base64.encode("".concat(S.client_id,":").concat(l));return"Basic ".concat(e)}},url:(0,m.formatKinveyUrl)(f.protocol,f.host,"/oauth/token"),body:{grant_type:"refresh_token",client_id:S.client_id,redirect_uri:S.redirect_uri,refresh_token:S.refresh_token}}),e.next=26,O.execute();case 26:return P=e.sent,C=Object.assign({},P.data,{client_id:S.client_id,redirect_uri:S.redirect_uri,protocol:f.protocol,host:f.host}),A=new n({method:E.POST,auth:_.Auth.App,url:(0,m.formatKinveyUrl)(v.protocol,v.host,"/user/".concat(u,"/login")),properties:this.properties,body:{_socialIdentity:(0,t.default)({},x,C)}}),e.next=31,A.execute();case 31:return I=e.sent,(j=I.data)._socialIdentity[x]=Object.assign({},j._socialIdentity[x],C),(0,p.set)(j),e.next=37,this.execute(!1);case 37:return T=e.sent,k.start(),e.abrupt("return",T);case 42:e.prev=42,e.t1=e.catch(21);case 44:return e.prev=44,N=(0,m.formatKinveyUrl)(v.protocol,v.host,"/user/".concat(u,"/_logout")),M=new n({method:E.POST,auth:_.Auth.Session,url:N}),e.next=49,M.execute(!1);case 49:(0,p.remove)(),(0,y.clear)(u),e.next=55;break;case 53:e.prev=53,e.t2=e.catch(44);case 55:k.start();case 56:throw e.t0;case 57:case"end":return e.stop()}},e,this,[[1,9],[21,42],[44,53]])}));return function(){return e.apply(this,arguments)}}()},{key:"headers",get:function(){return this._headers},set:function(e){this._headers=new g.KinveyHeaders(e)}},{key:"authorizationHeader",get:function(){var e=(0,d.getConfig)(),t=e.appKey,n=e.appSecret,r=e.masterSecret,i=(0,p.get)();return this.auth===_.Auth.App?(0,_.app)(t,n):this.auth===_.Auth.Master?(0,_.master)(t,r):this.auth===_.Auth.Session?(0,_.session)(i):this.auth===_.Auth.Basic?(0,_.basic)(t,n,r):this.auth===_.Auth.Default?(0,_.defaultAuth)(i,t,r):this.auth===_.Auth.All?(0,_.all)(i,t,n,r):null}}]),n}(O);e.KinveyRequest=P})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r=n(2);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e}},function(e,t,n){var r,i,o;i=[t],void 0===(o="function"==typeof(r=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.nested=function(e,t,n){if(!t)return n||e;for(var r=t.split("."),i=r.shift(),o=e;i&&void 0!==o;)o=o[i],i=r.shift();return void 0===o?n:o}})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){"use strict";class r{constructor(){this._queue=[]}enqueue(e,t){const n={priority:(t=Object.assign({priority:0},t)).priority,run:e};if(this.size&&this._queue[this.size-1].priority>=t.priority)return void this._queue.push(n);const r=function(e,t,n){let r=0,i=e.length;for(;i>0;){const o=i/2|0;let a=r+o;n(e[a],t)<=0?(r=++a,i-=o+1):i=o}return r}(this._queue,n,(e,t)=>t.priority-e.priority);this._queue.splice(r,0,n)}dequeue(){return this._queue.shift().run}get size(){return this._queue.length}}e.exports=class{constructor(e){if(!("number"==typeof(e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:r},e)).concurrency&&e.concurrency>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e.concurrency}\` (${typeof e.concurrency})`);if(!("number"==typeof e.intervalCap&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${e.intervalCap}\` (${typeof e.intervalCap})`);if(!("number"==typeof e.interval&&Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${e.interval}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||0===e.interval,this._intervalCount=0,this._intervalCap=e.intervalCap,this._interval=e.interval,this._intervalId=null,this._intervalEnd=0,this._timeoutId=null,this.queue=new e.queueClass,this._queueClass=e.queueClass,this._pendingCount=0,this._concurrency=e.concurrency,this._isPaused=!1===e.autoStart,this._resolveEmpty=(()=>{}),this._resolveIdle=(()=>{})}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother()}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=(()=>{}),0===this._pendingCount&&(this._resolveIdle(),this._resolveIdle=(()=>{}))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=null}_intervalPaused(){const e=Date.now();if(null===this._intervalId){const t=this._intervalEnd-e;if(!(t<0))return null===this._timeoutId&&(this._timeoutId=setTimeout(()=>this._onResumeInterval(),t)),!0;this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0}return!1}_tryToStartAnother(){if(0===this.queue.size)return clearInterval(this._intervalId),this._intervalId=null,this._resolvePromises(),!1;if(!this._isPaused){const e=!this._intervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother)return this.queue.dequeue()(),e&&this._initializeIntervalIfNeeded(),!0}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||null!==this._intervalId||(this._intervalId=setInterval(()=>this._onInterval(),this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){for(0===this._intervalCount&&0===this._pendingCount&&(clearInterval(this._intervalId),this._intervalId=null),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;this._tryToStartAnother(););}add(e,t){return new Promise((n,r)=>{this.queue.enqueue(()=>{this._pendingCount++,this._intervalCount++;try{Promise.resolve(e()).then(e=>{n(e),this._next()},e=>{r(e),this._next()})}catch(e){r(e),this._next()}},t),this._tryToStartAnother()})}addAll(e,t){return Promise.all(e.map(e=>this.add(e,t)))}start(){if(this._isPaused)for(this._isPaused=!1;this._tryToStartAnother(););}pause(){this._isPaused=!0}clear(){this.queue=new this._queueClass}onEmpty(){return 0===this.queue.size?Promise.resolve():new Promise(e=>{const t=this._resolveEmpty;this._resolveEmpty=(()=>{t(),e()})})}onIdle(){return 0===this._pendingCount&&0===this.queue.size?Promise.resolve():new Promise(e=>{const t=this._resolveIdle;this._resolveIdle=(()=>{t(),e()})})}get size(){return this.queue.size}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}}},function(e,t){!function(){"use strict";function n(e){return"function"==typeof e}function r(e){return"[object Array]"===Object.prototype.toString.call(e)}function i(e){return e instanceof Date?e.getTime():r(e)?e.map(i):e&&"function"==typeof e.toJSON?e.toJSON():e}function o(e,t){return n(e.get)?e.get(t):e[t]}function a(e){return function(t,n){if(!r(n)||!n.length)return e(t,n);for(var i=0,a=n.length;i<a;i++)if(e(t,o(n,i)))return!0;return!1}}function s(e,t,n,r){return e.v(e.a,t,n,r)}var u={$eq:a(function(e,t){return e(t)}),$ne:function(e){return function(t,n){if(!r(n)||!n.length)return e(t,n);for(var i=0,a=n.length;i<a;i++)if(!e(t,o(n,i)))return!1;return!0}}(function(e,t){return!e(t)}),$gt:a(function(e,t){return v.compare(i(t),e)>0}),$gte:a(function(e,t){return v.compare(i(t),e)>=0}),$lt:a(function(e,t){return v.compare(i(t),e)<0}),$lte:a(function(e,t){return v.compare(i(t),e)<=0}),$mod:a(function(e,t){return t%e[0]==e[1]}),$in:function(e,t){if(!(t instanceof Array)){var n=i(t);if(n===t&&"object"==typeof t)for(a=e.length;a--;)if(String(e[a])===String(t)&&"[object Object]"!==String(t))return!0;if(void 0===n)for(a=e.length;a--;)if(null==e[a])return!0;for(a=e.length;a--;){var r=s(y(o(e,a),void 0),t,a,e);if(r&&"[object Object]"!==String(r)&&"[object Object]"!==String(t))return!0}return!!~e.indexOf(n)}for(var a=t.length;a--;)if(~e.indexOf(i(o(t,a))))return!0;return!1},$nin:function(e,t,n,r){return!u.$in(e,t,n,r)},$not:function(e,t,n,r){return!s(e,t,n,r)},$type:function(e,t){return void 0!=t&&(t instanceof e||t.constructor==e)},$all:function(e,t,n,r){return u.$and(e,t,n,r)},$size:function(e,t){return!!t&&e===t.length},$or:function(e,t,n,r){for(var i=0,a=e.length;i<a;i++)if(s(o(e,i),t,n,r))return!0;return!1},$nor:function(e,t,n,r){return!u.$or(e,t,n,r)},$and:function(e,t,n,r){for(var i=0,a=e.length;i<a;i++)if(!s(o(e,i),t,n,r))return!1;return!0},$regex:a(function(e,t){return"string"==typeof t&&e.test(t)}),$where:function(e,t,n,r){return e.call(t,t,n,r)},$elemMatch:function(e,t,n,i){return r(t)?!!~l(t,e):s(e,t,n,i)},$exists:function(e,t,n,r){return r.hasOwnProperty(n)===e}},c={$eq:function(e){return e instanceof RegExp?function(t){return"string"==typeof t&&e.test(t)}:e instanceof Function?e:r(e)&&!e.length?function(e){return r(e)&&!e.length}:null===e?function(e){return null==e}:function(t){return 0===v.compare(i(t),e)}},$ne:function(e){return c.$eq(e)},$and:function(e){return e.map(p)},$all:function(e){return c.$and(e)},$or:function(e){return e.map(p)},$nor:function(e){return e.map(p)},$not:function(e){return p(e)},$regex:function(e,t){return new RegExp(e,t.$options)},$where:function(e){return"string"==typeof e?new Function("obj","return "+e):e},$elemMatch:function(e){return p(e)},$exists:function(e){return!!e}};function l(e,t){for(var n=0;n<e.length;n++){o(e,n);if(s(t,o(e,n)))return n}return-1}function f(e,t){return{a:e,v:t}}function h(e,t){var n=[];if(function e(t,n,i,a,s){if(i===n.length||void 0==t)return void s.push([t,n[i-1],a]);var u=o(n,i);if(r(t)&&isNaN(Number(u)))for(var c=0,l=t.length;c<l;c++)e(o(t,c),n,i,t,s);else e(o(t,u),n,i+1,t,s)}(t,e.k,0,t,n),1===n.length){var i=n[0];return s(e.nv,i[0],i[1],i[2])}for(var a=e&&e.q&&void 0!==e.q.$ne,u=a,c=0;c<n.length;c++){var l=n[c],f=s(e.nv,l[0],l[1],l[2]);a?u&=f:u|=f}return u}function d(e,t,n){return{a:{k:e,nv:t,q:n},v:h}}function p(e){(e=i(e))&&function(e){return e&&e.constructor===Object}(e)||(e={$eq:e});var t=[];for(var n in e){var r=e[n];if("$options"!==n)if(u[n])c[n]&&(r=c[n](r,e)),t.push(f(i(r),u[n]));else{if(36===n.charCodeAt(0))throw new Error("Unknown operation "+n);t.push(d(n.split("."),p(r),r))}}return 1===t.length?t[0]:f(t,u.$and)}function y(e,t){var n=p(e);return t&&(n={a:n,v:function(e,n,r,i){return s(e,t(n),r,i)}}),n}function v(e,t,r){n(t)&&(r=t,t=void 0);var i=y(e,r);function o(e,t,n){return s(i,e,t,n)}return t?t.filter(o):o}v.use=function(e){if(n(e))return e(v);for(var t in e)36===t.charCodeAt(0)&&(u[t]=e[t])},v.indexOf=function(e,t,n){return l(t,y(e,n))},v.compare=function(e,t){if(e===t)return 0;if(typeof e==typeof t){if(e>t)return 1;if(e<t)return-1}},void 0!==e&&void 0!==e.exports&&(Object.defineProperty(t,"__esModule",{value:!0}),e.exports=v,t.default=e.exports.default=v),"undefined"!=typeof window&&(window.sift=v)}()},function(e,t,n){e.exports=n(148)},function(e,t,n){var r,i;!function(o,a){"use strict";"object"==typeof e&&e.exports?e.exports=a():void 0===(i="function"==typeof(r=a)?r.call(t,n,t,e):r)||(e.exports=i)}(0,function(){"use strict";var e="undefined"!=typeof Promise?Promise:function(){return{then:function(){throw new Error("Queue.configure() before use Queue")}}},t=function(){};function n(e,t,n){this.options=n=n||{},this.pendingPromises=0,this.maxPendingPromises=void 0!==e?e:1/0,this.maxQueuedPromises=void 0!==t?t:1/0,this.queue=[],this.paused=!1}return n.configure=function(t){e=t},n.prototype.add=function(n){var r=this;return new e(function(e,i,o){r.queue.length>=r.maxQueuedPromises?i(new Error("Queue limit reached")):(r.queue.push({promiseGenerator:n,resolve:e,reject:i,notify:o||t}),r._dequeue())})},n.prototype.getPendingLength=function(){return this.pendingPromises},n.prototype.getQueueLength=function(){return this.queue.length},n.prototype.pause=function(){this.paused=!0},n.prototype.start=function(){return this.paused=!1,this._dequeue()},n.prototype._dequeue=function(){var t=this;if(this.paused)return!1;if(this.pendingPromises>=this.maxPendingPromises)return!1;var n=this.queue.shift();if(!n)return this.options.onEmpty&&this.options.onEmpty(),!1;try{this.pendingPromises++,function(t){return t&&"function"==typeof t.then?t:new e(function(e){e(t)})}(n.promiseGenerator()).then(function(e){t.pendingPromises--,n.resolve(e),t._dequeue()},function(e){t.pendingPromises--,n.reject(e),t._dequeue()},function(e){n.notify(e)})}catch(e){t.pendingPromises--,n.reject(e),t._dequeue()}return!0},n})},function(e,t,n){var r,i,o;i=[t,n(9),n(10),n(1),n(8),n(50),n(16),n(37),n(17),n(7),n(12),n(39),n(152),n(38)],void 0===(o="function"==typeof(r=function(e,t,r,i,o,a,s,u,c,l,f,h,d,p){"use strict";var y=n(0);function v(e){if(e){var t=Object.keys(e.filter).reduce(function(t,n){return Object.assign({},t,(0,a.default)({},"entity.".concat(n),e.filter[n]))},{});return new c.Query({filter:t})}return new c.Query}Object.defineProperty(e,"__esModule",{value:!0}),e.CacheStore=void 0,t=y(t),r=y(r),i=y(i),o=y(o),a=y(a),s=y(s);var b=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{tag:void 0,useDeltaSet:!1,useAutoPagination:!1,autoSync:!0};(0,i.default)(this,e),this.collectionName=t,this.tag=n.tag,this.useDeltaSet=!0===n.useDeltaSet,this.useAutoPagination=!0===n.useAutoPagination||n.autoPagination,this.autoSync=!0===n.autoSync}return(0,o.default)(e,[{key:"find",value:function(e){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=!0===i.autoSync||this.autoSync,a=new h.DataStoreCache(this.collectionName,this.tag),s=u.KinveyObservable.create(function(){var s=(0,r.default)(t.default.mark(function r(s){var u,c;return t.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a.find(e);case 3:if(u=t.sent,s.next(u),!o){t.next=12;break}return t.next=8,n.pull(e,i);case 8:return t.next=10,a.find(e);case 10:c=t.sent,s.next(c);case 12:s.complete(),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),s.error(t.t0);case 18:case"end":return t.stop()}},r,this,[[0,15]])}));return function(e){return s.apply(this,arguments)}}());return s}},{key:"count",value:function(e){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=!0===i.autoSync||this.autoSync,a=new h.DataStoreCache(this.collectionName,this.tag),s=u.KinveyObservable.create(function(){var s=(0,r.default)(t.default.mark(function r(s){var u,c,l;return t.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a.count(e);case 3:if(u=t.sent,s.next(u),!o){t.next=11;break}return c=new p.NetworkStore(n.collectionName),t.next=9,c.count(e,i).toPromise();case 9:l=t.sent,s.next(l);case 11:s.complete(),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),s.error(t.t0);case 17:case"end":return t.stop()}},r,this,[[0,14]])}));return function(e){return s.apply(this,arguments)}}());return s}},{key:"group",value:function(e){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=!0===i.autoSync||this.autoSync,a=new h.DataStoreCache(this.collectionName,this.tag),s=u.KinveyObservable.create(function(){var s=(0,r.default)(t.default.mark(function r(s){var u,c,l;return t.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a.group(e);case 3:if(u=t.sent,s.next(u),!o){t.next=11;break}return c=new p.NetworkStore(n.collectionName),t.next=9,c.group(e,i).toPromise();case 9:l=t.sent,s.next(l);case 11:s.complete(),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),s.error(t.t0);case 17:case"end":return t.stop()}},r,this,[[0,14]])}));return function(e){return s.apply(this,arguments)}}());return s}},{key:"findById",value:function(e){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=u.KinveyObservable.create(function(){var o=(0,r.default)(t.default.mark(function r(o){var a,s,u,f,d;return t.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e){t.next=5;break}o.next(void 0),t.next=27;break;case 5:return a=!0===i.autoSync||n.autoSync,s=new h.DataStoreCache(n.collectionName,n.tag),t.next=9,s.findById(e);case 9:if(u=t.sent){t.next=16;break}if(a){t.next=13;break}throw new l.NotFoundError;case 13:o.next(void 0),t.next=17;break;case 16:o.next(u);case 17:if(!a){t.next=27;break}return f=(new c.Query).equalTo("_id",e),t.next=21,n.pull(f,i);case 21:return t.next=23,s.findById(e);case 23:if(d=t.sent){t.next=26;break}throw new l.NotFoundError;case 26:o.next(d);case 27:o.complete(),t.next=33;break;case 30:t.prev=30,t.t0=t.catch(0),o.error(t.t0);case 33:case"end":return t.stop()}},r,this,[[0,30]])}));return function(e){return o.apply(this,arguments)}}());return o}},{key:"create",value:function(){var e=(0,r.default)(t.default.mark(function e(n){var r,i,o,a,u,f,p,y,v=arguments;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=v.length>1&&void 0!==v[1]?v[1]:{},!(0,s.default)(n)){e.next=3;break}throw new l.KinveyError("Unable to create an array of entities.","Please create entities one by one.");case 3:return i=!0===r.autoSync||this.autoSync,o=new h.DataStoreCache(this.collectionName,this.tag),a=new d.Sync(this.collectionName,this.tag),e.next=8,o.save(n);case 8:return u=e.sent,e.next=11,a.addCreateSyncEvent(u);case 11:if(!i){e.next=20;break}return f=(new c.Query).equalTo("_id",u._id),e.next=15,a.push(f,r);case 15:if(p=e.sent,!(y=p.shift()).error){e.next=19;break}throw y.error;case 19:return e.abrupt("return",y.entity);case 20:return e.abrupt("return",u);case 21:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=(0,r.default)(t.default.mark(function e(n){var r,i,o,a,u,f,p,y,v=arguments;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=v.length>1&&void 0!==v[1]?v[1]:{},!(0,s.default)(n)){e.next=3;break}throw new l.KinveyError("Unable to update an array of entities.","Please update entities one by one.");case 3:if(n._id){e.next=5;break}throw new l.KinveyError("The entity provided does not contain an _id. An _id is required to update the entity.",n);case 5:return i=!0===r.autoSync||this.autoSync,o=new h.DataStoreCache(this.collectionName,this.tag),a=new d.Sync(this.collectionName,this.tag),e.next=10,o.save(n);case 10:return u=e.sent,e.next=13,a.addUpdateSyncEvent(u);case 13:if(!i){e.next=22;break}return f=(new c.Query).equalTo("_id",u._id),e.next=17,a.push(f,r);case 17:if(p=e.sent,!(y=p.shift()).error){e.next=21;break}throw y.error;case 21:return e.abrupt("return",y.entity);case 22:return e.abrupt("return",u);case 23:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"save",value:function(e,t){return e._id?this.update(e,t):this.create(e,t)}},{key:"remove",value:function(){var e=(0,r.default)(t.default.mark(function e(n){var r,i,o,a,s,u,l,f,p,y,b=arguments;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=b.length>1&&void 0!==b[1]?b[1]:{},i=!0===r.autoSync||this.autoSync,o=new h.DataStoreCache(this.collectionName,this.tag),a=new d.Sync(this.collectionName,this.tag),s=0,e.next=7,o.find(n);case 7:if(!((u=e.sent).length>0)){e.next=14;break}return e.next=11,o.remove(n);case 11:return s=e.sent,e.next=14,a.addDeleteSyncEvent(u);case 14:if(!i){e.next=25;break}return l=v(n).equalTo("collection",this.collectionName),e.next=18,a.find(l);case 18:if(!((f=e.sent).length>0)){e.next=25;break}return p=(new c.Query).contains("_id",f.map(function(e){return e._id})),e.next=23,a.push(p);case 23:y=e.sent,s=y.reduce(function(e,t){return t.error?e-1:e},s||f.length);case 25:return e.abrupt("return",{count:s});case 26:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"removeById",value:function(){var e=(0,r.default)(t.default.mark(function e(n){var r,i,o,a,s,u,l,f,p,y=arguments;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=y.length>1&&void 0!==y[1]?y[1]:{},i=!0===r.autoSync||this.autoSync,o=new h.DataStoreCache(this.collectionName,this.tag),a=new d.Sync(this.collectionName,this.tag),s=0,!n){e.next=26;break}return e.next=8,o.findById(n);case 8:if(!(u=e.sent)){e.next=15;break}return e.next=12,o.removeById(n);case 12:return s=e.sent,e.next=15,a.addDeleteSyncEvent(u);case 15:if(!i){e.next=26;break}return e.next=18,a.findById(n);case 18:if((l=e.sent)&&(s=1),!l){e.next=26;break}return f=(new c.Query).equalTo("_id",l._id),e.next=24,a.push(f);case 24:(p=e.sent).length>0&&p.shift().error&&(s-=1);case 26:return e.abrupt("return",{count:s});case 27:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"clear",value:function(){var e=(0,r.default)(t.default.mark(function e(n){var r,i,o;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=new d.Sync(this.collectionName,this.tag),e.next=3,r.remove(n);case 3:return i=new h.DataStoreCache(this.collectionName,this.tag),e.next=6,i.remove(n);case 6:return o=e.sent,e.abrupt("return",{count:o});case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"push",value:function(){var e=(0,r.default)(t.default.mark(function e(n,r){var i;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=new d.Sync(this.collectionName,this.tag),e.abrupt("return",i.push(null,r));case 2:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"pull",value:function(){var e=(0,r.default)(t.default.mark(function e(n){var r,i,o,a,s,u,c=arguments;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},i=!0===r.useDeltaSet||this.useDeltaSet,o=!0===r.useAutoPagination||r.autoPagination||this.useAutoPagination,a=!0===r.autoSync||this.autoSync,s=new d.Sync(this.collectionName,this.tag),e.next=7,s.count();case 7:if(!((u=e.sent)>0)){e.next=12;break}if(1!==u){e.next=11;break}throw new l.KinveyError("Unable to pull entities from the backend. There is ".concat(u," entity")+" that needs to be pushed to the backend.");case 11:throw new l.KinveyError("Unable to pull entities from the backend. There are ".concat(u," entities")+" that need to be pushed to the backend.");case 12:if(!i){e.next=14;break}return e.abrupt("return",s.deltaset(n,Object.assign({},{useDeltaSet:i,useAutoPagination:o,autoSync:a},r)));case 14:if(!o){e.next=16;break}return e.abrupt("return",s.autopaginate(n,Object.assign({},{useDeltaSet:i,useAutoPagination:o,autoSync:a},r)));case 16:return e.abrupt("return",s.pull(n,r));case 17:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"sync",value:function(){var e=(0,r.default)(t.default.mark(function e(n,r){var i,o;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.push(null,r);case 2:return i=e.sent,e.next=5,this.pull(n,r);case 5:return o=e.sent,e.abrupt("return",{push:i,pull:o});case 7:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"pendingSyncDocs",value:function(e){var t=new d.Sync(this.collectionName,this.tag);return t.find(e)}},{key:"pendingSyncEntities",value:function(e){return this.pendingSyncDocs(e)}},{key:"pendingSyncCount",value:function(e){var t=new d.Sync(this.collectionName,this.tag);return t.count(e)}},{key:"clearSync",value:function(e){var t=new d.Sync(this.collectionName,this.tag);return t.remove(e)}},{key:"subscribe",value:function(){var e=(0,r.default)(t.default.mark(function e(n){var r;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=new p.NetworkStore(this.collectionName),e.next=3,r.subscribe(n);case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"unsubscribe",value:function(){var e=(0,r.default)(t.default.mark(function e(){var n;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new p.NetworkStore(this.collectionName),e.next=3,n.unsubscribe();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"pathname",get:function(){var e=(0,f.getConfig)(),t=e.appKey;return"/".concat("appdata","/").concat(t,"/").concat(this.collectionName)}}]),e}();e.CacheStore=b})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[t,n(1),n(8),n(3),n(2),n(4),n(24),n(151),n(54)],void 0===(o="function"==typeof(r=function(e,t,r,i,o,a,s,u,c){"use strict";var l=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.isRegistered=y,e.register=function(e){y()||(f=new u.default(e),h=new p,f.addListener(h))},e.unregister=function(){y()&&(f.unsubscribeAll(),f=null,h.removeAllListeners(),h=null)},e.subscribeToChannel=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.onMessage,r=t.onError,i=t.onStatus;if(!function(e){return"string"==typeof e&&""!==e}(e))throw new Error("Invalid channel name.");if(!function(e){if(!e)return!1;var t=e.onMessage,n=e.onError,r=e.onStatus;return(0,s.default)(t)||(0,s.default)(n)||(0,s.default)(r)}(t))throw new Error("Invalid receiver.");if(!y())throw new Error("Please register to the Live Service before you subscribe to the channel.");(0,s.default)(n)&&h.on(e,n),(0,s.default)(r)&&h.on("".concat(d).concat(e),function(e){e.error&&r(e)}),(0,s.default)(i)&&h.on("".concat(d).concat(e),function(e){e.error||i(e)})},e.unsubscribeFromChannel=function(e){h.removeAllListeners(e),h.removeAllListeners("".concat(d).concat(e))},e.Listener=void 0,t=l(t),r=l(r),i=l(i),o=l(o),a=l(a),s=l(s),u=l(u);var f,h,d="status:",p=function(e){function n(){return(0,t.default)(this,n),(0,i.default)(this,(0,o.default)(n).apply(this,arguments))}return(0,a.default)(n,e),(0,r.default)(n,[{key:"message",value:function(e){this.emit(e.channel,e)}},{key:"status",value:function(e){var t=this,n=e.affectedChannels,r=void 0===n?[]:n,i=e.affectedChannelGroups,o=void 0===i?[]:i,a=r.concat(o),s={error:e.error,category:e.category,operation:e.operation};a.length>0?a.forEach(function(e){t.emit("".concat(d).concat(e),s)}):this.emit("pubNubEventsNotRouted",s)}}]),n}(c.EventEmitter);function y(){return!!f&&!!h}e.Listener=p})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){e.exports=function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(!navigator||!navigator.sendBeacon)return!1;navigator.sendBeacon(e)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),a=r(o),s=n(39),u=r(s),c=n(40),l=r(c),f=n(41),h=(n(5),function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=e.listenToBrowserNetworkEvents,r=void 0===n||n;e.db=l.default,e.sdkFamily="Web",e.networking=new u.default({del:f.del,get:f.get,post:f.post,sendBeacon:i});var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r&&(window.addEventListener("offline",function(){o.networkDownDetected()}),window.addEventListener("online",function(){o.networkUpDetected()})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(a.default));t.default=h,e.exports=t.default},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(2),s=i(a),u=n(6),c=i(u),l=n(8),f=i(l),h=n(9),d=i(h),p=n(16),y=i(p),v=n(17),b=r(v),g=n(18),m=r(g),w=n(19),_=r(w),x=n(20),k=r(x),E=n(21),S=r(E),O=n(22),P=r(O),C=n(23),A=r(C),I=n(24),j=r(I),T=n(25),N=r(T),M=n(26),D=r(M),R=n(27),q=r(R),K=n(28),B=r(K),U=n(29),L=r(U),F=n(30),z=r(F),$=n(31),H=r($),G=n(32),V=r(G),Q=n(33),J=r(Q),W=n(34),Y=r(W),X=n(35),Z=r(X),ee=n(36),te=r(ee),ne=n(37),re=r(ne),ie=n(12),oe=r(ie),ae=n(38),se=r(ae),ue=n(13),ce=i(ue),le=n(10),fe=i(le),he=(n(5),n(3)),de=i(he),pe=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=t.db,i=t.networking,o=this._config=new s.default({setup:t,db:r}),a=new c.default({config:o});i.init(o);var u={config:o,networking:i,crypto:a},l=y.default.bind(this,u,oe),h=y.default.bind(this,u,D),p=y.default.bind(this,u,B),v=y.default.bind(this,u,z),g=y.default.bind(this,u,se),w=this._listenerManager=new d.default,x=new f.default({timeEndpoint:l,leaveEndpoint:h,heartbeatEndpoint:p,setStateEndpoint:v,subscribeEndpoint:g,crypto:u.crypto,config:u.config,listenerManager:w});this.addListener=w.addListener.bind(w),this.removeListener=w.removeListener.bind(w),this.removeAllListeners=w.removeAllListeners.bind(w),this.channelGroups={listGroups:y.default.bind(this,u,k),listChannels:y.default.bind(this,u,S),addChannels:y.default.bind(this,u,b),removeChannels:y.default.bind(this,u,m),deleteGroup:y.default.bind(this,u,_)},this.push={addChannels:y.default.bind(this,u,P),removeChannels:y.default.bind(this,u,A),deleteDevice:y.default.bind(this,u,N),listChannels:y.default.bind(this,u,j)},this.hereNow=y.default.bind(this,u,H),this.whereNow=y.default.bind(this,u,q),this.getState=y.default.bind(this,u,L),this.setState=x.adaptStateChange.bind(x),this.grant=y.default.bind(this,u,J),this.audit=y.default.bind(this,u,V),this.publish=y.default.bind(this,u,Y),this.fire=function(e,t){return e.replicate=!1,e.storeInHistory=!1,n.publish(e,t)},this.history=y.default.bind(this,u,Z),this.deleteMessages=y.default.bind(this,u,te),this.fetchMessages=y.default.bind(this,u,re),this.time=l,this.subscribe=x.adaptSubscribeChange.bind(x),this.presence=x.adaptPresenceChange.bind(x),this.unsubscribe=x.adaptUnsubscribeChange.bind(x),this.disconnect=x.disconnect.bind(x),this.reconnect=x.reconnect.bind(x),this.destroy=function(e){x.unsubscribeAll(e),x.disconnect()},this.stop=this.destroy,this.unsubscribeAll=x.unsubscribeAll.bind(x),this.getSubscribedChannels=x.getSubscribedChannels.bind(x),this.getSubscribedChannelGroups=x.getSubscribedChannelGroups.bind(x),this.encrypt=a.encrypt.bind(a),this.decrypt=a.decrypt.bind(a),this.getAuthKey=u.config.getAuthKey.bind(u.config),this.setAuthKey=u.config.setAuthKey.bind(u.config),this.setCipherKey=u.config.setCipherKey.bind(u.config),this.getUUID=u.config.getUUID.bind(u.config),this.setUUID=u.config.setUUID.bind(u.config),this.getFilterExpression=u.config.getFilterExpression.bind(u.config),this.setFilterExpression=u.config.setFilterExpression.bind(u.config),this.setHeartbeatInterval=u.config.setHeartbeatInterval.bind(u.config),i.hasModule("proxy")&&(this.setProxy=function(e){u.config.setProxy(e),n.reconnect()})}return o(e,[{key:"getVersion",value:function(){return this._config.getVersion()}},{key:"networkDownDetected",value:function(){this._listenerManager.announceNetworkDown(),this._config.restore?this.disconnect():this.destroy(!0)}},{key:"networkUpDetected",value:function(){this._listenerManager.announceNetworkUp(),this.reconnect()}}],[{key:"generateUUID",value:function(){return de.default.createUUID()}}]),e}();pe.OPERATIONS=ce.default,pe.CATEGORIES=fe.default,t.default=pe,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(3),o=function(e){return e&&e.__esModule?e:{default:e}}(i),a=(n(5),function(){function e(t){var n=t.setup,r=t.db;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._db=r,this.instanceId="pn-"+o.default.createUUID(),this.secretKey=n.secretKey||n.secret_key,this.subscribeKey=n.subscribeKey||n.subscribe_key,this.publishKey=n.publishKey||n.publish_key,this.sdkName=n.sdkName,this.sdkFamily=n.sdkFamily,this.partnerId=n.partnerId,this.setAuthKey(n.authKey),this.setCipherKey(n.cipherKey),this.setFilterExpression(n.filterExpression),this.origin=n.origin||"pubsub.pndsn.com",this.secure=n.ssl||!1,this.restore=n.restore||!1,this.proxy=n.proxy,this.keepAlive=n.keepAlive,this.keepAliveSettings=n.keepAliveSettings,this.autoNetworkDetection=n.autoNetworkDetection||!1,this.dedupeOnSubscribe=n.dedupeOnSubscribe||!1,this.maximumCacheSize=n.maximumCacheSize||100,this.customEncrypt=n.customEncrypt,this.customDecrypt=n.customDecrypt,"undefined"!=typeof location&&"https:"===location.protocol&&(this.secure=!0),this.logVerbosity=n.logVerbosity||!1,this.suppressLeaveEvents=n.suppressLeaveEvents||!1,this.announceFailedHeartbeats=n.announceFailedHeartbeats||!0,this.announceSuccessfulHeartbeats=n.announceSuccessfulHeartbeats||!1,this.useInstanceId=n.useInstanceId||!1,this.useRequestId=n.useRequestId||!1,this.requestMessageCountThreshold=n.requestMessageCountThreshold,this.setTransactionTimeout(n.transactionalRequestTimeout||15e3),this.setSubscribeTimeout(n.subscribeRequestTimeout||31e4),this.setSendBeaconConfig(n.useSendBeacon||!0),this.setPresenceTimeout(n.presenceTimeout||300),null!=n.heartbeatInterval&&this.setHeartbeatInterval(n.heartbeatInterval),this.setUUID(this._decideUUID(n.uuid))}return r(e,[{key:"getAuthKey",value:function(){return this.authKey}},{key:"setAuthKey",value:function(e){return this.authKey=e,this}},{key:"setCipherKey",value:function(e){return this.cipherKey=e,this}},{key:"getUUID",value:function(){return this.UUID}},{key:"setUUID",value:function(e){return this._db&&this._db.set&&this._db.set(this.subscribeKey+"uuid",e),this.UUID=e,this}},{key:"getFilterExpression",value:function(){return this.filterExpression}},{key:"setFilterExpression",value:function(e){return this.filterExpression=e,this}},{key:"getPresenceTimeout",value:function(){return this._presenceTimeout}},{key:"setPresenceTimeout",value:function(e){return this._presenceTimeout=e,this.setHeartbeatInterval(this._presenceTimeout/2-1),this}},{key:"setProxy",value:function(e){this.proxy=e}},{key:"getHeartbeatInterval",value:function(){return this._heartbeatInterval}},{key:"setHeartbeatInterval",value:function(e){return this._heartbeatInterval=e,this}},{key:"getSubscribeTimeout",value:function(){return this._subscribeRequestTimeout}},{key:"setSubscribeTimeout",value:function(e){return this._subscribeRequestTimeout=e,this}},{key:"getTransactionTimeout",value:function(){return this._transactionalRequestTimeout}},{key:"setTransactionTimeout",value:function(e){return this._transactionalRequestTimeout=e,this}},{key:"isSendBeaconEnabled",value:function(){return this._useSendBeacon}},{key:"setSendBeaconConfig",value:function(e){return this._useSendBeacon=e,this}},{key:"getVersion",value:function(){return"4.21.6"}},{key:"_decideUUID",value:function(e){return e||(this._db&&this._db.get&&this._db.get(this.subscribeKey+"uuid")?this._db.get(this.subscribeKey+"uuid"):"pn-"+o.default.createUUID())}}]),e}());t.default=a,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default={createUUID:function(){return i.default.uuid?i.default.uuid():(0,i.default)()}},e.exports=t.default},function(e,t,n){var r,i,o;i=[t],void 0!==(o="function"==typeof(r=function(e){function t(){var e,t,n="";for(e=0;e<32;e++)t=16*Math.random()|0,8!==e&&12!==e&&16!==e&&20!==e||(n+="-"),n+=(12===e?4:16===e?3&t|8:t).toString(16);return n}function n(e,t){var n=r[t||"all"];return n&&n.test(e)||!1}var r={3:/^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,4:/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,5:/^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,all:/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i};t.isUUID=n,t.VERSION="0.1.0",e.uuid=t,e.isUUID=n})?r.apply(t,i):r)&&(e.exports=o)},function(e,t){"use strict";e.exports={}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(2),a=(r(o),n(7)),s=r(a),u=function(){function e(t){var n=t.config;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._config=n,this._iv="0123456789012345",this._allowedKeyEncodings=["hex","utf8","base64","binary"],this._allowedKeyLengths=[128,256],this._allowedModes=["ecb","cbc"],this._defaultOptions={encryptKey:!0,keyEncoding:"utf8",keyLength:256,mode:"cbc"}}return i(e,[{key:"HMACSHA256",value:function(e){return s.default.HmacSHA256(e,this._config.secretKey).toString(s.default.enc.Base64)}},{key:"SHA256",value:function(e){return s.default.SHA256(e).toString(s.default.enc.Hex)}},{key:"_parseOptions",value:function(e){var t=e||{};return t.hasOwnProperty("encryptKey")||(t.encryptKey=this._defaultOptions.encryptKey),t.hasOwnProperty("keyEncoding")||(t.keyEncoding=this._defaultOptions.keyEncoding),t.hasOwnProperty("keyLength")||(t.keyLength=this._defaultOptions.keyLength),t.hasOwnProperty("mode")||(t.mode=this._defaultOptions.mode),-1===this._allowedKeyEncodings.indexOf(t.keyEncoding.toLowerCase())&&(t.keyEncoding=this._defaultOptions.keyEncoding),-1===this._allowedKeyLengths.indexOf(parseInt(t.keyLength,10))&&(t.keyLength=this._defaultOptions.keyLength),-1===this._allowedModes.indexOf(t.mode.toLowerCase())&&(t.mode=this._defaultOptions.mode),t}},{key:"_decodeKey",value:function(e,t){return"base64"===t.keyEncoding?s.default.enc.Base64.parse(e):"hex"===t.keyEncoding?s.default.enc.Hex.parse(e):e}},{key:"_getPaddedKey",value:function(e,t){return e=this._decodeKey(e,t),t.encryptKey?s.default.enc.Utf8.parse(this.SHA256(e).slice(0,32)):e}},{key:"_getMode",value:function(e){return"ecb"===e.mode?s.default.mode.ECB:s.default.mode.CBC}},{key:"_getIV",value:function(e){return"cbc"===e.mode?s.default.enc.Utf8.parse(this._iv):null}},{key:"encrypt",value:function(e,t,n){return this._config.customEncrypt?this._config.customEncrypt(e):this.pnEncrypt(e,t,n)}},{key:"decrypt",value:function(e,t,n){return this._config.customDecrypt?this._config.customDecrypt(e):this.pnDecrypt(e,t,n)}},{key:"pnEncrypt",value:function(e,t,n){if(!t&&!this._config.cipherKey)return e;n=this._parseOptions(n);var r=this._getIV(n),i=this._getMode(n),o=this._getPaddedKey(t||this._config.cipherKey,n);return s.default.AES.encrypt(e,o,{iv:r,mode:i}).ciphertext.toString(s.default.enc.Base64)||e}},{key:"pnDecrypt",value:function(e,t,n){if(!t&&!this._config.cipherKey)return e;n=this._parseOptions(n);var r=this._getIV(n),i=this._getMode(n),o=this._getPaddedKey(t||this._config.cipherKey,n);try{var a=s.default.enc.Base64.parse(e),u=s.default.AES.decrypt({ciphertext:a},o,{iv:r,mode:i}).toString(s.default.enc.Utf8);return JSON.parse(u)}catch(e){return null}}}]),e}();t.default=u,e.exports=t.default},function(e,t){"use strict";var n=n||function(e,t){var n={},r=n.lib={},i=function(){},o=r.Base={extend:function(e){i.prototype=this;var t=new i;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},a=r.WordArray=o.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0!=t?t:4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes;if(e=e.sigBytes,this.clamp(),r%4)for(var i=0;i<e;i++)t[r+i>>>2]|=(n[i>>>2]>>>24-i%4*8&255)<<24-(r+i)%4*8;else if(65535<n.length)for(i=0;i<e;i+=4)t[r+i>>>2]=n[i>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],r=0;r<t;r+=4)n.push(4294967296*e.random()|0);return new a.init(n,t)}}),s=n.enc={},u=s.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++){var i=t[r>>>2]>>>24-r%4*8&255;n.push((i>>>4).toString(16)),n.push((15&i).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new a.init(n,t/2)}},c=s.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++)n.push(String.fromCharCode(t[r>>>2]>>>24-r%4*8&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new a.init(n,t)}},l=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},f=r.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,i=n.sigBytes,o=this.blockSize,s=i/(4*o),s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0);if(t=s*o,i=e.min(4*t,i),t){for(var u=0;u<t;u+=o)this._doProcessBlock(r,u);u=r.splice(0,t),n.sigBytes-=i}return new a.init(u,i)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});r.Hasher=f.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new h.HMAC.init(e,n).finalize(t)}}});var h=n.algo={};return n}(Math);!function(e){for(var t=n,r=t.lib,i=r.WordArray,o=r.Hasher,r=t.algo,a=[],s=[],u=function(e){return 4294967296*(e-(0|e))|0},c=2,l=0;64>l;){var f;e:{f=c;for(var h=e.sqrt(f),d=2;d<=h;d++)if(!(f%d)){f=!1;break e}f=!0}f&&(8>l&&(a[l]=u(e.pow(c,.5))),s[l]=u(e.pow(c,1/3)),l++),c++}var p=[],r=r.SHA256=o.extend({_doReset:function(){this._hash=new i.init(a.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],a=n[3],u=n[4],c=n[5],l=n[6],f=n[7],h=0;64>h;h++){if(16>h)p[h]=0|e[t+h];else{var d=p[h-15],y=p[h-2];p[h]=((d<<25|d>>>7)^(d<<14|d>>>18)^d>>>3)+p[h-7]+((y<<15|y>>>17)^(y<<13|y>>>19)^y>>>10)+p[h-16]}d=f+((u<<26|u>>>6)^(u<<21|u>>>11)^(u<<7|u>>>25))+(u&c^~u&l)+s[h]+p[h],y=((r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22))+(r&i^r&o^i&o),f=l,l=c,c=u,u=a+d|0,a=o,o=i,i=r,r=d+y|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+a|0,n[4]=n[4]+u|0,n[5]=n[5]+c|0,n[6]=n[6]+l|0,n[7]=n[7]+f|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=e.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=o._createHelper(r),t.HmacSHA256=o._createHmacHelper(r)}(Math),function(){var e=n,t=e.enc.Utf8;e.algo.HMAC=e.lib.Base.extend({init:function(e,n){e=this._hasher=new e.init,"string"==typeof n&&(n=t.parse(n));var r=e.blockSize,i=4*r;n.sigBytes>i&&(n=e.finalize(n)),n.clamp();for(var o=this._oKey=n.clone(),a=this._iKey=n.clone(),s=o.words,u=a.words,c=0;c<r;c++)s[c]^=1549556828,u[c]^=909522486;o.sigBytes=a.sigBytes=i,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}})}(),function(){var e=n,t=e.lib.WordArray;e.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp(),e=[];for(var i=0;i<n;i+=3)for(var o=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,a=0;4>a&&i+.75*a<n;a++)e.push(r.charAt(o>>>6*(3-a)&63));if(t=r.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var n=e.length,r=this._map,i=r.charAt(64);i&&-1!=(i=e.indexOf(i))&&(n=i);for(var i=[],o=0,a=0;a<n;a++)if(a%4){var s=r.indexOf(e.charAt(a-1))<<a%4*2,u=r.indexOf(e.charAt(a))>>>6-a%4*2;i[o>>>2]|=(s|u)<<24-o%4*8,o++}return t.create(i,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(e){function t(e,t,n,r,i,o,a){return((e=e+(t&n|~t&r)+i+a)<<o|e>>>32-o)+t}function r(e,t,n,r,i,o,a){return((e=e+(t&r|n&~r)+i+a)<<o|e>>>32-o)+t}function i(e,t,n,r,i,o,a){return((e=e+(t^n^r)+i+a)<<o|e>>>32-o)+t}function o(e,t,n,r,i,o,a){return((e=e+(n^(t|~r))+i+a)<<o|e>>>32-o)+t}for(var a=n,s=a.lib,u=s.WordArray,c=s.Hasher,s=a.algo,l=[],f=0;64>f;f++)l[f]=4294967296*e.abs(e.sin(f+1))|0;s=s.MD5=c.extend({_doReset:function(){this._hash=new u.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,n){for(var a=0;16>a;a++){var s=n+a,u=e[s];e[s]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}var a=this._hash.words,s=e[n+0],u=e[n+1],c=e[n+2],f=e[n+3],h=e[n+4],d=e[n+5],p=e[n+6],y=e[n+7],v=e[n+8],b=e[n+9],g=e[n+10],m=e[n+11],w=e[n+12],_=e[n+13],x=e[n+14],k=e[n+15],E=a[0],S=a[1],O=a[2],P=a[3],E=t(E,S,O,P,s,7,l[0]),P=t(P,E,S,O,u,12,l[1]),O=t(O,P,E,S,c,17,l[2]),S=t(S,O,P,E,f,22,l[3]),E=t(E,S,O,P,h,7,l[4]),P=t(P,E,S,O,d,12,l[5]),O=t(O,P,E,S,p,17,l[6]),S=t(S,O,P,E,y,22,l[7]),E=t(E,S,O,P,v,7,l[8]),P=t(P,E,S,O,b,12,l[9]),O=t(O,P,E,S,g,17,l[10]),S=t(S,O,P,E,m,22,l[11]),E=t(E,S,O,P,w,7,l[12]),P=t(P,E,S,O,_,12,l[13]),O=t(O,P,E,S,x,17,l[14]),S=t(S,O,P,E,k,22,l[15]),E=r(E,S,O,P,u,5,l[16]),P=r(P,E,S,O,p,9,l[17]),O=r(O,P,E,S,m,14,l[18]),S=r(S,O,P,E,s,20,l[19]),E=r(E,S,O,P,d,5,l[20]),P=r(P,E,S,O,g,9,l[21]),O=r(O,P,E,S,k,14,l[22]),S=r(S,O,P,E,h,20,l[23]),E=r(E,S,O,P,b,5,l[24]),P=r(P,E,S,O,x,9,l[25]),O=r(O,P,E,S,f,14,l[26]),S=r(S,O,P,E,v,20,l[27]),E=r(E,S,O,P,_,5,l[28]),P=r(P,E,S,O,c,9,l[29]),O=r(O,P,E,S,y,14,l[30]),S=r(S,O,P,E,w,20,l[31]),E=i(E,S,O,P,d,4,l[32]),P=i(P,E,S,O,v,11,l[33]),O=i(O,P,E,S,m,16,l[34]),S=i(S,O,P,E,x,23,l[35]),E=i(E,S,O,P,u,4,l[36]),P=i(P,E,S,O,h,11,l[37]),O=i(O,P,E,S,y,16,l[38]),S=i(S,O,P,E,g,23,l[39]),E=i(E,S,O,P,_,4,l[40]),P=i(P,E,S,O,s,11,l[41]),O=i(O,P,E,S,f,16,l[42]),S=i(S,O,P,E,p,23,l[43]),E=i(E,S,O,P,b,4,l[44]),P=i(P,E,S,O,w,11,l[45]),O=i(O,P,E,S,k,16,l[46]),S=i(S,O,P,E,c,23,l[47]),E=o(E,S,O,P,s,6,l[48]),P=o(P,E,S,O,y,10,l[49]),O=o(O,P,E,S,x,15,l[50]),S=o(S,O,P,E,d,21,l[51]),E=o(E,S,O,P,w,6,l[52]),P=o(P,E,S,O,f,10,l[53]),O=o(O,P,E,S,g,15,l[54]),S=o(S,O,P,E,u,21,l[55]),E=o(E,S,O,P,v,6,l[56]),P=o(P,E,S,O,k,10,l[57]),O=o(O,P,E,S,p,15,l[58]),S=o(S,O,P,E,_,21,l[59]),E=o(E,S,O,P,h,6,l[60]),P=o(P,E,S,O,m,10,l[61]),O=o(O,P,E,S,c,15,l[62]),S=o(S,O,P,E,b,21,l[63]);a[0]=a[0]+E|0,a[1]=a[1]+S|0,a[2]=a[2]+O|0,a[3]=a[3]+P|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;n[i>>>5]|=128<<24-i%32;var o=e.floor(r/4294967296);for(n[15+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),n[14+(i+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),t.sigBytes=4*(n.length+1),this._process(),t=this._hash,n=t.words,r=0;4>r;r++)i=n[r],n[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8);return t},clone:function(){var e=c.clone.call(this);return e._hash=this._hash.clone(),e}}),a.MD5=c._createHelper(s),a.HmacMD5=c._createHmacHelper(s)}(Math),function(){var e=n,t=e.lib,r=t.Base,i=t.WordArray,t=e.algo,o=t.EvpKDF=r.extend({cfg:r.extend({keySize:4,hasher:t.MD5,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,r=n.hasher.create(),o=i.create(),a=o.words,s=n.keySize,n=n.iterations;a.length<s;){u&&r.update(u);var u=r.update(e).finalize(t);r.reset();for(var c=1;c<n;c++)u=r.finalize(u),r.reset();o.concat(u)}return o.sigBytes=4*s,o}});e.EvpKDF=function(e,t,n){return o.create(n).compute(e,t)}}(),n.lib.Cipher||function(e){var t=n,r=t.lib,i=r.Base,o=r.WordArray,a=r.BufferedBlockAlgorithm,s=t.enc.Base64,u=t.algo.EvpKDF,c=r.Cipher=a.extend({cfg:i.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){a.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(t,n,r){return("string"==typeof n?y:p).encrypt(e,t,n,r)},decrypt:function(t,n,r){return("string"==typeof n?y:p).decrypt(e,t,n,r)}}}});r.StreamCipher=c.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var l=t.mode={},f=function(e,t,n){var r=this._iv;r?this._iv=void 0:r=this._prevBlock;for(var i=0;i<n;i++)e[t+i]^=r[i]},h=(r.BlockCipherMode=i.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}})).extend();h.Encryptor=h.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize;f.call(this,e,t,r),n.encryptBlock(e,t),this._prevBlock=e.slice(t,t+r)}}),h.Decryptor=h.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,i=e.slice(t,t+r);n.decryptBlock(e,t),f.call(this,e,t,r),this._prevBlock=i}}),l=l.CBC=h,h=(t.pad={}).Pkcs7={pad:function(e,t){for(var n=4*t,n=n-e.sigBytes%n,r=n<<24|n<<16|n<<8|n,i=[],a=0;a<n;a+=4)i.push(r);n=o.create(i,n),e.concat(n)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},r.BlockCipher=c.extend({cfg:c.cfg.extend({mode:l,padding:h}),reset:function(){c.reset.call(this);var e=this.cfg,t=e.iv,e=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=e.createEncryptor;else n=e.createDecryptor,this._minBufferSize=1;this._mode=n.call(e,this,t&&t.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4});var d=r.CipherParams=i.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),l=(t.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return((e=e.salt)?o.create([1398893684,1701076831]).concat(e).concat(t):t).toString(s)},parse:function(e){var t=(e=s.parse(e)).words;if(1398893684==t[0]&&1701076831==t[1]){var n=o.create(t.slice(2,4));t.splice(0,4),e.sigBytes-=16}return d.create({ciphertext:e,salt:n})}},p=r.SerializableCipher=i.extend({cfg:i.extend({format:l}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var i=e.createEncryptor(n,r);return t=i.finalize(t),i=i.cfg,d.create({ciphertext:t,key:n,iv:i.iv,algorithm:e,mode:i.mode,padding:i.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(n,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),t=(t.kdf={}).OpenSSL={execute:function(e,t,n,r){return r||(r=o.random(8)),e=u.create({keySize:t+n}).compute(e,r),n=o.create(e.words.slice(t),4*n),e.sigBytes=4*t,d.create({key:e,iv:n,salt:r})}},y=r.PasswordBasedCipher=p.extend({cfg:p.cfg.extend({kdf:t}),encrypt:function(e,t,n,r){return r=this.cfg.extend(r),n=r.kdf.execute(n,e.keySize,e.ivSize),r.iv=n.iv,(e=p.encrypt.call(this,e,t,n.key,r)).mixIn(n),e},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),n=r.kdf.execute(n,e.keySize,e.ivSize,t.salt),r.iv=n.iv,p.decrypt.call(this,e,t,n.key,r)}})}(),function(){for(var e=n,t=e.lib.BlockCipher,r=e.algo,i=[],o=[],a=[],s=[],u=[],c=[],l=[],f=[],h=[],d=[],p=[],y=0;256>y;y++)p[y]=128>y?y<<1:y<<1^283;for(var v=0,b=0,y=0;256>y;y++){var g=b^b<<1^b<<2^b<<3^b<<4,g=g>>>8^255&g^99;i[v]=g,o[g]=v;var m=p[v],w=p[m],_=p[w],x=257*p[g]^16843008*g;a[v]=x<<24|x>>>8,s[v]=x<<16|x>>>16,u[v]=x<<8|x>>>24,c[v]=x,x=16843009*_^65537*w^257*m^16843008*v,l[g]=x<<24|x>>>8,f[g]=x<<16|x>>>16,h[g]=x<<8|x>>>24,d[g]=x,v?(v=m^p[p[p[_^m]]],b^=p[p[b]]):v=b=1}var k=[0,1,2,4,8,16,32,64,128,27,54],r=r.AES=t.extend({_doReset:function(){for(var e=this._key,t=e.words,n=e.sigBytes/4,e=4*((this._nRounds=n+6)+1),r=this._keySchedule=[],o=0;o<e;o++)if(o<n)r[o]=t[o];else{var a=r[o-1];o%n?6<n&&4==o%n&&(a=i[a>>>24]<<24|i[a>>>16&255]<<16|i[a>>>8&255]<<8|i[255&a]):(a=i[(a=a<<8|a>>>24)>>>24]<<24|i[a>>>16&255]<<16|i[a>>>8&255]<<8|i[255&a],a^=k[o/n|0]<<24),r[o]=r[o-n]^a}for(t=this._invKeySchedule=[],n=0;n<e;n++)o=e-n,a=n%4?r[o]:r[o-4],t[n]=4>n||4>=o?a:l[i[a>>>24]]^f[i[a>>>16&255]]^h[i[a>>>8&255]]^d[i[255&a]]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,a,s,u,c,i)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,l,f,h,d,o),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,r,i,o,a,s){for(var u=this._nRounds,c=e[t]^n[0],l=e[t+1]^n[1],f=e[t+2]^n[2],h=e[t+3]^n[3],d=4,p=1;p<u;p++)var y=r[c>>>24]^i[l>>>16&255]^o[f>>>8&255]^a[255&h]^n[d++],v=r[l>>>24]^i[f>>>16&255]^o[h>>>8&255]^a[255&c]^n[d++],b=r[f>>>24]^i[h>>>16&255]^o[c>>>8&255]^a[255&l]^n[d++],h=r[h>>>24]^i[c>>>16&255]^o[l>>>8&255]^a[255&f]^n[d++],c=y,l=v,f=b;y=(s[c>>>24]<<24|s[l>>>16&255]<<16|s[f>>>8&255]<<8|s[255&h])^n[d++],v=(s[l>>>24]<<24|s[f>>>16&255]<<16|s[h>>>8&255]<<8|s[255&c])^n[d++],b=(s[f>>>24]<<24|s[h>>>16&255]<<16|s[c>>>8&255]<<8|s[255&l])^n[d++],h=(s[h>>>24]<<24|s[c>>>16&255]<<16|s[l>>>8&255]<<8|s[255&f])^n[d++],e[t]=y,e[t+1]=v,e[t+2]=b,e[t+3]=h},keySize:8});e.AES=t._createHelper(r)}(),n.mode.ECB=function(){var e=n.lib.BlockCipherMode.extend();return e.Encryptor=e.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),e.Decryptor=e.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),e}(),e.exports=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(6),a=(r(o),n(2)),s=(r(a),n(9)),u=(r(s),n(11)),c=r(u),l=n(14),f=r(l),h=n(15),d=r(h),p=(n(5),n(10)),y=r(p),v=function(){function e(t){var n=t.subscribeEndpoint,r=t.leaveEndpoint,i=t.heartbeatEndpoint,o=t.setStateEndpoint,a=t.timeEndpoint,s=t.config,u=t.crypto,l=t.listenerManager;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._listenerManager=l,this._config=s,this._leaveEndpoint=r,this._heartbeatEndpoint=i,this._setStateEndpoint=o,this._subscribeEndpoint=n,this._crypto=u,this._channels={},this._presenceChannels={},this._heartbeatChannels={},this._heartbeatChannelGroups={},this._channelGroups={},this._presenceChannelGroups={},this._pendingChannelSubscriptions=[],this._pendingChannelGroupSubscriptions=[],this._currentTimetoken=0,this._lastTimetoken=0,this._storedTimetoken=null,this._subscriptionStatusAnnounced=!1,this._isOnline=!0,this._reconnectionManager=new c.default({timeEndpoint:a}),this._dedupingManager=new f.default({config:s})}return i(e,[{key:"adaptStateChange",value:function(e,t){var n=this,r=e.state,i=e.channels,o=void 0===i?[]:i,a=e.channelGroups,s=void 0===a?[]:a;return o.forEach(function(e){e in n._channels&&(n._channels[e].state=r)}),s.forEach(function(e){e in n._channelGroups&&(n._channelGroups[e].state=r)}),this._setStateEndpoint({state:r,channels:o,channelGroups:s},t)}},{key:"adaptPresenceChange",value:function(e){var t=this,n=e.connected,r=e.channels,i=void 0===r?[]:r,o=e.channelGroups,a=void 0===o?[]:o;n?(i.forEach(function(e){t._heartbeatChannels[e]={state:{}}}),a.forEach(function(e){t._heartbeatChannelGroups[e]={state:{}}})):(i.forEach(function(e){e in t._heartbeatChannels&&delete t._heartbeatChannels[e]}),a.forEach(function(e){e in t._heartbeatChannelGroups&&delete t._heartbeatChannelGroups[e]}),!1===this._config.suppressLeaveEvents&&this._leaveEndpoint({channels:i,channelGroups:a},function(e){t._listenerManager.announceStatus(e)})),this.reconnect()}},{key:"adaptSubscribeChange",value:function(e){var t=this,n=e.timetoken,r=e.channels,i=void 0===r?[]:r,o=e.channelGroups,a=void 0===o?[]:o,s=e.withPresence,u=void 0!==s&&s,c=e.withHeartbeats,l=void 0===c||c;this._config.subscribeKey&&""!==this._config.subscribeKey?(n&&(this._lastTimetoken=this._currentTimetoken,this._currentTimetoken=n),"0"!==this._currentTimetoken&&0!==this._currentTimetoken&&(this._storedTimetoken=this._currentTimetoken,this._currentTimetoken=0),i.forEach(function(e){t._channels[e]={state:{}},u&&(t._presenceChannels[e]={}),l&&(t._heartbeatChannels[e]={}),t._pendingChannelSubscriptions.push(e)}),a.forEach(function(e){t._channelGroups[e]={state:{}},u&&(t._presenceChannelGroups[e]={}),l&&(t._heartbeatChannelGroups[e]={}),t._pendingChannelGroupSubscriptions.push(e)}),this._subscriptionStatusAnnounced=!1,this.reconnect()):console&&console.log&&console.log("subscribe key missing; aborting subscribe")}},{key:"adaptUnsubscribeChange",value:function(e,t){var n=this,r=e.channels,i=void 0===r?[]:r,o=e.channelGroups,a=void 0===o?[]:o,s=[],u=[];i.forEach(function(e){e in n._channels&&(delete n._channels[e],s.push(e),e in n._heartbeatChannels&&delete n._heartbeatChannels[e]),e in n._presenceChannels&&(delete n._presenceChannels[e],s.push(e))}),a.forEach(function(e){e in n._channelGroups&&(delete n._channelGroups[e],u.push(e),e in n._heartbeatChannelGroups&&delete n._heartbeatChannelGroups[e]),e in n._presenceChannelGroups&&(delete n._channelGroups[e],u.push(e))}),0===s.length&&0===u.length||(!1!==this._config.suppressLeaveEvents||t||this._leaveEndpoint({channels:s,channelGroups:u},function(e){e.affectedChannels=s,e.affectedChannelGroups=u,e.currentTimetoken=n._currentTimetoken,e.lastTimetoken=n._lastTimetoken,n._listenerManager.announceStatus(e)}),0===Object.keys(this._channels).length&&0===Object.keys(this._presenceChannels).length&&0===Object.keys(this._channelGroups).length&&0===Object.keys(this._presenceChannelGroups).length&&(this._lastTimetoken=0,this._currentTimetoken=0,this._storedTimetoken=null,this._region=null,this._reconnectionManager.stopPolling()),this.reconnect())}},{key:"unsubscribeAll",value:function(e){this.adaptUnsubscribeChange({channels:this.getSubscribedChannels(),channelGroups:this.getSubscribedChannelGroups()},e)}},{key:"getHeartbeatChannels",value:function(){return Object.keys(this._heartbeatChannels)}},{key:"getHeartbeatChannelGroups",value:function(){return Object.keys(this._heartbeatChannelGroups)}},{key:"getSubscribedChannels",value:function(){return Object.keys(this._channels)}},{key:"getSubscribedChannelGroups",value:function(){return Object.keys(this._channelGroups)}},{key:"reconnect",value:function(){this._startSubscribeLoop(),this._registerHeartbeatTimer()}},{key:"disconnect",value:function(){this._stopSubscribeLoop(),this._stopHeartbeatTimer(),this._reconnectionManager.stopPolling()}},{key:"_registerHeartbeatTimer",value:function(){this._stopHeartbeatTimer(),0!==this._config.getHeartbeatInterval()&&(this._performHeartbeatLoop(),this._heartbeatTimer=setInterval(this._performHeartbeatLoop.bind(this),1e3*this._config.getHeartbeatInterval()))}},{key:"_stopHeartbeatTimer",value:function(){this._heartbeatTimer&&(clearInterval(this._heartbeatTimer),this._heartbeatTimer=null)}},{key:"_performHeartbeatLoop",value:function(){var e=this,t=this.getHeartbeatChannels(),n=this.getHeartbeatChannelGroups(),r={};0===t.length&&0===n.length||(this.getSubscribedChannels().forEach(function(t){var n=e._channels[t].state;Object.keys(n).length&&(r[t]=n)}),this.getSubscribedChannelGroups().forEach(function(t){var n=e._channelGroups[t].state;Object.keys(n).length&&(r[t]=n)}),this._heartbeatEndpoint({channels:t,channelGroups:n,state:r},function(t){t.error&&e._config.announceFailedHeartbeats&&e._listenerManager.announceStatus(t),t.error&&e._config.autoNetworkDetection&&e._isOnline&&(e._isOnline=!1,e.disconnect(),e._listenerManager.announceNetworkDown(),e.reconnect()),!t.error&&e._config.announceSuccessfulHeartbeats&&e._listenerManager.announceStatus(t)}.bind(this)))}},{key:"_startSubscribeLoop",value:function(){this._stopSubscribeLoop();var e=[],t=[];if(Object.keys(this._channels).forEach(function(t){return e.push(t)}),Object.keys(this._presenceChannels).forEach(function(t){return e.push(t+"-pnpres")}),Object.keys(this._channelGroups).forEach(function(e){return t.push(e)}),Object.keys(this._presenceChannelGroups).forEach(function(e){return t.push(e+"-pnpres")}),0!==e.length||0!==t.length){var n={channels:e,channelGroups:t,timetoken:this._currentTimetoken,filterExpression:this._config.filterExpression,region:this._region};this._subscribeCall=this._subscribeEndpoint(n,this._processSubscribeResponse.bind(this))}}},{key:"_processSubscribeResponse",value:function(e,t){var n=this;if(e.error)e.category===y.default.PNTimeoutCategory?this._startSubscribeLoop():e.category===y.default.PNNetworkIssuesCategory?(this.disconnect(),e.error&&this._config.autoNetworkDetection&&this._isOnline&&(this._isOnline=!1,this._listenerManager.announceNetworkDown()),this._reconnectionManager.onReconnection(function(){n._config.autoNetworkDetection&&!n._isOnline&&(n._isOnline=!0,n._listenerManager.announceNetworkUp()),n.reconnect(),n._subscriptionStatusAnnounced=!0;var t={category:y.default.PNReconnectedCategory,operation:e.operation,lastTimetoken:n._lastTimetoken,currentTimetoken:n._currentTimetoken};n._listenerManager.announceStatus(t)}),this._reconnectionManager.startPolling(),this._listenerManager.announceStatus(e)):e.category===y.default.PNBadRequestCategory?(this._stopHeartbeatTimer(),this._listenerManager.announceStatus(e)):this._listenerManager.announceStatus(e);else{if(this._storedTimetoken?(this._currentTimetoken=this._storedTimetoken,this._storedTimetoken=null):(this._lastTimetoken=this._currentTimetoken,this._currentTimetoken=t.metadata.timetoken),!this._subscriptionStatusAnnounced){var r={};r.category=y.default.PNConnectedCategory,r.operation=e.operation,r.affectedChannels=this._pendingChannelSubscriptions,r.subscribedChannels=this.getSubscribedChannels(),r.affectedChannelGroups=this._pendingChannelGroupSubscriptions,r.lastTimetoken=this._lastTimetoken,r.currentTimetoken=this._currentTimetoken,this._subscriptionStatusAnnounced=!0,this._listenerManager.announceStatus(r),this._pendingChannelSubscriptions=[],this._pendingChannelGroupSubscriptions=[]}var i=t.messages||[],o=this._config,a=o.requestMessageCountThreshold,s=o.dedupeOnSubscribe;if(a&&i.length>=a){var u={};u.category=y.default.PNRequestMessageCountExceededCategory,u.operation=e.operation,this._listenerManager.announceStatus(u)}i.forEach(function(e){var t=e.channel,r=e.subscriptionMatch,i=e.publishMetaData;if(t===r&&(r=null),s){if(n._dedupingManager.isDuplicate(e))return;n._dedupingManager.addEntry(e)}if(d.default.endsWith(e.channel,"-pnpres")){var o={channel:null,subscription:null};o.actualChannel=null!=r?t:null,o.subscribedChannel=null!=r?r:t,t&&(o.channel=t.substring(0,t.lastIndexOf("-pnpres"))),r&&(o.subscription=r.substring(0,r.lastIndexOf("-pnpres"))),o.action=e.payload.action,o.state=e.payload.data,o.timetoken=i.publishTimetoken,o.occupancy=e.payload.occupancy,o.uuid=e.payload.uuid,o.timestamp=e.payload.timestamp,e.payload.join&&(o.join=e.payload.join),e.payload.leave&&(o.leave=e.payload.leave),e.payload.timeout&&(o.timeout=e.payload.timeout),n._listenerManager.announcePresence(o)}else{var a={channel:null,subscription:null};a.actualChannel=null!=r?t:null,a.subscribedChannel=null!=r?r:t,a.channel=t,a.subscription=r,a.timetoken=i.publishTimetoken,a.publisher=e.issuingClientId,e.userMetadata&&(a.userMetadata=e.userMetadata),n._config.cipherKey?a.message=n._crypto.decrypt(e.payload):a.message=e.payload,n._listenerManager.announceMessage(a)}}),this._region=t.metadata.region,this._startSubscribeLoop()}}},{key:"_stopSubscribeLoop",value:function(){this._subscribeCall&&("function"==typeof this._subscribeCall.abort&&this._subscribeCall.abort(),this._subscribeCall=null)}}]),e}();t.default=v,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=(n(5),n(10)),o=function(e){return e&&e.__esModule?e:{default:e}}(i),a=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._listeners=[]}return r(e,[{key:"addListener",value:function(e){this._listeners.push(e)}},{key:"removeListener",value:function(e){var t=[];this._listeners.forEach(function(n){n!==e&&t.push(n)}),this._listeners=t}},{key:"removeAllListeners",value:function(){this._listeners=[]}},{key:"announcePresence",value:function(e){this._listeners.forEach(function(t){t.presence&&t.presence(e)})}},{key:"announceStatus",value:function(e){this._listeners.forEach(function(t){t.status&&t.status(e)})}},{key:"announceMessage",value:function(e){this._listeners.forEach(function(t){t.message&&t.message(e)})}},{key:"announceNetworkUp",value:function(){var e={};e.category=o.default.PNNetworkUpCategory,this.announceStatus(e)}},{key:"announceNetworkDown",value:function(){var e={};e.category=o.default.PNNetworkDownCategory,this.announceStatus(e)}}]),e}();t.default=a,e.exports=t.default},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={PNNetworkUpCategory:"PNNetworkUpCategory",PNNetworkDownCategory:"PNNetworkDownCategory",PNNetworkIssuesCategory:"PNNetworkIssuesCategory",PNTimeoutCategory:"PNTimeoutCategory",PNBadRequestCategory:"PNBadRequestCategory",PNAccessDeniedCategory:"PNAccessDeniedCategory",PNUnknownCategory:"PNUnknownCategory",PNReconnectedCategory:"PNReconnectedCategory",PNConnectedCategory:"PNConnectedCategory",PNRequestMessageCountExceededCategory:"PNRequestMessageCountExceededCategory"},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=(n(12),n(5),function(){function e(t){var n=t.timeEndpoint;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._timeEndpoint=n}return r(e,[{key:"onReconnection",value:function(e){this._reconnectionCallback=e}},{key:"startPolling",value:function(){this._timeTimer=setInterval(this._performTimeLoop.bind(this),3e3)}},{key:"stopPolling",value:function(){clearInterval(this._timeTimer)}},{key:"_performTimeLoop",value:function(){var e=this;this._timeEndpoint(function(t){t.error||(clearInterval(e._timeTimer),e._reconnectionCallback())})}}]),e}());t.default=i,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNTimeOperation},t.getURL=function(){return"/time/0"},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.prepareParams=function(){return{}},t.isAuthSupported=function(){return!1},t.handleResponse=function(e,t){return{timetoken:t[0]}},t.validateParams=function(){};var r=(n(5),n(13)),i=function(e){return e&&e.__esModule?e:{default:e}}(r)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={PNTimeOperation:"PNTimeOperation",PNHistoryOperation:"PNHistoryOperation",PNDeleteMessagesOperation:"PNDeleteMessagesOperation",PNFetchMessagesOperation:"PNFetchMessagesOperation",PNSubscribeOperation:"PNSubscribeOperation",PNUnsubscribeOperation:"PNUnsubscribeOperation",PNPublishOperation:"PNPublishOperation",PNPushNotificationEnabledChannelsOperation:"PNPushNotificationEnabledChannelsOperation",PNRemoveAllPushNotificationsOperation:"PNRemoveAllPushNotificationsOperation",PNWhereNowOperation:"PNWhereNowOperation",PNSetStateOperation:"PNSetStateOperation",PNHereNowOperation:"PNHereNowOperation",PNGetStateOperation:"PNGetStateOperation",PNHeartbeatOperation:"PNHeartbeatOperation",PNChannelGroupsOperation:"PNChannelGroupsOperation",PNRemoveGroupOperation:"PNRemoveGroupOperation",PNChannelsForGroupOperation:"PNChannelsForGroupOperation",PNAddChannelsToGroupOperation:"PNAddChannelsToGroupOperation",PNRemoveChannelsFromGroupOperation:"PNRemoveChannelsFromGroupOperation",PNAccessManagerGrant:"PNAccessManagerGrant",PNAccessManagerAudit:"PNAccessManagerAudit"},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=(n(2),n(5),function(e){var t=0;if(0===e.length)return t;for(var n=0;n<e.length;n+=1)t=(t<<5)-t+e.charCodeAt(n),t&=t;return t}),o=function(){function e(t){var n=t.config;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.hashHistory=[],this._config=n}return r(e,[{key:"getKey",value:function(e){var t=i(JSON.stringify(e.payload)).toString();return e.publishMetaData.publishTimetoken+"-"+t}},{key:"isDuplicate",value:function(e){return this.hashHistory.includes(this.getKey(e))}},{key:"addEntry",value:function(e){this.hashHistory.length>=this._config.maximumCacheSize&&this.hashHistory.shift(),this.hashHistory.push(this.getKey(e))}},{key:"clearHistory",value:function(){this.hashHistory=[]}}]),e}();t.default=o,e.exports=t.default},function(e,t){"use strict";function n(e){return encodeURIComponent(e).replace(/[!~*'()]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function r(e){return function(e){var t=[];return Object.keys(e).forEach(function(e){return t.push(e)}),t}(e).sort()}e.exports={signPamFromParams:function(e){return r(e).map(function(t){return t+"="+n(e[t])}).join("&")},endsWith:function(e,t){return-1!==e.indexOf(t,this.length-t.length)},createPromise:function(){var e=void 0,t=void 0;return{promise:new Promise(function(n,r){e=n,t=r}),reject:t,fulfill:e}},encodeString:n}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return function(e,t){return e.type=t,e.error=!0,e}({message:e},"validationError")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e.networking,r=e.config,o=null,s=null,c={};t.getOperation()===f.default.PNTimeOperation||t.getOperation()===f.default.PNChannelGroupsOperation?o=arguments.length<=2?void 0:arguments[2]:(c=arguments.length<=2?void 0:arguments[2],o=arguments.length<=3?void 0:arguments[3]),"undefined"==typeof Promise||o||(s=u.default.createPromise());var l=t.validateParams(e,c);if(!l){var d=t.prepareParams(e,c),p=function(e,t,n){return e.usePost&&e.usePost(t,n)?e.postURL(t,n):e.getURL(t,n)}(t,e,c),y=void 0,v={url:p,operation:t.getOperation(),timeout:t.getRequestTimeout(e)};d.uuid=r.UUID,d.pnsdk=function(e){if(e.sdkName)return e.sdkName;var t="PubNub-JS-"+e.sdkFamily;return e.partnerId&&(t+="-"+e.partnerId),t+="/"+e.getVersion()}(r),r.useInstanceId&&(d.instanceid=r.instanceId),r.useRequestId&&(d.requestid=a.default.createUUID()),t.isAuthSupported()&&r.getAuthKey()&&(d.auth=r.getAuthKey()),r.secretKey&&function(e,t,n){var r=e.config,i=e.crypto;n.timestamp=Math.floor((new Date).getTime()/1e3);var o=r.subscribeKey+"\n"+r.publishKey+"\n"+t+"\n";o+=u.default.signPamFromParams(n);var a=i.HMACSHA256(o);a=(a=a.replace(/\+/g,"-")).replace(/\//g,"_"),n.signature=a}(e,p,d);var b=function(n,r){if(n.error)o?o(n):s&&s.reject(new h("PubNub call failed, check status for details",n));else{var i=t.handleResponse(e,r,c);o?o(n,i):s&&s.fulfill(i)}};if(t.usePost&&t.usePost(e,c)){var g=t.postPayload(e,c);y=n.POST(d,g,v,b)}else y=t.useDelete&&t.useDelete()?n.DELETE(d,v,b):n.GET(d,v,b);return t.getOperation()===f.default.PNSubscribeOperation?y:s?s.promise:void 0}return o?o(i(l)):s?(s.reject(new h("Validation failed, check status for details",i(l))),s.promise):void 0};var o=n(3),a=r(o),s=(n(5),n(15)),u=r(s),c=n(2),l=(r(c),n(13)),f=r(l),h=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.name=r.constructor.name,r.status=n,r.message=e,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(Error);e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return o.default.PNAddChannelsToGroupOperation},t.validateParams=function(e,t){var n=t.channels,r=t.channelGroup,i=e.config;return r?n&&0!==n.length?i.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channels":"Missing Channel Group"},t.getURL=function(e,t){var n=t.channelGroup;return"/v1/channel-registration/sub-key/"+e.config.subscribeKey+"/channel-group/"+s.default.encodeString(n)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.channels;return{add:(void 0===n?[]:n).join(",")}},t.handleResponse=function(){return{}};var i=(n(5),n(13)),o=r(i),a=n(15),s=r(a)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return o.default.PNRemoveChannelsFromGroupOperation},t.validateParams=function(e,t){var n=t.channels,r=t.channelGroup,i=e.config;return r?n&&0!==n.length?i.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channels":"Missing Channel Group"},t.getURL=function(e,t){var n=t.channelGroup;return"/v1/channel-registration/sub-key/"+e.config.subscribeKey+"/channel-group/"+s.default.encodeString(n)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.channels;return{remove:(void 0===n?[]:n).join(",")}},t.handleResponse=function(){return{}};var i=(n(5),n(13)),o=r(i),a=n(15),s=r(a)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return o.default.PNRemoveGroupOperation},t.validateParams=function(e,t){var n=t.channelGroup,r=e.config;return n?r.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channel Group"},t.getURL=function(e,t){var n=t.channelGroup;return"/v1/channel-registration/sub-key/"+e.config.subscribeKey+"/channel-group/"+s.default.encodeString(n)+"/remove"},t.isAuthSupported=function(){return!0},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.prepareParams=function(){return{}},t.handleResponse=function(){return{}};var i=(n(5),n(13)),o=r(i),a=n(15),s=r(a)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNChannelGroupsOperation},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e){return"/v1/channel-registration/sub-key/"+e.config.subscribeKey+"/channel-group"},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(){return{}},t.handleResponse=function(e,t){return{groups:t.payload.groups}};var r=(n(5),n(13)),i=function(e){return e&&e.__esModule?e:{default:e}}(r)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return o.default.PNChannelsForGroupOperation},t.validateParams=function(e,t){var n=t.channelGroup,r=e.config;return n?r.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channel Group"},t.getURL=function(e,t){var n=t.channelGroup;return"/v1/channel-registration/sub-key/"+e.config.subscribeKey+"/channel-group/"+s.default.encodeString(n)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(){return{}},t.handleResponse=function(e,t){return{channels:t.payload.channels}};var i=(n(5),n(13)),o=r(i),a=n(15),s=r(a)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNPushNotificationEnabledChannelsOperation},t.validateParams=function(e,t){var n=t.device,r=t.pushGateway,i=t.channels,o=e.config;return n?r?i&&0!==i.length?o.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channels":"Missing GW Type (pushGateway: gcm or apns)":"Missing Device ID (device)"},t.getURL=function(e,t){var n=t.device;return"/v1/push/sub-key/"+e.config.subscribeKey+"/devices/"+n},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.pushGateway,r=t.channels;return{type:n,add:(void 0===r?[]:r).join(",")}},t.handleResponse=function(){return{}};var r=(n(5),n(13)),i=function(e){return e&&e.__esModule?e:{default:e}}(r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNPushNotificationEnabledChannelsOperation},t.validateParams=function(e,t){var n=t.device,r=t.pushGateway,i=t.channels,o=e.config;return n?r?i&&0!==i.length?o.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channels":"Missing GW Type (pushGateway: gcm or apns)":"Missing Device ID (device)"},t.getURL=function(e,t){var n=t.device;return"/v1/push/sub-key/"+e.config.subscribeKey+"/devices/"+n},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.pushGateway,r=t.channels;return{type:n,remove:(void 0===r?[]:r).join(",")}},t.handleResponse=function(){return{}};var r=(n(5),n(13)),i=function(e){return e&&e.__esModule?e:{default:e}}(r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNPushNotificationEnabledChannelsOperation},t.validateParams=function(e,t){var n=t.device,r=t.pushGateway,i=e.config;return n?r?i.subscribeKey?void 0:"Missing Subscribe Key":"Missing GW Type (pushGateway: gcm or apns)":"Missing Device ID (device)"},t.getURL=function(e,t){var n=t.device;return"/v1/push/sub-key/"+e.config.subscribeKey+"/devices/"+n},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){return{type:t.pushGateway}},t.handleResponse=function(e,t){return{channels:t}};var r=(n(5),n(13)),i=function(e){return e&&e.__esModule?e:{default:e}}(r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNRemoveAllPushNotificationsOperation},t.validateParams=function(e,t){var n=t.device,r=t.pushGateway,i=e.config;return n?r?i.subscribeKey?void 0:"Missing Subscribe Key":"Missing GW Type (pushGateway: gcm or apns)":"Missing Device ID (device)"},t.getURL=function(e,t){var n=t.device;return"/v1/push/sub-key/"+e.config.subscribeKey+"/devices/"+n+"/remove"},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){return{type:t.pushGateway}},t.handleResponse=function(){return{}};var r=(n(5),n(13)),i=function(e){return e&&e.__esModule?e:{default:e}}(r)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return o.default.PNUnsubscribeOperation},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var n=e.config,r=t.channels,i=void 0===r?[]:r,o=i.length>0?i.join(","):",";return"/v2/presence/sub-key/"+n.subscribeKey+"/channel/"+s.default.encodeString(o)+"/leave"},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.channelGroups,r=void 0===n?[]:n,i={};return r.length>0&&(i["channel-group"]=r.join(",")),i},t.handleResponse=function(){return{}};var i=(n(5),n(13)),o=r(i),a=n(15),s=r(a)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNWhereNowOperation},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var n=e.config,r=t.uuid,i=void 0===r?n.UUID:r;return"/v2/presence/sub-key/"+n.subscribeKey+"/uuid/"+i},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(){return{}},t.handleResponse=function(e,t){return t.payload?{channels:t.payload.channels}:{channels:[]}};var r=(n(5),n(13)),i=function(e){return e&&e.__esModule?e:{default:e}}(r)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return o.default.PNHeartbeatOperation},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var n=e.config,r=t.channels,i=void 0===r?[]:r,o=i.length>0?i.join(","):",";return"/v2/presence/sub-key/"+n.subscribeKey+"/channel/"+s.default.encodeString(o)+"/heartbeat"},t.isAuthSupported=function(){return!0},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.prepareParams=function(e,t){var n=t.channelGroups,r=void 0===n?[]:n,i=t.state,o=void 0===i?{}:i,a=e.config,s={};return r.length>0&&(s["channel-group"]=r.join(",")),s.state=JSON.stringify(o),s.heartbeat=a.getPresenceTimeout(),s},t.handleResponse=function(){return{}};var i=(n(5),n(13)),o=r(i),a=n(15),s=r(a)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return o.default.PNGetStateOperation},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var n=e.config,r=t.uuid,i=void 0===r?n.UUID:r,o=t.channels,a=void 0===o?[]:o,u=a.length>0?a.join(","):",";return"/v2/presence/sub-key/"+n.subscribeKey+"/channel/"+s.default.encodeString(u)+"/uuid/"+i},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.channelGroups,r=void 0===n?[]:n,i={};return r.length>0&&(i["channel-group"]=r.join(",")),i},t.handleResponse=function(e,t,n){var r=n.channels,i=void 0===r?[]:r,o=n.channelGroups,a=void 0===o?[]:o,s={};return 1===i.length&&0===a.length?s[i[0]]=t.payload:s=t.payload,{channels:s}};var i=(n(5),n(13)),o=r(i),a=n(15),s=r(a)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return o.default.PNSetStateOperation},t.validateParams=function(e,t){var n=e.config,r=t.state,i=t.channels,o=void 0===i?[]:i,a=t.channelGroups,s=void 0===a?[]:a;return r?n.subscribeKey?0===o.length&&0===s.length?"Please provide a list of channels and/or channel-groups":void 0:"Missing Subscribe Key":"Missing State"},t.getURL=function(e,t){var n=e.config,r=t.channels,i=void 0===r?[]:r,o=i.length>0?i.join(","):",";return"/v2/presence/sub-key/"+n.subscribeKey+"/channel/"+s.default.encodeString(o)+"/uuid/"+n.UUID+"/data"},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.state,r=t.channelGroups,i=void 0===r?[]:r,o={};return o.state=JSON.stringify(n),i.length>0&&(o["channel-group"]=i.join(",")),o},t.handleResponse=function(e,t){return{state:t.payload}};var i=(n(5),n(13)),o=r(i),a=n(15),s=r(a)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return o.default.PNHereNowOperation},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var n=e.config,r=t.channels,i=void 0===r?[]:r,o=t.channelGroups,a=void 0===o?[]:o,u="/v2/presence/sub-key/"+n.subscribeKey;if(i.length>0||a.length>0){var c=i.length>0?i.join(","):",";u+="/channel/"+s.default.encodeString(c)}return u},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.channelGroups,r=void 0===n?[]:n,i=t.includeUUIDs,o=void 0===i||i,a=t.includeState,s=void 0!==a&&a,u={};return o||(u.disable_uuids=1),s&&(u.state=1),r.length>0&&(u["channel-group"]=r.join(",")),u},t.handleResponse=function(e,t,n){var r=n.channels,i=void 0===r?[]:r,o=n.channelGroups,a=void 0===o?[]:o,s=n.includeUUIDs,u=void 0===s||s,c=n.includeState,l=void 0!==c&&c;return i.length>1||a.length>0||0===a.length&&0===i.length?function(){var e={};return e.totalChannels=t.payload.total_channels,e.totalOccupancy=t.payload.total_occupancy,e.channels={},Object.keys(t.payload.channels).forEach(function(n){var r=t.payload.channels[n],i=[];return e.channels[n]={occupants:i,name:n,occupancy:r.occupancy},u&&r.uuids.forEach(function(e){l?i.push({state:e.state,uuid:e.uuid}):i.push({state:null,uuid:e})}),e}),e}():function(){var e={},n=[];return e.totalChannels=1,e.totalOccupancy=t.occupancy,e.channels={},e.channels[i[0]]={occupants:n,name:i[0],occupancy:t.occupancy},u&&t.uuids&&t.uuids.forEach(function(e){l?n.push({state:e.state,uuid:e.uuid}):n.push({state:null,uuid:e})}),e}()};var i=(n(5),n(13)),o=r(i),a=n(15),s=r(a)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNAccessManagerAudit},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e){return"/v2/auth/audit/sub-key/"+e.config.subscribeKey},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!1},t.prepareParams=function(e,t){var n=t.channel,r=t.channelGroup,i=t.authKeys,o=void 0===i?[]:i,a={};return n&&(a.channel=n),r&&(a["channel-group"]=r),o.length>0&&(a.auth=o.join(",")),a},t.handleResponse=function(e,t){return t.payload};var r=(n(5),n(13)),i=function(e){return e&&e.__esModule?e:{default:e}}(r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNAccessManagerGrant},t.validateParams=function(e){var t=e.config;return t.subscribeKey?t.publishKey?t.secretKey?void 0:"Missing Secret Key":"Missing Publish Key":"Missing Subscribe Key"},t.getURL=function(e){return"/v2/auth/grant/sub-key/"+e.config.subscribeKey},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!1},t.prepareParams=function(e,t){var n=t.channels,r=void 0===n?[]:n,i=t.channelGroups,o=void 0===i?[]:i,a=t.ttl,s=t.read,u=void 0!==s&&s,c=t.write,l=void 0!==c&&c,f=t.manage,h=void 0!==f&&f,d=t.authKeys,p=void 0===d?[]:d,y={};return y.r=u?"1":"0",y.w=l?"1":"0",y.m=h?"1":"0",r.length>0&&(y.channel=r.join(",")),o.length>0&&(y["channel-group"]=o.join(",")),p.length>0&&(y.auth=p.join(",")),(a||0===a)&&(y.ttl=a),y},t.handleResponse=function(){return{}};var r=(n(5),n(13)),i=function(e){return e&&e.__esModule?e:{default:e}}(r)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n=e.crypto,r=e.config,i=JSON.stringify(t);return r.cipherKey&&(i=n.encrypt(i),i=JSON.stringify(i)),i}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.getOperation=function(){return s.default.PNPublishOperation},t.validateParams=function(e,t){var n=e.config,r=t.message;return t.channel?r?n.subscribeKey?void 0:"Missing Subscribe Key":"Missing Message":"Missing Channel"},t.usePost=function(e,t){var n=t.sendByPost;return void 0!==n&&n},t.getURL=function(e,t){var n=e.config,r=t.channel,o=t.message,a=i(e,o);return"/publish/"+n.publishKey+"/"+n.subscribeKey+"/0/"+c.default.encodeString(r)+"/0/"+c.default.encodeString(a)},t.postURL=function(e,t){var n=e.config,r=t.channel;return"/publish/"+n.publishKey+"/"+n.subscribeKey+"/0/"+c.default.encodeString(r)+"/0"},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.postPayload=function(e,t){return i(e,t.message)},t.prepareParams=function(e,t){var n=t.meta,r=t.replicate,i=void 0===r||r,a=t.storeInHistory,s=t.ttl,u={};return null!=a&&(u.store=a?"1":"0"),s&&(u.ttl=s),!1===i&&(u.norep="true"),n&&"object"===(void 0===n?"undefined":o(n))&&(u.meta=JSON.stringify(n)),u},t.handleResponse=function(e,t){return{timetoken:t[2]}};var a=(n(5),n(13)),s=r(a),u=n(15),c=r(u)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return o.default.PNHistoryOperation},t.validateParams=function(e,t){var n=t.channel,r=e.config;return n?r.subscribeKey?void 0:"Missing Subscribe Key":"Missing channel"},t.getURL=function(e,t){var n=t.channel;return"/v2/history/sub-key/"+e.config.subscribeKey+"/channel/"+s.default.encodeString(n)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.start,r=t.end,i=t.reverse,o=t.count,a=void 0===o?100:o,s=t.stringifiedTimeToken,u=void 0!==s&&s,c={include_token:"true"};return c.count=a,n&&(c.start=n),r&&(c.end=r),u&&(c.string_message_token="true"),null!=i&&(c.reverse=i.toString()),c},t.handleResponse=function(e,t){var n={messages:[],startTimeToken:t[1],endTimeToken:t[2]};return t[0].forEach(function(t){var r={timetoken:t.timetoken,entry:function(e,t){var n=e.config,r=e.crypto;if(!n.cipherKey)return t;try{return r.decrypt(t)}catch(e){return t}}(e,t.message)};n.messages.push(r)}),n};var i=(n(5),n(13)),o=r(i),a=n(15),s=r(a)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return o.default.PNDeleteMessagesOperation},t.validateParams=function(e,t){var n=t.channel,r=e.config;return n?r.subscribeKey?void 0:"Missing Subscribe Key":"Missing channel"},t.useDelete=function(){return!0},t.getURL=function(e,t){var n=t.channel;return"/v3/history/sub-key/"+e.config.subscribeKey+"/channel/"+s.default.encodeString(n)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.start,r=t.end,i={};return n&&(i.start=n),r&&(i.end=r),i},t.handleResponse=function(e,t){return t.payload};var i=(n(5),n(13)),o=r(i),a=n(15),s=r(a)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return o.default.PNFetchMessagesOperation},t.validateParams=function(e,t){var n=t.channels,r=e.config;return n&&0!==n.length?r.subscribeKey?void 0:"Missing Subscribe Key":"Missing channels"},t.getURL=function(e,t){var n=t.channels,r=void 0===n?[]:n,i=e.config,o=r.length>0?r.join(","):",";return"/v3/history/sub-key/"+i.subscribeKey+"/channel/"+s.default.encodeString(o)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.start,r=t.end,i=t.count,o=t.stringifiedTimeToken,a=void 0!==o&&o,s={};return i&&(s.max=i),n&&(s.start=n),r&&(s.end=r),a&&(s.string_message_token="true"),s},t.handleResponse=function(e,t){var n={channels:{}};return Object.keys(t.channels||{}).forEach(function(r){n.channels[r]=[],(t.channels[r]||[]).forEach(function(t){var i={};i.channel=r,i.subscription=null,i.timetoken=t.timetoken,i.message=function(e,t){var n=e.config,r=e.crypto;if(!n.cipherKey)return t;try{return r.decrypt(t)}catch(e){return t}}(e,t.message),n.channels[r].push(i)})}),n};var i=(n(5),n(13)),o=r(i),a=n(15),s=r(a)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return o.default.PNSubscribeOperation},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var n=e.config,r=t.channels,i=void 0===r?[]:r,o=i.length>0?i.join(","):",";return"/v2/subscribe/"+n.subscribeKey+"/"+s.default.encodeString(o)+"/0"},t.getRequestTimeout=function(e){return e.config.getSubscribeTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=e.config,r=t.channelGroups,i=void 0===r?[]:r,o=t.timetoken,a=t.filterExpression,s=t.region,u={heartbeat:n.getPresenceTimeout()};return i.length>0&&(u["channel-group"]=i.join(",")),a&&a.length>0&&(u["filter-expr"]=a),o&&(u.tt=o),s&&(u.tr=s),u},t.handleResponse=function(e,t){var n=[];t.m.forEach(function(e){var t={publishTimetoken:e.p.t,region:e.p.r},r={shard:parseInt(e.a,10),subscriptionMatch:e.b,channel:e.c,payload:e.d,flags:e.f,issuingClientId:e.i,subscribeKey:e.k,originationTimetoken:e.o,userMetadata:e.u,publishMetaData:t};n.push(r)});var r={timetoken:t.t.t,region:t.t.r};return{messages:n,metadata:r}};var i=(n(5),n(13)),o=r(i),a=n(15),s=r(a)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(2),a=(r(o),n(10)),s=r(a),u=(n(5),function(){function e(t){var n=this;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._modules={},Object.keys(t).forEach(function(e){n._modules[e]=t[e].bind(n)})}return i(e,[{key:"init",value:function(e){this._config=e,this._maxSubDomain=20,this._currentSubDomain=Math.floor(Math.random()*this._maxSubDomain),this._providedFQDN=(this._config.secure?"https://":"http://")+this._config.origin,this._coreParams={},this.shiftStandardOrigin()}},{key:"nextOrigin",value:function(){if(-1===this._providedFQDN.indexOf("pubsub."))return this._providedFQDN;var e=void 0;return this._currentSubDomain=this._currentSubDomain+1,this._currentSubDomain>=this._maxSubDomain&&(this._currentSubDomain=1),e=this._currentSubDomain.toString(),this._providedFQDN.replace("pubsub","ps"+e)}},{key:"hasModule",value:function(e){return e in this._modules}},{key:"shiftStandardOrigin",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._standardOrigin=this.nextOrigin(e),this._standardOrigin}},{key:"getStandardOrigin",value:function(){return this._standardOrigin}},{key:"POST",value:function(e,t,n,r){return this._modules.post(e,t,n,r)}},{key:"GET",value:function(e,t,n){return this._modules.get(e,t,n)}},{key:"DELETE",value:function(e,t,n){return this._modules.del(e,t,n)}},{key:"_detectErrorCategory",value:function(e){if("ENOTFOUND"===e.code)return s.default.PNNetworkIssuesCategory;if("ECONNREFUSED"===e.code)return s.default.PNNetworkIssuesCategory;if("ECONNRESET"===e.code)return s.default.PNNetworkIssuesCategory;if("EAI_AGAIN"===e.code)return s.default.PNNetworkIssuesCategory;if(0===e.status||e.hasOwnProperty("status")&&void 0===e.status)return s.default.PNNetworkIssuesCategory;if(e.timeout)return s.default.PNTimeoutCategory;if("ETIMEDOUT"===e.code)return s.default.PNNetworkIssuesCategory;if(e.response){if(e.response.badRequest)return s.default.PNBadRequestCategory;if(e.response.forbidden)return s.default.PNAccessDeniedCategory}return s.default.PNUnknownCategory}}]),e}());t.default=u,e.exports=t.default},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={get:function(e){try{return localStorage.getItem(e)}catch(e){return null}},set:function(e,t){try{return localStorage.setItem(e,t)}catch(e){return null}}},e.exports=t.default},function(e,t,n){"use strict";function r(e){var t=(new Date).getTime(),n=(new Date).toISOString(),r=console&&console.log?console:window&&window.console&&window.console.log?window.console:console;r.log("<<<<<"),r.log("["+n+"]","\n",e.url,"\n",e.qs),r.log("-----"),e.on("response",function(n){var i=(new Date).getTime(),o=i-t,a=(new Date).toISOString();r.log(">>>>>>"),r.log("["+a+" / "+o+"]","\n",e.url,"\n",e.qs,"\n",n.text),r.log("-----")})}function i(e,t,n){var i=this;return this._config.logVerbosity&&(e=e.use(r)),this._config.proxy&&this._modules.proxy&&(e=this._modules.proxy.call(this,e)),this._config.keepAlive&&this._modules.keepAlive&&(e=this._modules.keepAlive(e)),e.timeout(t.timeout).end(function(e,r){var o={};if(o.error=null!==e,o.operation=t.operation,r&&r.status&&(o.statusCode=r.status),e){if(e.response&&e.response.text&&!i._config.logVerbosity)try{o.errorData=JSON.parse(e.response.text)}catch(t){o.errorData=e}else o.errorData=e;return o.category=i._detectErrorCategory(e),n(o,null)}var a=JSON.parse(r.text);return a.error&&1===a.error&&a.status&&a.message&&a.service?(o.errorData=a,o.statusCode=a.status,o.error=!0,o.category=i._detectErrorCategory(o),n(o,null)):n(o,a)})}Object.defineProperty(t,"__esModule",{value:!0}),t.get=function(e,t,n){var r=a.default.get(this.getStandardOrigin()+t.url).query(e);return i.call(this,r,t,n)},t.post=function(e,t,n,r){var o=a.default.post(this.getStandardOrigin()+n.url).query(e).send(t);return i.call(this,o,n,r)},t.del=function(e,t,n){var r=a.default.delete(this.getStandardOrigin()+t.url).query(e);return i.call(this,r,t,n)};var o=n(42),a=function(e){return e&&e.__esModule?e:{default:e}}(o);n(5)},function(e,t,n){function r(){}function i(e){if(!p(e))return e;var t=[];for(var n in e)o(t,n,e[n]);return t.join("&")}function o(e,t,n){if(null!=n)if(Array.isArray(n))n.forEach(function(n){o(e,t,n)});else if(p(n))for(var r in n)o(e,t+"["+r+"]",n[r]);else e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));else null===n&&e.push(encodeURIComponent(t))}function a(e){for(var t,n,r={},i=e.split("&"),o=0,a=i.length;o<a;++o)t=i[o],-1==(n=t.indexOf("="))?r[decodeURIComponent(t)]="":r[decodeURIComponent(t.slice(0,n))]=decodeURIComponent(t.slice(n+1));return r}function s(e){return/[\/+]json($|[^-\w])/.test(e)}function u(e){this.req=e,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||void 0===this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var t=this.xhr.status;1223===t&&(t=204),this._setStatusProperties(t),this.header=this.headers=function(e){for(var t,n,r,i,o=e.split(/\r?\n/),a={},s=0,u=o.length;s<u;++s)n=o[s],-1!==(t=n.indexOf(":"))&&(r=n.slice(0,t).toLowerCase(),i=g(n.slice(t+1)),a[r]=i);return a}(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),null===this.text&&e._responseType?this.body=this.xhr.response:this.body="HEAD"!=this.req.method?this._parseBody(this.text?this.text:this.xhr.response):null}function c(e,t){var n=this;this._query=this._query||[],this.method=e,this.url=t,this.header={},this._header={},this.on("end",function(){var e,t=null,r=null;try{r=new u(n)}catch(r){return(t=new Error("Parser is unable to parse the response")).parse=!0,t.original=r,n.xhr?(t.rawResponse=void 0===n.xhr.responseType?n.xhr.responseText:n.xhr.response,t.status=n.xhr.status?n.xhr.status:null,t.statusCode=t.status):(t.rawResponse=null,t.status=null),n.callback(t)}n.emit("response",r);try{n._isResponseOK(r)||(e=new Error(r.statusText||"Unsuccessful HTTP response"))}catch(t){e=t}e?(e.original=t,e.response=r,e.status=r.status,n.callback(e,r)):n.callback(null,r)})}function l(e,t,n){var r=b("DELETE",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r}var f;"undefined"!=typeof window?f=window:"undefined"!=typeof self?f=self:(console.warn("Using browser-only version of superagent in non-browser environment"),f=this);var h=n(43),d=n(44),p=n(45),y=n(46),v=n(48),b=t=e.exports=function(e,n){return"function"==typeof n?new t.Request("GET",e).end(n):1==arguments.length?new t.Request("GET",e):new t.Request(e,n)};t.Request=c,b.getXHR=function(){if(!(!f.XMLHttpRequest||f.location&&"file:"==f.location.protocol&&f.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}throw Error("Browser-only version of superagent could not find XHR")};var g="".trim?function(e){return e.trim()}:function(e){return e.replace(/(^\s*|\s*$)/g,"")};b.serializeObject=i,b.parseString=a,b.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},b.serialize={"application/x-www-form-urlencoded":i,"application/json":JSON.stringify},b.parse={"application/x-www-form-urlencoded":a,"application/json":JSON.parse},y(u.prototype),u.prototype._parseBody=function(e){var t=b.parse[this.type];return this.req._parser?this.req._parser(this,e):(!t&&s(this.type)&&(t=b.parse["application/json"]),t&&e&&(e.length||e instanceof Object)?t(e):null)},u.prototype.toError=function(){var e=this.req,t=e.method,n=e.url,r="cannot "+t+" "+n+" ("+this.status+")",i=new Error(r);return i.status=this.status,i.method=t,i.url=n,i},b.Response=u,h(c.prototype),d(c.prototype),c.prototype.type=function(e){return this.set("Content-Type",b.types[e]||e),this},c.prototype.accept=function(e){return this.set("Accept",b.types[e]||e),this},c.prototype.auth=function(e,t,n){return 1===arguments.length&&(t=""),"object"==typeof t&&null!==t&&(n=t,t=""),n||(n={type:"function"==typeof btoa?"basic":"auto"}),this._auth(e,t,n,function(e){if("function"==typeof btoa)return btoa(e);throw new Error("Cannot use basic auth, btoa is not a function")})},c.prototype.query=function(e){return"string"!=typeof e&&(e=i(e)),e&&this._query.push(e),this},c.prototype.attach=function(e,t,n){if(t){if(this._data)throw Error("superagent can't mix .send() and .attach()");this._getFormData().append(e,t,n||t.name)}return this},c.prototype._getFormData=function(){return this._formData||(this._formData=new f.FormData),this._formData},c.prototype.callback=function(e,t){if(this._shouldRetry(e,t))return this._retry();var n=this._callback;this.clearTimeout(),e&&(this._maxRetries&&(e.retries=this._retries-1),this.emit("error",e)),n(e,t)},c.prototype.crossDomainError=function(){var e=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");e.crossDomain=!0,e.status=this.status,e.method=this.method,e.url=this.url,this.callback(e)},c.prototype.buffer=c.prototype.ca=c.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},c.prototype.pipe=c.prototype.write=function(){throw Error("Streaming is not supported in browser version of superagent")},c.prototype._isHost=function(e){return e&&"object"==typeof e&&!Array.isArray(e)&&"[object Object]"!==Object.prototype.toString.call(e)},c.prototype.end=function(e){return this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=e||r,this._finalizeQueryString(),this._end()},c.prototype._end=function(){var e=this,t=this.xhr=b.getXHR(),n=this._formData||this._data;this._setTimeouts(),t.onreadystatechange=function(){var n=t.readyState;if(n>=2&&e._responseTimeoutTimer&&clearTimeout(e._responseTimeoutTimer),4==n){var r;try{r=t.status}catch(e){r=0}if(!r){if(e.timedout||e._aborted)return;return e.crossDomainError()}e.emit("end")}};var r=function(t,n){n.total>0&&(n.percent=n.loaded/n.total*100),n.direction=t,e.emit("progress",n)};if(this.hasListeners("progress"))try{t.onprogress=r.bind(null,"download"),t.upload&&(t.upload.onprogress=r.bind(null,"upload"))}catch(e){}try{this.username&&this.password?t.open(this.method,this.url,!0,this.username,this.password):t.open(this.method,this.url,!0)}catch(e){return this.callback(e)}if(this._withCredentials&&(t.withCredentials=!0),!this._formData&&"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof n&&!this._isHost(n)){var i=this._header["content-type"],o=this._serializer||b.serialize[i?i.split(";")[0]:""];!o&&s(i)&&(o=b.serialize["application/json"]),o&&(n=o(n))}for(var a in this.header)null!=this.header[a]&&this.header.hasOwnProperty(a)&&t.setRequestHeader(a,this.header[a]);return this._responseType&&(t.responseType=this._responseType),this.emit("request",this),t.send(void 0!==n?n:null),this},b.agent=function(){return new v},["GET","POST","OPTIONS","PATCH","PUT","DELETE"].forEach(function(e){v.prototype[e.toLowerCase()]=function(t,n){var r=new b.Request(e,t);return this._setDefaults(r),n&&r.end(n),r}}),v.prototype.del=v.prototype.delete,b.get=function(e,t,n){var r=b("GET",e);return"function"==typeof t&&(n=t,t=null),t&&r.query(t),n&&r.end(n),r},b.head=function(e,t,n){var r=b("HEAD",e);return"function"==typeof t&&(n=t,t=null),t&&r.query(t),n&&r.end(n),r},b.options=function(e,t,n){var r=b("OPTIONS",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},b.del=l,b.delete=l,b.patch=function(e,t,n){var r=b("PATCH",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},b.post=function(e,t,n){var r=b("POST",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},b.put=function(e,t,n){var r=b("PUT",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r}},function(e,t,n){function r(e){if(e)return function(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}(e)}e.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},r.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var r,i=0;i<n.length;i++)if((r=n[i])===t||r.fn===t){n.splice(i,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n)for(var r=0,i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t);return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,n){"use strict";function r(e){if(e)return function(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}(e)}var i=n(45);e.exports=r,r.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,this},r.prototype.parse=function(e){return this._parser=e,this},r.prototype.responseType=function(e){return this._responseType=e,this},r.prototype.serialize=function(e){return this._serializer=e,this},r.prototype.timeout=function(e){if(!e||"object"!=typeof e)return this._timeout=e,this._responseTimeout=0,this;for(var t in e)switch(t){case"deadline":this._timeout=e.deadline;break;case"response":this._responseTimeout=e.response;break;default:console.warn("Unknown timeout option",t)}return this},r.prototype.retry=function(e,t){return 0!==arguments.length&&!0!==e||(e=1),e<=0&&(e=0),this._maxRetries=e,this._retries=0,this._retryCallback=t,this};var o=["ECONNRESET","ETIMEDOUT","EADDRINFO","ESOCKETTIMEDOUT"];r.prototype._shouldRetry=function(e,t){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var n=this._retryCallback(e,t);if(!0===n)return!0;if(!1===n)return!1}catch(e){console.error(e)}if(t&&t.status&&t.status>=500&&501!=t.status)return!0;if(e){if(e.code&&~o.indexOf(e.code))return!0;if(e.timeout&&"ECONNABORTED"==e.code)return!0;if(e.crossDomain)return!0}return!1},r.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this._end()},r.prototype.then=function(e,t){if(!this._fullfilledPromise){var n=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise(function(e,t){n.end(function(n,r){n?t(n):e(r)})})}return this._fullfilledPromise.then(e,t)},r.prototype.catch=function(e){return this.then(void 0,e)},r.prototype.use=function(e){return e(this),this},r.prototype.ok=function(e){if("function"!=typeof e)throw Error("Callback required");return this._okCallback=e,this},r.prototype._isResponseOK=function(e){return!!e&&(this._okCallback?this._okCallback(e):e.status>=200&&e.status<300)},r.prototype.get=function(e){return this._header[e.toLowerCase()]},r.prototype.getHeader=r.prototype.get,r.prototype.set=function(e,t){if(i(e)){for(var n in e)this.set(n,e[n]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},r.prototype.unset=function(e){return delete this._header[e.toLowerCase()],delete this.header[e],this},r.prototype.field=function(e,t){if(null===e||void 0===e)throw new Error(".field(name, val) name can not be empty");if(this._data&&console.error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()"),i(e)){for(var n in e)this.field(n,e[n]);return this}if(Array.isArray(t)){for(var r in t)this.field(e,t[r]);return this}if(null===t||void 0===t)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof t&&(t=""+t),this._getFormData().append(e,t),this},r.prototype.abort=function(){return this._aborted?this:(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort"),this)},r.prototype._auth=function(e,t,n,r){switch(n.type){case"basic":this.set("Authorization","Basic "+r(e+":"+t));break;case"auto":this.username=e,this.password=t;break;case"bearer":this.set("Authorization","Bearer "+e)}return this},r.prototype.withCredentials=function(e){return void 0==e&&(e=!0),this._withCredentials=e,this},r.prototype.redirects=function(e){return this._maxRedirects=e,this},r.prototype.maxResponseSize=function(e){if("number"!=typeof e)throw TypeError("Invalid argument");return this._maxResponseSize=e,this},r.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},r.prototype.send=function(e){var t=i(e),n=this._header["content-type"];if(this._formData&&console.error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()"),t&&!this._data)Array.isArray(e)?this._data=[]:this._isHost(e)||(this._data={});else if(e&&this._data&&this._isHost(this._data))throw Error("Can't merge these send calls");if(t&&i(this._data))for(var r in e)this._data[r]=e[r];else"string"==typeof e?(n||this.type("form"),n=this._header["content-type"],this._data="application/x-www-form-urlencoded"==n?this._data?this._data+"&"+e:e:(this._data||"")+e):this._data=e;return!t||this._isHost(e)?this:(n||this.type("json"),this)},r.prototype.sortQuery=function(e){return this._sort=void 0===e||e,this},r.prototype._finalizeQueryString=function(){var e=this._query.join("&");if(e&&(this.url+=(this.url.indexOf("?")>=0?"&":"?")+e),this._query.length=0,this._sort){var t=this.url.indexOf("?");if(t>=0){var n=this.url.substring(t+1).split("&");"function"==typeof this._sort?n.sort(this._sort):n.sort(),this.url=this.url.substring(0,t)+"?"+n.join("&")}}},r.prototype._appendQueryString=function(){console.trace("Unsupported")},r.prototype._timeoutError=function(e,t,n){if(!this._aborted){var r=new Error(e+t+"ms exceeded");r.timeout=t,r.code="ECONNABORTED",r.errno=n,this.timedout=!0,this.abort(),this.callback(r)}},r.prototype._setTimeouts=function(){var e=this;this._timeout&&!this._timer&&(this._timer=setTimeout(function(){e._timeoutError("Timeout of ",e._timeout,"ETIME")},this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout(function(){e._timeoutError("Response timeout of ",e._responseTimeout,"ETIMEDOUT")},this._responseTimeout))}},function(e,t){"use strict";e.exports=function(e){return null!==e&&"object"==typeof e}},function(e,t,n){"use strict";function r(e){if(e)return function(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}(e)}var i=n(47);e.exports=r,r.prototype.get=function(e){return this.header[e.toLowerCase()]},r.prototype._setHeaderProperties=function(e){var t=e["content-type"]||"";this.type=i.type(t);var n=i.params(t);for(var r in n)this[r]=n[r];this.links={};try{e.link&&(this.links=i.parseLinks(e.link))}catch(e){}},r.prototype._setStatusProperties=function(e){var t=e/100|0;this.status=this.statusCode=e,this.statusType=t,this.info=1==t,this.ok=2==t,this.redirect=3==t,this.clientError=4==t,this.serverError=5==t,this.error=(4==t||5==t)&&this.toError(),this.created=201==e,this.accepted=202==e,this.noContent=204==e,this.badRequest=400==e,this.unauthorized=401==e,this.notAcceptable=406==e,this.forbidden=403==e,this.notFound=404==e,this.unprocessableEntity=422==e}},function(e,t){"use strict";t.type=function(e){return e.split(/ *; */).shift()},t.params=function(e){return e.split(/ *; */).reduce(function(e,t){var n=t.split(/ *= */),r=n.shift(),i=n.shift();return r&&i&&(e[r]=i),e},{})},t.parseLinks=function(e){return e.split(/ *, */).reduce(function(e,t){var n=t.split(/ *; */),r=n[0].slice(1,-1);return e[n[1].split(/ *= */)[1].slice(1,-1)]=r,e},{})},t.cleanHeader=function(e,t){return delete e["content-type"],delete e["content-length"],delete e["transfer-encoding"],delete e.host,t&&(delete e.authorization,delete e.cookie),e}},function(e,t){function n(){this._defaults=[]}["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert"].forEach(function(e){n.prototype[e]=function(){return this._defaults.push({fn:e,arguments:arguments}),this}}),n.prototype._setDefaults=function(e){this._defaults.forEach(function(t){e[t.fn].apply(e,t.arguments)})},e.exports=n}])},function(e,t,n){var r,i,o;i=[t,n(9),n(10),n(8),n(51),n(1),n(3),n(2),n(4),n(153),n(27),n(17),n(19),n(12),n(7),n(38),n(39)],void 0===(o="function"==typeof(r=function(e,t,r,i,o,a,s,u,c,l,f,h,d,p,y,v,b){"use strict";var g=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.Sync=e.SyncEvent=void 0,t=g(t),r=g(r),i=g(i),o=g(o),a=g(a),s=g(s),u=g(u),c=g(c),l=g(l),f=g(f);var m="kinvey-sync",w="kinvey-query",_={};function x(e){return!0===_[e]}function k(e){_[e]=!0}function E(e){_[e]=!1}var S={Create:"POST",Update:"PUT",Delete:"DELETE"};function O(e){if(!e)return"";if(e.skip>0||e.limit<1/0)return null;var t=e.toQueryObject();return t&&!(0,f.default)(t)?JSON.stringify(t):""}e.SyncEvent=S;var P=function(e){function t(e,n){var r;return(0,a.default)(this,t),r=n?(0,s.default)(this,(0,u.default)(t).call(this,e,"".concat(m,"-").concat(n))):(0,s.default)(this,(0,u.default)(t).call(this,e,m)),(0,s.default)(r)}return(0,c.default)(t,e),t}(b.DataStoreCache),C=function(e){function n(e,t){var r;return(0,a.default)(this,n),r=t?(0,s.default)(this,(0,u.default)(n).call(this,e,"".concat(w,"-").concat(t))):(0,s.default)(this,(0,u.default)(n).call(this,e,w)),(0,s.default)(r)}return(0,c.default)(n,e),(0,i.default)(n,[{key:"findByKey",value:function(){var e=(0,r.default)(t.default.mark(function e(n){var r,i;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(new h.Query).equalTo("query",n),e.next=3,this.find(r);case 3:return i=e.sent,e.abrupt("return",i.shift());case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=(0,r.default)(t.default.mark(function e(r,i){var a,s,c;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(a=O(r))){e.next=9;break}return s=new d.KinveyHeaders(i.headers),e.next=5,this.findByKey(a);case 5:return(c=e.sent)||(c={collectionName:this.collectionName,query:a}),c.lastRequest=s.requestStart,e.abrupt("return",(0,o.default)((0,u.default)(n.prototype),"save",this).call(this,c));case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()}]),n}(b.DataStoreCache),A=function(){function e(t,n){(0,a.default)(this,e),this.collectionName=t,this.tag=n}return(0,i.default)(e,[{key:"find",value:function(e){var t=new P(this.collectionName,this.tag);return t.find(e)}},{key:"findById",value:function(e){var t=new P(this.collectionName,this.tag);return t.findById(e)}},{key:"count",value:function(e){var t=new P(this.collectionName,this.tag);return t.count(e)}},{key:"addCreateSyncEvent",value:function(e){return this.addSyncEvent(S.Create,e)}},{key:"addUpdateSyncEvent",value:function(e){return this.addSyncEvent(S.Update,e)}},{key:"addDeleteSyncEvent",value:function(e){return this.addSyncEvent(S.Delete,e)}},{key:"addSyncEvent",value:function(){var e=(0,r.default)(t.default.mark(function e(n,r){var i,o,a,s,u=this;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=new P(this.collectionName,this.tag),o=!1,a=[],Array.isArray(r)||(o=!0,r=[r]),!(r.length>0)){e.next=15;break}if(!r.find(function(e){return!e._id})){e.next=8;break}throw new y.SyncError("A doc is missing an _id. All docs must have an _id in order to be added to the sync collection.");case 8:return s=(new h.Query).contains("_id",r.map(function(e){return e._id})),e.next=11,this.remove(s);case 11:return n===S.Delete&&(r=r.filter(function(e){return!e._kmd||!0!==e._kmd.local})),e.next=14,i.save(r.map(function(e){return{_id:e._id,entityId:e._id,entity:e,collection:u.collectionName,state:{operation:n}}}));case 14:a=e.sent;case 15:return e.abrupt("return",o?a.shift():a);case 16:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"push",value:function(){var e=(0,r.default)(t.default.mark(function e(n,i){var o,a,s,u,c,l,f,h=this;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!x(this.collectionName)){e.next=2;break}throw new y.SyncError("Data is already being pushed to the backend. Please wait for it to complete before pushing new data to the backend.");case 2:return o=new v.NetworkStore(this.collectionName),a=new b.DataStoreCache(this.collectionName,this.tag),s=new P(this.collectionName,this.tag),u=100,e.next=8,s.find(n);case 8:if(!((c=e.sent).length>0)){e.next=13;break}return l=0,f=function(){var e=(0,r.default)(t.default.mark(function e(n){var d,p;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(k(h.collectionName),!(l>=c.length)){e.next=4;break}return E(h.collectionName),e.abrupt("return",n);case 4:return d=c.slice(l,l+u),l+=u,e.next=8,Promise.all(d.map(function(){var e=(0,r.default)(t.default.mark(function e(n){var r,u,c,l,f;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n._id,u=n.state,(c=(void 0===u?{operation:void 0}:u).operation)!==S.Delete){e.next=23;break}return e.prev=3,e.prev=4,e.next=7,o.removeById(r,i);case 7:e.next=13;break;case 9:if(e.prev=9,e.t0=e.catch(4),e.t0 instanceof y.NotFoundError){e.next=13;break}throw e.t0;case 13:return e.next=15,s.removeById(r);case 15:return e.abrupt("return",{_id:r,operation:c});case 18:return e.prev=18,e.t1=e.catch(3),e.abrupt("return",{_id:r,operation:c,error:e.t1});case 21:e.next=52;break;case 23:if(c!==S.Create&&c!==S.Update){e.next=52;break}return e.next=26,a.findById(r);case 26:if(l=e.sent,f=!1,e.prev=28,c!==S.Create){e.next=36;break}return l._kmd&&!0===l._kmd.local&&(f=!0,delete l._id,delete l._kmd.local),e.next=33,o.create(l,i);case 33:l=e.sent,e.next=39;break;case 36:return e.next=38,o.update(l,i);case 38:l=e.sent;case 39:return e.next=41,s.removeById(r);case 41:return e.next=43,a.save(l);case 43:if(!f){e.next=46;break}return e.next=46,a.removeById(r);case 46:return e.abrupt("return",{_id:r,operation:c,entity:l});case 49:return e.prev=49,e.t2=e.catch(28),e.abrupt("return",{_id:r,operation:c,entity:l,error:e.t2});case 52:return e.abrupt("return",{_id:r,operation:c,error:new Error("Unable to push item in sync table because the event was not recognized.")});case 53:case"end":return e.stop()}},e,this,[[3,18],[4,9],[28,49]])}));return function(t){return e.apply(this,arguments)}}()));case 8:return p=e.sent,E(h.collectionName),e.abrupt("return",f(n.concat(p)));case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),e.abrupt("return",f([]));case 13:return e.abrupt("return",[]);case 14:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"pull",value:function(){var e=(0,r.default)(t.default.mark(function e(n){var r,i,o,a,s,u,c=arguments;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},i=new v.NetworkStore(this.collectionName),o=new b.DataStoreCache(this.collectionName,this.tag),a=new C(this.collectionName,this.tag),e.next=6,i.find(n,Object.assign({},r,{rawResponse:!0})).toPromise();case 6:if(s=e.sent,u=s.data,n){e.next=11;break}return e.next=11,o.clear();case 11:return e.next=13,o.save(u);case 13:return e.next=15,a.save(n,s);case 15:return e.abrupt("return",u.length);case 16:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"deltaset",value:function(){var e=(0,r.default)(t.default.mark(function e(n){var r,i,o,a,s,u,c,l,f,v,g,m,w,_,x,k,E,S=arguments;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=S.length>1&&void 0!==S[1]?S[1]:{},i=!0===r.useAutoPagination||r.autoPagination||this.useAutoPagination,n&&(0!==n.skip||n.limit!==1/0)){e.next=36;break}return e.prev=3,o=new b.DataStoreCache(this.collectionName,this.tag),a=new C(this.collectionName,this.tag),s=O(n),e.next=9,a.findByKey(s);case 9:if(!(u=e.sent)||!u.lastRequest){e.next=30;break}return c={since:u.lastRequest},n&&(c=Object.assign({},n.toQueryObject(),c)),l=(0,p.getConfig)(),f=l.api,v=l.appKey,g=(0,d.formatKinveyUrl)(f.protocol,f.host,"/appdata/".concat(v,"/").concat(this.collectionName,"/_deltaset"),c),m=new d.KinveyRequest({method:d.RequestMethod.GET,auth:d.Auth.Session,url:g}),e.next=18,m.execute();case 18:if(w=e.sent,_=w.data,x=_.changed,k=_.deleted,!(Array.isArray(k)&&k.length>0)){e.next=24;break}return E=(new h.Query).contains("_id",k.map(function(e){return e._id})),e.next=24,o.remove(E);case 24:if(!(Array.isArray(x)&&x.length>0)){e.next=27;break}return e.next=27,o.save(x);case 27:return e.next=29,a.save(n,w);case 29:return e.abrupt("return",x.length);case 30:e.next=36;break;case 32:if(e.prev=32,e.t0=e.catch(3),e.t0 instanceof y.MissingConfigurationError||e.t0 instanceof y.ParameterValueOutOfRangeError){e.next=36;break}throw e.t0;case 36:if(!i){e.next=38;break}return e.abrupt("return",this.autopaginate(n,r));case 38:return e.abrupt("return",this.pull(n));case 39:case"end":return e.stop()}},e,this,[[3,32]])}));return function(t){return e.apply(this,arguments)}}()},{key:"autopaginate",value:function(){var e=(0,r.default)(t.default.mark(function e(n){var r,i,o,a,s,u,c,f,d,p,y,g,m=arguments;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=m.length>1&&void 0!==m[1]?m[1]:{},i=new v.NetworkStore(this.collectionName),o=new b.DataStoreCache(this.collectionName,this.tag),a=new C(this.collectionName,this.tag),e.next=6,o.clear();case 6:return e.next=8,i.count(n,Object.assign({},r,{rawResponse:!0})).toPromise();case 8:return s=e.sent,u="count"in s.data?s.data.count:1/0,c=r.autoPaginationPageSize||r.autoPagination&&r.autoPagination.pageSize||1e4,f=Math.ceil(u/c),d=(0,l.default)(f,function(e){var t=new h.Query(n);return t.skip=e*c,t.limit=Math.min(u-e*c,c),t}),p=d.map(function(e){return i.find(e,r).toPromise().then(function(e){return o.save(e)}).then(function(e){return e.length})}),e.next=16,Promise.all(p);case 16:return y=e.sent,g=y.reduce(function(e,t){return e+t},0),a.save(n,s),e.abrupt("return",g);case 20:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"remove",value:function(){var e=(0,r.default)(t.default.mark(function e(n){var r,i;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=4;break}return r=new C(this.collectionName,this.tag),e.next=4,r.remove();case 4:return i=new P(this.collectionName,this.tag),e.abrupt("return",i.remove(n));case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"removeById",value:function(){var e=(0,r.default)(t.default.mark(function e(n){var r;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=new P(this.collectionName,this.tag),e.abrupt("return",r.removeById(n));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"clear",value:function(){var e=(0,r.default)(t.default.mark(function e(){var n,r;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new C(this.collectionName,this.tag),e.next=3,n.remove();case 3:return r=new P(this.collectionName,this.tag),e.abrupt("return",r.remove());case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),e}();e.Sync=A})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r=n(154),i=n(155),o=n(157),a=9007199254740991,s=4294967295,u=Math.min;e.exports=function(e,t){if((e=o(e))<1||e>a)return[];var n=s,c=u(e,s);t=i(t),e-=s;for(var l=r(c,t);++n<e;)t(n);return l}},function(e,t){e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},function(e,t,n){var r=n(156);e.exports=function(e){return"function"==typeof e?e:r}},function(e,t){e.exports=function(e){return e}},function(e,t,n){var r=n(158);e.exports=function(e){var t=r(e),n=t%1;return t==t?n?t-n:t:0}},function(e,t,n){var r=n(159),i=1/0,o=1.7976931348623157e308;e.exports=function(e){return e?(e=r(e))===i||e===-i?(e<0?-1:1)*o:e==e?e:0:0===e?e:0}},function(e,t,n){var r=n(28),i=n(160),o=NaN,a=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,c=/^0o[0-7]+$/i,l=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(i(e))return o;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(a,"");var n=u.test(e);return n||c.test(e)?l(e.slice(2),n?2:8):s.test(e)?o:+e}},function(e,t,n){var r=n(14),i=n(18),o="[object Symbol]";e.exports=function(e){return"symbol"==typeof e||i(e)&&r(e)==o}},function(e,t,n){var r,i,o;i=[t,n(12),n(162),n(183),n(184),n(186),n(191)],void 0===(o="function"==typeof(r=function(e,t,n,r,i,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.init=function(e){var u=e.storage,c=void 0===u?s.IndexedDB:u;return c===s.IndexedDB?(0,i.register)():c===s.Memory?(0,o.register)():c===s.WebSQL&&(0,a.register)(),(0,n.register)(),(0,r.register)(),(0,t.init)(e)},Object.defineProperty(e,"initialize",{enumerable:!0,get:function(){return t.initialize}}),Object.defineProperty(e,"getAppVersion",{enumerable:!0,get:function(){return t.getAppVersion}}),Object.defineProperty(e,"setAppVersion",{enumerable:!0,get:function(){return t.setAppVersion}}),e.StorageProvider=void 0;var s={IndexedDB:"IndexedDB",Memory:"Memory",WebSQL:"WebSQL"};e.StorageProvider=s})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[t,n(9),n(10),n(19),n(182),n(7),n(163)],void 0===(o="function"==typeof(r=function(e,t,r,i,o,a,s){"use strict";var u=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.http=f,e.register=function(e){c=e,(0,i.register)(f),(0,o.register)()},t=u(t),r=u(r),s=u(s);var c={name:"SDK unknown (kinvey-http-web)",version:0};function l(){var e,t,n,r,i=[];null!==t&&void 0!==t||!window.navigator||(e=function(e){var t=e.toLowerCase();return/(chrome)\/([\w]+)/.exec(t)||/(firefox)\/([\w.]+)/.exec(t)||/(msie) ([\w.]+)/i.exec(t)||/(opera)(?:.*version)?[ /]([\w.]+)/.exec(t)||/(safari)\/([\w.]+)/.exec(t)||[]}(window.navigator.userAgent),t=e[1],n=e[2],r=window.navigator.platform),void 0!==window.angular&&i.push("angularjs/".concat(window.angular.version.full)),void 0!==window.Backbone&&i.push("backbonejs/".concat(window.Backbone.VERSION)),void 0!==window.Ember&&i.push("emberjs/".concat(window.Ember.VERSION)),void 0!==window.jQuery&&i.push("jquery/".concat(window.jQuery.fn.jquery)),void 0!==window.ko&&i.push("knockout/".concat(window.ko.version)),void 0!==window.Zepto&&i.push("zeptojs");var o=["js-".concat(c.name,"/").concat(c.version)];return 0!==i.length&&o.push("(".concat(i.sort().join(", "),")")),o.concat([t,n,r]).map(function(e){return e?e.toString().replace(/\s/g,"_").toLowerCase():"unknown"}).join(" ")}function f(e){return h.apply(this,arguments)}function h(){return(h=(0,r.default)(t.default.mark(function e(n){var r,i,o;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=/kinvey\.com/gm,i=n.headers,r.test(n.url)&&(i=Object.assign({},n.headers,{"X-Kinvey-Device-Information":l(),"X-Kinvey-Device-Info":JSON.stringify({hv:1,os:window.navigator.appVersion,ov:window.navigator.appVersion,sdk:c,pv:window.navigator.userAgent})})),e.prev=3,e.next=6,(0,s.default)({headers:i,method:n.method,url:n.url,data:n.body});case 6:o=e.sent,e.next=26;break;case 9:if(e.prev=9,e.t0=e.catch(3),!e.t0.response){e.next=15;break}o=e.t0.response,e.next=26;break;case 15:if(!e.t0.request){e.next=25;break}if("ESOCKETTIMEDOUT"!==e.t0.code&&"ETIMEDOUT"!==e.t0.code&&"ECONNABORTED"!==e.t0.code){e.next=20;break}throw new a.TimeoutError("The network request timed out.");case 20:if("ENOENT"!==e.t0.code){e.next=22;break}throw new a.NetworkConnectionError("You do not have a network connection.");case 22:case 25:throw e.t0;case 26:return e.abrupt("return",{statusCode:o.status,headers:o.headers,data:o.data});case 27:case"end":return e.stop()}},e,this,[[3,9]])}))).apply(this,arguments)}})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){e.exports=n(164)},function(e,t,n){"use strict";var r=n(11),i=n(56),o=n(166),a=n(40);function s(e){var t=new o(e),n=i(o.prototype.request,t);return r.extend(n,o.prototype,t),r.extend(n,t),n}var u=s(a);u.Axios=o,u.create=function(e){return s(r.merge(a,e))},u.Cancel=n(61),u.CancelToken=n(180),u.isCancel=n(60),u.all=function(e){return Promise.all(e)},u.spread=n(181),e.exports=u,e.exports.default=u},function(e,t){function n(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function(e){return null!=e&&(n(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&n(e.slice(0,0))}(e)||!!e._isBuffer)}},function(e,t,n){"use strict";var r=n(40),i=n(11),o=n(175),a=n(176);function s(e){this.defaults=e,this.interceptors={request:new o,response:new o}}s.prototype.request=function(e){"string"==typeof e&&(e=i.merge({url:arguments[0]},arguments[1])),(e=i.merge(r,{method:"get"},this.defaults,e)).method=e.method.toLowerCase();var t=[a,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)n=n.then(t.shift(),t.shift());return n},i.forEach(["delete","get","head","options"],function(e){s.prototype[e]=function(t,n){return this.request(i.merge(n||{},{method:e,url:t}))}}),i.forEach(["post","put","patch"],function(e){s.prototype[e]=function(t,n,r){return this.request(i.merge(r||{},{method:e,url:t,data:n}))}}),e.exports=s},function(e,t,n){"use strict";var r=n(11);e.exports=function(e,t){r.forEach(e,function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])})}},function(e,t,n){"use strict";var r=n(59);e.exports=function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e}},function(e,t,n){"use strict";var r=n(11);function i(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(r.isURLSearchParams(t))o=t.toString();else{var a=[];r.forEach(t,function(e,t){null!==e&&void 0!==e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),a.push(i(t)+"="+i(e))}))}),o=a.join("&")}return o&&(e+=(-1===e.indexOf("?")?"?":"&")+o),e}},function(e,t,n){"use strict";var r=n(11),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,o,a={};return e?(r.forEach(e.split("\n"),function(e){if(o=e.indexOf(":"),t=r.trim(e.substr(0,o)).toLowerCase(),n=r.trim(e.substr(o+1)),t){if(a[t]&&i.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([n]):a[t]?a[t]+", "+n:n}}),a):a}},function(e,t,n){"use strict";var r=n(11);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=r.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},function(e,t,n){"use strict";var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function i(){this.message="String contains an invalid character"}i.prototype=new Error,i.prototype.code=5,i.prototype.name="InvalidCharacterError",e.exports=function(e){for(var t,n,o=String(e),a="",s=0,u=r;o.charAt(0|s)||(u="=",s%1);a+=u.charAt(63&t>>8-s%1*8)){if((n=o.charCodeAt(s+=.75))>255)throw new i;t=t<<8|n}return a}},function(e,t,n){"use strict";var r=n(11);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,i,o,a){var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(i)&&s.push("path="+i),r.isString(o)&&s.push("domain="+o),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,n){"use strict";var r=n(11);function i(){this.handlers=[]}i.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){r.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=i},function(e,t,n){"use strict";var r=n(11),i=n(177),o=n(60),a=n(40),s=n(178),u=n(179);function c(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return c(e),e.baseURL&&!s(e.url)&&(e.url=u(e.baseURL,e.url)),e.headers=e.headers||{},e.data=i(e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),r.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||a.adapter)(e).then(function(t){return c(e),t.data=i(t.data,t.headers,e.transformResponse),t},function(t){return o(t)||(c(e),t&&t.response&&(t.response.data=i(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},function(e,t,n){"use strict";var r=n(11);e.exports=function(e,t,n){return r.forEach(n,function(n){e=n(e,t)}),e}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){"use strict";var r=n(61);function i(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var n=this;e(function(e){n.reason||(n.reason=new r(e),t(n.reason))})}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var e;return{token:new i(function(t){e=t}),cancel:e}},e.exports=i},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,n){var r,i,o;i=[t,n(29)],void 0===(o="function"==typeof(r=function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.register=function(){(0,t.register)(n)};var n={get:function(e){var t=window.localStorage.getItem(e);return t?JSON.parse(t):null},set:function(e,t){return window.localStorage.setItem(e,JSON.stringify(t)),t},remove:function(e){return window.localStorage.removeItem(e),!0}}})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[t,n(9),n(10),n(1),n(8),n(3),n(2),n(4),n(54),n(45)],void 0===(o="function"==typeof(r=function(e,t,r,i,o,a,s,u,c,l){"use strict";var f=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.register=function(){(0,l.register)(p)},t=f(t),r=f(r),i=f(i),o=f(o),a=f(a),s=f(s),u=f(u);var h="loaded",d="error",p=function(e){function n(e){var t;return(0,i.default)(this,n),(t=(0,a.default)(this,(0,s.default)(n).call(this))).popupWindow=e,t.interval=window.setInterval(function(){if(e.closed)t.close();else try{var n={url:e.location.href};t.emit(h,n)}catch(e){e.code!==window.DOMException.SECURITY_ERR&&t.emit(d,e)}},100),t}return(0,u.default)(n,e),(0,o.default)(n,[{key:"isClosed",value:function(){return this.popupWindow.closed}},{key:"onLoaded",value:function(e){return this.on(h,e)}},{key:"onClosed",value:function(e){return this.on("closed",e)}},{key:"onError",value:function(e){return this.on(d,e)}},{key:"close",value:function(){var e=(0,r.default)(t.default.mark(function e(){return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.interval&&(window.clearInterval(this.interval),this.interval=null),this.popupWindow&&!this.popupWindow.closed&&(this.popupWindow.close(),this.popupWindow=null),this.emit("closed"),e.abrupt("return",this);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}],[{key:"open",value:function(e){var t=window.open(e,"_blank","toolbar=no,location=no");if(!t)throw new Error("The popup was blocked.");return new n(t)}}]),n}(c.EventEmitter)})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[t,n(25),n(185)],void 0===(o="function"==typeof(r=function(e,t,r){"use strict";var i=n(20);Object.defineProperty(e,"__esModule",{value:!0}),e.register=function(){(0,t.register)(r)},r=i(r)})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[t,n(9),n(10),n(1),n(8)],void 0===(o="function"==typeof(r=function(e,t,r,i,o){"use strict";var a=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.find=function(e,t){var n=new c(e);return new Promise(function(e,r){n.open(t,!1,function(n){var i=n.objectStore(t),o=i.openCursor(),a=[];o.onsuccess=function(t){var n=t.target.result;return n?(a.push(n.value),n.continue()):e(a)},o.onerror=function(e){r(e.target.error)}},function(t){-1!==t.message.indexOf("not found")?e([]):r(t)})})},e.count=function(e,t){return l.apply(this,arguments)},e.findById=function(e,t,n){var r=new c(e);return new Promise(function(e,i){r.open(t,!1,function(r){var o=r.objectStore(t),a=o.get(n);a.onsuccess=function(t){e(t.target.result)},a.onerror=function(e){i(e.target.error)}},i)})},e.save=function(e,t){return f.apply(this,arguments)},e.removeById=function(e,t,n){return h.apply(this,arguments)},e.clear=function(e,t){return d.apply(this,arguments)},e.clearAll=function(e){return new Promise(function(t,n){var r=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.msIndexedDB,i=r.deleteDatabase(e);i.onsuccess=function(){delete s[e],t()},i.onerror=function(t){n(new Error("An error occurred while clearing the ".concat(e," IndexedDB database. ").concat(t.target.error.message,".")))},i.onblocked=function(){n(new Error("The ".concat(e," IndexedDB database could not be cleared due to the operation being blocked.")))}})},t=a(t),r=a(r),i=a(i),o=a(o);var s={},u={readWrite:"readwrite",readOnly:"readonly"},c=function(){function e(t){(0,i.default)(this,e),this.dbName=t,this.db=s[this.dbName],this.inTransaction=!1,this.queue=[]}return(0,o.default)(e,[{key:"hasObjectStore",value:function(e){return!(!this.db||!this.db.objectStoreName)&&("function"==typeof this.db.objectStoreNames.contains?this.db.objectStoreNames.contains(e):-1!==this.db.objectStoreNames.indexOf(e))}},{key:"openTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.readOnly,n=this.db.transaction(e,t);if(!n)throw new Error("Unable to open a transaction for ".concat(e," collection on the ").concat(this.dbName," IndexedDB database."));return n}},{key:"openDB",value:function(){var e=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.msIndexedDB;if(this.db){var t=this.db.version+1;return this.close(),e.open(this.dbName,t)}return e.open(this.dbName)}},{key:"open",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];try{if(this.db){if(this.db.objectStoreNames.contains(e)){var a=n?u.readWrite:u.readOnly;return r(this.openTransaction(e,a))}if(!n)throw new Error("The ".concat(e," collection was not found on the ").concat(this.dbName," IndexedDB database."))}if(!o&&this.inTransaction)return this.queue.push(function(){return t.open(e,n,r,i)});this.inTransaction=!0;var s=this.openDB(e);s.onupgradeneeded=function(r){t.db=r.target.result,n&&!t.db.objectStoreNames.contains(e)&&t.db.createObjectStore(e,{keyPath:"_id"})},s.onsuccess=function(o){t.db=o.target.result,t.db.onversionchange=function(){return t.close()};var a=function(e){return function(n){if(e(n),t.inTransaction=!1,t.queue.length>0){var r=t.queue;t.queue=[],r.forEach(function(e){e.call(t)})}}};return t.open(e,n,a(r),a(i),!0)},s.onblocked=function(){},s.onerror=function(e){i(new Error("Unable to open the ".concat(t.dbName," IndexedDB database. ").concat(e.target.error.message,".")))}}catch(e){i(e)}return null}},{key:"close",value:function(){this.db&&(this.db.close(),this.db=null)}},{key:"db",get:function(){return this._db},set:function(e){e?(this._db=e,s[this.dbName]=e):(this._db=null,delete s[this.dbName])}}]),e}();function l(){return(l=(0,r.default)(t.default.mark(function e(n,r){var i;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=new c(n),e.abrupt("return",new Promise(function(e,t){i.open(r,!1,function(n){var i=n.objectStore(r),o=i.count();o.onsuccess=function(){return e(o.result)},o.onerror=function(e){return t(e.target.error)}},function(n){-1!==n.message.indexOf("not found")?e(0):t(n)})}));case 2:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function f(){return(f=(0,r.default)(t.default.mark(function e(n,r){var i,o,a=this,s=arguments;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=s.length>2&&void 0!==s[2]?s[2]:[],o=new c(n),e.abrupt("return",new Promise(function(e,t){o.open(r,!0,function(n){var o=n.objectStore(r),s=i;Array.isArray(i)||(s=[i]),s.forEach(function(e){o.put(e)}),n.oncomplete=function(){e(i)},n.onerror=function(e){t(new Error("An error occurred while saving the entities to the ".concat(r," collection on the ").concat(a.dbName," IndexedDB database. ").concat(e.target.error.message,".")))}},t)}));case 3:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function h(){return(h=(0,r.default)(t.default.mark(function e(n,r,i){var o,a=this;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=new c(n),e.abrupt("return",new Promise(function(e,t){o.open(r,!0,function(n){var o=n.objectStore(r),s=o.get(i);o.delete(i),n.oncomplete=function(){var n=s.result;n?e(1):t(new Error("An entity with _id = ".concat(i," was not found in the ").concat(r," collection on the ").concat(a.dbName," database.")))},n.onerror=function(){t(new Error("An entity with _id = ".concat(i," was not found in the ").concat(r," collection on the ").concat(a.dbName," database.")))}},t)}));case 2:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function d(){return(d=(0,r.default)(t.default.mark(function e(n,r){var i;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=new c(n),e.abrupt("return",new Promise(function(e,t){i.open(r,!0,function(n){var i=n.objectStore(r);i.clear(),n.oncomplete=function(t){return e(!0)},n.onerror=function(e){return t(e)}},t)}));case 2:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[t,n(25),n(187)],void 0===(o="function"==typeof(r=function(e,t,r){"use strict";var i=n(20);Object.defineProperty(e,"__esModule",{value:!0}),e.register=function(){(0,t.register)(r)},r=i(r)})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[t,n(9),n(10),n(188)],void 0===(o="function"==typeof(r=function(e,t,r,i){"use strict";var o=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.find=u,e.count=function(e,t){return l.apply(this,arguments)},e.findById=function(e,t,n){return f.apply(this,arguments)},e.save=function(e,t,n){return h.apply(this,arguments)},e.removeById=function(e,t,n){return d.apply(this,arguments)},e.clear=function(e,t){return p.apply(this,arguments)},e.clearAll=function(e){return y.apply(this,arguments)},t=o(t),r=o(r);var a=new((i=o(i)).default.LokiMemoryAdapter);function s(e,t){return new Promise(function(n,r){var o=new i.default(e,{adapter:a,autosave:!1,autoload:!0,autoloadCallback:function(e){if(e)r(e);else{if(t){var i=o.getCollection(t);i||(i=o.addCollection(t,{clone:!0,unique:["_id"],disableMeta:!0}))}n(o)}}})})}function u(e,t){return c.apply(this,arguments)}function c(){return(c=(0,r.default)(t.default.mark(function e(n,r){var i,o;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(n,r);case 2:return i=e.sent,o=i.getCollection(r),e.abrupt("return",o.chain().data({removeMeta:!0}));case 5:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function l(){return(l=(0,r.default)(t.default.mark(function e(n,r){var i;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(n,r);case 2:return i=e.sent,e.abrupt("return",i.length);case 4:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function f(){return(f=(0,r.default)(t.default.mark(function e(n,r,i){var o,a,u;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(n,r);case 2:return o=e.sent,a=o.getCollection(r),(u=a.by("_id",i))&&delete u.$loki,e.abrupt("return",u);case 7:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function h(){return(h=(0,r.default)(t.default.mark(function e(n,r,i){var o,a,u;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(n,r);case 2:if(o=e.sent,a=o.getCollection(r),u=i){e.next=7;break}return e.abrupt("return",null);case 7:return u=u.map(function(e){var t=a.by("_id",e._id);return t?(t=Object.assign({$loki:t.$loki},e),a.update(t),t):(a.insert(e),e)}),e.abrupt("return",new Promise(function(e,t){o.save(function(n){return n?t(n):e(u)})}));case 9:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function d(){return(d=(0,r.default)(t.default.mark(function e(n,r,i){var o,a,u;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(n,r);case 2:if(o=e.sent,a=o.getCollection(r),!(u=a.by("_id",i))){e.next=9;break}if(!a.remove(u)){e.next=9;break}return e.abrupt("return",new Promise(function(e,t){o.save(function(n){return n?t(n):e(1)})}));case 9:return e.abrupt("return",0);case 10:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function p(){return(p=(0,r.default)(t.default.mark(function e(n,r){var i;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(n,r);case 2:return(i=e.sent).getCollection(r).clear(),e.abrupt("return",new Promise(function(e,t){i.save(function(n){return n?t(n):e()})}));case 6:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function y(){return(y=(0,r.default)(t.default.mark(function e(n){var r;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(n);case 2:return r=e.sent,e.abrupt("return",new Promise(function(e,t){r.deleteDatabase(function(n){return n?t(n):e()})}));case 4:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){(function(r,i){var o,a,s;a=[],void 0===(s="function"==typeof(o=function(){return function(){"use strict";var e=Object.prototype.hasOwnProperty,t={copyProperties:function(e,t){var n;for(n in e)t[n]=e[n]},resolveTransformObject:function(e,n,r){var i,o;if("number"!=typeof r&&(r=0),++r>=10)return e;for(i in e)"string"==typeof e[i]&&0===e[i].indexOf("[%lktxp]")?(o=e[i].substring(8),n.hasOwnProperty(o)&&(e[i]=n[o])):"object"==typeof e[i]&&(e[i]=t.resolveTransformObject(e[i],n,r));return e},resolveTransformParams:function(e,n){var r,i,o=[];if(void 0===n)return e;for(r=0;r<e.length;r++)i=y(e[r],"shallow-recurse-objects"),o.push(t.resolveTransformObject(i,n));return o}},o={aeq:a,lt:s,gt:u};function a(e,t){var n,r,i,o;if(e===t)return!0;if(!e||!t||!0===e||!0===t||e!=e||t!=t){switch(e){case void 0:case null:i=1;break;case!1:i=3;break;case!0:i=4;break;case"":i=5;break;default:i=e==e?9:0}switch(t){case void 0:case null:o=1;break;case!1:o=3;break;case!0:o=4;break;case"":o=5;break;default:o=t==t?9:0}if(9!==i||9!==o)return i===o}return n=Number(e),r=Number(t),n==n||r==r?n===r:(n=e.toString(),r=t.toString(),n==r)}function s(e,t,n){var r,i,o,a;if(!e||!t||!0===e||!0===t||e!=e||t!=t){switch(e){case void 0:case null:o=1;break;case!1:o=3;break;case!0:o=4;break;case"":o=5;break;default:o=e==e?9:0}switch(t){case void 0:case null:a=1;break;case!1:a=3;break;case!0:a=4;break;case"":a=5;break;default:a=t==t?9:0}if(9!==o||9!==a)return o===a?n:o<a}return r=Number(e),i=Number(t),r==r&&i==i?r<i||!(r>i)&&n:r==r&&i!=i||(i!=i||r==r)&&(e<t||!(e>t)&&(e==t?n:(r=e.toString(),i=t.toString(),r<i||r==i&&n)))}function u(e,t,n){var r,i,o,a;if(!e||!t||!0===e||!0===t||e!=e||t!=t){switch(e){case void 0:case null:o=1;break;case!1:o=3;break;case!0:o=4;break;case"":o=5;break;default:o=e==e?9:0}switch(t){case void 0:case null:a=1;break;case!1:a=3;break;case!0:a=4;break;case"":a=5;break;default:a=t==t?9:0}if(9!==o||9!==a)return o===a?n:o>a}return r=Number(e),i=Number(t),r==r&&i==i?r>i||!(r<i)&&n:(r!=r||i==i)&&(i==i&&r!=r||e>t||!(e<t)&&(e==t?n:(r=e.toString(),i=t.toString(),r>i||r==i&&n)))}function c(e,t,n){return o.aeq(e,t)?0:o.lt(e,t,!1)?n?1:-1:o.gt(e,t,!1)?n?-1:1:0}function l(t,n,r,i,o){var a=o||0,s=n[a];if(void 0===t||null===t||!e.call(t,s))return!1;var u=!1,c=t[s];if(a+1>=n.length)u=r(c,i);else if(Array.isArray(c))for(var f=0,h=c.length;f<h&&!0!==(u=l(c[f],n,r,i,a+1));f+=1);else u=l(c,n,r,i,a+1);return u}function f(t){return"string"==typeof t||Array.isArray(t)?function(e){return-1!==t.indexOf(e)}:"object"==typeof t&&null!==t?function(n){return e.call(t,n)}:null}function h(t,n){for(var r in n)if(e.call(n,r))return d[r](t,n[r]);return!1}var d={$eq:function(e,t){return e===t},$aeq:function(e,t){return e==t},$ne:function(e,t){return t!=t?e==e:e!==t},$dteq:function(e,t){return o.aeq(e,t)},$gt:function(e,t){return o.gt(e,t,!1)},$gte:function(e,t){return o.gt(e,t,!0)},$lt:function(e,t){return o.lt(e,t,!1)},$lte:function(e,t){return o.lt(e,t,!0)},$jgt:function(e,t){return e>t},$jgte:function(e,t){return e>=t},$jlt:function(e,t){return e<t},$jlte:function(e,t){return e<=t},$between:function(e,t){return void 0!==e&&null!==e&&o.gt(e,t[0],!0)&&o.lt(e,t[1],!0)},$jbetween:function(e,t){return void 0!==e&&null!==e&&e>=t[0]&&e<=t[1]},$in:function(e,t){return-1!==t.indexOf(e)},$nin:function(e,t){return-1===t.indexOf(e)},$keyin:function(e,t){return e in t},$nkeyin:function(e,t){return!(e in t)},$definedin:function(e,t){return void 0!==t[e]},$undefinedin:function(e,t){return void 0===t[e]},$regex:function(e,t){return t.test(e)},$containsString:function(e,t){return"string"==typeof e&&-1!==e.indexOf(t)},$containsNone:function(e,t){return!d.$containsAny(e,t)},$containsAny:function(e,t){var n=f(e);return null!==n&&(Array.isArray(t)?t.some(n):n(t))},$contains:function(e,t){var n=f(e);return null!==n&&(Array.isArray(t)?t.every(n):n(t))},$type:function(e,t){var n=typeof e;return"object"===n&&(Array.isArray(e)?n="array":e instanceof Date&&(n="date")),"object"!=typeof t?n===t:h(n,t)},$finite:function(e,t){return t===isFinite(e)},$size:function(e,t){return!!Array.isArray(e)&&("object"!=typeof t?e.length===t:h(e.length,t))},$len:function(e,t){return"string"==typeof e&&("object"!=typeof t?e.length===t:h(e.length,t))},$where:function(e,t){return!0===t(e)},$not:function(e,t){return!h(e,t)},$and:function(e,t){for(var n=0,r=t.length;n<r;n+=1)if(!h(e,t[n]))return!1;return!0},$or:function(e,t){for(var n=0,r=t.length;n<r;n+=1)if(h(e,t[n]))return!0;return!1}},p={$eq:d.$eq,$aeq:!0,$dteq:!0,$gt:!0,$gte:!0,$lt:!0,$lte:!0,$in:!0,$between:!0};function y(e,t){if(null===e||void 0===e)return null;var n,r=t||"parse-stringify";switch(r){case"parse-stringify":n=JSON.parse(JSON.stringify(e));break;case"jquery-extend-deep":n=jQuery.extend(!0,{},e);break;case"shallow":n=Object.create(e.constructor.prototype),Object.keys(e).map(function(t){n[t]=e[t]});break;case"shallow-assign":n=Object.create(e.constructor.prototype),Object.assign(n,e);break;case"shallow-recurse-objects":n=y(e,"shallow");var i=Object.keys(e);i.forEach(function(t){"object"==typeof e[t]&&"Object"===e[t].constructor.name&&(n[t]=y(e[t],"shallow-recurse-objects"))})}return n}function v(){try{return window&&void 0!==window.localStorage&&null!==window.localStorage}catch(e){return!1}}function b(){}function g(e,t){this.filename=e||"loki.db",this.collections=[],this.databaseVersion=1.5,this.engineVersion=1.5,this.autosave=!1,this.autosaveInterval=5e3,this.autosaveHandle=null,this.throttledSaves=!0,this.options={},this.persistenceMethod=null,this.persistenceAdapter=null,this.throttledSavePending=!1,this.throttledCallbacks=[],this.verbose=!(!t||!t.hasOwnProperty("verbose"))&&t.verbose,this.events={init:[],loaded:[],flushChanges:[],close:[],changes:[],warning:[]},t&&t.hasOwnProperty("env")?this.ENV=t.env:this.ENV=void 0!==r&&(r.android||r.NSObject)?"NATIVESCRIPT":"undefined"==typeof window?"NODEJS":void 0!==r&&r.window&&i?"NODEJS":"undefined"!=typeof document?-1===document.URL.indexOf("http://")&&-1===document.URL.indexOf("https://")?"CORDOVA":"BROWSER":"CORDOVA","undefined"===this.ENV&&(this.ENV="NODEJS"),this.configureOptions(t,!0),this.on("init",this.clearChanges)}function m(e){this.hashStore={},this.options=e||{},this.options.hasOwnProperty("asyncResponses")||(this.options.asyncResponses=!1),this.options.hasOwnProperty("asyncTimeout")||(this.options.asyncTimeout=50)}function w(e,t){if(this.mode="reference",this.adapter=null,this.options=t||{},this.dbref=null,this.dbname="",this.pageIterator={},!e)throw new Error("LokiPartitioningAdapter requires a (non-reference mode) adapter on construction");if("reference"===e.mode)throw new Error("LokiPartitioningAdapter cannot be instantiated with a reference mode adapter");this.adapter=e,this.options.hasOwnProperty("paging")||(this.options.paging=!1),this.options.hasOwnProperty("pageSize")||(this.options.pageSize=26214400),this.options.hasOwnProperty("delimiter")||(this.options.delimiter="$<\n")}function _(){try{this.fs=n(190)}catch(e){this.fs=null}}function x(){}function k(e,t){return t=t||{},this.collection=e,this.filteredrows=[],this.filterInitialized=!1,this}function E(e,t,n){this.collection=e,this.name=t,this.rebuildPending=!1,this.options=n||{},this.options.hasOwnProperty("persistent")||(this.options.persistent=!1),this.options.hasOwnProperty("sortPriority")||(this.options.sortPriority="passive"),this.options.hasOwnProperty("minRebuildInterval")||(this.options.minRebuildInterval=1),this.resultset=new k(e),this.resultdata=[],this.resultsdirty=!1,this.cachedresultset=null,this.filterPipeline=[],this.sortFunction=null,this.sortCriteria=null,this.sortCriteriaSimple=null,this.sortDirty=!1,this.events={rebuild:[]}}function S(t,n){this.name=t,this.data=[],this.idIndex=[],this.binaryIndices={},this.constraints={unique:{},exact:{}},this.uniqueNames=[],this.transforms={},this.objType=t,this.dirty=!0,this.cachedIndex=null,this.cachedBinaryIndex=null,this.cachedData=null;var r=this;(n=n||{}).hasOwnProperty("unique")&&(Array.isArray(n.unique)||(n.unique=[n.unique]),n.unique.forEach(function(e){r.uniqueNames.push(e),r.constraints.unique[e]=new D(e)})),n.hasOwnProperty("exact")&&n.exact.forEach(function(e){r.constraints.exact[e]=new R(e)}),this.adaptiveBinaryIndices=!n.hasOwnProperty("adaptiveBinaryIndices")||n.adaptiveBinaryIndices,this.transactional=!!n.hasOwnProperty("transactional")&&n.transactional,this.cloneObjects=!!n.hasOwnProperty("clone")&&n.clone,this.cloneMethod=n.hasOwnProperty("cloneMethod")?n.cloneMethod:"parse-stringify",this.asyncListeners=!!n.hasOwnProperty("asyncListeners")&&n.asyncListeners,this.disableMeta=!!n.hasOwnProperty("disableMeta")&&n.disableMeta,this.disableChangesApi=!n.hasOwnProperty("disableChangesApi")||n.disableChangesApi,this.disableDeltaChangesApi=!n.hasOwnProperty("disableDeltaChangesApi")||n.disableDeltaChangesApi,this.disableChangesApi&&(this.disableDeltaChangesApi=!0),this.autoupdate=!!n.hasOwnProperty("autoupdate")&&n.autoupdate,this.serializableIndices=!n.hasOwnProperty("serializableIndices")||n.serializableIndices,this.ttl={age:null,ttlInterval:null,daemon:null},this.setTTL(n.ttl||-1,n.ttlInterval),this.maxId=0,this.DynamicViews=[],this.events={insert:[],update:[],"pre-insert":[],"pre-update":[],close:[],flushbuffer:[],error:[],delete:[],warning:[]},this.changes=[],this.ensureId();var i=[];if(n&&n.indices)if("[object Array]"===Object.prototype.toString.call(n.indices))i=n.indices;else{if("string"!=typeof n.indices)throw new TypeError("Indices needs to be a string or an array of strings");i=[n.indices]}for(var o=0;o<i.length;o++)this.ensureIndex(i[o]);function a(e,t){var n=null!==t&&"object"==typeof t?Object.keys(t):null;if(n&&n.length&&["string","boolean","number"].indexOf(typeof t)<0){for(var i={},o=0;o<n.length;o++){var s=n[o];if(t.hasOwnProperty(s))if(!e.hasOwnProperty(s)||r.uniqueNames.indexOf(s)>=0||"$loki"==s||"meta"==s)i[s]=t[s];else{var u=a(e[s],t[s]);void 0!==u&&u!={}&&(i[s]=u)}}return 0===Object.keys(i).length?void 0:i}return e===t?void 0:t}function s(){r.changes=[]}this.observerCallback=function(t){var n="function"==typeof Set?new Set:[];n.add||(n.add=function(e){return-1===this.indexOf(e)&&this.push(e),this}),t.forEach(function(e){n.add(e.object)}),n.forEach(function(t){if(!e.call(t,"$loki"))return r.removeAutoUpdateObserver(t);try{r.update(t)}catch(e){}})},this.getChangeDelta=function(e,t){return t?a(t,e):JSON.parse(JSON.stringify(e))},this.getObjectDelta=a,this.getChanges=function(){return r.changes},this.flushChanges=s,this.setChangesApi=function(e){r.disableChangesApi=!e,e||(r.disableDeltaChangesApi=!1)},this.on("delete",function(e){r.disableChangesApi||r.createChange(r.name,"R",e)}),this.on("warning",function(e){r.console.warn(e)}),s()}function O(e){return-1!==e.indexOf(".")}function P(e){return parseFloat(e,10)}function C(e,t){return e+t}function A(e,t){return e-t}function I(e){return e.reduce(C,0)/e.length}function j(e,t,n){if(!1===n)return e[t];for(var r=t.split("."),i=e;r.length>0;)i=i[r.shift()];return i}function T(e,t,n){for(var r,i,o=0,a=e.length;o<a;){if(i=o+a>>1,0===(r=n.apply(null,[t,e[i]])))return{found:!0,index:i};r<0?a=i:o=i+1}return{found:!1,index:a}}function N(e){return function(t,n){return T(t,n,e)}}function M(){}function D(e){this.field=e,this.keyMap={},this.lokiMap={}}function R(e){this.index={},this.field=e}return b.prototype.events={},b.prototype.asyncListeners=!1,b.prototype.on=function(e,t){var n,r=this;return Array.isArray(e)?(e.forEach(function(e){r.on(e,t)}),t):((n=this.events[e])||(n=this.events[e]=[]),n.push(t),t)},b.prototype.emit=function(e){var t=this,n=Array.prototype.slice.call(arguments,1);if(!e||!this.events[e])throw new Error("No event "+e+" defined");this.events[e].forEach(function(e){t.asyncListeners?setTimeout(function(){e.apply(t,n)},1):e.apply(t,n)})},b.prototype.addListener=b.prototype.on,b.prototype.removeListener=function(e,t){var n=this;if(Array.isArray(e))e.forEach(function(e){n.removeListener(e,t)});else if(this.events[e]){var r=this.events[e];r.splice(r.indexOf(t),1)}},g.prototype=new b,g.prototype.constructor=g,g.prototype.getIndexedAdapter=function(){return n(189)},g.prototype.configureOptions=function(e,t){var n={fs:_,localStorage:x,memory:m};if(this.options={},this.persistenceMethod=null,this.persistenceAdapter=null,void 0!==e){if(this.options=e,this.options.hasOwnProperty("persistenceMethod")&&"function"==typeof n[e.persistenceMethod]&&(this.persistenceMethod=e.persistenceMethod,this.persistenceAdapter=new n[e.persistenceMethod]),this.options.hasOwnProperty("adapter")&&(this.persistenceMethod="adapter",this.persistenceAdapter=e.adapter,this.options.adapter=null),e.autoload&&t){var r=this;setTimeout(function(){r.loadDatabase(e,e.autoloadCallback)},1)}this.options.hasOwnProperty("autosaveInterval")&&(this.autosaveDisable(),this.autosaveInterval=parseInt(this.options.autosaveInterval,10)),this.options.hasOwnProperty("autosave")&&this.options.autosave&&(this.autosaveDisable(),this.autosave=!0,this.options.hasOwnProperty("autosaveCallback")?this.autosaveEnable(e,e.autosaveCallback):this.autosaveEnable()),this.options.hasOwnProperty("throttledSaves")&&(this.throttledSaves=this.options.throttledSaves)}this.options.hasOwnProperty("serializationMethod")||(this.options.serializationMethod="normal"),this.options.hasOwnProperty("destructureDelimiter")||(this.options.destructureDelimiter="$<\n"),null===this.persistenceAdapter&&(this.persistenceMethod={NODEJS:"fs",BROWSER:"localStorage",CORDOVA:"localStorage",MEMORY:"memory"}[this.ENV],this.persistenceMethod&&(this.persistenceAdapter=new n[this.persistenceMethod]))},g.prototype.copy=function(e){var t,n,r=new g(this.filename,{env:"NA"});if(e=e||{},r.loadJSONObject(this,{retainDirtyFlags:!0}),e.hasOwnProperty("removeNonSerializable")&&!0===e.removeNonSerializable)for(r.autosaveHandle=null,r.persistenceAdapter=null,t=r.collections.length,n=0;n<t;n++)r.collections[n].constraints=null,r.collections[n].ttl=null;return r},g.prototype.addCollection=function(e,t){var n,r=this.collections.length;if(t&&!0===t.disableMeta){if(!1===t.disableChangesApi)throw new Error("disableMeta option cannot be passed as true when disableChangesApi is passed as false");if(!1===t.disableDeltaChangesApi)throw new Error("disableMeta option cannot be passed as true when disableDeltaChangesApi is passed as false");if("number"==typeof t.ttl&&t.ttl>0)throw new Error("disableMeta option cannot be passed as true when ttl is enabled")}for(n=0;n<r;n+=1)if(this.collections[n].name===e)return this.collections[n];var i=new S(e,t);return this.collections.push(i),this.verbose&&(i.console=console),i},g.prototype.loadCollection=function(e){if(!e.name)throw new Error("Collection must have a name property to be loaded");this.collections.push(e)},g.prototype.getCollection=function(e){var t,n=this.collections.length;for(t=0;t<n;t+=1)if(this.collections[t].name===e)return this.collections[t];return this.emit("warning","collection "+e+" not found"),null},g.prototype.renameCollection=function(e,t){var n=this.getCollection(e);return n&&(n.name=t),n},g.prototype.listCollections=function(){for(var e=this.collections.length,t=[];e--;)t.push({name:this.collections[e].name,type:this.collections[e].objType,count:this.collections[e].data.length});return t},g.prototype.removeCollection=function(e){var t,n=this.collections.length;for(t=0;t<n;t+=1)if(this.collections[t].name===e){var r=new S(e,{}),i=this.collections[t];for(var o in i)i.hasOwnProperty(o)&&r.hasOwnProperty(o)&&(i[o]=r[o]);return void this.collections.splice(t,1)}},g.prototype.getName=function(){return this.name},g.prototype.serializeReplacer=function(e,t){switch(e){case"autosaveHandle":case"persistenceAdapter":case"constraints":case"ttl":return null;case"throttledSavePending":case"throttledCallbacks":return;default:return t}},g.prototype.serialize=function(e){switch((e=e||{}).hasOwnProperty("serializationMethod")||(e.serializationMethod=this.options.serializationMethod),e.serializationMethod){case"normal":return JSON.stringify(this,this.serializeReplacer);case"pretty":return JSON.stringify(this,this.serializeReplacer,2);case"destructured":return this.serializeDestructured();default:return JSON.stringify(this,this.serializeReplacer)}},g.prototype.toJson=g.prototype.serialize,g.prototype.serializeDestructured=function(e){var t,n,r,i,o,a=[];if((e=e||{}).hasOwnProperty("partitioned")||(e.partitioned=!1),e.hasOwnProperty("delimited")||(e.delimited=!0),e.hasOwnProperty("delimiter")||(e.delimiter=this.options.destructureDelimiter),!0===e.partitioned&&e.hasOwnProperty("partition")&&e.partition>=0)return this.serializeCollection({delimited:e.delimited,delimiter:e.delimiter,collectionIndex:e.partition});for((o=new g(this.filename)).loadJSONObject(this),t=0;t<o.collections.length;t++)o.collections[t].data=[];if(!0===e.partitioned&&-1===e.partition)return o.serialize({serializationMethod:"normal"});for(a.push(o.serialize({serializationMethod:"normal"})),o=null,t=0;t<this.collections.length;t++)if(r=this.serializeCollection({delimited:e.delimited,delimiter:e.delimiter,collectionIndex:t}),!1===e.partitioned&&!1===e.delimited){if(!Array.isArray(r))throw new Error("a nondelimited, non partitioned collection serialization did not return an expected array");for(i=r.length,n=0;n<i;n++)a.push(r[n]),r[n]=null;a.push("")}else a.push(r);return e.partitioned?(e.delimited,a):e.delimited?(a.push(""),a.join(e.delimiter)):(a.push(""),a)},g.prototype.serializeCollection=function(e){var t,n,r=[];if((e=e||{}).hasOwnProperty("delimited")||(e.delimited=!0),!e.hasOwnProperty("collectionIndex"))throw new Error("serializeCollection called without 'collectionIndex' option");for(t=this.collections[e.collectionIndex].data.length,r=[],n=0;n<t;n++)r.push(JSON.stringify(this.collections[e.collectionIndex].data[n]));return e.delimited?(r.push(""),r.join(e.delimiter)):r},g.prototype.deserializeDestructured=function(e,t){var n,r,i,o=[],a=0,s=1,u=!1;if((t=t||{}).hasOwnProperty("partitioned")||(t.partitioned=!1),t.hasOwnProperty("delimited")||(t.delimited=!0),t.hasOwnProperty("delimiter")||(t.delimiter=this.options.destructureDelimiter),t.partitioned){if(t.hasOwnProperty("partition"))return-1===t.partition?n=JSON.parse(e[0]):this.deserializeCollection(e[t.partition+1],t);for(n=JSON.parse(e[0]),r=n.collections.length,a=0;a<r;a++)n.collections[a].data=this.deserializeCollection(e[a+1],t);return n}if(t.delimited){if(o=e.split(t.delimiter),e=null,0===o.length)return null}else o=e;for(n=JSON.parse(o[0]),r=n.collections.length,o[0]=null;!u;)o[s],""===o[s]?++a>r&&(u=!0):(i=JSON.parse(o[s]),n.collections[a].data.push(i)),o[s++]=null;return n},g.prototype.deserializeCollection=function(e,t){var n,r,i=[];for((t=t||{}).hasOwnProperty("partitioned")||(t.partitioned=!1),t.hasOwnProperty("delimited")||(t.delimited=!0),t.hasOwnProperty("delimiter")||(t.delimiter=this.options.destructureDelimiter),t.delimited?(i=e.split(t.delimiter)).pop():i=e,r=i.length,n=0;n<r;n++)i[n]=JSON.parse(i[n]);return i},g.prototype.loadJSON=function(e,t){var n;if(0===e.length)n={};else switch(this.options.serializationMethod){case"normal":case"pretty":n=JSON.parse(e);break;case"destructured":n=this.deserializeDestructured(e);break;default:n=JSON.parse(e)}this.loadJSONObject(n,t)},g.prototype.loadJSONObject=function(e,n){var r,i,o,a,s,u,c=0,l=e.collections?e.collections.length:0;function f(e){var r,i=n[e.name];return i.proto?(r=i.inflate||t.copyProperties,function(e){var t=new i.proto;return r(e,t),t}):i.inflate}for(this.name=e.name,e.hasOwnProperty("throttledSaves")&&n&&!n.hasOwnProperty("throttledSaves")&&(this.throttledSaves=e.throttledSaves),this.collections=[];c<l;c+=1){if(r=e.collections[c],(i=this.addCollection(r.name,{disableChangesApi:r.disableChangesApi,disableDeltaChangesApi:r.disableDeltaChangesApi,disableMeta:r.disableMeta})).adaptiveBinaryIndices=!!r.hasOwnProperty("adaptiveBinaryIndices")&&!0===r.adaptiveBinaryIndices,i.transactional=r.transactional,i.asyncListeners=r.asyncListeners,i.cloneObjects=r.cloneObjects,i.cloneMethod=r.cloneMethod||"parse-stringify",i.autoupdate=r.autoupdate,i.changes=r.changes,n&&!0===n.retainDirtyFlags?i.dirty=r.dirty:i.dirty=!1,o=r.data.length,a=0,n&&n.hasOwnProperty(r.name))for(s=f(r);a<o;a++)u=s(r.data[a]),i.data[a]=u,i.addAutoUpdateObserver(u);else for(;a<o;a++)i.data[a]=r.data[a],i.addAutoUpdateObserver(i.data[a]);if(i.maxId=void 0===r.maxId?0:r.maxId,i.idIndex=r.idIndex,void 0!==r.binaryIndices&&(i.binaryIndices=r.binaryIndices),void 0!==r.transforms&&(i.transforms=r.transforms),i.ensureId(),i.uniqueNames=[],r.hasOwnProperty("uniqueNames"))for(i.uniqueNames=r.uniqueNames,a=0;a<i.uniqueNames.length;a++)i.ensureUniqueIndex(i.uniqueNames[a]);if(void 0!==r.DynamicViews){for(var h=0;h<r.DynamicViews.length;h++){var d=r.DynamicViews[h],p=i.addDynamicView(d.name,d.options);p.resultdata=d.resultdata,p.resultsdirty=d.resultsdirty,p.filterPipeline=d.filterPipeline,p.sortCriteria=d.sortCriteria,p.sortFunction=null,p.sortDirty=d.sortDirty,p.resultset.filteredrows=d.resultset.filteredrows,p.resultset.filterInitialized=d.resultset.filterInitialized,p.rematerialize({removeWhereFilters:!0})}e.databaseVersion<1.5&&(i.ensureAllIndexes(!0),i.dirty=!0)}}},g.prototype.close=function(e){this.autosave&&(this.autosaveDisable(),this.autosaveDirty()&&(this.saveDatabase(e),e=void 0)),e&&this.on("close",e),this.emit("close")},g.prototype.generateChangesNotification=function(e){function t(e){return e.name}var n=[],r=e||this.collections.map(t);return this.collections.forEach(function(e){-1!==r.indexOf(t(e))&&(n=n.concat(e.getChanges()))}),n},g.prototype.serializeChanges=function(e){return JSON.stringify(this.generateChangesNotification(e))},g.prototype.clearChanges=function(){this.collections.forEach(function(e){e.flushChanges&&e.flushChanges()})},m.prototype.loadDatabase=function(e,t){var n=this;this.options.asyncResponses?setTimeout(function(){n.hashStore.hasOwnProperty(e)?t(n.hashStore[e].value):t(null)},this.options.asyncTimeout):this.hashStore.hasOwnProperty(e)?t(this.hashStore[e].value):t(null)},m.prototype.saveDatabase=function(e,t,n){var r,i=this;this.options.asyncResponses?setTimeout(function(){r=i.hashStore.hasOwnProperty(e)?i.hashStore[e].savecount:0,i.hashStore[e]={savecount:r+1,lastsave:new Date,value:t},n()},this.options.asyncTimeout):(r=this.hashStore.hasOwnProperty(e)?this.hashStore[e].savecount:0,this.hashStore[e]={savecount:r+1,lastsave:new Date,value:t},n())},m.prototype.deleteDatabase=function(e,t){this.hashStore.hasOwnProperty(e)&&delete this.hashStore[e],"function"==typeof t&&t()},w.prototype.loadDatabase=function(e,t){var n=this;this.dbname=e,this.dbref=new g(e),this.adapter.loadDatabase(e,function(e){if(e){"string"!=typeof e&&t(new Error("LokiPartitioningAdapter received an unexpected response from inner adapter loadDatabase()"));var r=JSON.parse(e);n.dbref.loadJSONObject(r),r=null,n.dbref.collections.length,0!==n.dbref.collections.length?(n.pageIterator={collection:0,pageIndex:0},n.loadNextPartition(0,function(){t(n.dbref)})):t(n.dbref)}else t(e)})},w.prototype.loadNextPartition=function(e,t){var n=this.dbname+"."+e,r=this;if(!0===this.options.paging)return this.pageIterator.pageIndex=0,void this.loadNextPage(t);this.adapter.loadDatabase(n,function(n){var i=r.dbref.deserializeCollection(n,{delimited:!0,collectionIndex:e});r.dbref.collections[e].data=i,++e<r.dbref.collections.length?r.loadNextPartition(e,t):t()})},w.prototype.loadNextPage=function(e){var t=this.dbname+"."+this.pageIterator.collection+"."+this.pageIterator.pageIndex,n=this;this.adapter.loadDatabase(t,function(t){var r=t.split(n.options.delimiter);t="";var i,o=r.length,a=""===r[o-1];for(a&&(r.pop(),o=r.length,""===r[o-1]&&1===o&&(r.pop(),o=r.length)),i=0;i<o;i++)n.dbref.collections[n.pageIterator.collection].data.push(JSON.parse(r[i])),r[i]=null;r=[],a?++n.pageIterator.collection<n.dbref.collections.length?n.loadNextPartition(n.pageIterator.collection,e):e():(n.pageIterator.pageIndex++,n.loadNextPage(e))})},w.prototype.exportDatabase=function(e,t,n){var r,i=t.collections.length;for(this.dbref=t,this.dbname=e,this.dirtyPartitions=[-1],r=0;r<i;r++)t.collections[r].dirty&&this.dirtyPartitions.push(r);this.saveNextPartition(function(e){n(e)})},w.prototype.saveNextPartition=function(e){var t=this,n=this.dirtyPartitions.shift(),r=this.dbname+(-1===n?"":"."+n);if(this.options.paging&&-1!==n)return this.pageIterator={collection:n,docIndex:0,pageIndex:0},void this.saveNextPage(function(n){0===t.dirtyPartitions.length?e(n):t.saveNextPartition(e)});var i=this.dbref.serializeDestructured({partitioned:!0,delimited:!0,partition:n});this.adapter.saveDatabase(r,i,function(n){n?e(n):0===t.dirtyPartitions.length?e(null):t.saveNextPartition(e)})},w.prototype.saveNextPage=function(e){var t=this,n=this.dbref.collections[this.pageIterator.collection],r=this.dbname+"."+this.pageIterator.collection+"."+this.pageIterator.pageIndex,i=0,o=n.data.length,a=this.options.delimiter.length,s="",u="",c=!1,l=!1,f=function(n){u="",n&&e(n),c?e(null):(t.pageIterator.pageIndex++,t.saveNextPage(e))};for(0===n.data.length&&(c=!0);;)if(c||(s=JSON.stringify(n.data[this.pageIterator.docIndex]),u+=s,i+=s.length,++this.pageIterator.docIndex>=o&&(c=!0)),i>=this.options.pageSize&&(l=!0),l&&!c||(u+=this.options.delimiter,i+=a),c||l)return void this.adapter.saveDatabase(r,u,f)},_.prototype.loadDatabase=function(e,t){var n=this;this.fs.stat(e,function(r,i){!r&&i.isFile()?n.fs.readFile(e,{encoding:"utf8"},function(e,n){t(e?new Error(e):n)}):t(null)})},_.prototype.saveDatabase=function(e,t,n){var r=this,i=e+"~";this.fs.writeFile(i,t,function(t){t?n(new Error(t)):r.fs.rename(i,e,n)})},_.prototype.deleteDatabase=function(e,t){this.fs.unlink(e,function(e){e?t(new Error(e)):t()})},x.prototype.loadDatabase=function(e,t){v()?t(localStorage.getItem(e)):t(new Error("localStorage is not available"))},x.prototype.saveDatabase=function(e,t,n){v()?(localStorage.setItem(e,t),n(null)):n(new Error("localStorage is not available"))},x.prototype.deleteDatabase=function(e,t){v()?(localStorage.removeItem(e),t(null)):t(new Error("localStorage is not available"))},g.prototype.throttledSaveDrain=function(e,t){var n=this,r=(new Date).getTime();if(this.throttledSaves||e(!0),(t=t||{}).hasOwnProperty("recursiveWait")||(t.recursiveWait=!0),t.hasOwnProperty("recursiveWaitLimit")||(t.recursiveWaitLimit=!1),t.hasOwnProperty("recursiveWaitLimitDuration")||(t.recursiveWaitLimitDuration=2e3),t.hasOwnProperty("started")||(t.started=(new Date).getTime()),this.throttledSaves&&this.throttledSavePending){if(!t.recursiveWait)return void this.throttledCallbacks.push(e);this.throttledCallbacks.push(function(){return n.throttledSavePending?t.recursiveWaitLimit&&r-t.started>t.recursiveWaitLimitDuration?void e(!1):void n.throttledSaveDrain(e,t):void e(!0)})}else e(!0)},g.prototype.loadDatabaseInternal=function(e,t){var n=t||function(e,t){if(e)throw e},r=this;null!==this.persistenceAdapter?this.persistenceAdapter.loadDatabase(this.filename,function(t){if("string"==typeof t){var i=!1;try{r.loadJSON(t,e||{}),i=!0}catch(e){n(e)}i&&(n(null),r.emit("loaded","database "+r.filename+" loaded"))}else{if(!t)return n(null),void r.emit("loaded","empty database "+r.filename+" loaded");if(t instanceof Error)return void n(t);if("object"==typeof t)return r.loadJSONObject(t,e||{}),n(null),void r.emit("loaded","database "+r.filename+" loaded");n("unexpected adapter response : "+t)}}):n(new Error("persistenceAdapter not configured"))},g.prototype.loadDatabase=function(e,t){var n=this;this.throttledSaves?this.throttledSaveDrain(function(r){if(r)return n.throttledSavePending=!0,void n.loadDatabaseInternal(e,function(e){0===n.throttledCallbacks.length?n.throttledSavePending=!1:n.saveDatabase(),"function"==typeof t&&t(e)});"function"==typeof t&&t(new Error("Unable to pause save throttling long enough to read database"))},e):this.loadDatabaseInternal(e,t)},g.prototype.saveDatabaseInternal=function(e){var t=e||function(e){if(e)throw e},n=this;null!==this.persistenceAdapter?"reference"===this.persistenceAdapter.mode&&"function"==typeof this.persistenceAdapter.exportDatabase?this.persistenceAdapter.exportDatabase(this.filename,this.copy({removeNonSerializable:!0}),function(e){n.autosaveClearFlags(),t(e)}):(n.autosaveClearFlags(),this.persistenceAdapter.saveDatabase(this.filename,n.serialize(),function(e){t(e)})):t(new Error("persistenceAdapter not configured"))},g.prototype.saveDatabase=function(e){if(this.throttledSaves)if(this.throttledSavePending)this.throttledCallbacks.push(e);else{var t=this.throttledCallbacks;this.throttledCallbacks=[],t.unshift(e),this.throttledSavePending=!0;var n=this;this.saveDatabaseInternal(function(e){n.throttledSavePending=!1,t.forEach(function(t){"function"==typeof t&&setTimeout(function(){t(e)},1)}),n.throttledCallbacks.length>0&&n.saveDatabase()})}else this.saveDatabaseInternal(e)},g.prototype.save=g.prototype.saveDatabase,g.prototype.deleteDatabase=function(e,t){var n=t||function(e,t){if(e)throw e};"function"!=typeof e||t||(n=e),null!==this.persistenceAdapter?this.persistenceAdapter.deleteDatabase(this.filename,function(e){n(e)}):n(new Error("persistenceAdapter not configured"))},g.prototype.autosaveDirty=function(){for(var e=0;e<this.collections.length;e++)if(this.collections[e].dirty)return!0;return!1},g.prototype.autosaveClearFlags=function(){for(var e=0;e<this.collections.length;e++)this.collections[e].dirty=!1},g.prototype.autosaveEnable=function(e,t){this.autosave=!0;var n=5e3,r=this;void 0!==this.autosaveInterval&&null!==this.autosaveInterval&&(n=this.autosaveInterval),this.autosaveHandle=setInterval(function(){r.autosaveDirty()&&r.saveDatabase(t)},n)},g.prototype.autosaveDisable=function(){void 0!==this.autosaveHandle&&null!==this.autosaveHandle&&(clearInterval(this.autosaveHandle),this.autosaveHandle=null)},k.prototype.reset=function(){return this.filteredrows.length>0&&(this.filteredrows=[]),this.filterInitialized=!1,this},k.prototype.toJSON=function(){var e=this.copy();return e.collection=null,e},k.prototype.limit=function(e){this.filterInitialized||0!==this.filteredrows.length||(this.filteredrows=this.collection.prepareFullDocIndex());var t=new k(this.collection);return t.filteredrows=this.filteredrows.slice(0,e),t.filterInitialized=!0,t},k.prototype.offset=function(e){this.filterInitialized||0!==this.filteredrows.length||(this.filteredrows=this.collection.prepareFullDocIndex());var t=new k(this.collection);return t.filteredrows=this.filteredrows.slice(e),t.filterInitialized=!0,t},k.prototype.copy=function(){var e=new k(this.collection);return this.filteredrows.length>0&&(e.filteredrows=this.filteredrows.slice()),e.filterInitialized=this.filterInitialized,e},k.prototype.branch=k.prototype.copy,k.prototype.transform=function(e,n){var r,i,o=this;if("string"==typeof e&&this.collection.transforms.hasOwnProperty(e)&&(e=this.collection.transforms[e]),"object"!=typeof e||!Array.isArray(e))throw new Error("Invalid transform");for(void 0!==n&&(e=t.resolveTransformParams(e,n)),r=0;r<e.length;r++)switch((i=e[r]).type){case"find":o.find(i.value);break;case"where":o.where(i.value);break;case"simplesort":o.simplesort(i.property,i.desc||i.options);break;case"compoundsort":o.compoundsort(i.value);break;case"sort":o.sort(i.value);break;case"limit":o=o.limit(i.value);break;case"offset":o=o.offset(i.value);break;case"map":o=o.map(i.value,i.dataOptions);break;case"eqJoin":o=o.eqJoin(i.joinData,i.leftJoinKey,i.rightJoinKey,i.mapFun,i.dataOptions);break;case"mapReduce":o=o.mapReduce(i.mapFunction,i.reduceFunction);break;case"update":o.update(i.value);break;case"remove":o.remove()}return o},k.prototype.sort=function(e){this.filterInitialized||0!==this.filteredrows.length||(this.filteredrows=this.collection.prepareFullDocIndex());var t=function(e,t){return function(n,r){return e(t[n],t[r])}}(e,this.collection.data);return this.filteredrows.sort(t),this},k.prototype.simplesort=function(e,t){var n,r=10,i=this.collection.data.length,o=this.filteredrows.length,a=this.collection.binaryIndices.hasOwnProperty(e);if(void 0!==t&&!1!==t||(t={desc:!1}),!0===t&&(t={desc:!0}),0===o){if(this.filterInitialized)return this;if(this.collection.binaryIndices.hasOwnProperty(e))return this.collection.ensureIndex(e),this.filteredrows=this.collection.binaryIndices[e].values.slice(0),t.desc&&this.filteredrows.reverse(),this;this.filteredrows=this.collection.prepareFullDocIndex()}else if(!t.disableIndexIntersect&&a&&(n=i/o,t.useJavascriptSorting&&(r=6),n<=r||t.forceIndexIntersect)){var s,u=this.filteredrows,l={};for(s=0;s<o;s++)l[u[s]]=!0;var f=this.collection.binaryIndices[e].values;return this.filteredrows=f.filter(function(e){return l[e]}),t.desc&&this.filteredrows.reverse(),this}if(t.useJavascriptSorting)return this.sort(function(t,n){return t[e]===n[e]?0:t[e]>n[e]?1:t[e]<n[e]?-1:void 0});var h=function(e,t,n){var r,i,o;return function(a,s){return~e.indexOf(".")?(o=e.split("."),r=o.reduce(function(e,t){return e&&e[t]||void 0},n[a]),i=o.reduce(function(e,t){return e&&e[t]||void 0},n[s])):(r=n[a][e],i=n[s][e]),c(r,i,t)}}(e,t.desc,this.collection.data);return this.filteredrows.sort(h),this},k.prototype.compoundsort=function(e){if(0===e.length)throw new Error("Invalid call to compoundsort, need at least one property");var t;if(1===e.length)return t=e[0],Array.isArray(t)?this.simplesort(t[0],t[1]):this.simplesort(t,!1);for(var n=0,r=e.length;n<r;n+=1)t=e[n],Array.isArray(t)||(e[n]=[t,!1]);this.filterInitialized||0!==this.filteredrows.length||(this.filteredrows=this.collection.prepareFullDocIndex());var i=function(e,t){return function(n,r){return function(e,t,n){for(var r,i,o,a,s,u=0,l=0,f=e.length;l<f;l++)if(r=e[l],~(i=r[0]).indexOf(".")?(s=i.split("."),o=s.reduce(function(e,t){return e&&e[t]||void 0},t),a=s.reduce(function(e,t){return e&&e[t]||void 0},n)):(o=t[i],a=n[i]),0!==(u=c(o,a,r[1])))return u;return 0}(e,t[n],t[r])}}(e,this.collection.data);return this.filteredrows.sort(i),this},k.prototype.findOr=function(e){for(var t=null,n=0,r=0,i=[],o=[],a=0,s=this.count(),u=0,c=e.length;u<c;u++){if(t=this.branch().find(e[u]).filteredrows,(r=t.length)===s)return this;for(n=0;n<r;n++)a=t[n],void 0===o[a]&&(o[a]=!0,i.push(a))}return this.filteredrows=i,this.filterInitialized=!0,this},k.prototype.$or=k.prototype.findOr,k.prototype.findAnd=function(e){for(var t=0,n=e.length;t<n;t++){if(0===this.count())return this;this.find(e[t])}return this},k.prototype.$and=k.prototype.findAnd,k.prototype.find=function(t,n){if(0===this.collection.data.length)return this.filteredrows=[],this.filterInitialized=!0,this;var r,i,o,a,s,u,c,f=t||"getAll",h=!1,y=[],v=[],b=null;if(n=n||!1,"object"==typeof f){for(r in f)(a={})[r]=f[r],v.push(a),e.call(f,r)&&(i=r,o=f[r]);if(v.length>1)return this.find({$and:v},n)}if(!i||"getAll"===f)return n&&(this.filteredrows=this.collection.data.length>0?[0]:[],this.filterInitialized=!0),this;if("$and"===i||"$or"===i)return this[i](o),n&&this.filteredrows.length>1&&(this.filteredrows=this.filteredrows.slice(0,1)),this;if(null===o||"object"!=typeof o||o instanceof Date)s="$eq",u=o;else{if("object"!=typeof o)throw new Error("Do not know what you want to do.");for(c in o)if(e.call(o,c)){s=c,u=o[c];break}}"$regex"===s&&(Array.isArray(u)?u=new RegExp(u[0],u[1]):u instanceof RegExp||(u=new RegExp(u)));var g=-1!==i.indexOf("."),m=!g&&!this.filterInitialized;m&&this.collection.binaryIndices[i]&&p[s]&&(!0!==this.collection.adaptiveBinaryIndices&&this.collection.ensureIndex(i),h=!0,b=this.collection.binaryIndices[i]);var w,_=d[s],x=this.collection.data,k=0,E=0,S=0;if(this.filterInitialized)if(w=this.filteredrows,E=w.length,g)for(i=i.split("."),k=0;k<E;k++)S=w[k],l(x[S],i,_,u)&&y.push(S);else for(k=0;k<E;k++)S=w[k],_(x[S][i],u)&&y.push(S);else if(h){var O=this.collection.calculateRange(s,i,u);if("$in"!==s){for(k=O[0];k<=O[1];k++)if(!0!==p[s]){if(p[s](x[b.values[k]][i],u)&&(y.push(b.values[k]),n))return this.filteredrows=y,this.filterInitialized=!0,this}else if(y.push(b.values[k]),n)return this.filteredrows=y,this.filterInitialized=!0,this}else for(k=0,E=O.length;k<E;k++)if(y.push(b.values[O[k]]),n)return this.filteredrows=y,this.filterInitialized=!0,this}else if(E=x.length,g){for(i=i.split("."),k=0;k<E;k++)if(l(x[k],i,_,u)&&(y.push(k),n))return this.filteredrows=y,this.filterInitialized=!0,this}else for(k=0;k<E;k++)if(_(x[k][i],u)&&(y.push(k),n))return this.filteredrows=y,this.filterInitialized=!0,this;return this.filteredrows=y,this.filterInitialized=!0,this},k.prototype.where=function(e){var t,n=[];if("function"!=typeof e)throw new TypeError("Argument is not a stored view or a function");t=e;try{if(this.filterInitialized){for(var r=this.filteredrows.length;r--;)!0===t(this.collection.data[this.filteredrows[r]])&&n.push(this.filteredrows[r]);return this.filteredrows=n,this}for(var i=this.collection.data.length;i--;)!0===t(this.collection.data[i])&&n.push(i);return this.filteredrows=n,this.filterInitialized=!0,this}catch(e){throw e}},k.prototype.count=function(){return this.filterInitialized?this.filteredrows.length:this.collection.count()},k.prototype.data=function(e){var t,n,r,i,o=[],a=this.collection.data;if((e=e||{}).removeMeta&&!e.forceClones&&(e.forceClones=!0,e.forceCloneMethod=e.forceCloneMethod||"shallow"),this.collection.disableDeltaChangesApi||(e.forceClones=!0,e.forceCloneMethod="parse-stringify"),!this.filterInitialized){if(0===this.filteredrows.length){if(this.collection.cloneObjects||e.forceClones){for(n=a.length,i=e.forceCloneMethod||this.collection.cloneMethod,r=0;r<n;r++)t=y(a[r],i),e.removeMeta&&(delete t.$loki,delete t.meta),o.push(t);return o}return a.slice()}this.filterInitialized=!0}var s=this.filteredrows;if(n=s.length,this.collection.cloneObjects||e.forceClones)for(i=e.forceCloneMethod||this.collection.cloneMethod,r=0;r<n;r++)t=y(a[s[r]],i),e.removeMeta&&(delete t.$loki,delete t.meta),o.push(t);else for(r=0;r<n;r++)o.push(a[s[r]]);return o},k.prototype.update=function(e){if("function"!=typeof e)throw new TypeError("Argument is not a function");this.filterInitialized||0!==this.filteredrows.length||(this.filteredrows=this.collection.prepareFullDocIndex());for(var t,n=this.filteredrows.length,r=this.collection.data,i=0;i<n;i++)this.collection.cloneObjects||!this.collection.disableDeltaChangesApi?(t=y(r[this.filteredrows[i]],this.collection.cloneMethod),e(t),this.collection.update(t)):(e(r[this.filteredrows[i]]),this.collection.update(r[this.filteredrows[i]]));return this},k.prototype.remove=function(){return this.filterInitialized||0!==this.filteredrows.length||(this.filteredrows=this.collection.prepareFullDocIndex()),this.collection.removeBatchByPositions(this.filteredrows),this.filteredrows=[],this},k.prototype.mapReduce=function(e,t){try{return t(this.data().map(e))}catch(e){throw e}},k.prototype.eqJoin=function(e,t,n,r,i){var o,a,s,u=[],c=[],l=[],f="function"==typeof t,h="function"==typeof n,d={};if(u=this.data(i),o=u.length,e instanceof S)c=e.chain().data(i);else if(e instanceof k)c=e.data(i);else{if(!Array.isArray(e))throw new TypeError("joinData needs to be an array or result set");c=e}a=c.length;for(var p=0;p<a;p++)s=h?n(c[p]):c[p][n],d[s]=c[p];r||(r=function(e,t){return{left:e,right:t}});for(var y=0;y<o;y++)s=f?t(u[y]):u[y][t],l.push(r(u[y],d[s]||{}));return this.collection=new S("joinData"),this.collection.insert(l),this.filteredrows=[],this.filterInitialized=!1,this},k.prototype.map=function(e,t){var n=this.data(t).map(e);return this.collection=new S("mappedData"),this.collection.insert(n),this.filteredrows=[],this.filterInitialized=!1,this},E.prototype=new b,E.prototype.rematerialize=function(e){var t,n,r;if(e=e||{},this.resultdata=[],this.resultsdirty=!0,this.resultset=new k(this.collection),(this.sortFunction||this.sortCriteria||this.sortCriteriaSimple)&&(this.sortDirty=!0),e.hasOwnProperty("removeWhereFilters"))for(t=this.filterPipeline.length,n=t;n--;)"where"===this.filterPipeline[n].type&&(n!==this.filterPipeline.length-1&&(this.filterPipeline[n]=this.filterPipeline[this.filterPipeline.length-1]),this.filterPipeline.length--);var i=this.filterPipeline;for(this.filterPipeline=[],t=i.length,r=0;r<t;r++)this.applyFind(i[r].val);return this.data(),this.emit("rebuild",this),this},E.prototype.branchResultset=function(e,t){var n=this.resultset.branch();return void 0===e?n:n.transform(e,t)},E.prototype.toJSON=function(){var e=new E(this.collection,this.name,this.options);return e.resultset=this.resultset,e.resultdata=[],e.resultsdirty=!0,e.filterPipeline=this.filterPipeline,e.sortFunction=this.sortFunction,e.sortCriteria=this.sortCriteria,e.sortCriteriaSimple=this.sortCriteriaSimple||null,e.sortDirty=this.sortDirty,e.collection=null,e},E.prototype.removeFilters=function(e){e=e||{},this.rebuildPending=!1,this.resultset.reset(),this.resultdata=[],this.resultsdirty=!0,this.cachedresultset=null,this.filterPipeline=[],this.sortFunction=null,this.sortCriteria=null,this.sortCriteriaSimple=null,this.sortDirty=!1,!0===e.queueSortPhase&&this.queueSortPhase()},E.prototype.applySort=function(e){return this.sortFunction=e,this.sortCriteria=null,this.sortCriteriaSimple=null,this.queueSortPhase(),this},E.prototype.applySimpleSort=function(e,t){return this.sortCriteriaSimple={propname:e,options:t||!1},this.sortCriteria=null,this.sortFunction=null,this.queueSortPhase(),this},E.prototype.applySortCriteria=function(e){return this.sortCriteria=e,this.sortCriteriaSimple=null,this.sortFunction=null,this.queueSortPhase(),this},E.prototype.startTransaction=function(){return this.cachedresultset=this.resultset.copy(),this},E.prototype.commit=function(){return this.cachedresultset=null,this},E.prototype.rollback=function(){return this.resultset=this.cachedresultset,this.options.persistent&&(this.resultdata=this.resultset.data(),this.emit("rebuild",this)),this},E.prototype._indexOfFilterWithId=function(e){if("string"==typeof e||"number"==typeof e)for(var t=0,n=this.filterPipeline.length;t<n;t+=1)if(e===this.filterPipeline[t].uid)return t;return-1},E.prototype._addFilter=function(e){this.filterPipeline.push(e),this.resultset[e.type](e.val)},E.prototype.reapplyFilters=function(){this.resultset.reset(),this.cachedresultset=null,this.options.persistent&&(this.resultdata=[],this.resultsdirty=!0);var e=this.filterPipeline;this.filterPipeline=[];for(var t=0,n=e.length;t<n;t+=1)this._addFilter(e[t]);return this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent(),this},E.prototype.applyFilter=function(e){var t=this._indexOfFilterWithId(e.uid);return t>=0?(this.filterPipeline[t]=e,this.reapplyFilters()):(this.cachedresultset=null,this.options.persistent&&(this.resultdata=[],this.resultsdirty=!0),this._addFilter(e),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent(),this)},E.prototype.applyFind=function(e,t){return this.applyFilter({type:"find",val:e,uid:t}),this},E.prototype.applyWhere=function(e,t){return this.applyFilter({type:"where",val:e,uid:t}),this},E.prototype.removeFilter=function(e){var t=this._indexOfFilterWithId(e);if(t<0)throw new Error("Dynamic view does not contain a filter with ID: "+e);return this.filterPipeline.splice(t,1),this.reapplyFilters(),this},E.prototype.count=function(){return this.resultsdirty&&(this.resultdata=this.resultset.data()),this.resultset.count()},E.prototype.data=function(e){return(this.sortDirty||this.resultsdirty)&&this.performSortPhase({suppressRebuildEvent:!0}),this.options.persistent?this.resultdata:this.resultset.data(e)},E.prototype.queueRebuildEvent=function(){if(!this.rebuildPending){this.rebuildPending=!0;var e=this;setTimeout(function(){e.rebuildPending&&(e.rebuildPending=!1,e.emit("rebuild",e))},this.options.minRebuildInterval)}},E.prototype.queueSortPhase=function(){if(!this.sortDirty){this.sortDirty=!0;var e=this;"active"===this.options.sortPriority?setTimeout(function(){e.performSortPhase()},this.options.minRebuildInterval):this.queueRebuildEvent()}},E.prototype.performSortPhase=function(e){(this.sortDirty||this.resultsdirty)&&(e=e||{},this.sortDirty&&(this.sortFunction?this.resultset.sort(this.sortFunction):this.sortCriteria?this.resultset.compoundsort(this.sortCriteria):this.sortCriteriaSimple&&this.resultset.simplesort(this.sortCriteriaSimple.propname,this.sortCriteriaSimple.options),this.sortDirty=!1),this.options.persistent&&(this.resultdata=this.resultset.data(),this.resultsdirty=!1),e.suppressRebuildEvent||this.emit("rebuild",this))},E.prototype.evaluateDocument=function(e,t){if(!this.resultset.filterInitialized)return this.options.persistent&&(this.resultdata=this.resultset.data()),void(this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent());var n,r=this.resultset.filteredrows,i=t?-1:r.indexOf(+e),o=r.length,a=new k(this.collection);a.filteredrows=[e],a.filterInitialized=!0;for(var s=0,u=this.filterPipeline.length;s<u;s++)n=this.filterPipeline[s],a[n.type](n.val);var c=0===a.filteredrows.length?-1:0;return-1!==i||-1!==c?-1===i&&-1!==c?(r.push(e),this.options.persistent&&this.resultdata.push(this.collection.data[e]),void(this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent())):-1!==i&&-1===c?(i<o-1?(r.splice(i,1),this.options.persistent&&this.resultdata.splice(i,1)):(r.length=o-1,this.options.persistent&&(this.resultdata.length=o-1)),void(this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent())):-1!==i&&-1!==c?(this.options.persistent&&(this.resultdata[i]=this.collection.data[e]),void(this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent())):void 0:void 0},E.prototype.removeDocument=function(e){var t,n,r,i={},o={},a=[],s=this.resultset,u=this.resultset.filteredrows,c=u.length;if(!this.resultset.filterInitialized)return this.options.persistent&&(this.resultdata=this.resultset.data()),void(this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent());for(Array.isArray(e)||(e=[e]),r=e.length,n=0;n<r;n++)i[e[n]]=!0;for(t=0;t<c;t++)i[u[t]]&&(o[t]=!0);Object.keys(o).length>0&&(this.resultset.filteredrows=this.resultset.filteredrows.filter(function(e,t){return!o[t]}),this.options.persistent&&(this.resultdata=this.resultdata.filter(function(e,t){return!o[t]})),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent());var l=function(e){return function(t){return t<s.filteredrows[e]}};for(c=s.filteredrows.length,t=0;t<c;t++)a=e.filter(l(t)),s.filteredrows[t]-=a.length},E.prototype.mapReduce=function(e,t){try{return t(this.data().map(e))}catch(e){throw e}},S.prototype=new b,S.prototype.createChange=function(e,t,n,r){this.changes.push({name:e,operation:t,obj:"U"!=t||this.disableDeltaChangesApi?JSON.parse(JSON.stringify(n)):this.getChangeDelta(n,r)})},S.prototype.insertMeta=function(e){var t,n;if(!this.disableMeta&&e)if(Array.isArray(e))for(t=e.length,n=0;n<t;n++)e[n].hasOwnProperty("meta")||(e[n].meta={}),e[n].meta.created=(new Date).getTime(),e[n].meta.revision=0;else e.meta||(e.meta={}),e.meta.created=(new Date).getTime(),e.meta.revision=0},S.prototype.updateMeta=function(e){!this.disableMeta&&e&&(e.meta.updated=(new Date).getTime(),e.meta.revision+=1)},S.prototype.createInsertChange=function(e){this.createChange(this.name,"I",e)},S.prototype.createUpdateChange=function(e,t){this.createChange(this.name,"U",e,t)},S.prototype.insertMetaWithChange=function(e){this.insertMeta(e),this.createInsertChange(e)},S.prototype.updateMetaWithChange=function(e,t){this.updateMeta(e),this.createUpdateChange(e,t)},S.prototype.console={log:function(){},warn:function(){},error:function(){}},S.prototype.addAutoUpdateObserver=function(e){this.autoupdate&&"function"==typeof Object.observe&&Object.observe(e,this.observerCallback,["add","update","delete","reconfigure","setPrototype"])},S.prototype.removeAutoUpdateObserver=function(e){this.autoupdate&&"function"==typeof Object.observe&&Object.unobserve(e,this.observerCallback)},S.prototype.addTransform=function(e,t){if(this.transforms.hasOwnProperty(e))throw new Error("a transform by that name already exists");this.transforms[e]=t},S.prototype.getTransform=function(e){return this.transforms[e]},S.prototype.setTransform=function(e,t){this.transforms[e]=t},S.prototype.removeTransform=function(e){delete this.transforms[e]},S.prototype.byExample=function(e){var t,n,r;for(t in r=[],e)e.hasOwnProperty(t)&&r.push(((n={})[t]=e[t],n));return{$and:r}},S.prototype.findObject=function(e){return this.findOne(this.byExample(e))},S.prototype.findObjects=function(e){return this.find(this.byExample(e))},S.prototype.ttlDaemonFuncGen=function(){var e=this,t=this.ttl.age;return function(){var n=Date.now(),r=e.chain().where(function(e){var r=e.meta.updated||e.meta.created,i=n-r;return t<i});r.remove()}},S.prototype.setTTL=function(e,t){e<0?clearInterval(this.ttl.daemon):(this.ttl.age=e,this.ttl.ttlInterval=t,this.ttl.daemon=setInterval(this.ttlDaemonFuncGen(),t))},S.prototype.prepareFullDocIndex=function(){for(var e=this.data.length,t=new Array(e),n=0;n<e;n+=1)t[n]=n;return t},S.prototype.configureOptions=function(e){(e=e||{}).hasOwnProperty("adaptiveBinaryIndices")&&(this.adaptiveBinaryIndices=e.adaptiveBinaryIndices,this.adaptiveBinaryIndices&&this.ensureAllIndexes())},S.prototype.ensureIndex=function(e,t){if(void 0===t&&(t=!1),null===e||void 0===e)throw new Error("Attempting to set index without an associated property");if((!this.binaryIndices[e]||t||this.binaryIndices[e].dirty)&&(!0!==this.adaptiveBinaryIndices||!this.binaryIndices.hasOwnProperty(e)||t)){var n={name:e,dirty:!0,values:this.prepareFullDocIndex()};this.binaryIndices[e]=n;var r=function(e,t){var n,r,i;return function(a,s){if(~e.indexOf(".")?(i=e.split("."),n=i.reduce(function(e,t){return e&&e[t]||void 0},t[a]),r=i.reduce(function(e,t){return e&&e[t]||void 0},t[s])):(n=t[a][e],r=t[s][e]),n!==r){if(o.lt(n,r,!1))return-1;if(o.gt(n,r,!1))return 1}return 0}}(e,this.data);n.values.sort(r),n.dirty=!1,this.dirty=!0}},S.prototype.checkAllIndexes=function(t){var n,r=this.binaryIndices,i=[];for(n in r)e.call(r,n)&&(this.checkIndex(n,t)||i.push(n));return i},S.prototype.checkIndex=function(e,t){(t=t||{}).randomSamplingFactor&&!1!==t.randomSampling&&(t.randomSampling=!0),t.randomSamplingFactor=t.randomSamplingFactor||.1,(t.randomSamplingFactor<0||t.randomSamplingFactor>1)&&(t.randomSamplingFactor=.1);var n,r,i,o,a,s=!0;if(!this.binaryIndices.hasOwnProperty(e))throw new Error("called checkIndex on property without an index: "+e);if(this.adaptiveBinaryIndices||this.ensureIndex(e),a=this.binaryIndices[e].values,(o=a.length)!==this.data.length)return t.repair&&this.ensureIndex(e,!0),!1;if(0===o)return!0;if(1===o)s=0===a[0];else if(t.randomSampling){if(d.$lte(this.data[a[0]][e],this.data[a[1]][e])||(s=!1),d.$lte(this.data[a[o-2]][e],this.data[a[o-1]][e])||(s=!1),s)for(r=Math.floor((o-1)*t.randomSamplingFactor),n=0;n<r-1;n++)if(i=Math.floor(Math.random()*(o-1)),!d.$lte(this.data[a[i]][e],this.data[a[i+1]][e])){s=!1;break}}else for(n=0;n<o-1;n++)if(!d.$lte(this.data[a[n]][e],this.data[a[n+1]][e])){s=!1;break}return!s&&t.repair&&this.ensureIndex(e,!0),s},S.prototype.getBinaryIndexValues=function(e){var t,n=this.binaryIndices[e].values,r=[];for(t=0;t<n.length;t++)r.push(this.data[n[t]][e]);return r},S.prototype.ensureUniqueIndex=function(e){var t=this.constraints.unique[e];return t||-1==this.uniqueNames.indexOf(e)&&this.uniqueNames.push(e),this.constraints.unique[e]=t=new D(e),this.data.forEach(function(e){t.set(e)}),t},S.prototype.ensureAllIndexes=function(t){var n,r=this.binaryIndices;for(n in r)e.call(r,n)&&this.ensureIndex(n,t)},S.prototype.flagBinaryIndexesDirty=function(){var t,n=this.binaryIndices;for(t in n)e.call(n,t)&&(n[t].dirty=!0)},S.prototype.flagBinaryIndexDirty=function(e){this.binaryIndices[e]&&(this.binaryIndices[e].dirty=!0)},S.prototype.count=function(e){return e?this.chain().find(e).filteredrows.length:this.data.length},S.prototype.ensureId=function(){var e=this.data.length,t=0;for(this.idIndex=[];t<e;t+=1)this.idIndex.push(this.data[t].$loki)},S.prototype.ensureIdAsync=function(e){this.async(function(){this.ensureId()},e)},S.prototype.addDynamicView=function(e,t){var n=new E(this,e,t);return this.DynamicViews.push(n),n},S.prototype.removeDynamicView=function(e){for(var t=0;t<this.DynamicViews.length;t++)this.DynamicViews[t].name===e&&this.DynamicViews.splice(t,1)},S.prototype.getDynamicView=function(e){for(var t=0;t<this.DynamicViews.length;t++)if(this.DynamicViews[t].name===e)return this.DynamicViews[t];return null},S.prototype.findAndUpdate=function(e,t){"function"==typeof e?this.updateWhere(e,t):this.chain().find(e).update(t)},S.prototype.findAndRemove=function(e){this.chain().find(e).remove()},S.prototype.insert=function(e){if(!Array.isArray(e))return this.insertOne(e);var t,n=[];this.emit("pre-insert",e);for(var r=0,i=e.length;r<i;r++){if(!(t=this.insertOne(e[r],!0)))return;n.push(t)}return this.emit("insert",n),1===(n=this.cloneObjects?y(n,this.cloneMethod):n).length?n[0]:n},S.prototype.insertOne=function(e,t){var n,r=null;if("object"!=typeof e?r=new TypeError("Document needs to be an object"):null===e&&(r=new TypeError("Object cannot be null")),null!==r)throw this.emit("error",r),r;var i=this.cloneObjects?y(e,this.cloneMethod):e;if(this.disableMeta||void 0!==i.meta||(i.meta={revision:0,created:0}),t||this.emit("pre-insert",i),this.add(i))return this.disableChangesApi?this.insertMeta(i):this.insertMetaWithChange(i),n=this.cloneObjects?y(i,this.cloneMethod):i,t||this.emit("insert",n),this.addAutoUpdateObserver(n),n},S.prototype.clear=function(e){var t=this;if(e=e||{},this.data=[],this.idIndex=[],this.cachedIndex=null,this.cachedBinaryIndex=null,this.cachedData=null,this.maxId=0,this.DynamicViews=[],this.dirty=!0,!0===e.removeIndices)this.binaryIndices={},this.constraints={unique:{},exact:{}},this.uniqueNames=[];else{var n=Object.keys(this.binaryIndices);n.forEach(function(e){t.binaryIndices[e].dirty=!1,t.binaryIndices[e].values=[]}),this.constraints={unique:{},exact:{}},this.uniqueNames.forEach(function(e){t.ensureUniqueIndex(e)})}},S.prototype.update=function(t){var n,r,i;if(Array.isArray(t)){i=t.length,(n=!this.cloneObjects&&this.adaptiveBinaryIndices&&Object.keys(this.binaryIndices).length>0)&&(this.adaptiveBinaryIndices=!1);try{for(r=0;r<i;r+=1)this.update(t[r])}finally{n&&(this.ensureAllIndexes(),this.adaptiveBinaryIndices=!0)}}else{if(!e.call(t,"$loki"))throw new Error("Trying to update unsynced document. Please save the document first by using insert() or addMany()");try{this.startTransaction();var o,a,s,u,c,l=this.get(t.$loki,!0),f=this;if(!l)throw new Error("Trying to update a document not in collection.");o=l[0],s=l[1],a=this.cloneObjects||!this.disableDeltaChangesApi?y(t,this.cloneMethod):t,this.emit("pre-update",t),Object.keys(this.constraints.unique).forEach(function(e){f.constraints.unique[e].update(o,a)}),this.data[s]=a,a!==t&&this.addAutoUpdateObserver(t);for(var h=0;h<this.DynamicViews.length;h++)this.DynamicViews[h].evaluateDocument(s,!1);if(this.adaptiveBinaryIndices){var d=this.binaryIndices;for(u in d)this.adaptiveBinaryIndexUpdate(s,u)}else this.flagBinaryIndexesDirty();return this.idIndex[s]=a.$loki,this.commit(),this.dirty=!0,this.disableChangesApi?this.updateMeta(a,null):this.updateMetaWithChange(a,o),c=this.cloneObjects?y(a,this.cloneMethod):a,this.emit("update",c,o),c}catch(e){throw this.rollback(),this.console.error(e.message),this.emit("error",e),e}}},S.prototype.add=function(t){if("object"!=typeof t)throw new TypeError("Object being added needs to be an object");if(void 0!==t.$loki)throw new Error("Document is already in collection, please use update()");try{this.startTransaction(),this.maxId++,isNaN(this.maxId)&&(this.maxId=this.data[this.data.length-1].$loki+1),t.$loki=this.maxId,this.disableMeta||(t.meta.version=0);var n,r=this.constraints.unique;for(n in r)e.call(r,n)&&r[n].set(t);this.idIndex.push(t.$loki),this.data.push(t);for(var i=this.data.length-1,o=this.DynamicViews.length,a=0;a<o;a++)this.DynamicViews[a].evaluateDocument(i,!0);if(this.adaptiveBinaryIndices){var s=this.binaryIndices;for(n in s)this.adaptiveBinaryIndexInsert(i,n)}else this.flagBinaryIndexesDirty();return this.commit(),this.dirty=!0,this.cloneObjects?y(t,this.cloneMethod):t}catch(e){throw this.rollback(),this.console.error(e.message),this.emit("error",e),e}},S.prototype.updateWhere=function(e,t){var n,r=this.where(e),i=0;try{for(;i<r.length;i++)n=t(r[i]),this.update(n)}catch(e){this.rollback(),this.console.error(e.message)}},S.prototype.removeWhere=function(e){var t;"function"==typeof e?(t=this.data.filter(e),this.remove(t)):this.chain().find(e).remove()},S.prototype.removeDataOnly=function(){this.remove(this.data.slice())},S.prototype.removeBatchByPositions=function(e){var t,n,r,i,o=e.length,a={},s=Object.keys(this.binaryIndices).length,u=Object.keys(this.constraints.unique).length,c=this.adaptiveBinaryIndices&&Object.keys(this.binaryIndices).length>0,l=this;try{for(this.startTransaction(),r=0;r<o;r++)a[this.idIndex[e[r]]]=!0;if((t=this.DynamicViews.length)>0||s>0||u>0){if(t>0)for(n=0;n<t;n++)this.DynamicViews[n].removeDocument(e);if(this.adaptiveBinaryIndices&&!c){var f,h=this.binaryIndices;for(f in h)this.adaptiveBinaryIndexRemove(e,f)}else this.flagBinaryIndexesDirty();u&&Object.keys(this.constraints.unique).forEach(function(t){for(r=0;r<o;r++)null!==(i=l.data[e[r]])[t]&&void 0!==i[t]&&l.constraints.unique[t].remove(i[t])})}if(!this.disableChangesApi||this.events.delete.length>1)for(r=0;r<o;r++)this.emit("delete",this.data[e[r]]);this.data=this.data.filter(function(e){return!a[e.$loki]}),this.idIndex=this.idIndex.filter(function(e){return!a[e]}),this.adaptiveBinaryIndices&&c&&(this.adaptiveBinaryIndices=!1,this.ensureAllIndexes(!0),this.adaptiveBinaryIndices=!0),this.commit(),this.dirty=!0}catch(e){return this.rollback(),c&&(this.adaptiveBinaryIndices=!0),this.console.error(e.message),this.emit("error",e),null}},S.prototype.removeBatch=function(e){var t,n=e.length,r=this.data.length,i={},o=[];for(t=0;t<r;t++)i[this.data[t].$loki]=t;for(t=0;t<n;t++)"object"==typeof e[t]?o.push(i[e[t].$loki]):o.push(i[e[t]]);this.removeBatchByPositions(o)},S.prototype.remove=function(t){if("number"==typeof t&&(t=this.get(t)),"object"!=typeof t)throw new Error("Parameter is not an object");if(Array.isArray(t))this.removeBatch(t);else{if(!e.call(t,"$loki"))throw new Error("Object is not a document stored in the collection");try{this.startTransaction();var n=this.get(t.$loki,!0),r=n[1],i=this;Object.keys(this.constraints.unique).forEach(function(e){null!==t[e]&&void 0!==t[e]&&i.constraints.unique[e].remove(t[e])});for(var o=0;o<this.DynamicViews.length;o++)this.DynamicViews[o].removeDocument(r);if(this.adaptiveBinaryIndices){var a,s=this.binaryIndices;for(a in s)this.adaptiveBinaryIndexRemove(r,a)}else this.flagBinaryIndexesDirty();return this.data.splice(r,1),this.removeAutoUpdateObserver(t),this.idIndex.splice(r,1),this.commit(),this.dirty=!0,this.emit("delete",n[0]),delete t.$loki,delete t.meta,t}catch(e){return this.rollback(),this.console.error(e.message),this.emit("error",e),null}}},S.prototype.get=function(e,t){var n=t||!1,r=this.idIndex,i=r.length-1,o=0,a=o+i>>1;if(e="number"==typeof e?e:parseInt(e,10),isNaN(e))throw new TypeError("Passed id is not an integer");for(;r[o]<r[i];)r[a=o+i>>1]<e?o=a+1:i=a;return i===o&&r[o]===e?n?[this.data[o],o]:this.data[o]:null},S.prototype.getBinaryIndexPosition=function(e,t){var n=this.data[e][t],r=this.binaryIndices[t].values,i=this.calculateRange("$eq",t,n);if(0===i[0]&&-1===i[1])return null;for(var o=i[0],a=i[1],s=o;s<=a;s++)if(r[s]===e)return s;return null},S.prototype.adaptiveBinaryIndexInsert=function(e,t){var n=this.binaryIndices[t].values,r=this.data[e][t];!0===this.serializableIndices&&r instanceof Date&&(this.data[e][t]=r.getTime(),r=this.data[e][t]);var i=0===n.length?0:this.calculateRangeStart(t,r,!0);this.binaryIndices[t].values.splice(i,0,e)},S.prototype.adaptiveBinaryIndexUpdate=function(e,t){var n,r=this.binaryIndices[t].values,i=r.length;for(n=0;n<i&&r[n]!==e;n++);this.binaryIndices[t].values.splice(n,1),this.adaptiveBinaryIndexInsert(e,t)},S.prototype.adaptiveBinaryIndexRemove=function(e,t,n){var r,i,o,a,s,u,c,l=this.binaryIndices[t],f={};if(Array.isArray(e)){if(1!==(a=e.length)){for(o=0;o<a;o++)f[e[o]]=!0;if(l.values=l.values.filter(function(e){return!f[e]}),!0===n)return;var h=e.slice();for(h.sort(function(e,t){return e-t}),r=l.values.length,i=0;i<r;i++){for(s=l.values[i],u=0,o=0;o<a&&s>h[o];o++)u++;l.values[i]-=u}return}e=e[0]}if(null===(c=this.getBinaryIndexPosition(e,t)))return null;if(l.values.splice(c,1),!0!==n)for(r=l.values.length,i=0;i<r;i++)l.values[i]>e&&l.values[i]--},S.prototype.calculateRangeStart=function(e,t,n){var r=this.data,i=this.binaryIndices[e].values,a=0,s=i.length-1,u=0;if(0===i.length)return-1;for(r[i[a]][e],r[i[s]][e];a<s;)u=a+s>>1,o.lt(r[i[u]][e],t,!1)?a=u+1:s=u;var c=a;return o.aeq(t,r[i[c]][e])?c:o.lt(t,r[i[c]][e],!1)?n?c:c-1:n?c+1:c},S.prototype.calculateRangeEnd=function(e,t){var n=this.data,r=this.binaryIndices[e].values,i=0,a=r.length-1,s=0;if(0===r.length)return-1;for(n[r[i]][e],n[r[a]][e];i<a;)s=i+a>>1,o.lt(t,n[r[s]][e],!1)?a=s:i=s+1;var u=a;return o.aeq(t,n[r[u]][e])?u:o.gt(t,n[r[u]][e],!1)?u+1:o.aeq(t,n[r[u-1]][e])?u-1:u},S.prototype.calculateRange=function(e,t,n){var r,i,a,s=this.data,u=this.binaryIndices[t].values,c=u.length-1;if(0===s.length)return[0,-1];var l=s[u[0]][t],f=s[u[c]][t];switch(e){case"$eq":case"$aeq":case"$dteq":if(o.lt(n,l,!1)||o.gt(n,f,!1))return[0,-1];break;case"$gt":if(o.gt(n,f,!0))return[0,-1];if(o.gt(l,n,!1))return[0,c];break;case"$gte":if(o.gt(n,f,!1))return[0,-1];if(o.gt(l,n,!0))return[0,c];break;case"$lt":if(o.lt(n,l,!0))return[0,-1];if(o.lt(f,n,!1))return[0,c];break;case"$lte":if(o.lt(n,l,!1))return[0,-1];if(o.lt(f,n,!0))return[0,c];break;case"$between":return o.gt(n[0],f,!1)?[0,-1]:o.lt(n[1],l,!1)?[0,-1]:(r=this.calculateRangeStart(t,n[0]),a=this.calculateRangeEnd(t,n[1]),r<0&&r++,a>c&&a--,o.gt(s[u[r]][t],n[0],!0)||r++,o.lt(s[u[a]][t],n[1],!0)||a--,a<r?[0,-1]:[r,a]);case"$in":for(var h=[],d=[],p=0,y=n.length;p<y;p++)for(var v=this.calculateRange("$eq",t,n[p]),b=v[0];b<=v[1];b++)void 0===h[b]&&(h[b]=!0,d.push(b));return d}switch(e){case"$eq":case"$aeq":case"$dteq":case"$gte":case"$lt":r=this.calculateRangeStart(t,n),i=s[u[r]][t]}switch(e){case"$eq":case"$aeq":case"$dteq":case"$lte":case"$gt":a=this.calculateRangeEnd(t,n),s[u[a]][t]}switch(e){case"$eq":case"$aeq":case"$dteq":return o.aeq(i,n)?[r,a]:[0,-1];case"$gt":return o.aeq(s[u[a]][t],n)?[a+1,c]:[a,c];case"$gte":return o.aeq(s[u[r]][t],n)?[r,c]:[r+1,c];case"$lt":return o.aeq(s[u[r]][t],n)?[0,r-1]:[0,r];case"$lte":return o.aeq(s[u[a]][t],n)?[0,a]:[0,a-1];default:return[0,s.length-1]}},S.prototype.by=function(e,t){var n;if(void 0===t)return n=this,function(t){return n.by(e,t)};var r=this.constraints.unique[e].get(t);return this.cloneObjects?y(r,this.cloneMethod):r},S.prototype.findOne=function(e){e=e||{};var t=this.chain().find(e,!0).data();return Array.isArray(t)&&0===t.length?null:this.cloneObjects?y(t[0],this.cloneMethod):t[0]},S.prototype.chain=function(e,t){var n=new k(this);return void 0===e?n:n.transform(e,t)},S.prototype.find=function(e){return this.chain().find(e).data()},S.prototype.findOneUnindexed=function(e,t){for(var n=this.data.length;n--;)if(this.data[n][e]===t)return this.data[n];return null},S.prototype.startTransaction=function(){if(this.transactional){this.cachedData=y(this.data,this.cloneMethod),this.cachedIndex=this.idIndex,this.cachedBinaryIndex=this.binaryIndices;for(var e=0;e<this.DynamicViews.length;e++)this.DynamicViews[e].startTransaction()}},S.prototype.commit=function(){if(this.transactional){this.cachedData=null,this.cachedIndex=null,this.cachedBinaryIndex=null;for(var e=0;e<this.DynamicViews.length;e++)this.DynamicViews[e].commit()}},S.prototype.rollback=function(){if(this.transactional){null!==this.cachedData&&null!==this.cachedIndex&&(this.data=this.cachedData,this.idIndex=this.cachedIndex,this.binaryIndices=this.cachedBinaryIndex);for(var e=0;e<this.DynamicViews.length;e++)this.DynamicViews[e].rollback()}},S.prototype.async=function(e,t){setTimeout(function(){if("function"!=typeof e)throw new TypeError("Argument passed for async execution is not a function");e(),t()},0)},S.prototype.where=function(e){return this.chain().where(e).data()},S.prototype.mapReduce=function(e,t){try{return t(this.data.map(e))}catch(e){throw e}},S.prototype.eqJoin=function(e,t,n,r,i){return new k(this).eqJoin(e,t,n,r,i)},S.prototype.stages={},S.prototype.getStage=function(e){return this.stages[e]||(this.stages[e]={}),this.stages[e]},S.prototype.commitLog=[],S.prototype.stage=function(e,t){var n=JSON.parse(JSON.stringify(t));return this.getStage(e)[t.$loki]=n,n},S.prototype.commitStage=function(e,t){var n,r=this.getStage(e),i=(new Date).getTime();for(n in r)this.update(r[n]),this.commitLog.push({timestamp:i,message:t,data:JSON.parse(JSON.stringify(r[n]))});this.stages[e]={}},S.prototype.no_op=function(){},S.prototype.extract=function(e){for(var t=0,n=this.data.length,r=O(e),i=[];t<n;t+=1)i.push(j(this.data[t],e,r));return i},S.prototype.max=function(e){return Math.max.apply(null,this.extract(e))},S.prototype.min=function(e){return Math.min.apply(null,this.extract(e))},S.prototype.maxRecord=function(e){for(var t,n=0,r=this.data.length,i=O(e),o={index:0,value:void 0};n<r;n+=1)void 0!==t?t<j(this.data[n],e,i)&&(t=j(this.data[n],e,i),o.index=this.data[n].$loki):(t=j(this.data[n],e,i),o.index=this.data[n].$loki);return o.value=t,o},S.prototype.minRecord=function(e){for(var t,n=0,r=this.data.length,i=O(e),o={index:0,value:void 0};n<r;n+=1)void 0!==t?t>j(this.data[n],e,i)&&(t=j(this.data[n],e,i),o.index=this.data[n].$loki):(t=j(this.data[n],e,i),o.index=this.data[n].$loki);return o.value=t,o},S.prototype.extractNumerical=function(e){return this.extract(e).map(P).filter(Number).filter(function(e){return!isNaN(e)})},S.prototype.avg=function(e){return I(this.extractNumerical(e))},S.prototype.stdDev=function(e){return function(e){var t=I(e),n=I(e.map(function(e){var n=e-t,r=n*n;return r}));return Math.sqrt(n)}(this.extractNumerical(e))},S.prototype.mode=function(e){var t,n,r,i={},o=this.extract(e);for(n in o.forEach(function(e){i[e]?i[e]+=1:i[e]=1}),i)t?t<i[n]&&(r=n):(r=n,t=i[n]);return r},S.prototype.median=function(e){var t=this.extractNumerical(e);t.sort(A);var n=Math.floor(t.length/2);return t.length%2?t[n]:(t[n-1]+t[n])/2},M.prototype={keys:[],values:[],sort:function(e,t){return e<t?-1:e>t?1:0},setSort:function(e){this.bs=new N(e)},bs:function(){return new N(this.sort)},set:function(e,t){var n=this.bs(this.keys,e);n.found?this.values[n.index]=t:(this.keys.splice(n.index,0,e),this.values.splice(n.index,0,t))},get:function(e){return this.values[T(this.keys,e,this.sort).index]}},D.prototype.keyMap={},D.prototype.lokiMap={},D.prototype.set=function(e){var t=e[this.field];if(null!==t&&void 0!==t){if(this.keyMap[t])throw new Error("Duplicate key for property "+this.field+": "+t);this.keyMap[t]=e,this.lokiMap[e.$loki]=t}},D.prototype.get=function(e){return this.keyMap[e]},D.prototype.byId=function(e){return this.keyMap[this.lokiMap[e]]},D.prototype.update=function(e,t){if(this.lokiMap[e.$loki]!==t[this.field]){var n=this.lokiMap[e.$loki];this.set(t),this.keyMap[n]=void 0}else this.keyMap[e[this.field]]=t},D.prototype.remove=function(e){var t=this.keyMap[e];if(null===t||void 0===t)throw new Error("Key is not in unique index: "+this.field);this.keyMap[e]=void 0,this.lokiMap[t.$loki]=void 0},D.prototype.clear=function(){this.keyMap={},this.lokiMap={}},R.prototype={set:function(e,t){this.index[e]?this.index[e].push(t):this.index[e]=[t]},remove:function(e,t){var n=this.index[e];for(var r in n)n[r]==t&&n.splice(r,1);n.length<1&&(this.index[e]=void 0)},get:function(e){return this.index[e]},clear:function(e){this.index={}}},g.LokiOps=d,g.Collection=S,g.KeyValueStore=M,g.LokiMemoryAdapter=m,g.LokiPartitioningAdapter=w,g.LokiLocalStorageAdapter=x,g.LokiFsAdapter=_,g.persistenceAdapters={fs:_,localStorage:x},g.aeq=a,g.lt=s,g.gt=u,g.Comparators=o,g}()})?o.apply(t,a):o)||(e.exports=s)}).call(this,n(22),n(57))},function(e,t,n){var r,i,o;i=[],void 0===(o="function"==typeof(r=function(){return function(){function e(e){if(this.app="loki",void 0!==e&&(this.app=e),this.catalog=null,!this.checkAvailability())throw new Error("indexedDB does not seem to be supported for your environment")}function t(e){this.db=null,this.initializeLokiCatalog(e)}return e.prototype.checkAvailability=function(){return!("undefined"==typeof indexedDB||!indexedDB)},e.prototype.loadDatabase=function(e,n){var r=this.app,i=this;null!==this.catalog&&null!==this.catalog.db?this.catalog.getAppKey(r,e,function(e){if("function"==typeof n){if(0===e.id)return void n(null);n(e.val)}else console.log(e.val)}):this.catalog=new t(function(t){i.catalog=t,i.loadDatabase(e,n)})},e.prototype.loadKey=e.prototype.loadDatabase,e.prototype.saveDatabase=function(e,n,r){var i=this.app,o=this;function a(e){e&&!0===e.success?r(null):r(new Error("Error saving database"))}null!==this.catalog&&null!==this.catalog.db?this.catalog.setAppKey(i,e,n,a):this.catalog=new t(function(t){o.catalog=t,t.setAppKey(i,e,n,a)})},e.prototype.saveKey=e.prototype.saveDatabase,e.prototype.deleteDatabase=function(e,n){var r=this.app,i=this;null!==this.catalog&&null!==this.catalog.db?this.catalog.getAppKey(r,e,function(e){var t=e.id;0!==t?i.catalog.deleteAppKey(t,n):"function"==typeof n&&n({success:!0})}):this.catalog=new t(function(t){i.catalog=t,i.deleteDatabase(e,n)})},e.prototype.deleteKey=e.prototype.deleteDatabase,e.prototype.deleteDatabasePartitions=function(e){var t=this;this.getDatabaseList(function(n){n.forEach(function(n){n.startsWith(e)&&t.deleteDatabase(n)})})},e.prototype.getDatabaseList=function(e){var n=this.app,r=this;null!==this.catalog&&null!==this.catalog.db?this.catalog.getAppKeys(n,function(t){for(var n=[],r=0;r<t.length;r++)n.push(t[r].key);"function"==typeof e?e(n):n.forEach(function(e){console.log(e)})}):this.catalog=new t(function(t){r.catalog=t,r.getDatabaseList(e)})},e.prototype.getKeyList=e.prototype.getDatabaseList,e.prototype.getCatalogSummary=function(e){this.app;var n=this;null!==this.catalog&&null!==this.catalog.db?this.catalog.getAllKeys(function(t){for(var n,r,i,o,a,s=[],u=0;u<t.length;u++)n=t[u],i=n.app||"",o=n.key||"",a=n.val||"",r=2*i.length+2*o.length+a.length+1,s.push({app:n.app,key:n.key,size:r});"function"==typeof e?e(s):s.forEach(function(e){console.log(e)})}):this.catalog=new t(function(t){n.catalog=t,n.getCatalogSummary(e)})},t.prototype.initializeLokiCatalog=function(e){var t=indexedDB.open("LokiCatalog",1),n=this;t.onupgradeneeded=function(e){var t=e.target.result;if(t.objectStoreNames.contains("LokiAKV")&&t.deleteObjectStore("LokiAKV"),!t.objectStoreNames.contains("LokiAKV")){var n=t.createObjectStore("LokiAKV",{keyPath:"id",autoIncrement:!0});n.createIndex("app","app",{unique:!1}),n.createIndex("key","key",{unique:!1}),n.createIndex("appkey","appkey",{unique:!0})}},t.onsuccess=function(t){n.db=t.target.result,"function"==typeof e&&e(n)},t.onerror=function(e){throw e}},t.prototype.getAppKey=function(e,t,n){var r=this.db.transaction(["LokiAKV"],"readonly"),i=r.objectStore("LokiAKV"),o=i.index("appkey"),a=e+","+t,s=o.get(a);s.onsuccess=function(e){return function(t){var n=t.target.result;null!==n&&void 0!==n||(n={id:0,success:!1}),"function"==typeof e?e(n):console.log(n)}}(n),s.onerror=function(e){return function(t){if("function"!=typeof e)throw t;e({id:0,success:!1})}}(n)},t.prototype.getAppKeyById=function(e,t,n){var r=this.db.transaction(["LokiAKV"],"readonly"),i=r.objectStore("LokiAKV"),o=i.get(e);o.onsuccess=function(e,t){return function(n){"function"==typeof t?t(n.target.result,e):console.log(n.target.result)}}(n,t)},t.prototype.setAppKey=function(e,t,n,r){var i=this.db.transaction(["LokiAKV"],"readwrite"),o=i.objectStore("LokiAKV"),a=o.index("appkey"),s=e+","+t,u=a.get(s);u.onsuccess=function(i){var a=i.target.result;null===a||void 0===a?a={app:e,key:t,appkey:e+","+t,val:n}:a.val=n;var s=o.put(a);s.onerror=function(e){return function(t){"function"==typeof e?e({success:!1}):(console.error("LokiCatalog.setAppKey (set) onerror"),console.error(u.error))}}(r),s.onsuccess=function(e){return function(t){"function"==typeof e&&e({success:!0})}}(r)},u.onerror=function(e){return function(t){"function"==typeof e?e({success:!1}):(console.error("LokiCatalog.setAppKey (get) onerror"),console.error(u.error))}}(r)},t.prototype.deleteAppKey=function(e,t){var n=this.db.transaction(["LokiAKV"],"readwrite"),r=n.objectStore("LokiAKV"),i=r.delete(e);i.onsuccess=function(e){return function(t){"function"==typeof e&&e({success:!0})}}(t),i.onerror=function(e){return function(t){"function"==typeof e?e({success:!1}):(console.error("LokiCatalog.deleteAppKey raised onerror"),console.error(i.error))}}(t)},t.prototype.getAppKeys=function(e,t){var n=this.db.transaction(["LokiAKV"],"readonly"),r=n.objectStore("LokiAKV"),i=r.index("app"),o=IDBKeyRange.only(e),a=i.openCursor(o);a.onsuccess=function(e,t){return function(n){var r=n.target.result;if(r){var i=r.value;e.push(i),r.continue()}else"function"==typeof t?t(e):console.log(e)}}([],t),a.onerror=function(e){return function(t){"function"==typeof e?e(null):(console.error("LokiCatalog.getAppKeys raised onerror"),console.error(t))}}(t)},t.prototype.getAllKeys=function(e){var t=this.db.transaction(["LokiAKV"],"readonly"),n=t.objectStore("LokiAKV"),r=n.openCursor();r.onsuccess=function(e,t){return function(n){var r=n.target.result;if(r){var i=r.value;e.push(i),r.continue()}else"function"==typeof t?t(e):console.log(e)}}([],e),r.onerror=function(e){return function(t){"function"==typeof e&&e(null)}}(e)},e}()})?r.apply(t,i):r)||(e.exports=o)},function(e,t){},function(e,t,n){var r,i,o;i=[t,n(25),n(192)],void 0===(o="function"==typeof(r=function(e,t,r){"use strict";var i=n(20);Object.defineProperty(e,"__esModule",{value:!0}),e.register=function(){(0,t.register)(r)},r=i(r)})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[t,n(9),n(10),n(193)],void 0===(o="function"==typeof(r=function(e,t,r,i){"use strict";var o=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.find=c,e.count=function(e,t){return f.apply(this,arguments)},e.findById=function(e,t,n){return h.apply(this,arguments)},e.save=function(e,t){return d.apply(this,arguments)},e.removeById=function(e,t,n){return p.apply(this,arguments)},e.clear=function(e,t){return y.apply(this,arguments)},e.clearAll=function(e){return v.apply(this,arguments)},t=o(t),r=o(r),i=o(i);var a="sqlite_master",s=2097152;function u(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o='"'.concat(t,'"'),u=t===a;return new Promise(function(t,a){try{var c=window.openDatabase(e,1,"Kinvey WebSQL",s),l=r||"function"!=typeof c.readTransaction;c[l?"transaction":"readTransaction"](function(e){new Promise(function(t){r&&!u?e.executeSql("CREATE TABLE IF NOT EXISTS ".concat(o," (key BLOB PRIMARY KEY NOT NULL, value BLOB NOT NULL)"),[],function(){t()}):t()}).then(function(){return Promise.all(n.map(function(t){var n=(0,i.default)(t,2),r=n[0],a=n[1],s=void 0===a?[]:a;return new Promise(function(t){e.executeSql(r.replace("#{table}",o),s,function(e,n){var r={rowCount:n.rowsAffected,result:[]};if(n.rows.length>0)for(var i=0,o=n.rows.length;i<o;i+=1)try{var a=n.rows.item(i),s=a.value,c=u?s:JSON.parse(s);r.result.push(c)}catch(e){}t(r)})})}))})},a)}catch(e){a(e)}})}function c(e,t){return l.apply(this,arguments)}function l(){return(l=(0,r.default)(t.default.mark(function e(n,r){var i;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(n,r,[["SELECT value FROM #{table}"]]);case 2:return i=e.sent,e.abrupt("return",i.result);case 4:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function f(){return(f=(0,r.default)(t.default.mark(function e(n,r){var i;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(n,r);case 2:return i=e.sent,e.abrupt("return",i.length);case 4:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function h(){return(h=(0,r.default)(t.default.mark(function e(n,r,i){var o;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(n,r,[["SELECT value FROM #{table} WHERE key = ?",[i]]]);case 2:return o=e.sent,e.abrupt("return",o.result.shift());case 4:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function d(){return(d=(0,r.default)(t.default.mark(function e(n,r){var i,o,a=arguments;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=a.length>2&&void 0!==a[2]?a[2]:[],o=i.map(function(e){return["REPLACE INTO #{table} (key, value) VALUES (?, ?)",[e._id,JSON.stringify(e)]]}),e.next=4,u(n,r,o,!0);case 4:return e.abrupt("return",i);case 5:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function p(){return(p=(0,r.default)(t.default.mark(function e(n,r,i){return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(n,r,[["DELETE FROM #{table} WHERE key = ?",[i]]],!0);case 2:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function y(){return(y=(0,r.default)(t.default.mark(function e(n,r){return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(n,a,[["DROP TABLE IF EXISTS '".concat(r,"'")]],!0);case 2:return e.abrupt("return",!0);case 3:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function v(){return(v=(0,r.default)(t.default.mark(function e(n){var r,i,o;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(n,a,[["SELECT name AS value FROM #{collection} WHERE type = ?",["table"]]]);case 2:if(r=e.sent,!((i=r.result).length>0)){e.next=8;break}return o=i.filter(function(e){return/^[a-zA-Z0-9-]{1,128}/.test(e)}).map(function(e){return["DROP TABLE IF EXISTS '".concat(e,"'")]}),e.next=8,u(n,a,o,!0);case 8:return e.abrupt("return",!0);case 9:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r=n(194),i=n(195),o=n(196);e.exports=function(e,t){return r(e)||i(e,t)||o()}},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(e,t,n){var r,i,o;i=[t,n(9),n(10),n(26),n(17),n(19),n(12)],void 0===(o="function"==typeof(r=function(e,t,r,i,o,a,s){"use strict";var u=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.downloadByUrl=f,e.find=function(){return d.apply(this,arguments)},e.download=p,e.findById=v,e.stream=function(e,t){return b.apply(this,arguments)},e.upload=O,e.create=function(e,t,n){return C.apply(this,arguments)},e.update=function(e,t,n){return A.apply(this,arguments)},e.remove=function(){return I.apply(this,arguments)},e.removeById=function(e){return j.apply(this,arguments)},t=u(t),r=u(r),i=u(i);var c="blob",l=32e3;function f(e){return h.apply(this,arguments)}function h(){return(h=(0,r.default)(t.default.mark(function e(n){var r,i;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=new a.Request({method:a.RequestMethod.GET,url:n}),e.next=3,r.execute();case 3:return i=e.sent,e.abrupt("return",i.data);case 5:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function d(){return(d=(0,r.default)(t.default.mark(function e(){var n,r,u,l,h,d,p,y,v,b,g,m,w,_,x=arguments;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=x.length>0&&void 0!==x[0]?x[0]:new o.Query,r=x.length>1&&void 0!==x[1]?x[1]:{},u=(0,s.getConfig)(),l=u.api,h=u.appKey,u.masterSecret,d=r.download,p=void 0!==d&&d,y=r.tls,v=void 0===y||y,b=r.ttl,g=Object.assign({},{tls:!0===v}),!n){e.next=9;break}if(n instanceof o.Query){e.next=8;break}throw new Error("Invalid query. It must be an instance of the Query class.");case 8:g=Object.assign({},g,n.toQueryObject());case 9:return(0,i.default)(b)&&(g.ttl_in_seconds=parseInt(b,10)),m=new a.KinveyRequest({method:a.RequestMethod.GET,auth:a.Auth.Default,url:(0,a.formatKinveyUrl)(l.protocol,l.host,"/".concat(c,"/").concat(h),g)}),e.next=13,m.execute();case 13:if(w=e.sent,_=w.data,!0!==p){e.next=17;break}return e.abrupt("return",Promise.all(_.map(function(e){return f(e._downloadURL,r)})));case 17:return e.abrupt("return",_);case 18:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function p(e){return y.apply(this,arguments)}function y(){return(y=(0,r.default)(t.default.mark(function e(n){var r,o,u,l,h,d,p,y,v,b,g,m,w,_=arguments;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=_.length>1&&void 0!==_[1]?_[1]:{},o=(0,s.getConfig)(),u=o.api,l=o.appKey,o.masterSecret,h=r.stream,d=void 0!==h&&h,p=r.tls,y=void 0===p||p,v=r.ttl,b=Object.assign({},{tls:!0===y}),(0,i.default)(v)&&(b.ttl_in_seconds=parseInt(v,10)),g=new a.KinveyRequest({method:a.RequestMethod.GET,auth:a.Auth.Default,url:(0,a.formatKinveyUrl)(u.protocol,u.host,"/".concat(c,"/").concat(l,"/").concat(n),b)}),e.next=8,g.execute();case 8:if(m=e.sent,w=m.data,!d){e.next=12;break}return e.abrupt("return",w);case 12:return e.abrupt("return",f(w._downloadURL));case 13:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function v(e,t){return p(e,t)}function b(){return(b=(0,r.default)(t.default.mark(function e(n,r){return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v(n,Object.assign({},r,{stream:!0})));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object.assign({},{filename:e._filename||e.name,public:!1,size:e.size||e.length,mimeType:e.mimeType||e.type||"application/octet-stream"},t);return n._filename=t.filename,delete n.filename,n._public=t.public,delete n.public,n}function m(e){return w.apply(this,arguments)}function w(){return(w=(0,r.default)(t.default.mark(function e(n){var r,i,o,u,l;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(0,s.getConfig)(),i=r.api,o=r.appKey,r.masterSecret,!(n.size<=0)){e.next=3;break}throw new Error("Unable to create a file with a size of 0.");case 3:return u=new a.KinveyRequest({method:n._id?a.RequestMethod.PUT:a.RequestMethod.POST,headers:{"X-Kinvey-Content-Type":n.mimeType},auth:a.Auth.Default,url:n._id?(0,a.formatKinveyUrl)(i.protocol,i.host,"/".concat(c,"/").concat(o,"/").concat(n._id)):(0,a.formatKinveyUrl)(i.protocol,i.host,"/".concat(c,"/").concat(o)),body:n}),e.next=6,u.execute();case 6:return l=e.sent,e.abrupt("return",l.data);case 8:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function _(e,t,n,r){var i=new a.Headers(t);i.set("Content-Type",n.mimeType),i.set("Content-Range","bytes */".concat(n.size));var o=new a.Request({method:a.RequestMethod.PUT,headers:i,url:e,timeout:r});return o.execute()}function x(e,t){var n=e?parseInt(e.split("-")[1],10)+1:0;return n>=t?t-1:n}function k(e,t){return Math.floor(Math.random()*(t-e))+e}function E(e,t,n,r){return S.apply(this,arguments)}function S(){return(S=(0,r.default)(t.default.mark(function e(n,r,i,o){var s,u,c,f,h,d,p,y,v,b;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=o.count,u=void 0===s?0:s,c=o.maxBackoff,f=void 0===c?l:c,h=o.start,d=void 0===h?0:h,(p=new a.Headers(o.headers)).set("Content-Type",i.mimeType),p.set("Content-Range","bytes ".concat(o.start,"-").concat(i.size-1,"/").concat(i.size)),y=new a.Request({method:a.RequestMethod.PUT,headers:p,url:n,body:r.slice(o.start,i.size)}),e.next=8,y.execute();case 8:if((v=e.sent).isSuccess()){e.next=17;break}if(!(v.statusCode>=500&&v.statusCode<600)){e.next=16;break}if(!((b=Math.pow(2,o.count)+k(1,1001))<o.maxBackoff)){e.next=16;break}return e.next=15,new Promise(function(e){setTimeout(e,b)});case 15:return e.abrupt("return",E(n,r,i,{count:u+1,start:d,maxBackoff:f}));case 16:throw v.error;case 17:if(308!==v.statusCode){e.next=20;break}return d=x(v.headers.get("Range"),i.size),e.abrupt("return",E(n,r,i,{count:0,start:d,maxBackoff:f}));case 20:return e.abrupt("return",v.data);case 21:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function O(){return P.apply(this,arguments)}function P(){return(P=(0,r.default)(t.default.mark(function e(){var n,r,i,o,a,s,u,c=arguments;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>0&&void 0!==c[0]?c[0]:{},r=c.length>1&&void 0!==c[1]?c[1]:{},i=c.length>2&&void 0!==c[2]?c[2]:{},o=g(n,r),e.next=6,m(o,i);case 6:return a=e.sent,e.next=9,_(a._uploadURL,a._requiredHeaders,o,i.timeout);case 9:if((s=e.sent).isSuccess()){e.next=12;break}throw s.error;case 12:if(200===s.statusCode||201===s.statusCode){e.next=18;break}if(308===s.statusCode){e.next=15;break}throw new Error("Unexpected response for upload file status check request.");case 15:return u={start:x(s.headers.get("Range"),r.size),timeout:i.timeout,maxBackoff:i.maxBackoff,headers:a._requiredHeaders},e.next=18,E(a._uploadURL,n,o,u);case 18:return delete a._expiresAt,delete a._requiredHeaders,delete a._uploadURL,a._data=n,e.abrupt("return",a);case 23:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function C(){return(C=(0,r.default)(t.default.mark(function e(n,r,i){return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",O(n,r,i));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function A(){return(A=(0,r.default)(t.default.mark(function e(n,r,i){return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",O(n,r,i));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function I(){return(I=(0,r.default)(t.default.mark(function e(){return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Please use removeById() to remove files one by one.");case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function j(){return(j=(0,r.default)(t.default.mark(function e(n){var r,i,o,u,l;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,s.getConfig)(),i=r.api,o=r.appKey,u=new a.KinveyRequest({method:a.RequestMethod.DELETE,auth:a.Auth.Default,url:(0,a.formatKinveyUrl)(i.protocol,i.host,"/".concat(c,"/").concat(o,"/").concat(n))}),e.next=4,u.execute();case 4:return l=e.sent,e.abrupt("return",l.data);case 6:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[t,n(9),n(10),n(13),n(19),n(12),n(7)],void 0===(o="function"==typeof(r=function(e,t,r,i,o,a,s){"use strict";var u=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.endpoint=function(e,t){return l.apply(this,arguments)},t=u(t),r=u(r),i=u(i);var c="rpc";function l(){return(l=(0,r.default)(t.default.mark(function e(n,r){var u,l,f,h,d;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((0,i.default)(n)){e.next=2;break}throw new s.KinveyError("An endpoint is required and must be a string.");case 2:return u=(0,a.getConfig)(),l=u.api,f=u.appKey,h=new o.KinveyRequest({method:o.RequestMethod.POST,auth:o.Auth.Session,url:(0,o.formatKinveyUrl)(l.protocol,l.host,"/".concat(c,"/").concat(f,"/custom/").concat(n)),body:r}),e.next=6,h.execute();case 6:return d=e.sent,e.abrupt("return",d.data);case 8:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){"use strict";n.r(t);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function o(e){return"function"==typeof e}var a=!1,s={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack;a=e},get useDeprecatedSynchronousErrorHandling(){return a}};function u(e){setTimeout(function(){throw e})}var c={closed:!0,next:function(e){},error:function(e){if(s.useDeprecatedSynchronousErrorHandling)throw e;u(e)},complete:function(){}},l=Array.isArray||function(e){return e&&"number"==typeof e.length};function f(e){return null!=e&&"object"==typeof e}var h,d={e:{}};function p(){try{return h.apply(this,arguments)}catch(e){return d.e=e,d}}function y(e){return h=e,p}function v(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}v.prototype=Object.create(Error.prototype);var b=v,g=function(){function e(e){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}return e.prototype.unsubscribe=function(){var e,t=!1;if(!this.closed){var n=this._parent,r=this._parents,i=this._unsubscribe,a=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var s=-1,u=r?r.length:0;n;)n.remove(this),n=++s<u&&r[s]||null;if(o(i))y(i).call(this)===d&&(t=!0,e=e||(d.e instanceof b?m(d.e.errors):[d.e]));if(l(a))for(s=-1,u=a.length;++s<u;){var c=a[s];if(f(c))if(y(c.unsubscribe).call(c)===d){t=!0,e=e||[];var h=d.e;h instanceof b?e=e.concat(m(h.errors)):e.push(h)}}if(t)throw new b(e)}},e.prototype.add=function(t){if(!t||t===e.EMPTY)return e.EMPTY;if(t===this)return this;var n=t;switch(typeof t){case"function":n=new e(t);case"object":if(n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if("function"!=typeof n._addParent){var r=n;(n=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(n),n._addParent(this),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},e.prototype._addParent=function(e){var t=this._parent,n=this._parents;t&&t!==e?n?-1===n.indexOf(e)&&n.push(e):this._parents=[e]:this._parent=e},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}();function m(e){return e.reduce(function(e,t){return e.concat(t instanceof b?t.errors:t)},[])}var w="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),_=function(e){function t(n,r,i){var o=e.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,o._parentSubscription=null,arguments.length){case 0:o.destination=c;break;case 1:if(!n){o.destination=c;break}if("object"==typeof n){n instanceof t?(o.syncErrorThrowable=n.syncErrorThrowable,o.destination=n,n.add(o)):(o.syncErrorThrowable=!0,o.destination=new x(o,n));break}default:o.syncErrorThrowable=!0,o.destination=new x(o,n,r,i)}return o}return i(t,e),t.prototype[w]=function(){return this},t.create=function(e,n,r){var i=new t(e,n,r);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parent,t=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=e,this._parents=t,this._parentSubscription=null,this},t}(g),x=function(e){function t(t,n,r,i){var a,s=e.call(this)||this;s._parentSubscriber=t;var u=s;return o(n)?a=n:n&&(a=n.next,r=n.error,i=n.complete,n!==c&&(o((u=Object.create(n)).unsubscribe)&&s.add(u.unsubscribe.bind(u)),u.unsubscribe=s.unsubscribe.bind(s))),s._context=u,s._next=a,s._error=r,s._complete=i,s}return i(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;s.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=s.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):u(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;u(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};s.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),s.useDeprecatedSynchronousErrorHandling)throw e;u(e)}},t.prototype.__tryOrSetError=function(e,t,n){if(!s.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(t){return s.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0,!0):(u(t),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(_);function k(e){for(;e;){var t=e,n=t.closed,r=t.destination,i=t.isStopped;if(n||i)return!1;e=r&&r instanceof _?r:null}return!0}var E="function"==typeof Symbol&&Symbol.observable||"@@observable";function S(){}function O(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return P(e)}function P(e){return e?1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)}:S}var C=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r=this.operator,i=function(e,t,n){if(e){if(e instanceof _)return e;if(e[w])return e[w]()}return e||t||n?new _(e,t,n):new _(c)}(e,t,n);if(r?r.call(i,this.source):i.add(this.source||s.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),s.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){s.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),k(e)?e.error(t):console.warn(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=A(t))(function(t,r){var i;i=n.subscribe(function(t){try{e(t)}catch(e){r(e),i&&i.unsubscribe()}},r,t)})},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[E]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:P(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=A(e))(function(e,n){var r;t.subscribe(function(e){return r=e},function(e){return n(e)},function(){return e(r)})})},e.create=function(t){return new e(t)},e}();function A(e){if(e||(e=s.Promise||Promise),!e)throw new Error("no Promise impl found");return e}function I(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}I.prototype=Object.create(Error.prototype);var j=I,T=function(e){function t(t,n){var r=e.call(this)||this;return r.subject=t,r.subscriber=n,r.closed=!1,r}return i(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}},t}(g),N=function(e){function t(t){var n=e.call(this,t)||this;return n.destination=t,n}return i(t,e),t}(_),M=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return i(t,e),t.prototype[w]=function(){return new N(this)},t.prototype.lift=function(e){var t=new D(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new j;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].next(e)},t.prototype.error=function(e){if(this.closed)throw new j;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new j;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new j;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new j;return this.hasError?(e.error(this.thrownError),g.EMPTY):this.isStopped?(e.complete(),g.EMPTY):(this.observers.push(e),new T(this,e))},t.prototype.asObservable=function(){var e=new C;return e.source=this,e},t.create=function(e,t){return new D(e,t)},t}(C),D=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return i(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):g.EMPTY},t}(M);var R=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var n=this.connectable;n._refCount++;var r=new q(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i},e}(),q=function(e){function t(t,n){var r=e.call(this,t)||this;return r.connectable=n,r}return i(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var n=this.connection,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},t}(_),K=function(e){function t(t,n){var r=e.call(this)||this;return r.source=t,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return i(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new g).add(this.source.subscribe(new U(this.getSubject(),this))),e.closed?(this._connection=null,e=g.EMPTY):this._connection=e),e},t.prototype.refCount=function(){return function(e){return e.lift(new R(e))}(this)},t}(C),B=K.prototype,U=(B._subscribe,B._isComplete,B.getSubject,B.connect,B.refCount,function(e){function t(t,n){var r=e.call(this,t)||this;return r.connectable=n,r}return i(t,e),t.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},t}(N));var L=function(e){function t(t,n,r){var i=e.call(this)||this;return i.key=t,i.groupSubject=n,i.refCountSubscription=r,i}return i(t,e),t.prototype._subscribe=function(e){var t=new g,n=this.refCountSubscription,r=this.groupSubject;return n&&!n.closed&&t.add(new F(n)),t.add(r.subscribe(e)),t},t}(C),F=function(e){function t(t){var n=e.call(this)||this;return n.parent=t,t.count++,n}return i(t,e),t.prototype.unsubscribe=function(){var t=this.parent;t.closed||this.closed||(e.prototype.unsubscribe.call(this),t.count-=1,0===t.count&&t.attemptedToUnsubscribe&&t.unsubscribe())},t}(g),z=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return i(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return n&&!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new j;return this._value},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(M),$=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return i(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n=!1,r=void 0;try{this.work(e)}catch(e){n=!0,r=!!e&&e||new Error(e)}if(n)return this.unsubscribe(),r},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(function(e){function t(t,n){return e.call(this)||this}return i(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(g)),H=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return i(t,e),t.prototype.schedule=function(t,n){return void 0===n&&(n=0),n>0?e.prototype.schedule.call(this,t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,n){return n>0||this.closed?e.prototype.execute.call(this,t,n):this._execute(t,n)},t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?e.prototype.requestAsyncId.call(this,t,n,r):t.flush(this)},t}($),G=function(){function e(t,n){void 0===n&&(n=e.now),this.SchedulerAction=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},e.now=function(){return Date.now()},e}(),V=function(e){function t(n,r){void 0===r&&(r=G.now);var i=e.call(this,n,function(){return t.delegate&&t.delegate!==i?t.delegate.now():r()})||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return i(t,e),t.prototype.schedule=function(n,r,i){return void 0===r&&(r=0),t.delegate&&t.delegate!==this?t.delegate.schedule(n,r,i):e.prototype.schedule.call(this,n,r,i)},t.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(G),Q=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(V))(H),J=new C(function(e){return e.complete()});function W(e){return e?function(e){return new C(function(t){return e.schedule(function(){return t.complete()})})}(e):J}function Y(e){return e&&"function"==typeof e.schedule}var X=function(e){return function(t){for(var n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.closed||t.complete()}};function Z(e,t){return new C(t?function(n){var r=new g,i=0;return r.add(t.schedule(function(){i!==e.length?(n.next(e[i++]),n.closed||r.add(this.schedule())):n.complete()})),r}:X(e))}function ee(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];switch(Y(n)?e.pop():n=void 0,e.length){case 0:return W(n);case 1:return n?Z(e,n):function(e){var t=new C(function(t){t.next(e),t.complete()});return t._isScalar=!0,t.value=e,t}(e[0]);default:return Z(e,n)}}function te(e,t){return new C(t?function(n){return t.schedule(ne,0,{error:e,subscriber:n})}:function(t){return t.error(e)})}function ne(e){var t=e.error;e.subscriber.error(t)}var re=function(){function e(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}return e.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},e.prototype.do=function(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}},e.prototype.accept=function(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)},e.prototype.toObservable=function(){switch(this.kind){case"N":return ee(this.value);case"E":return te(this.error);case"C":return W()}throw new Error("unexpected notification kind value")},e.createNext=function(t){return void 0!==t?new e("N",t):e.undefinedValueNotification},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}();var ie=function(e){function t(t,n,r){void 0===r&&(r=0);var i=e.call(this,t)||this;return i.scheduler=n,i.delay=r,i}return i(t,e),t.dispatch=function(e){var t=e.notification,n=e.destination;t.observe(n),this.unsubscribe()},t.prototype.scheduleMessage=function(e){this.destination.add(this.scheduler.schedule(t.dispatch,this.delay,new oe(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(re.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(re.createError(e)),this.unsubscribe()},t.prototype._complete=function(){this.scheduleMessage(re.createComplete()),this.unsubscribe()},t}(_),oe=function(){return function(e,t){this.notification=e,this.destination=t}}(),ae=function(e){function t(t,n,r){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY);var i=e.call(this)||this;return i.scheduler=r,i._events=[],i._infiniteTimeWindow=!1,i._bufferSize=t<1?1:t,i._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(i._infiniteTimeWindow=!0,i.next=i.nextInfiniteTimeWindow):i.next=i.nextTimeWindow,i}return i(t,e),t.prototype.nextInfiniteTimeWindow=function(t){var n=this._events;n.push(t),n.length>this._bufferSize&&n.shift(),e.prototype.next.call(this,t)},t.prototype.nextTimeWindow=function(t){this._events.push(new se(this._getNow(),t)),this._trimBufferThenGetEvents(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){var t,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=r.length;if(this.closed)throw new j;if(this.isStopped||this.hasError?t=g.EMPTY:(this.observers.push(e),t=new T(this,e)),i&&e.add(e=new ie(e,i)),n)for(var a=0;a<o&&!e.closed;a++)e.next(r[a]);else for(a=0;a<o&&!e.closed;a++)e.next(r[a].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t},t.prototype._getNow=function(){return(this.scheduler||Q).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,o=0;o<i&&!(e-r[o].time<n);)o++;return i>t&&(o=Math.max(o,i-t)),o>0&&r.splice(0,o),r},t}(M),se=function(){return function(e,t){this.time=e,this.value=t}}(),ue=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.value=null,t.hasNext=!1,t.hasCompleted=!1,t}return i(t,e),t.prototype._subscribe=function(t){return this.hasError?(t.error(this.thrownError),g.EMPTY):this.hasCompleted&&this.hasNext?(t.next(this.value),t.complete(),g.EMPTY):e.prototype._subscribe.call(this,t)},t.prototype.next=function(e){this.hasCompleted||(this.value=e,this.hasNext=!0)},t.prototype.error=function(t){this.hasCompleted||e.prototype.error.call(this,t)},t.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&e.prototype.next.call(this,this.value),e.prototype.complete.call(this)},t}(M),ce=1,le={};var fe=function(e){var t=ce++;return le[t]=e,Promise.resolve().then(function(){return function(e){var t=le[e];t&&t()}(t)}),t},he=function(e){delete le[e]},de=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return i(t,e),t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0?e.prototype.requestAsyncId.call(this,t,n,r):(t.actions.push(this),t.scheduled||(t.scheduled=fe(t.flush.bind(t,null))))},t.prototype.recycleAsyncId=function(t,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,r);0===t.actions.length&&(he(n),t.scheduled=void 0)},t}($),pe=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,r=-1,i=n.length;e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while(++r<i&&(e=n.shift()));if(this.active=!1,t){for(;++r<i&&(e=n.shift());)e.unsubscribe();throw t}},t}(V))(de),ye=new V($),ve=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return i(t,e),t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0?e.prototype.requestAsyncId.call(this,t,n,r):(t.actions.push(this),t.scheduled||(t.scheduled=requestAnimationFrame(function(){return t.flush(null)})))},t.prototype.recycleAsyncId=function(t,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,r);0===t.actions.length&&(cancelAnimationFrame(n),t.scheduled=void 0)},t}($),be=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,r=-1,i=n.length;e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while(++r<i&&(e=n.shift()));if(this.active=!1,t){for(;++r<i&&(e=n.shift());)e.unsubscribe();throw t}},t}(V))(ve),ge=function(e){function t(t,n){void 0===t&&(t=me),void 0===n&&(n=Number.POSITIVE_INFINITY);var r=e.call(this,t,function(){return r.frame})||this;return r.maxFrames=n,r.frame=0,r.index=-1,r}return i(t,e),t.prototype.flush=function(){for(var e,t,n=this.actions,r=this.maxFrames;(t=n.shift())&&(this.frame=t.delay)<=r&&!(e=t.execute(t.state,t.delay)););if(e){for(;t=n.shift();)t.unsubscribe();throw e}},t.frameTimeFactor=10,t}(V),me=function(e){function t(t,n,r){void 0===r&&(r=t.index+=1);var i=e.call(this,t,n)||this;return i.scheduler=t,i.work=n,i.index=r,i.active=!0,i.index=t.index=r,i}return i(t,e),t.prototype.schedule=function(n,r){if(void 0===r&&(r=0),!this.id)return e.prototype.schedule.call(this,n,r);this.active=!1;var i=new t(this.scheduler,this.work);return this.add(i),i.schedule(n,r)},t.prototype.requestAsyncId=function(e,n,r){void 0===r&&(r=0),this.delay=e.frame+r;var i=e.actions;return i.push(this),i.sort(t.sortActions),!0},t.prototype.recycleAsyncId=function(e,t,n){void 0===n&&(n=0)},t.prototype._execute=function(t,n){if(!0===this.active)return e.prototype._execute.call(this,t,n)},t.sortActions=function(e,t){return e.delay===t.delay?e.index===t.index?0:e.index>t.index?1:-1:e.delay>t.delay?1:-1},t}($);function we(e){return e}function _e(e){return!!e&&(e instanceof C||"function"==typeof e.lift&&"function"==typeof e.subscribe)}function xe(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}xe.prototype=Object.create(Error.prototype);var ke=xe;function Ee(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}Ee.prototype=Object.create(Error.prototype);var Se=Ee;function Oe(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}Oe.prototype=Object.create(Error.prototype);var Pe=Oe;function Ce(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new Ae(e,t))}}var Ae=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new Ie(e,this.project,this.thisArg))},e}(),Ie=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.project=n,i.count=0,i.thisArg=r||i,i}return i(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(_);function je(e,t,n){if(t){if(!Y(t))return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return je(e,n).apply(void 0,r).pipe(Ce(function(e){return l(e)?t.apply(void 0,e):t(e)}))};n=t}return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i,o=this,a={context:o,subject:i,callbackFunc:e,scheduler:n};return new C(function(r){if(n){var s={args:t,subscriber:r,params:a};return n.schedule(Te,0,s)}if(!i){i=new ue;try{e.apply(o,t.concat([function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];i.next(e.length<=1?e[0]:e),i.complete()}]))}catch(e){k(i)?i.error(e):console.warn(e)}}return i.subscribe(r)})}}function Te(e){var t=this,n=e.args,r=e.subscriber,i=e.params,o=i.callbackFunc,a=i.context,s=i.scheduler,u=i.subject;if(!u){u=i.subject=new ue;try{o.apply(a,n.concat([function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.length<=1?e[0]:e;t.add(s.schedule(Ne,0,{value:r,subject:u}))}]))}catch(e){u.error(e)}}this.add(u.subscribe(r))}function Ne(e){var t=e.value,n=e.subject;n.next(t),n.complete()}function Me(e,t,n){if(t){if(!Y(t))return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return Me(e,n).apply(void 0,r).pipe(Ce(function(e){return l(e)?t.apply(void 0,e):t(e)}))};n=t}return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i={subject:void 0,args:t,callbackFunc:e,scheduler:n,context:this};return new C(function(r){var o=i.context,a=i.subject;if(n)return n.schedule(De,0,{params:i,subscriber:r,context:o});if(!a){a=i.subject=new ue;try{e.apply(o,t.concat([function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.shift();n?a.error(n):(a.next(e.length<=1?e[0]:e),a.complete())}]))}catch(e){k(a)?a.error(e):console.warn(e)}}return a.subscribe(r)})}}function De(e){var t=this,n=e.params,r=e.subscriber,i=e.context,o=n.callbackFunc,a=n.args,s=n.scheduler,u=n.subject;if(!u){u=n.subject=new ue;try{o.apply(i,a.concat([function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.shift();if(r)t.add(s.schedule(qe,0,{err:r,subject:u}));else{var i=e.length<=1?e[0]:e;t.add(s.schedule(Re,0,{value:i,subject:u}))}}]))}catch(e){this.add(s.schedule(qe,0,{err:e,subject:u}))}}this.add(u.subscribe(r))}function Re(e){var t=e.value,n=e.subject;n.next(t),n.complete()}function qe(e){var t=e.err;e.subject.error(t)}var Ke=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(_),Be=function(e){function t(t,n,r){var i=e.call(this)||this;return i.parent=t,i.outerValue=n,i.outerIndex=r,i.index=0,i}return i(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(_),Ue=function(e){return function(t){return e.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,u),t}};var Le=function(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}(),Fe=function(e){return function(t){for(var n=e[Le]();;){var r=n.next();if(r.done){t.complete();break}if(t.next(r.value),t.closed)break}return"function"==typeof n.return&&t.add(function(){n.return&&n.return()}),t}},ze=function(e){return function(t){var n=e[E]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(t)}},$e=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function He(e){return e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}var Ge=function(e){if(e instanceof C)return function(t){return e._isScalar?(t.next(e.value),void t.complete()):e.subscribe(t)};if(e&&"function"==typeof e[E])return ze(e);if($e(e))return X(e);if(He(e))return Ue(e);if(e&&"function"==typeof e[Le])return Fe(e);var t=f(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+t+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function Ve(e,t,n,r,i){if(void 0===i&&(i=new Be(e,n,r)),!i.closed)return Ge(t)(i)}var Qe={};function Je(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=null,r=null;return Y(e[e.length-1])&&(r=e.pop()),"function"==typeof e[e.length-1]&&(n=e.pop()),1===e.length&&l(e[0])&&(e=e[0]),Z(e,r).lift(new We(n))}var We=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new Ye(e,this.resultSelector))},e}(),Ye=function(e){function t(t,n){var r=e.call(this,t)||this;return r.resultSelector=n,r.active=0,r.values=[],r.observables=[],r}return i(t,e),t.prototype._next=function(e){this.values.push(Qe),this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var n=0;n<t;n++){var r=e[n];this.add(Ve(this,r,r,n))}}},t.prototype.notifyComplete=function(e){0==(this.active-=1)&&this.destination.complete()},t.prototype.notifyNext=function(e,t,n,r,i){var o=this.values,a=o[n],s=this.toRespond?a===Qe?--this.toRespond:this.toRespond:0;o[n]=t,0===s&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))},t.prototype._tryResultSelector=function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(Ke);function Xe(e,t){if(!t)return e instanceof C?e:new C(Ge(e));if(null!=e){if(function(e){return e&&"function"==typeof e[E]}(e))return function(e,t){return new C(t?function(n){var r=new g;return r.add(t.schedule(function(){var i=e[E]();r.add(i.subscribe({next:function(e){r.add(t.schedule(function(){return n.next(e)}))},error:function(e){r.add(t.schedule(function(){return n.error(e)}))},complete:function(){r.add(t.schedule(function(){return n.complete()}))}}))})),r}:ze(e))}(e,t);if(He(e))return function(e,t){return new C(t?function(n){var r=new g;return r.add(t.schedule(function(){return e.then(function(e){r.add(t.schedule(function(){n.next(e),r.add(t.schedule(function(){return n.complete()}))}))},function(e){r.add(t.schedule(function(){return n.error(e)}))})})),r}:Ue(e))}(e,t);if($e(e))return Z(e,t);if(function(e){return e&&"function"==typeof e[Le]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new C(t?function(n){var r,i=new g;return i.add(function(){r&&"function"==typeof r.return&&r.return()}),i.add(t.schedule(function(){r=e[Le](),i.add(t.schedule(function(){if(!n.closed){var e,t;try{var i=r.next();e=i.value,t=i.done}catch(e){return void n.error(e)}t?n.complete():(n.next(e),this.schedule())}}))})),i}:Fe(e))}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}var Ze=function(){function e(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=t}return e.prototype.call=function(e,t){return t.subscribe(new et(e,this.project,this.concurrent))},e}(),et=function(e){function t(t,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var i=e.call(this,t)||this;return i.project=n,i.concurrent=r,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return i(t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(e){return void this.destination.error(e)}this.active++,this._innerSub(t,e,n)},t.prototype._innerSub=function(e,t,n){var r=new Be(this,void 0,void 0);this.destination.add(r),Ve(this,e,t,n,r)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(Ke);function tt(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),function e(t,n,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),"function"==typeof n?function(i){return i.pipe(e(function(e,r){return Xe(t(e,r)).pipe(Ce(function(t,i){return n(e,t,r,i)}))},r))}:("number"==typeof n&&(r=n),function(e){return e.lift(new Ze(t,r))})}(we,e)}function nt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 1===e.length||2===e.length&&Y(e[1])?Xe(e[0]):tt(1)(ee.apply(void 0,e))}function rt(e){return new C(function(t){var n;try{n=e()}catch(e){return void t.error(e)}return(n?Xe(n):W()).subscribe(t)})}function it(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&l(t[0])&&(t=t[0]),0===t.length?J:e?it(t).pipe(Ce(function(t){return e.apply(void 0,t)})):new C(function(e){return new ot(e,t)})}var ot=function(e){function t(t,n){var r=e.call(this,t)||this;r.sources=n,r.completed=0,r.haveValues=0;var i=n.length;r.values=new Array(i);for(var o=0;o<i;o++){var a=Ve(r,n[o],null,o);a&&r.add(a)}return r}return i(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.values[n]=t,i._hasValue||(i._hasValue=!0,this.haveValues++)},t.prototype.notifyComplete=function(e){var t=this.destination,n=this.haveValues,r=this.values,i=r.length;e._hasValue?(this.completed++,this.completed===i&&(n===i&&t.next(r),t.complete())):t.complete()},t}(Ke);Object.prototype.toString;function at(e,t,n,r){return o(n)&&(r=n,n=void 0),r?at(e,t,n).pipe(Ce(function(e){return l(e)?r.apply(void 0,e):r(e)})):new C(function(r){!function e(t,n,r,i,o){var a;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(t)){var s=t;t.addEventListener(n,r,o),a=function(){return s.removeEventListener(n,r,o)}}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(t)){var u=t;t.on(n,r),a=function(){return u.off(n,r)}}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(t)){var c=t;t.addListener(n,r),a=function(){return c.removeListener(n,r)}}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(var l=0,f=t.length;l<f;l++)e(t[l],n,r,i,o)}i.add(a)}(e,t,function(e){arguments.length>1?r.next(Array.prototype.slice.call(arguments)):r.next(e)},r,n)})}function st(e,t,n){return n?st(e,t).pipe(Ce(function(e){return l(e)?n.apply(void 0,e):n(e)})):new C(function(n){var r,i=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.next(1===e.length?e[0]:e)};try{r=e(i)}catch(e){return void n.error(e)}if(o(t))return function(){return t(i,r)}})}function ut(e,t,n,r,i){var o,a;if(1==arguments.length){var s=e;a=s.initialState,t=s.condition,n=s.iterate,o=s.resultSelector||we,i=s.scheduler}else void 0===r||Y(r)?(a=e,o=we,i=r):(a=e,o=r);return new C(function(e){var r=a;if(i)return i.schedule(ct,0,{subscriber:e,iterate:n,condition:t,resultSelector:o,state:r});for(;;){if(t){var s=void 0;try{s=t(r)}catch(t){return void e.error(t)}if(!s){e.complete();break}}var u=void 0;try{u=o(r)}catch(t){return void e.error(t)}if(e.next(u),e.closed)break;try{r=n(r)}catch(t){return void e.error(t)}}})}function ct(e){var t=e.subscriber,n=e.condition;if(!t.closed){if(e.needIterate)try{e.state=e.iterate(e.state)}catch(e){return void t.error(e)}else e.needIterate=!0;if(n){var r=void 0;try{r=n(e.state)}catch(e){return void t.error(e)}if(!r)return void t.complete();if(t.closed)return}var i;try{i=e.resultSelector(e.state)}catch(e){return void t.error(e)}if(!t.closed&&(t.next(i),!t.closed))return this.schedule(e)}}function lt(e,t,n){return void 0===t&&(t=J),void 0===n&&(n=J),rt(function(){return e()?t:n})}function ft(e){return!l(e)&&e-parseFloat(e)+1>=0}function ht(e,t){return void 0===e&&(e=0),void 0===t&&(t=ye),(!ft(e)||e<0)&&(e=0),t&&"function"==typeof t.schedule||(t=ye),new C(function(n){return n.add(t.schedule(dt,e,{subscriber:n,counter:0,period:e})),n})}function dt(e){var t=e.subscriber,n=e.counter,r=e.period;t.next(n),this.schedule({subscriber:t,counter:n+1,period:r},r)}function pt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Number.POSITIVE_INFINITY,r=null,i=e[e.length-1];return Y(i)?(r=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(n=e.pop())):"number"==typeof i&&(n=e.pop()),null===r&&1===e.length&&e[0]instanceof C?e[0]:tt(n)(Z(e,r))}var yt=new C(S);function vt(){return yt}function bt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)return J;var n=e[0],r=e.slice(1);return 1===e.length&&l(n)?bt.apply(void 0,n):new C(function(e){var t=function(){return e.add(bt.apply(void 0,r).subscribe(e))};return Xe(n).subscribe({next:function(t){e.next(t)},error:t,complete:t})})}function gt(e,t){return new C(t?function(n){var r=Object.keys(e),i=new g;return i.add(t.schedule(mt,0,{keys:r,index:0,subscriber:n,subscription:i,obj:e})),i}:function(t){for(var n=Object.keys(e),r=0;r<n.length&&!t.closed;r++){var i=n[r];e.hasOwnProperty(i)&&t.next([i,e[i]])}t.complete()})}function mt(e){var t=e.keys,n=e.index,r=e.subscriber,i=e.subscription,o=e.obj;if(!r.closed)if(n<t.length){var a=t[n];r.next([a,o[a]]),i.add(this.schedule({keys:t,index:n+1,subscriber:r,subscription:i,obj:o}))}else r.complete()}function wt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){if(!l(e[0]))return e[0];e=e[0]}return Z(e,void 0).lift(new _t)}var _t=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new xt(e))},e}(),xt=function(e){function t(t){var n=e.call(this,t)||this;return n.hasFirst=!1,n.observables=[],n.subscriptions=[],n}return i(t,e),t.prototype._next=function(e){this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(var n=0;n<t&&!this.hasFirst;n++){var r=e[n],i=Ve(this,r,r,n);this.subscriptions&&this.subscriptions.push(i),this.add(i)}this.observables=null}},t.prototype.notifyNext=function(e,t,n,r,i){if(!this.hasFirst){this.hasFirst=!0;for(var o=0;o<this.subscriptions.length;o++)if(o!==n){var a=this.subscriptions[o];a.unsubscribe(),this.remove(a)}this.subscriptions=null}this.destination.next(t)},t}(Ke);function kt(e,t,n){return void 0===e&&(e=0),void 0===t&&(t=0),new C(function(r){var i=0,o=e;if(n)return n.schedule(Et,0,{index:i,count:t,start:e,subscriber:r});for(;;){if(i++>=t){r.complete();break}if(r.next(o++),r.closed)break}})}function Et(e){var t=e.start,n=e.index,r=e.count,i=e.subscriber;n>=r?i.complete():(i.next(t),i.closed||(e.index=n+1,e.start=t+1,this.schedule(e)))}function St(e,t,n){void 0===e&&(e=0);var r=-1;return ft(t)?r=Number(t)<1?1:Number(t):Y(t)&&(n=t),Y(n)||(n=ye),new C(function(t){var i=ft(e)?e:+e-n.now();return n.schedule(Ot,i,{index:0,period:r,subscriber:t})})}function Ot(e){var t=e.index,n=e.period,r=e.subscriber;if(r.next(t),!r.closed){if(-1===n)return r.complete();e.index=t+1,this.schedule(e,n)}}function Pt(e,t){return new C(function(n){var r,i;try{r=e()}catch(e){return void n.error(e)}try{i=t(r)}catch(e){return void n.error(e)}var o=(i?Xe(i):J).subscribe(n);return function(){o.unsubscribe(),r&&r.unsubscribe()}})}function Ct(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];return"function"==typeof n&&e.pop(),Z(e,void 0).lift(new At(n))}var At=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new It(e,this.resultSelector))},e}(),It=function(e){function t(t,n,r){void 0===r&&(r=Object.create(null));var i=e.call(this,t)||this;return i.iterators=[],i.active=0,i.resultSelector="function"==typeof n?n:null,i.values=r,i}return i(t,e),t.prototype._next=function(e){var t=this.iterators;l(e)?t.push(new Tt(e)):"function"==typeof e[Le]?t.push(new jt(e[Le]())):t.push(new Nt(this.destination,this,e))},t.prototype._complete=function(){var e=this.iterators,t=e.length;if(this.unsubscribe(),0!==t){this.active=t;for(var n=0;n<t;n++){var r=e[n];if(r.stillUnsubscribed)this.destination.add(r.subscribe(r,n));else this.active--}}else this.destination.complete()},t.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},t.prototype.checkIterators=function(){for(var e=this.iterators,t=e.length,n=this.destination,r=0;r<t;r++){if("function"==typeof(a=e[r]).hasValue&&!a.hasValue())return}var i=!1,o=[];for(r=0;r<t;r++){var a,s=(a=e[r]).next();if(a.hasCompleted()&&(i=!0),s.done)return void n.complete();o.push(s.value)}this.resultSelector?this._tryresultSelector(o):n.next(o),i&&n.complete()},t.prototype._tryresultSelector=function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(_),jt=function(){function e(e){this.iterator=e,this.nextResult=e.next()}return e.prototype.hasValue=function(){return!0},e.prototype.next=function(){var e=this.nextResult;return this.nextResult=this.iterator.next(),e},e.prototype.hasCompleted=function(){var e=this.nextResult;return e&&e.done},e}(),Tt=function(){function e(e){this.array=e,this.index=0,this.length=0,this.length=e.length}return e.prototype[Le]=function(){return this},e.prototype.next=function(e){var t=this.index++,n=this.array;return t<this.length?{value:n[t],done:!1}:{value:null,done:!0}},e.prototype.hasValue=function(){return this.array.length>this.index},e.prototype.hasCompleted=function(){return this.array.length===this.index},e}(),Nt=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.parent=n,i.observable=r,i.stillUnsubscribed=!0,i.buffer=[],i.isComplete=!1,i}return i(t,e),t.prototype[Le]=function(){return this},t.prototype.next=function(){var e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}},t.prototype.hasValue=function(){return this.buffer.length>0},t.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},t.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},t.prototype.notifyNext=function(e,t,n,r,i){this.buffer.push(t),this.parent.checkIterators()},t.prototype.subscribe=function(e,t){return Ve(this,this.observable,this,t)},t}(Ke);n.d(t,"Observable",function(){return C}),n.d(t,"ConnectableObservable",function(){return K}),n.d(t,"GroupedObservable",function(){return L}),n.d(t,"observable",function(){return E}),n.d(t,"Subject",function(){return M}),n.d(t,"BehaviorSubject",function(){return z}),n.d(t,"ReplaySubject",function(){return ae}),n.d(t,"AsyncSubject",function(){return ue}),n.d(t,"asapScheduler",function(){return pe}),n.d(t,"asyncScheduler",function(){return ye}),n.d(t,"queueScheduler",function(){return Q}),n.d(t,"animationFrameScheduler",function(){return be}),n.d(t,"VirtualTimeScheduler",function(){return ge}),n.d(t,"VirtualAction",function(){return me}),n.d(t,"Scheduler",function(){return G}),n.d(t,"Subscription",function(){return g}),n.d(t,"Subscriber",function(){return _}),n.d(t,"Notification",function(){return re}),n.d(t,"pipe",function(){return O}),n.d(t,"noop",function(){return S}),n.d(t,"identity",function(){return we}),n.d(t,"isObservable",function(){return _e}),n.d(t,"ArgumentOutOfRangeError",function(){return ke}),n.d(t,"EmptyError",function(){return Se}),n.d(t,"ObjectUnsubscribedError",function(){return j}),n.d(t,"UnsubscriptionError",function(){return b}),n.d(t,"TimeoutError",function(){return Pe}),n.d(t,"bindCallback",function(){return je}),n.d(t,"bindNodeCallback",function(){return Me}),n.d(t,"combineLatest",function(){return Je}),n.d(t,"concat",function(){return nt}),n.d(t,"defer",function(){return rt}),n.d(t,"empty",function(){return W}),n.d(t,"forkJoin",function(){return it}),n.d(t,"from",function(){return Xe}),n.d(t,"fromEvent",function(){return at}),n.d(t,"fromEventPattern",function(){return st}),n.d(t,"generate",function(){return ut}),n.d(t,"iif",function(){return lt}),n.d(t,"interval",function(){return ht}),n.d(t,"merge",function(){return pt}),n.d(t,"never",function(){return vt}),n.d(t,"of",function(){return ee}),n.d(t,"onErrorResumeNext",function(){return bt}),n.d(t,"pairs",function(){return gt}),n.d(t,"race",function(){return wt}),n.d(t,"range",function(){return kt}),n.d(t,"throwError",function(){return te}),n.d(t,"timer",function(){return St}),n.d(t,"using",function(){return Pt}),n.d(t,"zip",function(){return Ct}),n.d(t,"EMPTY",function(){return J}),n.d(t,"NEVER",function(){return yt}),n.d(t,"config",function(){return s})}])});