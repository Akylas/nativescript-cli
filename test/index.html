<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Test Suite</title>
    <link rel="stylesheet" href="./../node_modules/mocha/mocha.css" type="text/css" charset="utf-8" />
  </head>
  <body>
    <!-- Required for browser reporter. -->
    <div id="mocha"></div>

    <!-- Mocha. -->
    <script src="./../node_modules/mocha/mocha.js"></script>
    <script src="./../node_modules/mocha-as-promised/mocha-as-promised.js"></script>
    <script>
    // This will be overridden by mocha-helper if ran with grunt.
    mocha.setup({
      timeout : 30000,
      ui      : 'bdd'
    });

    // `Function.prototype.bind` polyfill (PhantomJS).
    Function.prototype.bind = Function.prototype.bind || function(_this) {
      var self = this;
      if('function' !== typeof this) {
        // Closest thing possible to the ECMAScript 5 internal IsCallable function.
        throw new TypeError('Function.prototype.bind - what is trying to be bound is not callable.');
      }

      var args  = Array.prototype.slice.call(arguments, 1);
      var noop  = function() { };
      var bound = function() {
        args = args.concat(Array.prototype.slice.call(arguments));
        return self.apply(this instanceof noop && _this ? this : _this, args);
      };

      // Bind.
      noop.prototype  = this.prototype;
      bound.prototype = new noop();
      return bound;
    };
    </script>

    <!-- External libraries. -->
    <script src="./../node_modules/chai/chai.js"></script>
    <script src="./../node_modules/chai-as-promised/lib/chai-as-promised.js"></script>
    <script src="./../node_modules/sinon-chai/lib/sinon-chai.js"></script>
    <script src="./../node_modules/sinon/pkg/sinon.js"></script>

    <!-- Dependencies. -->
    <script src="./../dist/intermediate/dependencies.js"></script>

    <!-- Source files. -->
    <script>var KINVEY_DEBUG = false;</script>
    <script src="./../dist/intermediate/config.js"></script>
    <script src="./../dist/intermediate/kinvey.js"></script>
    <script src="./spec.js"></script>

    <!-- Spec files. -->
    <script src="./kinvey.spec.js"></script>

    <script src="./core/clientAppVersion.spec.js"></script>
    <script src="./core/acl.spec.js"></script>
    <script src="./core/auth.spec.js"></script>
    <script src="./core/aggregation.spec.js"></script>
    <script src="./core/command.spec.js"></script>
    <script src="./core/datastore.spec.js"></script>
    <script src="./core/file.spec.js"></script>
    <script src="./core/metadata.spec.js"></script>
    <script src="./core/user.spec.js"></script>
    <script src="./core/query.spec.js"></script>
    <script src="./core/reference.spec.js"></script>
    <script src="./core/persistence.spec.js"></script>
    <script src="./core/persistence/local.spec.js"></script>
    <script src="./core/persistence/net.spec.js"></script>
    <script src="./core/persistence/sync.spec.js"></script>

    <script src="./internals/defer.spec.js"></script>

    <script src="./shims/backbone/datastore.spec.js"></script>
    <script src="./shims/backbone/metadata.spec.js"></script>
    <script src="./shims/backbone/reference.spec.js"></script>
    <script src="./shims/backbone/user.spec.js"></script>

    <!-- Run Mocha. -->
    <script>
    // Run tests if standalone.
    if(-1 === navigator.userAgent.indexOf('PhantomJS')) {
      mocha.run();
    }
    </script>
  </body>
</html>
